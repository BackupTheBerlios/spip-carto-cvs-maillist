<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Spip-carto-cvs] spipcarto inc-html-squel.php3,NONE,1.1 formulaire_signature-dist.html,NONE,1.1 formulaire_oubli-dist.html,NONE,1.1 inc-urls-html.php3,NONE,1.1 spip_cal.php3,NONE,1.1 spip_inscription.php3,NONE,1.1 rubrique.php3,NONE,1.1 spip_image.php3,NONE,1.1 inc-urls-standard.php3,NONE,1.1 ical-dist.html,NONE,1.1 auteur.php3,NONE,1.1 downloadfile.class.php,NONE,1.1 index.php3,NONE,1.1 nouveautes-dist.html,NONE,1.1 inc-public.php3,NONE,1.1 inc-messforum.php3,NONE,1.1 distrib.php3,NONE,1.1 inc-cache.php3,NONE,1.1 sommaire_texte-dist.html,NONE,1.1 mot-dist.html,NONE,1.1 forum-dist.html,NONE,1.1 htaccess-propres.txt,NONE,1.1 recherche.php3,NONE,1.1 inc-formulaire_recherche.php3,NONE,1.1 spip_test_dirs.php3,NONE,1.1 formulaire_menu_lang-dist.html,NONE,1.1 inc-formulaire_site.php3,NONE,1.1 project.index,NONE,1.1 site.php3,NONE,1.1 backend-dist.html,NONE,1.1 spip_cookie.php3,NONE,1.1 spip_image_reduite.php3,NONE,1.1 inc-menu_lang_ecrire.php3,NONE,1.1 formulaire_ecrire_auteur-dist.html,N! ONE,1.1 inc-chercher.php3,NONE,1.1 formulaire_forum-dist.html,NONE,1.1 habillage.css,NONE,1.1 puce_rtl.gif,NONE,1.1 sommaire.php3,NONE,1.1 carto.html,NONE,1.1 rubrique-dist.html,NONE,1.1 spip_admin.css,NONE,1.1 spip_cache.php3,NONE,1.1 site-dist.html,NONE,1.1 sommaire_texte.php3,NONE,1.1 spip_redirect.php3,NONE,1.1 .project,NONE,1.1 breve.php3,NONE,1.1 resume.php3,NONE,1.1 inc-login_prive.php3,NONE,1.1 inc-formulaire_inscription.php3,NONE,1.1 plan-dist.html,NONE,1.1 spip_barre.js,NONE,1.1 spip_style.css,NONE,1.1 ical.php3,NONE,1.1 article-dist.html,NONE,1.1 forum.php3,NONE,1.1 resume-dist.html,NONE,1.1 puce.gif,NONE,1.1 carto.php3,NONE,1.1 inc-formulaire_ecrire_auteur.php3,NONE,1.1 formulaire_admin-dist.html,NONE,1.1 inc-menu_lang.php3,NONE,1.1 plan.php3,NONE,1.1 backend-breves-dist.html,NONE,1.1 spip_acces_doc.php3,NONE,1.1 index.php,NONE,1.1 inc-boucles.php3,NONE,1.1 inc-compilo.php3,NONE,1.1 spipcarto.zip,NONE,1.1 formulaire_site-dist.html,NONE,1.1 inc-compilo-api.php3,N! ONE,1.1 formulaire_login-dist.html,NONE,1.1 backend.php3,NONE,1.1 logi
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/spip-carto-cvs/2005-January/index.html" >
   <LINK REL="made" HREF="mailto:spip-carto-cvs%40lists.berlios.de?Subject=Re%3A%20%5BSpip-carto-cvs%5D%20spipcarto%20inc-html-squel.php3%2CNONE%2C1.1%20formulaire_signature-dist.html%2CNONE%2C1.1%20formulaire_oubli-dist.html%2CNONE%2C1.1%20inc-urls-html.php3%2CNONE%2C1.1%20spip_cal.php3%2CNONE%2C1.1%20spip_inscription.php3%2CNONE%2C1.1%20rubrique.php3%2CNONE%2C1.1%20spip_image.php3%2CNONE%2C1.1%20inc-urls-standard.php3%2CNONE%2C1.1%20ical-dist.html%2CNONE%2C1.1%20auteur.php3%2CNONE%2C1.1%20downloadfile.class.php%2CNONE%2C1.1%20index.php3%2CNONE%2C1.1%20nouveautes-dist.html%2CNONE%2C1.1%20inc-public.php3%2CNONE%2C1.1%20inc-messforum.php3%2CNONE%2C1.1%20distrib.php3%2CNONE%2C1.1%20inc-cache.php3%2CNONE%2C1.1%20sommaire_texte-dist.html%2CNONE%2C1.1%20mot-dist.html%2CNONE%2C1.1%20forum-dist.html%2CNONE%2C1.1%20htaccess-propres.txt%2CNONE%2C1.1%20recherche.php3%2CNONE%2C1.1%20inc-formulaire_recherche.php3%2CNONE%2C1.1%20spip_test_dirs.php3%2CNONE%2C1.1%20formulaire_menu_lang-dist.html%2CNONE%2C1.1%20inc-formulaire_site.php3%2CNONE%2C1.1%20project.index%2CNONE%2C1.1%20site.php3%2CNONE%2C1.1%20backend-dist.html%2CNONE%2C1.1%20spip_cookie.php3%2CNONE%2C1.1%20spip_image_reduite.php3%2CNONE%2C1.1%20inc-menu_lang_ecrire.php3%2CNONE%2C1.1%20formulaire_ecrire_auteur-dist.html%2CN%21%0A%20ONE%2C1.1%20inc-chercher.php3%2CNONE%2C1.1%20formulaire_forum-dist.html%2CNONE%2C1.1%20habillage.css%2CNONE%2C1.1%20puce_rtl.gif%2CNONE%2C1.1%20sommaire.php3%2CNONE%2C1.1%20carto.html%2CNONE%2C1.1%20rubrique-dist.html%2CNONE%2C1.1%20spip_admin.css%2CNONE%2C1.1%20spip_cache.php3%2CNONE%2C1.1%20site-dist.html%2CNONE%2C1.1%20sommaire_texte.php3%2CNONE%2C1.1%20spip_redirect.php3%2CNONE%2C1.1%20.project%2CNONE%2C1.1%20breve.php3%2CNONE%2C1.1%20resume.php3%2CNONE%2C1.1%20inc-login_prive.php3%2CNONE%2C1.1%20inc-formulaire_inscription.php3%2CNONE%2C1.1%20plan-dist.html%2CNONE%2C1.1%20spip_barre.js%2CNONE%2C1.1%20spip_style.css%2CNONE%2C1.1%20ical.php3%2CNONE%2C1.1%20article-dist.html%2CNONE%2C1.1%20forum.php3%2CNONE%2C1.1%20resume-dist.html%2CNONE%2C1.1%20puce.gif%2CNONE%2C1.1%20carto.php3%2CNONE%2C1.1%20inc-formulaire_ecrire_auteur.php3%2CNONE%2C1.1%20formulaire_admin-dist.html%2CNONE%2C1.1%20inc-menu_lang.php3%2CNONE%2C1.1%20plan.php3%2CNONE%2C1.1%20backend-breves-dist.html%2CNONE%2C1.1%20spip_acces_doc.php3%2CNONE%2C1.1%20index.php%2CNONE%2C1.1%20inc-boucles.php3%2CNONE%2C1.1%20inc-compilo.php3%2CNONE%2C1.1%20spipcarto.zip%2CNONE%2C1.1%20formulaire_site-dist.html%2CNONE%2C1.1%20inc-compilo-api.php3%2CN%21%0A%20ONE%2C1.1%20formulaire_login-dist.html%2CNONE%2C1.1%20backend.php3%2CNONE%2C1.1%20logi&In-Reply-To=%3C200501131537.j0DFbHNM020070%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000006.html">
   <LINK REL="Next"  HREF="000007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Spip-carto-cvs] spipcarto inc-html-squel.php3,NONE,1.1 formulaire_signature-dist.html,NONE,1.1 formulaire_oubli-dist.html,NONE,1.1 inc-urls-html.php3,NONE,1.1 spip_cal.php3,NONE,1.1 spip_inscription.php3,NONE,1.1 rubrique.php3,NONE,1.1 spip_image.php3,NONE,1.1 inc-urls-standard.php3,NONE,1.1 ical-dist.html,NONE,1.1 auteur.php3,NONE,1.1 downloadfile.class.php,NONE,1.1 index.php3,NONE,1.1 nouveautes-dist.html,NONE,1.1 inc-public.php3,NONE,1.1 inc-messforum.php3,NONE,1.1 distrib.php3,NONE,1.1 inc-cache.php3,NONE,1.1 sommaire_texte-dist.html,NONE,1.1 mot-dist.html,NONE,1.1 forum-dist.html,NONE,1.1 htaccess-propres.txt,NONE,1.1 recherche.php3,NONE,1.1 inc-formulaire_recherche.php3,NONE,1.1 spip_test_dirs.php3,NONE,1.1 formulaire_menu_lang-dist.html,NONE,1.1 inc-formulaire_site.php3,NONE,1.1 project.index,NONE,1.1 site.php3,NONE,1.1 backend-dist.html,NONE,1.1 spip_cookie.php3,NONE,1.1 spip_image_reduite.php3,NONE,1.1 inc-menu_lang_ecrire.php3,NONE,1.1 formulaire_ecrire_auteur-dist.html,N! ONE,1.1 inc-chercher.php3,NONE,1.1 formulaire_forum-dist.html,NONE,1.1 habillage.css,NONE,1.1 puce_rtl.gif,NONE,1.1 sommaire.php3,NONE,1.1 carto.html,NONE,1.1 rubrique-dist.html,NONE,1.1 spip_admin.css,NONE,1.1 spip_cache.php3,NONE,1.1 site-dist.html,NONE,1.1 sommaire_texte.php3,NONE,1.1 spip_redirect.php3,NONE,1.1 .project,NONE,1.1 breve.php3,NONE,1.1 resume.php3,NONE,1.1 inc-login_prive.php3,NONE,1.1 inc-formulaire_inscription.php3,NONE,1.1 plan-dist.html,NONE,1.1 spip_barre.js,NONE,1.1 spip_style.css,NONE,1.1 ical.php3,NONE,1.1 article-dist.html,NONE,1.1 forum.php3,NONE,1.1 resume-dist.html,NONE,1.1 puce.gif,NONE,1.1 carto.php3,NONE,1.1 inc-formulaire_ecrire_auteur.php3,NONE,1.1 formulaire_admin-dist.html,NONE,1.1 inc-menu_lang.php3,NONE,1.1 plan.php3,NONE,1.1 backend-breves-dist.html,NONE,1.1 spip_acces_doc.php3,NONE,1.1 index.php,NONE,1.1 inc-boucles.php3,NONE,1.1 inc-compilo.php3,NONE,1.1 spipcarto.zip,NONE,1.1 formulaire_site-dist.html,NONE,1.1 inc-compilo-api.php3,N! ONE,1.1 formulaire_login-dist.html,NONE,1.1 backend.php3,NONE,1.1 logi</H1>
    <B>stef at berlios.de</B> 
    <A HREF="mailto:spip-carto-cvs%40lists.berlios.de?Subject=Re%3A%20%5BSpip-carto-cvs%5D%20spipcarto%20inc-html-squel.php3%2CNONE%2C1.1%20formulaire_signature-dist.html%2CNONE%2C1.1%20formulaire_oubli-dist.html%2CNONE%2C1.1%20inc-urls-html.php3%2CNONE%2C1.1%20spip_cal.php3%2CNONE%2C1.1%20spip_inscription.php3%2CNONE%2C1.1%20rubrique.php3%2CNONE%2C1.1%20spip_image.php3%2CNONE%2C1.1%20inc-urls-standard.php3%2CNONE%2C1.1%20ical-dist.html%2CNONE%2C1.1%20auteur.php3%2CNONE%2C1.1%20downloadfile.class.php%2CNONE%2C1.1%20index.php3%2CNONE%2C1.1%20nouveautes-dist.html%2CNONE%2C1.1%20inc-public.php3%2CNONE%2C1.1%20inc-messforum.php3%2CNONE%2C1.1%20distrib.php3%2CNONE%2C1.1%20inc-cache.php3%2CNONE%2C1.1%20sommaire_texte-dist.html%2CNONE%2C1.1%20mot-dist.html%2CNONE%2C1.1%20forum-dist.html%2CNONE%2C1.1%20htaccess-propres.txt%2CNONE%2C1.1%20recherche.php3%2CNONE%2C1.1%20inc-formulaire_recherche.php3%2CNONE%2C1.1%20spip_test_dirs.php3%2CNONE%2C1.1%20formulaire_menu_lang-dist.html%2CNONE%2C1.1%20inc-formulaire_site.php3%2CNONE%2C1.1%20project.index%2CNONE%2C1.1%20site.php3%2CNONE%2C1.1%20backend-dist.html%2CNONE%2C1.1%20spip_cookie.php3%2CNONE%2C1.1%20spip_image_reduite.php3%2CNONE%2C1.1%20inc-menu_lang_ecrire.php3%2CNONE%2C1.1%20formulaire_ecrire_auteur-dist.html%2CN%21%0A%20ONE%2C1.1%20inc-chercher.php3%2CNONE%2C1.1%20formulaire_forum-dist.html%2CNONE%2C1.1%20habillage.css%2CNONE%2C1.1%20puce_rtl.gif%2CNONE%2C1.1%20sommaire.php3%2CNONE%2C1.1%20carto.html%2CNONE%2C1.1%20rubrique-dist.html%2CNONE%2C1.1%20spip_admin.css%2CNONE%2C1.1%20spip_cache.php3%2CNONE%2C1.1%20site-dist.html%2CNONE%2C1.1%20sommaire_texte.php3%2CNONE%2C1.1%20spip_redirect.php3%2CNONE%2C1.1%20.project%2CNONE%2C1.1%20breve.php3%2CNONE%2C1.1%20resume.php3%2CNONE%2C1.1%20inc-login_prive.php3%2CNONE%2C1.1%20inc-formulaire_inscription.php3%2CNONE%2C1.1%20plan-dist.html%2CNONE%2C1.1%20spip_barre.js%2CNONE%2C1.1%20spip_style.css%2CNONE%2C1.1%20ical.php3%2CNONE%2C1.1%20article-dist.html%2CNONE%2C1.1%20forum.php3%2CNONE%2C1.1%20resume-dist.html%2CNONE%2C1.1%20puce.gif%2CNONE%2C1.1%20carto.php3%2CNONE%2C1.1%20inc-formulaire_ecrire_auteur.php3%2CNONE%2C1.1%20formulaire_admin-dist.html%2CNONE%2C1.1%20inc-menu_lang.php3%2CNONE%2C1.1%20plan.php3%2CNONE%2C1.1%20backend-breves-dist.html%2CNONE%2C1.1%20spip_acces_doc.php3%2CNONE%2C1.1%20index.php%2CNONE%2C1.1%20inc-boucles.php3%2CNONE%2C1.1%20inc-compilo.php3%2CNONE%2C1.1%20spipcarto.zip%2CNONE%2C1.1%20formulaire_site-dist.html%2CNONE%2C1.1%20inc-compilo-api.php3%2CN%21%0A%20ONE%2C1.1%20formulaire_login-dist.html%2CNONE%2C1.1%20backend.php3%2CNONE%2C1.1%20logi&In-Reply-To=%3C200501131537.j0DFbHNM020070%40sheep.berlios.de%3E"
       TITLE="[Spip-carto-cvs] spipcarto inc-html-squel.php3,NONE,1.1 formulaire_signature-dist.html,NONE,1.1 formulaire_oubli-dist.html,NONE,1.1 inc-urls-html.php3,NONE,1.1 spip_cal.php3,NONE,1.1 spip_inscription.php3,NONE,1.1 rubrique.php3,NONE,1.1 spip_image.php3,NONE,1.1 inc-urls-standard.php3,NONE,1.1 ical-dist.html,NONE,1.1 auteur.php3,NONE,1.1 downloadfile.class.php,NONE,1.1 index.php3,NONE,1.1 nouveautes-dist.html,NONE,1.1 inc-public.php3,NONE,1.1 inc-messforum.php3,NONE,1.1 distrib.php3,NONE,1.1 inc-cache.php3,NONE,1.1 sommaire_texte-dist.html,NONE,1.1 mot-dist.html,NONE,1.1 forum-dist.html,NONE,1.1 htaccess-propres.txt,NONE,1.1 recherche.php3,NONE,1.1 inc-formulaire_recherche.php3,NONE,1.1 spip_test_dirs.php3,NONE,1.1 formulaire_menu_lang-dist.html,NONE,1.1 inc-formulaire_site.php3,NONE,1.1 project.index,NONE,1.1 site.php3,NONE,1.1 backend-dist.html,NONE,1.1 spip_cookie.php3,NONE,1.1 spip_image_reduite.php3,NONE,1.1 inc-menu_lang_ecrire.php3,NONE,1.1 formulaire_ecrire_auteur-dist.html,N! ONE,1.1 inc-chercher.php3,NONE,1.1 formulaire_forum-dist.html,NONE,1.1 habillage.css,NONE,1.1 puce_rtl.gif,NONE,1.1 sommaire.php3,NONE,1.1 carto.html,NONE,1.1 rubrique-dist.html,NONE,1.1 spip_admin.css,NONE,1.1 spip_cache.php3,NONE,1.1 site-dist.html,NONE,1.1 sommaire_texte.php3,NONE,1.1 spip_redirect.php3,NONE,1.1 .project,NONE,1.1 breve.php3,NONE,1.1 resume.php3,NONE,1.1 inc-login_prive.php3,NONE,1.1 inc-formulaire_inscription.php3,NONE,1.1 plan-dist.html,NONE,1.1 spip_barre.js,NONE,1.1 spip_style.css,NONE,1.1 ical.php3,NONE,1.1 article-dist.html,NONE,1.1 forum.php3,NONE,1.1 resume-dist.html,NONE,1.1 puce.gif,NONE,1.1 carto.php3,NONE,1.1 inc-formulaire_ecrire_auteur.php3,NONE,1.1 formulaire_admin-dist.html,NONE,1.1 inc-menu_lang.php3,NONE,1.1 plan.php3,NONE,1.1 backend-breves-dist.html,NONE,1.1 spip_acces_doc.php3,NONE,1.1 index.php,NONE,1.1 inc-boucles.php3,NONE,1.1 inc-compilo.php3,NONE,1.1 spipcarto.zip,NONE,1.1 formulaire_site-dist.html,NONE,1.1 inc-compilo-api.php3,N! ONE,1.1 formulaire_login-dist.html,NONE,1.1 backend.php3,NONE,1.1 logi">stef at berlios.de
       </A><BR>
    <I>Thu Jan 13 16:37:17 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000006.html">[Spip-carto-cvs] spipcarto/ecrire/img_pack base-24.gif,NONE,1.1 puce-blanche-anim.gif,NONE,1.1 cal-semaine.gif,NONE,1.1 tirets-separation.gif,NONE,1.1 documents-48.png,NONE,1.1 secteur-24.gif,NONE,1.1 langues-24.gif,NONE,1.1 doc-24.gif,NONE,1.1 fond-calendrier.gif,NONE,1.1 deplierbas.gif,NONE,1.1 loupe-moins.gif,NONE,1.1 visiter-48_rtl.png,NONE,1.1 xml.gif,NONE,1.1 choix-layout_rtl.png,NONE,1.1 statistiques-24.gif,NONE,1.1 administration-48.png,NONE,1.1 m_envoi_rtl.gif,NONE,1.1 image-24.gif,NONE,1.1 redacteurs-48.png,NONE,1.1 interface-display.png,NONE,1.1 forum-public-24.gif,NONE,1.1 rond-b.gif,NONE,1.1 heures-pm.png,NONE,1.1 statistiques-48.png,NONE,1.1 degrade.jpg,NONE,1.1 deplierhaut_rtl.gif,NONE,1.1 rond-g.gif,NONE,1.1 carte-24.png,NONE,1.1 set-ecran.png,NONE,1.1 racine-site-12.gif,NONE,1.1 mot-cle-24.gif,NONE,1.1 loupe.png,NONE,1.1 cadenas-24.gif,NONE,1.1 puce-orange-anim.gif,NONE,1.1 cal-today.gif,NONE,1.1 forum-admin-24.gif,NONE,1.1 heures-am.png,NONE,1.1 asuivre-24.gif,NONE! ,1.1 rayures-danger.png,NONE,1.1 logo-spip.gif,NONE,1.1 forum-interne-24.gif,NONE,1.1 rv.gif,NONE,1.1 rayures-gris.gif,NONE,1.1 racine-24.gif,NONE,1.1 fond-gris-anim.gif,NONE,1.1 puce-poubelle.gif,NONE,1.1 groupe-mot-24.gif,NONE,1.1 set-ecran-etroit.png,NONE,1.1 rond-d.gif,NONE,1.1 rv-12.gif,NONE,1.1 plus.gif,NONE,1.1 admin-12.gif,NONE,1.1 suivi-petition-24.gif,NONE,1.1 jauge-rouge.gif,NONE,1.1 fiche-perso.png,NONE,1.1 site-24.gif,NONE,1.1 tout-site.png,NONE,1.1 historique-24.gif,NONE,1.1 rayures-danger.gif,NONE,1.1 m_envoi.gif,NONE,1.1 racine-site-24.gif,NONE,1.1 rond-hg-24.gif,NONE,1.1 choix-layout_rtl_he.png,NONE,1.1 puce-verte-breve.gif,NONE,1.1 traductions-24.gif,NONE,1.1 effacer-cache-24.gif,NONE,1.1 deconnecter-24.gif,NONE,1.1 puce-rouge-breve.gif,NONE,1.1 ortho-24.gif,NONE,1.1 tout-site-24.gif,NONE,1.1 auteur-24.gif,NONE,1.1 visiter-48.png,NONE,1.1 forum-droite_rtl.gif,NONE,1.1 heures-tout.png,NONE,1.1 barre-g.gif,NONE,1.1 rien.gif,NONE,1.1 choix-layout.png,NONE,1.1! asuivre-48.png,NONE,1.1 secteur-12.gif,NONE,1.1 cal-suivi.png,NONE,1.
</A></li>
        <LI>Next message: <A HREF="000007.html">[Spip-carto-cvs] spipcarto/ecrire/lang spip_en.php3,NONE,1.1 public_oc_auv.php3,NONE,1.1 public_es.php3,NONE,1.1 spip_bg.php3,NONE,1.1 public_fa.php3,NONE,1.1 spip_es.php3,NONE,1.1 spip_oc_auv.php3,NONE,1.1 spip_oc_lms.php3,NONE,1.1 spip_fr.php3,NONE,1.1 spip_oc_prv.php3,NONE,1.1 spip_ca.php3,NONE,1.1 public_fon.php3,NONE,1.1 spip_lb.php3,NONE,1.1 spip_gl.php3,NONE,1.1 spip_oc_gsc.php3,NONE,1.1 public_eo.php3,NONE,1.1 spip_fa.php3,NONE,1.1 public_cpf.php3,NONE,1.1 spip_zh.php3,NONE,1.1 public_fr.php3,NONE,1.1 spip_eo.php3,NONE,1.1 public_ar.php3,NONE,1.1 public_pl.php3,NONE,1.1 spip_oc_lnc.php3,NONE,1.1 public_vi.php3,NONE,1.1 spip_ar.php3,NONE,1.1 spip_hu.php3,NONE,1.1 spip_de.php3,NONE,1.1 public_bg.php3,NONE,1.1 spip_pl.php3,NONE,1.1 spip_cpf.php3,NONE,1.1 spip_oc_va.php3,NONE,1.1 spip_da.php3,NONE,1.1 public_it.php3,NONE,1.1 spip_nl.php3,NONE,1.1 public_lb.php3,NONE,1.1 public_hu.php3,NONE,1.1 public_oc_ni.php3,NONE,1.1 spip_oc_ni.php3,NONE,1.1 public_oc_lnc.php3,NONE,1.1 public! _de.php3,NONE,1.1 public_zh.php3,NONE,1.1 public_nl.php3,NONE,1.1 public_en.php3,NONE,1.1 public_da.php3,NONE,1.1 spip_fon.php3,NONE,1.1 spip_pt.php3,NONE,1.1 public_oc_prv.php3,NONE,1.1 spip_it.php3,NONE,1.1 public_gl.php3,NONE,1.1 spip_vi.php3,NONE,1.1 public_ca.php3,NONE,1.1 public_pt.php3,NONE,1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23">[ date ]</a>
              <a href="thread.html#23">[ thread ]</a>
              <a href="subject.html#23">[ subject ]</a>
              <a href="author.html#23">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Update of /cvsroot/spip-carto/spipcarto
In directory sheep:/tmp/cvs-serv19649

Added Files:
	inc-html-squel.php3 formulaire_signature-dist.html 
	formulaire_oubli-dist.html inc-urls-html.php3 spip_cal.php3 
	spip_inscription.php3 rubrique.php3 spip_image.php3 
	inc-urls-standard.php3 ical-dist.html auteur.php3 
	downloadfile.class.php index.php3 nouveautes-dist.html 
	inc-public.php3 inc-messforum.php3 distrib.php3 inc-cache.php3 
	sommaire_texte-dist.html mot-dist.html forum-dist.html 
	htaccess-propres.txt recherche.php3 
	inc-formulaire_recherche.php3 spip_test_dirs.php3 
	formulaire_menu_lang-dist.html inc-formulaire_site.php3 
	project.index site.php3 backend-dist.html spip_cookie.php3 
	spip_image_reduite.php3 inc-menu_lang_ecrire.php3 
	formulaire_ecrire_auteur-dist.html inc-chercher.php3 
	formulaire_forum-dist.html habillage.css puce_rtl.gif 
	sommaire.php3 carto.html rubrique-dist.html spip_admin.css 
	spip_cache.php3 site-dist.html sommaire_texte.php3 
	spip_redirect.php3 .project breve.php3 resume.php3 
	inc-login_prive.php3 inc-formulaire_inscription.php3 
	plan-dist.html spip_barre.js spip_style.css ical.php3 
	article-dist.html forum.php3 resume-dist.html puce.gif 
	carto.php3 inc-formulaire_ecrire_auteur.php3 
	formulaire_admin-dist.html inc-menu_lang.php3 plan.php3 
	backend-breves-dist.html spip_acces_doc.php3 index.php 
	inc-boucles.php3 inc-compilo.php3 spipcarto.zip 
	formulaire_site-dist.html inc-compilo-api.php3 
	formulaire_login-dist.html backend.php3 login-dist.html 
	inc-calcul.php3 inc-public-global.php3 
	inc-formulaire_forum.php3 inc-urls-propres.php3 
	inc-formulaire_admin.php3 inc-balises.php3 inc-criteres.php3 
	carto-proto.sql spip_login.php3 distrib-dist.html 
	sommaire-dist.html mot.php3 inc-stats.php3 auteur-dist.html 
	spip_background.php3 mes_fonctions.php3 impression.css 
	backend-breves.php3 typographie.css article.php3 
	recherche-dist.html spip_carto.php 
	formulaire_inscription-dist.html inc-url_logout.php3 
	inc-compilo-index.php3 inc-login_public.php3 inc-admin.php3 
	inc-formulaire_signature.php3 inc-calcul-outils.php3 
	breve-dist.html spip_pass.php3 formulaire_recherche-dist.html 
	htaccess-html.txt 
Log Message:
premier proto

--- NEW FILE: inc-html-squel.php3 ---
&lt;?php

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_HTML_SQUEL&quot;)) return;
define(&quot;_INC_HTML_SQUEL&quot;, &quot;1&quot;);

# Ce fichier doit IMPERATIVEMENT contenir la fonction &quot;parser&quot;
# qui transforme un squelette en un tableau d'objets de classe Boucle
# il est charge par un include calcule dans inc-calcul-squel
# pour permettre differentes syntaxes en entree

define('NOM_DE_BOUCLE', &quot;[0-9]+|[-_][-_.a-zA-Z0-9]*&quot;);
define('NOM_DE_CHAMP', &quot;#((&quot; . NOM_DE_BOUCLE . &quot;):)?([A-Z_]+)(\*?)&quot;);
define('CHAMP_ETENDU', '\[([^]\[]*)\(' . NOM_DE_CHAMP . '([^]\[)]*)\)([^]\[]*)\]');
define('PARAM_DE_BOUCLE','[[:space:]]*\{[[:space:]]*([^{}]*(\{[^\}]*\}[^\}]*)*)[[:space:]]*\}');
define('TYPE_DE_BOUCLE', &quot;[^)]*&quot;);
define('BALISE_DE_BOUCLE',
	&quot;^&lt;BOUCLE(&quot; .
	NOM_DE_BOUCLE .
	')[[:space:]]*\((' .
	TYPE_DE_BOUCLE .
	')\)((' .
	PARAM_DE_BOUCLE .
	')*)[[:space:]]*&gt;');
define('PARAM_INCLURE','[[:space:]]*\{[[:space:]]*([_0-9a-zA-Z]+)[[:space:]]*(=[[:space:]]*([^\{\}]*(\{[^\}]*\}[^\} ]*)?))?[[:space:]]*\}');
define('BALISE_INCLURE',&quot;&lt;INCLU[DR]E[[:space:]]*\(&quot; .
       '([-_0-9a-zA-Z./ ]+)' .
	'\)((' .
	PARAM_INCLURE .
	')*)[[:space:]]*&gt;');
define('DEBUT_DE_BOUCLE','/&lt;B('.NOM_DE_BOUCLE.')&gt;.*?&lt;BOUCLE\1[^-_.a-zA-Z0-9]|&lt;BOUCLE('.NOM_DE_BOUCLE.')/ms');	# preg


function parser_inclure($texte, $result) {
	while (($p=strpos($texte, '&lt;INCLU')) !== false) {
		$fin = substr($texte, $p);

		if (!ereg('^' . BALISE_INCLURE, $fin, $match)) break;
		$s = $match[0];
		$debut = substr($texte, 0, $p);
		$texte = substr($fin, strlen($s));

		if ($debut) $result = parser_champs($debut, $result);

		$champ = new Inclure;
		$champ-&gt;fichier = $match[1];
		$champ-&gt;params = array();
		$p = trim($match[2]);
		if ($p) {
			while (ereg('^' . PARAM_INCLURE . '(.*)$', $p, $m)) {
				$champ-&gt;params[$m[1]] = $m[3];
				$p = $m[5];
			}
			
			if ($p)	erreur_squelette(_L(&quot;Param&egrave;tres d'inclusion incorrects&quot;), $s);
		}
		$result[] = $champ;
	}

	return (!$texte ? $result : parser_champs($texte, $result));
}

function parser_champs($texte,$result) {
	while (ereg(NOM_DE_CHAMP . '(.*)$', $texte, $regs)) {
	  $p = strpos($texte, $regs[0]);

	  if ($regs[4] || !ereg(&quot;[0-9a-z]&quot;, $regs[5][0])) {
		if ($p) {
			$champ = new Texte;
			$champ-&gt;texte = (substr($texte, 0, $p));
			$result[] = $champ;
		}
		  
		$champ = new Champ;
		$champ-&gt;nom_boucle = $regs[2];
		$champ-&gt;nom_champ = $regs[3];
		$champ-&gt;etoile = $regs[4];
		$texte = $regs[5];
		$result[] = $champ;
	  } else {
	    // faux champ
	    $champ = new Texte;
	    $champ-&gt;texte = (substr($texte, 0, $p+1));
	    $result[] = $champ;
	    $texte = (substr($texte, $p+1));
	  }
	}
	if ($texte) {
	  
		$champ = new Texte;
		$champ-&gt;texte = $texte;
		$result[] = $champ;
	}
	return $result;
}

// Gestion des imbrications:
// on cherches les [..] les plus internes et on les remplace par une  chaine
// %###N@ o&#249; N indexe un tableau comportant le r&#233;sultat de leur phras&#233;
// on recommence tant qu'il y a des [...] en substituant &#224; l'appel suivant

function parser_champs_etendus($texte, $result) {
	if (!$texte) return $result;
	$sep = '##';
	while (strpos($texte,$sep)!== false)
		$sep .= '#';
	return array_merge($result, parser_champs_interieurs($texte, $sep, array()));
}


function parser_champs_exterieurs($debut, $sep, $nested) {
	$res = array();
	while (($p=strpos($debut, &quot;%$sep&quot;))!==false) {
	    if ($p) $res = parser_inclure(substr($debut,0,$p), $res);
	    ereg(&quot;^%$sep([0-9]+)@(.*)$&quot;, substr($debut,$p),$m);
	    $res[]= $nested[$m[1]];
	    $debut = $m[2];
	}
	return (!$debut ?  $res : parser_inclure($debut, $res));

}

function parser_champs_interieurs($texte, $sep, $result) {
	$i = 1;
	while (true) {	  $j=$i;
	  while (ereg(CHAMP_ETENDU . '(.*)$', $texte, $regs)) {
		$champ = new Champ;
		$champ-&gt;nom_boucle = $regs[3];
		$champ-&gt;nom_champ = $regs[4];
		$champ-&gt;etoile = $regs[5];
		$champ-&gt;cond_avant = parser_champs_exterieurs($regs[1],$sep,$result);
		$champ-&gt;cond_apres = parser_champs_exterieurs($regs[7],$sep,$result);
		$fonctions = $regs[6];
		if ($fonctions) {
			$fonctions = explode('|', ereg_replace(&quot;^\|&quot;, &quot;&quot;, $fonctions));
			foreach($fonctions as $f) $champ-&gt;fonctions[]= $f;
		}

		$p = strpos($texte, $regs[0]);
		if ($p) {$result[$i] = substr($texte,0,$p);$i++; }
		$result[$i] = $champ;
		$i++;
		$texte = $regs[8];
	  }
	  if ($texte) {$result[$i] = $texte; $i++;}
	  $x ='';

	  while($j &lt; $i) 
	    { $z= $result[$j]; 
	      if (is_object($z)) $x .= &quot;%$sep$j@&quot; ; else $x.=$z ;
	      $j++;}
	  if (ereg(CHAMP_ETENDU, $x)) $texte = $x;
	  else return parser_champs_exterieurs($x, $sep, $result);}
}


function parser_param($params, &amp;$result) {
	$params2 = array();
	$type = $result-&gt;type_requete;
	while (ereg('^' . PARAM_DE_BOUCLE . '[[:space:]]*(.*)$', trim($params), $m)) {
		$params = $m[3];
		$m[1] = trim($m[1]);
		// cas d'un critere avec {...}
		if ($m[2])
			$params2[] = $m[1];
		else {
			if (strlen($m[1]) &lt; 2)
				$params2[] = $m[1];
	    else {
	      ereg('^(.)([^&quot;}]*)(.)$', $m[1], $args);
	      // cas syntaxique general, 
	      // traiter qq lexemes particuliers pour faciliter la suite
	      if ($args[3] != '&quot;') {
			$param = $m[1];
			if (($param == 'tout') OR ($param == 'tous')) {
				$result-&gt;tout = true;
				unset ($param);
			}
			else if ($param == 'plat') {
				$result-&gt;plat = true;
				unset ($param);
			}

			// Boucle hierarchie, analyser le critere id_article - id_rubrique
			// - id_syndic, afin, dans les cas autres que {id_rubrique}, de
			// forcer {tout} pour avoir la rubrique mere...
			else if ($type == 'hierarchie') {
				if ($param == 'id_article' OR $param == 'id_syndic') {
					$result-&gt;tout = true;
					unset ($param);
				} else if ($param == 'id_rubrique')
					unset ($param);
			}

			// synonyme
			if ($param == 'unique') $param = 'doublons';

			// l'ajouter
			if ($param)
				$params2[] = $param;
	      }
		else {
		  // cas d'un guillemet final
			if ($args[1] == '&quot;') {
			  // si tout le param est entre guillement, vite vu
				$result-&gt;separateur = 
					ereg_replace(&quot;'&quot;,&quot;\'&quot;,$args[2]);
			}
			else {
				$params2[] = $args[1] . $args[2] . '&quot;' . $m[1];
			}
		}
	    }
	  }
	}
	$result-&gt;param = $params2;
}

function parser($texte, $id_parent, &amp;$boucles, $nom) {

	$all_res = array();

	while (preg_match(DEBUT_DE_BOUCLE, $texte, $regs)) {
		$nom_boucle = $regs[1].$regs[2];
		$p = strpos($texte, '&lt;BOUCLE'.$nom_boucle);

		// envoyer la boucle au debugueur
		if ($GLOBALS['var_mode']== 'debug') {
			$preg = &quot;@&lt;B($nom_boucle|OUCLE${nom_boucle}[^-_.a-zA-Z0-9][^&gt;]*)&gt;&quot;
				. &quot;.*&lt;/(BOUCLE|/?B)$nom_boucle&gt;@ms&quot;;
			preg_match($preg, $texte, $match);
			boucle_debug ($nom_boucle, $nom, $match[0]);
		}

		//
		// Recuperer la partie principale de la boucle
		//
		$debut = substr($texte, 0, $p);
		$milieu = substr($texte, $p);

		if (!ereg(BALISE_DE_BOUCLE, $milieu, $match)) {
			erreur_squelette((_T('erreur_boucle_syntaxe')), $milieu);
		}
		$id_boucle = $match[1];

		$result = new Boucle;
		$result-&gt;id_parent = $id_parent;
		$result-&gt;id_boucle = $id_boucle;

		$type = $match[2];
		if ($p =strpos($type, ':'))
		  {
		    $result-&gt;sql_serveur = substr($type,0,$p);
		    $type = substr($type,$p+1);
		  }
		$type = strtolower($type);
		if ($type == 'sites') $type = 'syndication'; # alias

		//
		// Recuperer les criteres de la boucle (sauf boucle recursive)
		//
		if (substr($type, 0, 6) == 'boucle') {
			$result-&gt;type_requete = 'boucle';
			$result-&gt;param = substr($match[2], 6);
		} else {
			$result-&gt;type_requete = $type;
			parser_param($match[3], $result);
		}

		//
		// Recuperer la partie conditionnelle avant
		//
		$s = &quot;&lt;B$id_boucle&gt;&quot;;
		$p = strpos($debut, $s);
		if ($p !== false) {
			$result-&gt;cond_avant = substr($debut, $p + strlen($s));
			$debut = substr($debut, 0, $p);
		}
		$milieu = substr($milieu, strlen($match[0]));
		if (strpos($milieu, $s)) {
			erreur_squelette(_T('erreur_boucle_syntaxe'),
				$id_boucle . 
				_L('&nbsp;: balise B en aval'));
		}

		//
		// Recuperer la fin :
		//
		$s = &quot;&lt;/BOUCLE$id_boucle&gt;&quot;;
		$p = strpos($milieu, $s);
		if ($p === false) {
			erreur_squelette(_T('erreur_boucle_syntaxe'),
					 _T('erreur_boucle_fermant',
						array('id'=&gt;$id_boucle)));
		}
		$texte = substr($milieu, $p + strlen($s));
		$milieu = substr($milieu, 0, $p);

		//
		// 1. Recuperer la partie conditionnelle apres
		//
		$s = &quot;&lt;/B$id_boucle&gt;&quot;;
		$p = strpos($texte, $s);
		if ($p !== false) {
			$result-&gt;cond_fin = substr($texte, 0, $p);
			$texte = substr($texte, $p + strlen($s));
		}

		//
		// 2. Recuperer la partie alternative
		//
		$s = &quot;&lt;//B$id_boucle&gt;&quot;;
		$p = strpos($texte, $s);
		if ($p !== false) {
			$result-&gt;cond_altern = substr($texte, 0, $p);
			$texte = substr($texte, $p + strlen($s));
		}

		$result-&gt;cond_avant = parser($result-&gt;cond_avant, $id_parent,$boucles, $nom);
		$result-&gt;cond_apres = parser($result-&gt;cond_fin, $id_parent,$boucles, $nom);
		$result-&gt;cond_altern = parser($result-&gt;cond_altern,$id_parent,$boucles, $nom);
		$result-&gt;milieu = parser($milieu, $id_boucle,$boucles, $nom);

		$all_res = parser_champs_etendus($debut, $all_res);
		$all_res[] = $result;
		if ($boucles[$id_boucle]) {
			erreur_squelette(_T('erreur_boucle_syntaxe'),
					 _T('erreur_boucle_double',
					 	array('id'=&gt;$id_boucle)));
		} else
			$boucles[$id_boucle] = $result;
	}

	return parser_champs_etendus($texte, $all_res);
}

?&gt;

--- NEW FILE: formulaire_signature-dist.html ---
&lt;form method='post'
      action='#SELF#sp[(#HTTP_VARS{id_article})]' &gt;
      &lt;input type=&quot;hidden&quot; name=&quot;url_page&quot; value=&quot;#URL_SITE_SPIP/#SELF&quot;&gt;
      &lt;div class='spip_encadrer' style='color: black; font-size: 80%; font-weight: normal;'&gt;
	[(#HTTP_VARS{texte}|traiter_raccourcis|interdire_scripts)]
	&lt;fieldset style='font-size: 110%; font-weight: bold;'&gt;
	  &lt;legend&gt;&lt;/legend&gt;
	  &lt;label&gt;
	    &lt;:form_pet_votre_nom:&gt;
	    &lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;nom_email&quot; value=&quot;&quot; size=&quot;20&quot; /&gt;
	  &lt;/label&gt;
	  &lt;label&gt;
	    &lt;:form_pet_votre_email:&gt;&lt;br /&gt;
	    &lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;adresse_email&quot; value=&quot;&quot; size=&quot;20&quot; /&gt;
	  &lt;/label&gt;
	&lt;/fieldset&gt;
	&lt;br /&gt;
	&lt;p&gt;[(#HTTP_VARS{site_obli}|choixsiegal{oui,'', ' '})&lt;:form_pet_votre_site:&gt;&lt;br /&gt;]
	&lt;fieldset style='font-size: 110%; font-weight: bold;'&gt;
	  &lt;legend&gt;&lt;/legend&gt;
	  &lt;label&gt;
	  &lt;:form_pet_nom_site2:&gt;&lt;br /&gt;
	  &lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;signature_nom_site&quot; value=&quot;&quot; size=&quot;20&quot; /&gt;
	  &lt;/label&gt;
	  &lt;label&gt;
	    &lt;:form_pet_adresse_site:&gt;&lt;br /&gt;
	    &lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;signature_url_site&quot; value=&quot;<A HREF="http://">http://</A>&quot; size=&quot;20&quot; /&gt;
	  &lt;/label&gt;
	&lt;/fieldset&gt;[
	&lt;br /&gt;
	&lt;fieldset style='font-weight: bold'&gt;
	  &lt;legend&gt;&lt;/legend&gt;
	(#HTTP_VARS{message}|choixsiegal{oui,' ', ''})
	  &lt;label&gt;
	  &lt;:form_pet_message_commentaire:&gt;&lt;br /&gt;
	    &lt;textarea name=&quot;message&quot; rows=&quot;3&quot; class=&quot;forml&quot; cols=&quot;20&quot;&gt;&lt;/textarea&gt;
	  &lt;/label&gt;
	&lt;/fieldset&gt;
	]
	&lt;br /&gt;
	&lt;div align=&quot;right&quot;&gt;&lt;input type=&quot;submit&quot; class=&quot;spip_bouton&quot; value=&quot;&lt;:bouton_valider:&gt;&quot; /&gt;&lt;/div&gt;
      &lt;/div&gt;
&lt;/form&gt;


--- NEW FILE: formulaire_oubli-dist.html ---
&lt;form id=&quot;oubli_form&quot; action='spip_pass.php3' method='post'&gt;
	&lt;fieldset style=&quot;border: none;&quot;&gt;&lt;legend&gt;&lt;/legend&gt;[
	&lt;:pass_nouveau_pass:&gt;
	&lt;input type='hidden' name=&quot;p&quot; value=&quot;(#HTTP_VARS{p})&quot;&gt;
	&lt;label&gt;
	    &lt;:pass_choix_pass:&gt;
	    &lt;input type=&quot;password&quot; name=&quot;oubli&quot;&gt;
	&lt;/label&gt;][
	(#HTTP_VARS{p}|choixsivide{' ',''})
	&lt;label&gt;
	  &lt;:pass_indiquez_cidessous:&gt;
	  &lt;input type=&quot;texte&quot; name=&quot;oubli&quot;&gt;
	&lt;/label&gt;]
	&lt;input type=submit class=&quot;fondl&quot; value=&quot;&lt;:pass_ok:&gt;&quot;&gt;
      &lt;/fieldset&gt;
&lt;/form&gt;
&lt;br /&gt;
&lt;div align=&quot;right&quot;&gt;
&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--
document.oubli_form.oubli.focus()
document.write(&quot;&lt;a href='&quot;)
document.write((window.opener) ? &quot;javascript:close()&quot; : &quot;./&quot;)
document.write(&quot;'&gt;&lt;:pass_quitter_fenetre:&gt;&lt;&quot; + &quot;/a&gt;&quot;);
//--&gt;&lt;/script&gt;
&lt;noscript&gt;
	&#91;&lt;a href='./'&gt;&lt;:pass_retour_public:&gt;&lt;/a&gt;&#93;
&lt;/noscript&gt;
&lt;/div&gt;
&lt;br /&gt;



--- NEW FILE: inc-urls-html.php3 ---
&lt;?php

// executer une seule fois
if (defined(&quot;_INC_URLS2&quot;)) return;
define(&quot;_INC_URLS2&quot;, &quot;1&quot;);

function generer_url_article($id_article) {
	return &quot;article$id_article.html&quot;;
}

function generer_url_rubrique($id_rubrique) {
	return &quot;rubrique$id_rubrique.html&quot;;
}

function generer_url_breve($id_breve) {
	return &quot;breve$id_breve.html&quot;;
}

function generer_url_mot($id_mot) {
	return &quot;mot$id_mot.html&quot;;
}

function generer_url_auteur($id_auteur) {
	return &quot;auteur$id_auteur.html&quot;;
}

function generer_url_document($id_document) {
	if (intval($id_document) &lt;= 0)
		return '';
	if ((lire_meta(&quot;creer_htaccess&quot;)) == 'oui')
		return &quot;spip_acces_doc.php3?id_document=$id_document&quot;;
	if ($row = @spip_fetch_array(spip_query(&quot;SELECT fichier FROM spip_documents WHERE id_document = $id_document&quot;)))
		return ($row['fichier']);
	return '';
}

function recuperer_parametres_url($fond, $url) {
	global $contexte;
	return;
}


//
// URLs des forums
//

// a mettre dans ecrire/inc_threads.php3 avec les autres trucs de forum
function racine_forum($id_forum){
	if (!$id_forum = intval($id_forum)) return;
	$query = &quot;SELECT id_parent, id_rubrique, id_article, id_breve FROM spip_forum WHERE id_forum=&quot;.$id_forum;
	$result = spip_query($query);
	if($row = spip_fetch_array($result)){
		if($row['id_parent']) {
			return racine_forum($row['id_parent']);
		}
		else {
			if($row['id_rubrique']) return array('rubrique',$row['id_rubrique'], $id_forum);
 			if($row['id_article']) return array('article',$row['id_article'], $id_forum);
			if($row['id_breve']) return array('breve',$row['id_breve'], $id_forum);
		}
	}
} 

function generer_url_forum($id_forum, $show_thread=false) {
	list($type, $id, $id_thread) = racine_forum($id_forum);
	if ($id_thread&gt;0 AND $show_thread)
		$id_forum = $id_thread;
	switch($type) {
		case 'article':
			return generer_url_article($id).&quot;#forum$id_forum&quot;;
			break;
		case 'breve':
			return generer_url_breve($id).&quot;#forum$id_forum&quot;;
			break;
		case 'rubrique':
			return generer_url_rubrique($id).&quot;#forum$id_forum&quot;;
			break;
		default:
			return &quot;forum$id_forum.html&quot;;
	}
}

?&gt;

--- NEW FILE: spip_cal.php3 ---
&lt;?php

include (&quot;ecrire/inc_version.php3&quot;);

include_ecrire(&quot;inc_filtres.php3&quot;);
include_ecrire(&quot;inc_lang.php3&quot;);
include_ecrire(&quot;inc_texte.php3&quot;);
include_ecrire(&quot;inc_charsets.php3&quot;);
include_ecrire(&quot;inc_meta.php3&quot;);
include_ecrire(&quot;inc_admin.php3&quot;);
include_ecrire(&quot;inc_acces.php3&quot;);

/*
function ligne_x ($texte) {
	if (ereg(&quot;^BEGIN&quot;, $texte)) echo &quot;&lt;br&gt;&quot;;
	echo $texte.&quot;&lt;br&gt;&quot;;
}
*/
function ligne ($texte) {
	echo filtrer_ical($texte).&quot;\n&quot;;
}

$nom_site = lire_meta(&quot;nom_site&quot;);
$adresse_site = lire_meta(&quot;adresse_site&quot;);

// securite
unset($id_utilisateur);
$id_auteur = intval($id);

// verifier la cle
if (verifier_low_sec($id_auteur, $cle, 'ical')) {
	$query = &quot;SELECT * FROM spip_auteurs WHERE id_auteur=$id_auteur&quot;;
	$result = spip_query($query);

	if ($row = spip_fetch_array($result)) {
		$id_utilisateur=$row['id_auteur'];
		$nom_utilisateur=$row['nom'];
		$statut_utilisateur=$row['statut'];
		$langue_utilisateur=$row['lang'];
	}
}
if (!$id_utilisateur) {
	echo _T('info_acces_interdit');
	exit;
}

lang_select($langue_utilisateur);

@header(&quot;content-type:text/calendar; charset=utf-8&quot;);

ligne (&quot;BEGIN:VCALENDAR&quot;);
ligne (&quot;CALSCALE:GREGORIAN&quot;);
ligne (&quot;X-WR-CALNAME;VALUE=TEXT:$nom_site / $nom_utilisateur&quot;);
ligne (&quot;X-WR-RELCALID:cal$id_utilisateur @ $adresse_site&quot;);


// rendez-vous
$result_messages=spip_query(&quot;SELECT messages.* FROM spip_messages AS messages, spip_auteurs_messages AS lien WHERE ((lien.id_auteur='$id_utilisateur' AND lien.id_message=messages.id_message) OR messages.type='affich') AND messages.rv='oui' AND messages.statut='publie' GROUP BY messages.id_message ORDER BY messages.date_heure&quot;);
while($row=spip_fetch_array($result_messages)){
	$id_message=$row['id_message'];
	$date_heure=$row[&quot;date_heure&quot;];
	$date_heure_fin=$row[&quot;date_fin&quot;];
	//$titre=typo($row[&quot;titre&quot;]);
	$titre = $row[&quot;titre&quot;];
	$texte = $row[&quot;texte&quot;];
	$type=$row[&quot;type&quot;];

	if ($type == 'normal') {
		$le_type = _T('info_message_2');
		$result_auteurs=spip_query(&quot;SELECT auteurs.* FROM spip_auteurs AS auteurs, spip_auteurs_messages AS lien WHERE (lien.id_message='$id_message' AND lien.id_auteur=auteurs.id_auteur)&quot;);
		while($row_auteur=spip_fetch_array($result_auteurs)){
			$id_auteur=$row_auteur['id_auteur'];
			$nom_auteur=$row_auteur['nom'];
			$email = $row_auteur ['email'];

			if ($id_auteur != $id_utilisateur) $titre = $titre.&quot; - &quot;.$nom_auteur;
			
			if ($id_auteur == $id_utilisateur) ligne (&quot;ORGANIZER:$nom_auteur &lt;$email&gt;&quot;);
			else  ligne (&quot;ATTENDEE:$nom_auteur &lt;$email&gt;&quot;);
		}
	}
	else if ($type == 'pb') {
		$le_type = _T('info_pense_bete');
	}
	else if ($type == 'affich') {
		$le_type = _T('info_annonce');
		$titre = &quot;[$nom_site] $titre&quot;;
	}

	ligne (&quot;BEGIN:VEVENT&quot;);
	ligne (&quot;SUMMARY:&quot;.$titre);
	ligne (&quot;DESCRIPTION:$texte&quot;);
	ligne (&quot;UID:mess$id_message @ $adresse_site&quot;);
	ligne (&quot;DTSTAMP:&quot;.date_ical($date_heure));
	ligne (&quot;DTSTART:&quot;.date_ical($date_heure));
	if ($date_heure_fin &gt; $date_heure) ligne (&quot;DTEND:&quot;.date_ical($date_heure_fin));

	ligne (&quot;CATEGORIES:$le_type&quot;);
	ligne(&quot;URL:$adresse_site/ecrire/message.php3?id_message=$id_message&quot;);
	
	ligne (&quot;END:VEVENT&quot;);
	
}

// todo
$result_messages=spip_query(&quot;SELECT messages.* FROM spip_messages AS messages, spip_auteurs_messages AS lien WHERE lien.id_auteur='$id_utilisateur' AND lien.id_message=messages.id_message AND messages.type='pb' AND messages.rv!='oui' AND messages.statut='publie' GROUP BY messages.id_message ORDER BY messages.date_heure&quot;);
while($row=spip_fetch_array($result_messages)){
	$id_message=$row['id_message'];
	$date_heure=$row[&quot;date_heure&quot;];
	$titre = $row[&quot;titre&quot;];
	$texte = $row[&quot;texte&quot;];
	$type=$row[&quot;type&quot;];

	if ($type == 'normal') {
		$le_type = _T('info_message_2');
		$result_auteurs=spip_query(&quot;SELECT auteurs.* FROM spip_auteurs AS auteurs, spip_auteurs_messages AS lien WHERE (lien.id_message='$id_message' AND lien.id_auteur=auteurs.id_auteur)&quot;);
		while($row_auteur=spip_fetch_array($result_auteurs)){
			$id_auteur=$row_auteur['id_auteur'];
			$nom_auteur=$row_auteur['nom'];
			$email = $row_auteur ['email'];

			if ($id_auteur != $id_utilisateur) $titre = $titre.&quot; - &quot;.$nom_auteur;
			
			if ($id_auteur == $id_utilisateur) ligne (&quot;ORGANIZER:$nom_auteur &lt;$email&gt;&quot;);
			else  ligne (&quot;ATTENDEE:$nom_auteur &lt;$email&gt;&quot;);
		}
	}
	else if ($type == 'pb') {
		$le_type = _T('info_pense_bete');
	}
	else if ($type == 'affich') {
		$le_type = _T('info_annonce');
		$titre = &quot;[$nom_site] $titre&quot;;
	}
	
	ligne (&quot;BEGIN:VTODO&quot;);
	ligne (&quot;SUMMARY:&quot;.$titre);
	ligne (&quot;DESCRIPTION:$texte&quot;);
	ligne (&quot;UID:mess$id_message @ $adresse_site&quot;);
	ligne (&quot;DTSTAMP:&quot;.date_ical($date_heure));
	ligne (&quot;DTSTART:&quot;.date_ical($date_heure));
	ligne (&quot;CATEGORIES:$le_type&quot;);
	ligne (&quot;URL:$adresse_site/ecrire/message.php3?id_message=$id_message&quot;);
	ligne (&quot;END:VTODO&quot;);

}

// Articles et breves proposes
$titres = Array();
$result_articles = spip_query(&quot;SELECT id_article, titre, date FROM spip_articles WHERE statut = 'prop'&quot;);
while($row=spip_fetch_array($result_articles)){
	$id_article=$row['id_article'];
	$titre = supprimer_numero($row['titre']);
	$titres[] = $titre;
	$date_heure = $row['date'];
	$nb_articles ++;
	ligne (&quot;BEGIN:VEVENT&quot;);
	ligne (&quot;SUMMARY:[$nom_site] $titre (&quot;._T('info_article_propose').&quot;)&quot;);
	ligne (&quot;UID:article$id_article @ $adresse_site&quot;);
	ligne (&quot;DTSTAMP:&quot;.date (&quot;Ymd\THis&quot;, mktime (heures($date_heure),minutes($date_heure),0,mois($date_heure),jour($date_heure),annee($date_heure))));
	ligne (&quot;DTSTART;VALUE=DATE:&quot;.date (&quot;Ymd&quot;, mktime (heures($date_heure),minutes($date_heure),0,mois($date_heure),jour($date_heure),annee($date_heure))));
	ligne (&quot;CATEGORIES:&quot;._T('info_article_propose'));
	ligne(&quot;URL:$adresse_site/ecrire/articles.php3?id_article=$id_article&quot;);
	ligne (&quot;END:VEVENT&quot;);
}

$result_articles = spip_query(&quot;SELECT id_breve, titre, date_heure FROM spip_breves WHERE statut = 'prop'&quot;);
while($row=spip_fetch_array($result_articles)){
	$id_breve=$row['id_breve'];
	$titre = supprimer_numero($row['titre']);
	$titres[] = $titre;
	$date_heure = $row['date_heure'];
	$nb_breves++;
	ligne (&quot;BEGIN:VEVENT&quot;);
	ligne (&quot;SUMMARY:[$nom_site] $titre (&quot;._T('item_breve_proposee').&quot;)&quot;);
	ligne (&quot;UID:breve$id_breve @ $adresse_site&quot;);
	ligne (&quot;DTSTAMP:&quot;.date (&quot;Ymd\THis&quot;, mktime (heures($date_heure),minutes($date_heure),0,mois($date_heure),jour($date_heure),annee($date_heure))));
	ligne (&quot;DTSTART;VALUE=DATE:&quot;.date (&quot;Ymd&quot;, mktime (heures($date_heure),minutes($date_heure),0,mois($date_heure),jour($date_heure),annee($date_heure))));
	ligne (&quot;CATEGORIES:&quot;._T('item_breve_proposee'));
	ligne (&quot;URL:$adresse_site/ecrire/breves_voir.php3?id_breve=$id_breve&quot;);
	ligne (&quot;END:VEVENT&quot;);

}

if ($nb_articles + $nb_breves &gt; 0) {
	if ($nb_articles &gt; 0) $titre_prop[] = _T('info_articles_proposes').&quot;: &quot;.$nb_articles;
	if ($nb_breves &gt; 0) $titre_prop[] = _T('info_breves_valider').&quot;: &quot;.$nb_breves;
	$titre = join($titre_prop,&quot; / &quot;);
	ligne (&quot;BEGIN:VTODO&quot;);
	ligne (&quot;SUMMARY:[$nom_site] $titre&quot;);
	ligne (&quot;UID:prop @ $adresse_site&quot;);
	$texte = join($titres,&quot; / &quot;);
	ligne (&quot;DESCRIPTION:$texte&quot;);
	
	$today=getdate(time());
	$jour = $today[&quot;mday&quot;];
	$mois=$today[&quot;mon&quot;];
	$annee=$today[&quot;year&quot;];
	ligne (&quot;DTSTAMP:&quot;.date (&quot;Ymd\THis&quot;, mktime (12,0,0,$mois,$jour,$annee)));
	ligne (&quot;DTSTART:&quot;.date (&quot;Ymd\THis&quot;, mktime (12,0,0,$mois,$jour,$annee)));
	ligne (&quot;CATEGORIES:&quot;._T('icone_a_suivre'));
	ligne (&quot;URL:$adresse_site/ecrire/&quot;);
	ligne (&quot;END:VTODO&quot;);
}


// Nouveaux messages

$result_messages = spip_query(&quot;SELECT * FROM spip_messages AS messages, spip_auteurs_messages AS lien WHERE lien.id_auteur=$id_utilisateur AND vu='non' AND statut='publie' AND type='normal' AND lien.id_message=messages.id_message&quot;);
while($row=spip_fetch_array($result_messages)){
	$id_message=$row['id_message'];
	$date_heure=$row[&quot;date_heure&quot;];
	$titre = $row[&quot;titre&quot;];
	$texte = $row[&quot;texte&quot;];
	$type=$row[&quot;type&quot;];

	if ($type == 'normal') {
		$le_type = _T('info_message_2');
		$result_auteurs=spip_query(&quot;SELECT auteurs.* FROM spip_auteurs AS auteurs, spip_auteurs_messages AS lien WHERE (lien.id_message='$id_message' AND lien.id_auteur=auteurs.id_auteur)&quot;);
		while($row_auteur=spip_fetch_array($result_auteurs)){
			$id_auteur=$row_auteur['id_auteur'];
			$nom_auteur = $row_auteur['nom'];
			$email = $row_auteur ['email'];

			if ($id_auteur != $id_utilisateur) $titre = $nom_auteur.&quot; - &quot;.$titre;
			
			if ($id_auteur == $id_utilisateur) ligne (&quot;ORGANIZER:$nom_auteur &lt;$email&gt;&quot;);
			else  ligne (&quot;ATTENDEE:$nom_auteur &lt;$email&gt;&quot;);
		}
		$query_forum = &quot;SELECT * FROM spip_forum WHERE statut='perso' AND id_message='$id_message' ORDER BY date_heure DESC LIMIT 0,1&quot;;
		$result_forum = spip_query($query_forum);
		if ($row_forum = spip_fetch_array($result_forum)) {
			$date_heure = $row_forum[&quot;date_heure&quot;];
			$texte = $row_forum[&quot;texte&quot;];
			$titre = $row_forum[&quot;titre&quot;];
			$id_auteur = $row_forum[&quot;id_auteur&quot;];

			$result_auteurs2 = spip_query(&quot;SELECT * FROM spip_auteurs WHERE id_auteur = $id_auteur&quot;);
			if ($row_auteur2 = spip_fetch_array($result_auteurs2)){
				$nom_auteur = $row_auteur2['nom'];
				$email = $row_auteur2 ['email'];
				
				$titre = $nom_auteur.&quot; - &quot;.$titre;
			}
		}
	}
	else if ($type == 'pb') {
		$le_type = _T('info_pense_bete');
	}
	else if ($type == 'affich') {
		$le_type = _T('info_annonce');
		$titre = &quot;[$nom_site] $titre&quot;;
	}

	
	
	ligne (&quot;BEGIN:VTODO&quot;);
	ligne (&quot;SUMMARY:&quot;.$titre);
	ligne (&quot;DESCRIPTION:$texte&quot;);
	ligne (&quot;UID:nouv_mess$id_message @ $adresse_site&quot;);
	ligne (&quot;DTSTAMP:&quot;.date (&quot;Ymd\THis&quot;, mktime (heures($date_heure),minutes($date_heure),0,mois($date_heure),jour($date_heure),annee($date_heure))));
	ligne (&quot;DTSTART:&quot;.date (&quot;Ymd\THis&quot;, mktime (heures($date_heure),minutes($date_heure),0,mois($date_heure),jour($date_heure),annee($date_heure))));
	ligne (&quot;CATEGORIES:$le_type&quot;);
	ligne(&quot;URL:$adresse_site/ecrire/message.php3?id_message=$id_message&quot;);
	ligne (&quot;END:VTODO&quot;);
	
}

// Messages de forum a valider
if ($statut_utilisateur == &quot;0minirezo&quot;) {

	$query_forum = &quot;SELECT * FROM spip_forum WHERE statut = 'prop'&quot;;
	$result_forum = spip_query($query_forum);

	while($row=spip_fetch_array($result_forum)){
		$nb_forum ++;
	
		$id_forum=$row['id_forum'];
		$date_heure = $row['date_heure'];
		$titre = $row['titre'];
		$texte = $row['texte'];
		$auteur = $row['auteur'];
		$email_auteur = $row['email_auteur'];
		if ($email_auteur) $email_auteur = &quot;&lt;$email_auteur&gt;&quot;;
		
		ligne (&quot;BEGIN:VEVENT&quot;);
		ligne (&quot;SUMMARY:[$nom_site] $titre &quot;._T('icone_forum_suivi'));
		ligne (&quot;DESCRIPTION:$texte\r$auteur $email_auteur&quot;);
		ligne (&quot;UID:forum$id_forum @ $adresse_site&quot;);
		ligne (&quot;DTSTAMP:&quot;.date (&quot;Ymd\THis&quot;, mktime (heures($date_heure),minutes($date_heure),0,mois($date_heure),jour($date_heure),annee($date_heure))));
		ligne (&quot;DTSTART:&quot;.date (&quot;Ymd\THis&quot;, mktime (heures($date_heure),minutes($date_heure),0,mois($date_heure),jour($date_heure),annee($date_heure))));
		ligne (&quot;DTEND:&quot;.date (&quot;Ymd\THis&quot;, mktime (heures($date_heure),minutes($date_heure)+60,0,mois($date_heure),jour($date_heure),annee($date_heure))));
		ligne (&quot;CATEGORIES:&quot;._T('icone_forum_suivi'));
		ligne(&quot;URL:$adresse_site/ecrire/controle_forum.php3&quot;);
		ligne (&quot;END:VEVENT&quot;);


		
	}

	if ($nb_forum &gt; 0) {
		ligne (&quot;BEGIN:VTODO&quot;);
		ligne (&quot;SUMMARY:[$nom_site] &quot;._T('icone_forum_suivi').&quot;: $nb_forum&quot;);
		ligne (&quot;UID:forum @ $adresse_site&quot;);
		
		$today=getdate(time());
		$jour = $today[&quot;mday&quot;];
		$mois=$today[&quot;mon&quot;];
		$annee=$today[&quot;year&quot;];
		ligne (&quot;DTSTAMP:&quot;.date (&quot;Ymd\THis&quot;, mktime (12,0,0,$mois,$jour,$annee)));
		ligne (&quot;DTSTART:&quot;.date (&quot;Ymd\THis&quot;, mktime (12,0,0,$mois,$jour,$annee)));
		ligne (&quot;CATEGORIES:&quot;._T('icone_forum_suivi'));
		ligne(&quot;URL:$adresse_site/ecrire/controle_forum.php3&quot;);
		ligne (&quot;END:VTODO&quot;);
	}
}




ligne (&quot;END:VCALENDAR&quot;);


?&gt;
--- NEW FILE: spip_inscription.php3 ---
&lt;?php
include (&quot;ecrire/inc_version.php3&quot;);
include_ecrire(&quot;inc_presentation.php3&quot;);
include_local(&quot;inc-formulaire_inscription.php3&quot;);
include_local(&quot;inc-public-global.php3&quot;); 
include_ecrire(&quot;inc_lang.php3&quot;); 
utiliser_langue_site();
utiliser_langue_visiteur();
install_debut_html(_T('pass_vousinscrire'));
inclure_balise_dynamique(balise_formulaire_inscription_dyn($mode, $mail_inscription, $nom_inscription, $focus));
install_fin_html();
?&gt;

--- NEW FILE: rubrique.php3 ---
&lt;?php
$fond = &quot;rubrique&quot;;
$delais = 2 * 3600;


include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: spip_image.php3 ---
&lt;?php

include (&quot;ecrire/inc_version.php3&quot;);
include_ecrire(&quot;inc_charsets.php3&quot;);
include_ecrire(&quot;inc_meta.php3&quot;);
include_ecrire(&quot;inc_admin.php3&quot;);
include_ecrire(&quot;inc_abstract_sql.php3&quot;);

function effacer_image($nom) {
	global $hash_id_auteur, $hash;

	if ((!strstr($nom, &quot;..&quot;)) AND
	    verifier_action_auteur(&quot;supp_image $nom&quot;, $hash, $hash_id_auteur))
		@unlink(_DIR_IMG . $nom);
}

function tester_vignette ($test_vignette) {
	global $djpeg_command, $cjpeg_command, $pnmscale_command;
	// verifier les formats acceptes par GD
	if ($test_vignette == &quot;gd1&quot;) {
		$gd_formats = Array();
		if (function_exists('ImageCreateFromJPEG')) {
			$srcImage = @ImageCreateFromJPEG(_DIR_IMG . &quot;test.jpg&quot;);
			if ($srcImage) {
				$gd_formats[] = &quot;jpg&quot;;
				ImageDestroy( $srcImage );
			}
		}
		if (function_exists('ImageCreateFromGIF')) {
			$srcImage = @ImageCreateFromGIF(_DIR_IMG . &quot;test.gif&quot;);
			if ($srcImage) {
				$gd_formats[] = &quot;gif&quot;;
				ImageDestroy( $srcImage );
			}
		}
		if (function_exists('ImageCreateFromPNG')) {
			$srcImage = @ImageCreateFromPNG(_DIR_IMG . &quot;test.png&quot;);
			if ($srcImage) {
				$gd_formats[] = &quot;png&quot;;
				ImageDestroy( $srcImage );
			}
		}

		if ($gd_formats) $gd_formats = join(&quot;,&quot;, $gd_formats);
		ecrire_meta(&quot;gd_formats&quot;, $gd_formats);
		ecrire_metas();
	}
	// verifier les formats netpbm
	else if ($test_vignette == &quot;netpbm&quot;) {
		$netpbm_formats= Array();

		$jpegtopnm_command = ereg_replace(&quot;pnmscale&quot;, &quot;jpegtopnm&quot;, $pnmscale_command);
		$pnmtojpeg_command = ereg_replace(&quot;pnmscale&quot;, &quot;pnmtojpeg&quot;, $pnmscale_command);

		$vignette = _DIR_IMG . &quot;test.jpg&quot;;
		$dest = _DIR_IMG . &quot;test-jpg.jpg&quot;;
		exec(&quot;$jpegtopnm_command $vignette | $pnmscale_command -width 10 | $pnmtojpeg_command &gt; $dest&quot;);
		if ($taille = @getimagesize($dest)) {
			if ($taille[1] == 10) $netpbm_formats[] = &quot;jpg&quot;;
		}	
		
		$giftopnm_command = ereg_replace(&quot;pnmscale&quot;, &quot;giftopnm&quot;, $pnmscale_command);
		$pnmtojpeg_command = ereg_replace(&quot;pnmscale&quot;, &quot;pnmtojpeg&quot;, $pnmscale_command);
		$vignette = _DIR_IMG . &quot;test.gif&quot;;
		$dest = _DIR_IMG . &quot;test-gif.jpg&quot;;
		exec(&quot;$giftopnm_command $vignette | $pnmscale_command -width 10 | $pnmtojpeg_command &gt; $dest&quot;);
		if ($taille = @getimagesize($dest)) {
			if ($taille[1] == 10) $netpbm_formats[] = &quot;gif&quot;;
		}

		$pngtopnm_command = ereg_replace(&quot;pnmscale&quot;, &quot;pngtopnm&quot;, $pnmscale_command);
		$vignette = _DIR_IMG . &quot;test.png&quot;;
		$dest = _DIR_IMG . &quot;test-gif.jpg&quot;;
		exec(&quot;$pngtopnm_command $vignette | $pnmscale_command -width 10 | $cjpeg_command -outfile $dest&quot;);
		if ($taille = @getimagesize($dest)) {
			if ($taille[1] == 10) $netpbm_formats[] = &quot;png&quot;;
		}
		

		if ($netpbm_formats) $netpbm_formats = join(&quot;,&quot;, $netpbm_formats);
		ecrire_meta(&quot;netpbm_formats&quot;, $netpbm_formats);
		ecrire_metas();
	}

	// et maintenant envoyer la vignette de tests
	if (ereg(&quot;^(gd1|gd2|imagick|convert|netpbm)$&quot;, $test_vignette)) {
		include_ecrire('inc_logos.php3');
		//$taille_preview = lire_meta(&quot;taille_preview&quot;);
		if ($taille_preview &lt; 10) $taille_preview = 120;
		if ($preview = creer_vignette(_DIR_IMG . 'test_image.jpg', $taille_preview, $taille_preview, 'jpg', '', &quot;test_$test_vignette&quot;, $test_vignette, true))

			return ($preview['fichier']);
	}
	return '';
}


//
// Deplacer un fichier
//

function deplacer_fichier_upload($source, $dest) {
	// Securite
	if (strstr($dest, &quot;..&quot;)) {
		exit;
	}

	$ok = @copy($source, $dest);
	if (!$ok) $ok = @move_uploaded_file($source, $dest);
	if ($ok)
		@chmod($dest, 0666);
	else {
		$f = @fopen($dest,'w');
		if ($f)
			fclose ($f);
		else {
			redirige_par_entete(&quot;spip_test_dirs.php3?test_dir=&quot;.
					    dirname($dest));
		}
		@unlink($dest);

		if (($GLOBALS['_FILES']['size'] == 0) AND !$GLOBALS['action_zip']) {
			include_ecrire('inc_presentation.php3');
			install_debut_html(_T('forum_titre_erreur'));
			echo &quot;&lt;p&gt;&quot;._T('upload_limit',
				array('max' =&gt; ini_get('upload_max_filesize')));
			install_fin_html();
			exit;
		}
	}

	return $ok;
}


//
// Convertit le type numerique retourne par getimagesize() en extension fichier
//

function decoder_type_image($type, $strict = false) {
	switch ($type) {
	case 1:
		return &quot;gif&quot;;
	case 2:
		return &quot;jpg&quot;;
	case 3:
		return &quot;png&quot;;
	case 4:
		return $strict ? &quot;&quot; : &quot;swf&quot;;
	case 5:
		return &quot;psd&quot;;
	case 6:
		return &quot;bmp&quot;;
	case 7:
	case 8:
		return &quot;tif&quot;;
	default:
		return &quot;&quot;;
	}
}


//
// Corrige l'extension du fichier dans quelques cas particuliers
//

function corriger_extension($ext) {
	switch ($ext) {
	case 'htm':
		return 'html';
	case 'jpeg':
		return 'jpg';
	case 'tiff':
		return 'tif';
	default:
		return $ext;
	}
}


//
// Ajouter une image (logo)
//

function ajout_image($source, $dest) {
	global $redirect_url, $hash_id_auteur, $hash, $num_img, $dossier_squelettes;

	// Securite
	if (!(verifier_action_auteur(&quot;ajout_image $dest&quot;, $hash, $hash_id_auteur)
	      AND _DIR_DOC != $dossier_squelettes)) {
	  spip_log(&quot;interdiction ajout_image($source, $dest)&quot;);
	  return;
	}

	// analyse le type de l'image (on ne fait pas confiance au nom de
	// fichier envoye par le browser : pour les Macs c'est plus sur)

	$f =_DIR_DOC . $dest . '.tmp';
	deplacer_fichier_upload($source, $f);
	$size = @getimagesize($f);
	$type = decoder_type_image($size[2], true);
	if ($type)
		@rename ($f, _DIR_DOC . $dest . &quot;.$type&quot;);
	else
		@unlink ($f);
}

//
// Faire tourner une image
//

//$imagePath - path to your image; function will save rotated image overwriting the old one
//$rtt - should be 90 or -90 - cw/ccw
function gdRotate($imagePath,$rtt){
	if(preg_match(&quot;/\.(png)/i&quot;, $imagePath)) $src_img=ImageCreateFromPNG($imagePath);
	elseif(preg_match(&quot;/\.(jpg)/i&quot;, $imagePath)) $src_img=ImageCreateFromJPEG($imagePath);
	elseif(preg_match(&quot;/\.(bmp)/i&quot;, $imagePath)) $src_img=ImageCreateFromWBMP($imagePath);
	$size=@getimagesize($imagePath);
	//note: to make it work on GD 2.xx properly change ImageCreate to ImageCreateTrueColor

	$process = lire_meta('image_process');
	if ($process == &quot;gd2&quot;) $dst_img=ImageCreateTrueColor($size[1],$size[0]);
	else  $dst_img=ImageCreate($size[1],$size[0]);
	if($rtt==90){
		$t=0;
		$b=$size[1]-1;
		while($t&lt;=$b){
			$l=0;
			$r=$size[0]-1;
			while($l&lt;=$r){
				imagecopy($dst_img,$src_img,$t,$r,$r,$b,1,1);
				imagecopy($dst_img,$src_img,$t,$l,$l,$b,1,1);
				imagecopy($dst_img,$src_img,$b,$r,$r,$t,1,1);
				imagecopy($dst_img,$src_img,$b,$l,$l,$t,1,1);
				$l++;
				$r--;
			}
			$t++;
			$b--;
		}
	}
	elseif($rtt==-90){
		$t=0;
		$b=$size[1]-1;
		while($t&lt;=$b){
			$l=0;
			$r=$size[0]-1;
			while($l&lt;=$r){
				imagecopy($dst_img,$src_img,$t,$l,$r,$t,1,1);
				imagecopy($dst_img,$src_img,$t,$r,$l,$t,1,1);
				imagecopy($dst_img,$src_img,$b,$l,$r,$b,1,1);
				imagecopy($dst_img,$src_img,$b,$r,$l,$b,1,1);
				$l++;
				$r--;
			}
			$t++;
			$b--;
		}
	}
	ImageDestroy($src_img);
	ImageInterlace($dst_img,0);
	ImageJPEG($dst_img,$imagePath);
}

//
// Creation automatique de vignette new style
// Normalement le test est v&#233;rifi&#233; donc on ne rend rien sinon

function creer_fichier_vignette($vignette) {
	if ($vignette &amp;&amp; lire_meta(&quot;creer_preview&quot;) == 'oui') {
		eregi('\.([a-z0-9]+)$', $vignette, $regs);
		$ext = $regs[1];
		$taille_preview = lire_meta(&quot;taille_preview&quot;);
		if ($taille_preview &lt; 10) $taille_preview = 120;
		include_ecrire('inc_logos.php3');

		if ($preview = creer_vignette($vignette, $taille_preview, $taille_preview, $ext, 'vignettes', basename($vignette).'-s'))
		{
			inserer_vignette_base($vignette, $preview['fichier']);
			return $preview['fichier'];
		}
		include_ecrire('inc_documents.php3');
		return vignette_par_defaut($ext ? $ext : 'txt', false);
	}
}

function supprime_document_et_vignette($doc_supp) {
	global $hash_id_auteur, $hash;
	// Securite
	if (verifier_action_auteur(&quot;supp_doc $doc_supp&quot;, $hash, $hash_id_auteur)) {
		$query = &quot;SELECT id_vignette, fichier FROM spip_documents WHERE id_document=$doc_supp&quot;;
		$result = spip_query($query);
		if ($row = spip_fetch_array($result)) {
			$fichier = $row['fichier'];
			$id_vignette = $row['id_vignette'];
			spip_query(&quot;DELETE FROM spip_documents WHERE id_document=$doc_supp&quot;);
			spip_query(&quot;UPDATE spip_documents SET id_vignette=0 WHERE id_vignette=$doc_supp&quot;);
			spip_query(&quot;DELETE FROM spip_documents_articles WHERE id_document=$doc_supp&quot;);
			spip_query(&quot;DELETE FROM spip_documents_rubriques WHERE id_document=$doc_supp&quot;);
			spip_query(&quot;DELETE FROM spip_documents_breves WHERE id_document=$doc_supp&quot;);
			@unlink($fichier);
			
			if ($id_vignette &gt; 0) {
			  $query = &quot;SELECT id_vignette, fichier FROM spip_documents WHERE id_document=$id_vignette&quot;;
			  $result = spip_query($query);
			  if ($row = spip_fetch_array($result)) {
			    $fichier = $row['fichier'];
			    @unlink($fichier);
			  }
			  spip_query(&quot;DELETE FROM spip_documents WHERE id_document=$id_vignette&quot;);
			  spip_query(&quot;DELETE FROM spip_documents_articles WHERE id_document=$id_vignette&quot;);
			  spip_query(&quot;DELETE FROM spip_documents_rubriques WHERE id_document=$id_vignette&quot;);
			  spip_query(&quot;DELETE FROM spip_documents_breves WHERE id_document=$id_vignette&quot;);
			}
		}
	}
}

function tourner_document($var_rot, $doc_rotate, $convert_command) {
	global $hash_id_auteur, $hash;
	// Securite
	if (!verifier_action_auteur(&quot;rotate $doc_rotate&quot;, $hash, $hash_id_auteur)) {
		return '';
	}
	
	if (!$var_rot) $var_rot = 0;

	$query = &quot;SELECT id_vignette, fichier FROM spip_documents WHERE id_document=$doc_rotate&quot;;
	$result = spip_query($query);
	if ($row = spip_fetch_array($result)) {
		$id_vignette = $row['id_vignette'];
		$image = $row['fichier'];

		$process = lire_meta('image_process');

		 // imagick (php4-imagemagick)
		 if ($process == 'imagick') {
			$handle = imagick_readimage($image);
			imagick_rotate($handle, $var_rot);
			imagick_write($handle, $image);
			if (!@file_exists($image)) return;	// echec imagick
		}
		else if ($process == &quot;gd2&quot;) { // theoriquement compatible gd1, mais trop forte degradation d'image
			if ($var_rot == 180) { // 180 = 90+90
				gdRotate ($image, 90);
				gdRotate ($image, 90);
			} else {
				gdRotate ($image, $var_rot);
			}
		}
		else if ($process = &quot;convert&quot;) {
			$commande = &quot;$convert_command -rotate $var_rot ./&quot;
				. escapeshellcmd($image).' ./'.escapeshellcmd($image);
#			spip_log($commande);
			exec($commande);
		}

		$size_image = @getimagesize($image);
		$largeur = $size_image[0];
		$hauteur = $size_image[1];

		if ($id_vignette &gt; 0) {
			creer_fichier_vignette($image);
/*			$query = &quot;SELECT id_vignette, fichier FROM spip_documents WHERE id_document=$id_vignette&quot;;
			$result = spip_query($query);
			if ($row = spip_fetch_array($result)) {
				$fichier = $row['fichier'];
				@unlink($fichier);
			}
			spip_query(&quot;DELETE FROM spip_documents WHERE id_document=$id_vignette&quot;);
			spip_query(&quot;DELETE FROM spip_documents_articles WHERE id_document=$id_vignette&quot;);
			spip_query(&quot;DELETE FROM spip_documents_rubriques WHERE id_document=$id_vignette&quot;);
			spip_query(&quot;DELETE FROM spip_documents_breves WHERE id_document=$id_vignette&quot;);
*/		}


		spip_query(&quot;UPDATE spip_documents SET largeur=$largeur, hauteur=$hauteur WHERE id_document=$doc_rotate&quot;);

	}
}

if ($test_vignette) // appel de config-fonction
	$redirect = tester_vignette($test_vignette);
elseif ($vignette) // appels de inc_logo
	$redirect = creer_fichier_vignette($vignette);
else {
   $retour = $redirect;
   $redirect = '';
   if ($ajout_doc == 'oui') {
	include_ecrire('inc_getdocument.php3');
	if (!$image_name AND $image2) {
		$image = _DIR_TRANSFERT . $image2;
		$image_name = $image;
	} 
	if (!eregi(&quot;\.zip$&quot;,$image_name))
	  ajout_doc_s($image, $image_name, $mode, $forcer_document, $id_document, $hash);
	else {
	  // bizarre: clean_link ne recupere pas les variables
	  $link = new Link('spip_image.php3');
	  $link-&gt;addVar(&quot;ajout_doc&quot;, &quot;oui&quot;);
	  $link-&gt;addVar(&quot;redirect&quot;, $retour);
	  $link-&gt;addVar('id_document', $id_document);
	  $link-&gt;addVar('id_article', $id_article);
	  $link-&gt;addVar('mode', $mode);
	  $link-&gt;addVar('type', $type);
	  $link-&gt;addVar('hash', $hash);
	  $link-&gt;addVar('hash_id_auteur', $hash_id_auteur);
	  ajout_doc_zip($image, $image_name, $mode, $forcer_document, $action_zip, $id_document, $hash, $link);
	}
   }
   elseif ($ajout_logo == &quot;oui&quot;)
	ajout_image($image, $logo);
   elseif ($image_supp)
	effacer_image($image_supp);
   elseif ($doc_supp) // appels de inc_document
	supprime_document_et_vignette($doc_supp);
   elseif ($doc_rotate)
	tourner_document($var_rot, $doc_rotate, $convert_command);
 }

if (!($redirect)) {
	if ($HTTP_POST_VARS) $vars = $HTTP_POST_VARS;
	else $vars = $HTTP_GET_VARS;
	$redirect = $vars[&quot;redirect&quot;];
	$link = new Link(_DIR_RESTREINT_ABS . $redirect);
	reset($vars);
	while (list ($key, $val) = each ($vars)) {
	  if (!ereg(&quot;^(redirect|image.*|hash.*|ajout.*|doc.*|transformer.*|modifier_.*|ok|type|forcer_.*|var_rot|action_zip)$&quot;, $key)) {
	    $link-&gt;addVar($key, $val);
	  }
	}
	if ($id_document)
	  $link-&gt;addVar('id_document',$id_document);
	if ($type == 'rubrique')
	  $link-&gt;delVar('id_article');
	
	$redirect = $link-&gt;getUrl();
 }


redirige_par_entete($redirect);

?&gt;

--- NEW FILE: inc-urls-standard.php3 ---
&lt;?php

// executer une seule fois
if (defined(&quot;_INC_URLS2&quot;)) return;
define(&quot;_INC_URLS2&quot;, &quot;1&quot;);

function generer_url_article($id_article) {
	return &quot;article.php3?id_article=$id_article&quot;;
}

function generer_url_rubrique($id_rubrique) {
	return &quot;rubrique.php3?id_rubrique=$id_rubrique&quot;;
}

function generer_url_breve($id_breve) {
	return &quot;breve.php3?id_breve=$id_breve&quot;;
}

function generer_url_mot($id_mot) {
	return &quot;mot.php3?id_mot=$id_mot&quot;;
}

function generer_url_auteur($id_auteur) {
	return &quot;auteur.php3?id_auteur=$id_auteur&quot;;
}

function generer_url_document($id_document) {
	if (intval($id_document) &lt;= 0)
		return '';
	if ((lire_meta(&quot;creer_htaccess&quot;)) == 'oui')
		return &quot;spip_acces_doc.php3?id_document=$id_document&quot;;
	if ($row = @spip_fetch_array(spip_query(&quot;SELECT fichier FROM spip_documents WHERE id_document = $id_document&quot;)))
		return ($row['fichier']);
	return '';
}

function recuperer_parametres_url($fond, $url) {
	global $contexte;
	return;
}

//
// URLs des forums
//

// a mettre dans ecrire/inc_threads.php3 avec les autres trucs de forum
function racine_forum($id_forum){
	if (!$id_forum = intval($id_forum)) return;
	$query = &quot;SELECT id_parent, id_rubrique, id_article, id_breve FROM spip_forum WHERE id_forum=&quot;.$id_forum;
	$result = spip_query($query);
	if($row = spip_fetch_array($result)){
		if($row['id_parent']) {
			return racine_forum($row['id_parent']);
		}
		else {
			if($row['id_rubrique']) return array('rubrique',$row['id_rubrique'], $id_forum);
 			if($row['id_article']) return array('article',$row['id_article'], $id_forum);
			if($row['id_breve']) return array('breve',$row['id_breve'], $id_forum);
		}
	}
} 

function generer_url_forum($id_forum, $show_thread=false) {
	list($type, $id, $id_thread) = racine_forum($id_forum);
	if ($id_thread&gt;0 AND $show_thread)
		$id_forum = $id_thread;
	switch($type) {
		case 'article':
			return generer_url_article($id).&quot;#forum$id_forum&quot;;
			break;
		case 'breve':
			return generer_url_breve($id).&quot;#forum$id_forum&quot;;
			break;
		case 'rubrique':
			return generer_url_rubrique($id).&quot;#forum$id_forum&quot;;
			break;
		default:
			return &quot;forum.php3?id_forum=&quot;.$id_forum;
	}
}

?&gt;

--- NEW FILE: ical-dist.html ---
BEGIN:VCALENDAR
CALSCALE:GREGORIAN
X-WR-CALNAME;VALUE=TEXT:[(#NOM_SITE_SPIP|filtrer_ical)]
X-WR-RELCALID:[(#URL_SITE_SPIP|filtrer_ical)]
&lt;BOUCLE_articles(ARTICLES){par date}{inverse}{0,100}&gt;
BEGIN:VEVENT
SUMMARY:[(#TITRE|filtrer_ical)] [[(#NOM_SITE_SPIP|filtrer_ical)]]
UID:article#ID_ARTICLE @ [(#URL_SITE_SPIP|filtrer_ical)]
DTSTAMP:[(#DATE|date_ical)]
DTSTART:[(#DATE|date_ical)]
DTEND:[(#DATE|date_ical{60})]
CATEGORIES:&lt;:articles|filtrer_ical:&gt;
URL:#URL_SITE_SPIP/#URL_ARTICLE
STATUS:CONFIRMED
END:VEVENT
&lt;/BOUCLE_articles&gt;
&lt;BOUCLE_breves(BREVES){par date}{inverse}{0,100}&gt;
BEGIN:VEVENT
SUMMARY:[(#TITRE|filtrer_ical)] [[(#NOM_SITE_SPIP|filtrer_ical)]]
UID:breve#ID_BREVE @ [(#URL_SITE_SPIP|filtrer_ical)]
DTSTAMP:[(#DATE|date_ical)]
DTSTART:[(#DATE|date_ical)]
DTEND:[(#DATE|date_ical{60})]
CATEGORIES:&lt;:breves|filtrer_ical:&gt;
URL:#URL_SITE_SPIP/#URL_BREVE
STATUS:CONFIRMED
END:VEVENT
&lt;/BOUCLE_breves&gt;
END:VCALENDAR

--- NEW FILE: auteur.php3 ---
&lt;?php
$fond = &quot;auteur&quot;;
$delais = 24 * 3600;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: downloadfile.class.php ---
&lt;?
/*
 * Class has simple interface to download any file from a server
 * without displaying the location of the file
 *
 * Author: Viatcheslav Ivanov, E-Witness Inc., Canada;
 * mail: <A HREF="https://lists.berlios.de/mailman/listinfo/spip-carto-cvs">ivanov at e-witness.ca</A>;
 * web: www.e-witness.ca; www.coolwater.ca; www.strongpost.net;
 * version: 1.1 /08.19.2002
 *
 */

if ( !defined(&quot;DOWNLOADFILE_H&quot;) ) {

	define(&quot;DOWNLOADFILE_H&quot;,1);

	class DOWNLOADFILE {
		var $df_path = &quot;&quot;;
		var $df_contenttype = &quot;&quot;;
		var $df_contentdisposition = &quot;&quot;;
		var $df_filename = &quot;&quot;;

		function DOWNLOADFILE($df_path, $df_contentdisposition = &quot;attachment&quot;, $df_filename = &quot;&quot;) {
			$this-&gt;df_path = $df_path;
			if (!function_exists (&quot;mime_content_type&quot;)) {
 					function mime_content_type ($file) {
  					return exec (&quot;file -bi &quot; . escapeshellcmd($file));
 				}
			}
			$df_contenttype=@mime_content_type($df_path);
			if ($df_contenttype) $this-&gt;df_contenttype = $df_contenttype;
			else $this-&gt;df_contenttype =&quot;&quot;;// &quot;application/octet-stream&quot;;
			$this-&gt;df_contentdisposition = $df_contentdisposition;
			$this-&gt;df_filename = ($df_filename)? $df_filename : basename($df_path);
		}

		// check is specified file exists?
		function df_exists() {
			if(@file_exists($this-&gt;df_path)) return true;
			return false;
		}

		// get file size
		function df_size() {
			if($this-&gt;df_exists()) return filesize($this-&gt;df_path);
			return false;
		}

		// return permission number for user 'other'
		function df_permitother() {
			return substr(decoct(fileperms($this-&gt;df_path)),-1);
		}

		// download file
		function df_download() {
			if($this-&gt;df_exists() &amp;&amp; $this-&gt;df_permitother() &gt;= 4) {
				header(&quot;Content-type: &quot;.$this-&gt;df_contenttype);
				header(&quot;Content-Length: &quot;.$this-&gt;df_size());
				header(&quot;Content-Disposition: &quot;.$this-&gt;df_contentdisposition.&quot;; filename=\&quot;&quot;.$this-&gt;df_filename.&quot;\&quot;;&quot;);
				header(&quot;Content-Transfer-Encoding: binary&quot;);
				$fp = readfile($this-&gt;df_path, &quot;r&quot;);
				return $fp;
				//echo &quot;Content-type: &quot;.$this-&gt;df_contenttype.&quot;Content-Length: &quot;.$this-&gt;df_size().&quot;Content-Disposition: &quot;.$this-&gt;df_contentdisposition.&quot;; filename=\&quot;&quot;.$this-&gt;df_filename.&quot;\&quot;;&quot;;
			}
			else return false;
		}

	}

}

?&gt;
--- NEW FILE: index.php3 ---
&lt;?php include (&quot;sommaire.php3&quot;); ?&gt;

--- NEW FILE: nouveautes-dist.html ---
[[(#NOM_SITE_SPIP|textebrut|texte_script)]] &lt;:nouveautes|texte_script:&gt;

&lt;B0&gt;
&lt;:bonjour|texte_script:&gt;

&lt;:texte_lettre_information|texte_script:&gt; &quot;[(#NOM_SITE_SPIP|textebrut|texte_script)]&quot; (#URL_SITE_SPIP).
&lt;:texte_lettre_information_2|texte_script:&gt; [(#HTTP_VARS{jours_neuf})] &lt;:jours|texte_script:&gt;.

&lt;BOUCLE0(AUTEURS){0,1}&gt;&lt;B_nv1&gt;
          &lt;:nouveaux_articles|texte_script:&gt;
          --------------------------

&lt;BOUCLE_nv1(ARTICLES){age_relatif&lt;=0}{par date}{inverse}{0,30}&gt;
[** (#TITRE|textebrut|texte_script) **]
[par (#LESAUTEURS|textebrut|texte_script)]
[le (#DATE|affdate|texte_script)]

[(#INTRODUCTION|textebrut|texte_script)]

-&gt; #URL_SITE_SPIP/#URL_ARTICLE

&lt;/BOUCLE_nv1&gt;&lt;B_nv2&gt;
          
          &lt;:nouvelles_breves|texte_script:&gt;
          --------------------------

&lt;BOUCLE_nv2(BREVES){age_relatif&lt;=0}{par date}{inverse}{0,30}&gt;
[* (#TITRE|textebrut|texte_script) *]
[ - (#DATE|affdate|texte_script)]

[(#INTRODUCTION|textebrut|texte_script)]

-&gt; #URL_SITE_SPIP/#URL_BREVE

&lt;/BOUCLE_nv2&gt;&lt;/BOUCLE0&gt;
--- NEW FILE: inc-public.php3 ---
&lt;?php

// Page inclue ?
if (defined(&quot;_INC_PUBLIC&quot;)) {
	$page = inclure_page($fond, $delais, $contexte_inclus, $fichier_inclus);

	if ($page['process_ins'] == 'html')
		echo $page['texte'];
	else
		eval('?' . '&gt;' . $page['texte']);

	if ($page['lang_select'])
		lang_dselect();
}
// Premier appel inc-public
else {
	define(&quot;_INC_PUBLIC&quot;, &quot;1&quot;);
	include (&quot;ecrire/inc_version.php3&quot;);

	//
	// Initialisations
	//

	// Regler le $delais par defaut
	if ($INSECURE['fond'] || $INSECURE['delais'])
		exit;
	if (!isset($delais))
		$delais = 1 * 3600;
	if ($recherche)
		$delais = 0;

	// authentification du visiteur
	if ($HTTP_COOKIE_VARS['spip_session'] OR
	($PHP_AUTH_USER AND !$ignore_auth_http)) {
		include_ecrire (&quot;inc_session.php3&quot;);
		verifier_visiteur();
	}
	// multilinguisme
	if ($forcer_lang AND ($forcer_lang!=='non') AND empty($HTTP_POST_VARS)) {
		include_ecrire('inc_lang.php3');
		verifier_lang_url();
	}
	if ($HTTP_GET_VARS['lang']) {
		include_ecrire('inc_lang.php3');
		lang_select($HTTP_GET_VARS['lang']);
	}
	// Ajout_forum (pour les forums) et $val_confirm signalent des modifications
	// a faire avant d'afficher la page
	if ($ajout_forum) {
		$redirect = '';
		include('inc-messforum.php3');
		if ($redirect) redirige_par_entete($redirect);
	}
	if ($val_confirm) {
		include_local('inc-formulaire_signature.php3');
		reponse_confirmation($id_article, $val_confirm);
	}

	include_local ('inc-public-global.php3');

	//  refus du debug si pas dans les options generales ni admin connecte
	if ($var_mode=='debug') {
		if (($code_activation_debug == 'oui')
		OR $auteur_session['statut'] == '0minirezo')
			spip_log('debug !');
		else
			$var_mode = false; 
	}

	// est-on admin ?
	if ($affiche_boutons_admin = (!$flag_preserver
	AND ($HTTP_COOKIE_VARS['spip_admin']
	OR $HTTP_COOKIE_VARS['spip_debug'])))
		include_local('inc-formulaire_admin.php3');

	$tableau_des_erreurs = array();
	$page = afficher_page_globale ($fond, $delais, $use_cache);

	if (!$flag_preserver) {
	// Interdire au client de cacher un login, un admin ou un recalcul
		if ($flag_dynamique OR $var_mode
		OR $HTTP_COOKIE_VARS['spip_admin']) {
			@header(&quot;Cache-Control: no-cache,must-revalidate&quot;);
			@header(&quot;Pragma: no-cache&quot;);
	// Pour les autres donner l'heure de modif
		} else if ($lastmodified)
			@Header (&quot;Last-Modified: &quot;.http_gmoddate($lastmodified).&quot; GMT&quot;);

	// si le squelette est nul se rabattre sur l'entete standard
		if ($page['texte']) 
			@header(&quot;Content-Type: text/html; charset=&quot;.lire_meta('charset'));
		else
			echo debut_entete($fond);
	}
	define('spip_active_ob', $flag_ob AND
		($var_mode == 'debug' OR $var_recherche OR $affiche_boutons_admin));

	// Cas d'une page contenant uniquement du HTML :
	if ($page['process_ins'] == 'html') {
		if (!spip_active_ob) {
			echo $page['texte'];
			$contenu = '';
		} else
			$contenu = $page['texte'];
	}

	// Cas d'une page contenant du PHP :
	else {
		// Evaluer la page
		if (!spip_active_ob) {
			eval('?' . '&gt;' . $page['texte']);
			$contenu = '';
		} else {
			ob_start(); 
			$res = eval('?' . '&gt;' . $page['texte']);
			$contenu = ob_get_contents(); 
			ob_end_clean();

			// en cas d'erreur lors du eval, afficher un message
			// et forcer les boutons de debug
			if ($res === false AND $affiche_boutons_admin
			AND $auteur_session['statut'] == '0minirezo') {
				include_ecrire('inc_debug_sql.php3');
				erreur_squelette(_L('erreur d\'execution de la page'));
			}
		}
	}

	// Passer la main au debuggueur le cas echeant 
	if ($var_mode == 'debug') {
		include_ecrire(&quot;inc_debug_sql.php3&quot;);
		debug_dumpfile('',$var_mode_objet,$var_mode_affiche);
		exit;
	} else if (count($tableau_des_erreurs) &gt; 0
	AND $affiche_boutons_admin)
		affiche_erreurs_page ($tableau_des_erreurs);

	// Traiter var_recherche pour surligner les mots
	if ($var_recherche) {
		include_ecrire(&quot;inc_surligne.php3&quot;);
		$contenu = surligner_mots($contenu, $var_recherche);
	}

	// Ajouter au besoin la CSS des boutons admins
	if ($affiche_boutons_admin) {
		include_local(&quot;inc-admin.php3&quot;);
		$contenu = perso_admin($contenu);
	}

	// Afficher le resultat final
	echo $contenu;

	// Ajouter les boutons admins (les normaux) si absents
	// (ce sera apres la balise /html mais tant pis)
	if ($affiche_boutons_admin)
		inclure_balise_dynamique(balise_formulaire_admin_dyn($id_article, $id_breve, $id_rubrique, $id_mot, $id_auteur));

	// Taches de fin
	terminer_public_global();
 }

?&gt;

--- NEW FILE: inc-messforum.php3 ---
&lt;?php

include_ecrire('inc_meta.php3');
include_ecrire('inc_forum.php3');

// Ce fichier inclus par inc-public a un comportement special
// Voir commentaires dans celui-ci et dans inc-formulaire_forum

function prevenir_auteurs($auteur, $email_auteur, $id_article, $texte, $titre)
{
	include_ecrire('inc_texte.php3');
	include_ecrire('inc_filtres.php3');
	include_ecrire('inc_mail.php3');
	// Gestionnaire d'URLs
	if (@file_exists(&quot;inc-urls.php3&quot;))
	  include_local(&quot;inc-urls.php3&quot;);
	else
	  include_local(&quot;inc-urls-&quot;.$GLOBALS['type_urls'].&quot;.php3&quot;);
	$url = ereg_replace('^/', '', generer_url_article($id_article));
	$adresse_site = lire_meta(&quot;adresse_site&quot;);
	$nom_site_spip = lire_meta(&quot;nom_site&quot;);
	$url = &quot;$adresse_site/$url&quot;;
	$parauteur = (strlen($auteur) &lt;= 2) ? '' :
	  (&quot; &quot;
	   ._T('forum_par_auteur',
	       array('auteur' =&gt; $auteur)) .
	   (!$email_auteur ? '' : (' &lt;' . $email_auteur . '&gt;')));
	$courr =  _T('form_forum_message_auto').&quot;\n\n&quot;
		. _T('forum_poste_par',
		     array('parauteur' =&gt; $parauteur)).&quot;\n&quot;
		. _T('forum_ne_repondez_pas').&quot;\n&quot;
		. $url
		. &quot;\n\n\n&quot;.$titre.&quot;\n\n&quot;.textebrut(propre($texte))
		. &quot;\n\n$nom_site_forum\n$url_site\n&quot;;
	$sujet = &quot;[$nom_site_spip] [&quot;._T('forum_forum').&quot;] $titre&quot;;
	$result = spip_query(&quot;SELECT auteurs.email FROM spip_auteurs AS auteurs,
				spip_auteurs_articles AS lien
				WHERE lien.id_article='$id_article'
				AND auteurs.id_auteur=lien.id_auteur&quot;);

	while (list($email) = spip_fetch_array($result)) {
		$email = trim($email);
		if (strlen($email) &lt; 3) continue;
		envoyer_mail($email, $sujet, $courr);
	}
}	

$retour_forum = rawurldecode($retour);
$forum_id_article = intval($id_article);
$forum_id_rubrique = intval($id_rubrique);
$forum_id_forum = intval($id_forum);
$forum_id_breve = intval($id_breve);
$forum_id_syndic = intval($id_syndic);
$slash_texte = addslashes($texte);
$slash_titre = addslashes($titre);
$slash_nom_site_forum = addslashes($nom_site_forum);
$slash_url_site = addslashes($url_site);
$id_message = intval($id_message);

if (!$id_auteur)
	$id_auteur = intval($auteur_session['id_auteur']);

if ($forum_id_article) {
	$r = spip_query(&quot;SELECT accepter_forum FROM spip_articles WHERE id_article=$forum_id_article&quot;);
	$r = spip_fetch_array($r);
	if ($r)
		$forums_publics = $r['accepter_forum'];
	else
		$forums_publics = lire_meta(&quot;forums_publics&quot;);
} else {
	$forums_publics = substr(lire_meta(&quot;forums_publics&quot;),0,3);
}

if ($forums_publics == &quot;abo&quot;) {
	if ($auteur_session) {
		$statut = $auteur_session['statut'];
		if (!$statut OR $statut == '5poubelle') {
			ask_php_auth(_T('forum_acces_refuse'),
				     _T('forum_cliquer_retour',
					array('retour_forum' =&gt; $retour_forum)));
			exit;		  
		}
	}
	else {
		ask_php_auth(_T('forum_non_inscrit'),
			     _T('forum_cliquer_retour',
				array('retour_forum' =&gt; $retour_forum)));
		exit;		  
	}

	// Ne pas autoriser de changement de nom si forum sur abonnement
	$auteur = $auteur_session['nom'];
	$email_auteur = $auteur_session['email'];
 } 

$slash_auteur = addslashes($auteur);
$slash_email_auteur = addslashes($email_auteur);

if ((strlen($slash_texte) + strlen($slash_titre) + strlen($slash_nom_site_forum) + strlen($slash_url_site) + strlen($slash_auteur) + strlen($slash_email_auteur)) &gt; 20 * 1024) {
	ask_php_auth(_T('forum_message_trop_long'),
		     _T('forum_cliquer_retour',
			array('retour_forum' =&gt; $retour_forum)));
			exit;		  
}

spip_query(&quot;DELETE FROM spip_mots_forum WHERE id_forum='$id_message'&quot;);
if ($ajouter_mot) {
	for (reset($ajouter_mot);$key=key($ajouter_mot);next($ajouter_mot))
		$les_mots .= &quot;,&quot;.join($ajouter_mot[$key],&quot;,&quot;);
	$les_mots = explode(&quot;,&quot;, $les_mots);
	for ($index = 0; $index &lt; count($les_mots); $index++){
		$le_mot = $les_mots[$index];
		if ($le_mot &gt; 0)
		spip_query(&quot;INSERT INTO spip_mots_forum (id_mot, id_forum)
		VALUES ('$le_mot', '$id_message')&quot;);
	}
}

$validation_finale = (strlen($confirmer) &gt; 0 OR
	($afficher_texte=='non' AND $ajouter_mot));
$statut = ((!$validation_finale) ? 'redac' : 
	(($forums_publics == 'non') ? 'off' :
	(($forums_publics == 'pri') ? 'prop' : 'publie')));

if ($forum_id_forum &gt; 0) $id_thread = $forum_id_forum;
else $id_thread = $id_message;

spip_query(&quot;UPDATE spip_forum SET id_parent = $forum_id_forum,
	id_rubrique =$forum_id_rubrique,
	id_article = $forum_id_article,
	id_breve = $forum_id_breve,
	id_syndic = $forum_id_syndic,
	id_auteur = $id_auteur,
	id_thread = $id_thread,
	date_heure = NOW(),
	titre = \&quot;$slash_titre\&quot;,
	texte = \&quot;$slash_texte\&quot;,
	nom_site = \&quot;$slash_nom_site_forum\&quot;,
	url_site = \&quot;$slash_url_site\&quot;,
	auteur = \&quot;$slash_auteur\&quot;,
	email_auteur = \&quot;$slash_email_auteur\&quot;,
	ip = \&quot;$REMOTE_ADDR\&quot;,
	statut = \&quot;$statut\&quot;
	WHERE id_forum = '$id_message'
&quot;);

//calculer_threads();

if ($validation_finale) {
	include_ecrire(&quot;inc_admin.php3&quot;);
	if (!(verifier_action_auteur(&quot;ajout_forum $forum_id_rubrique&quot;.
	&quot; $forum_id_forum $forum_id_article $forum_id_breve&quot;.
	&quot; $forum_id_syndic $alea&quot;, $hash))) {
		header(&quot;Status: 404&quot;);
		exit;
	} else {
	  if (lire_meta(&quot;prevenir_auteurs&quot;) == &quot;oui&quot; AND ($afficher_texte != &quot;non&quot;) AND ($id_article = $forum_id_article)) {
			prevenir_auteurs($auteur, $email_auteur, $id_article, $texte, $titre);

		}
		// Poser un cookie pour ne pas retaper le nom / email
		$cookie_user = array('nom' =&gt; $auteur, 'email' =&gt; $email_auteur);
		spip_setcookie('spip_forum_user', serialize($cookie_user));

		//
		// INVALIDATION DES CACHES LIES AUX FORUMS
		//
		include_ecrire('inc_invalideur.php3');
		if ($statut == 'publie') {
			suivre_invalideur (&quot;id='id_forum/&quot; .
				calcul_index_forum($forum_id_article,
					$forum_id_breve,
					$forum_id_rubrique,
					$forum_id_syndic) . &quot;'&quot;);
		}

		$redirect = $retour_forum;
	}
}

?&gt;

--- NEW FILE: distrib.php3 ---
&lt;?php
$fond = &quot;distrib&quot;;
$delais = 3600;

// cette ligne empeche l'affichage des boutons d'administration
$flag_preserver = true;

include (&quot;inc-public.php3&quot;);

?&gt;
--- NEW FILE: inc-cache.php3 ---
&lt;?php

//
// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_CACHE&quot;)) return;
define(&quot;_INC_CACHE&quot;, &quot;1&quot;);


//
// Calcul du nom du fichier cache
//

function nettoyer_uri() {
	$fichier_requete = $GLOBALS['REQUEST_URI'];
	$fichier_requete = eregi_replace
		('[?&amp;](PHPSESSID|(var_[^=&amp;]*))=[^&amp;]*',
		'', $fichier_requete);
	return $fichier_requete;
}

//
// Le format souhaite : &quot;CACHE/a/(8400/)bout-d-url.md5(.gz)&quot;
// Attention a modifier simultanement le sanity check de
// la fonction retire_cache()
//
function generer_nom_fichier_cache($contexte='', $fond='') {
	global $delais;
	global $flag_gz, $compresser_cache;

	if ($delais == 0) return '';

	if (!$contexte) {
		$fichier_requete = nettoyer_uri();
	} else {
		$fichier_requete = $fond;
		foreach ($contexte as $var=&gt;$val)
			$fichier_requete .= &quot;&amp;$var=$val&quot;;
	}

	$md_cache = md5($fichier_requete);

	$fichier_cache = ereg_replace('^/+', '', $fichier_requete);
	$fichier_cache = ereg_replace('\.[a-zA-Z0-9]*', '', $fichier_cache);
	$fichier_cache = ereg_replace('&amp;[^&amp;]+=([^&amp;]+)', '&amp;\1', $fichier_cache);
	$fichier_cache = rawurlencode(strtr($fichier_cache, '/&amp;-', '--_'));
	if (strlen($fichier_cache) &gt; 24)
		$fichier_cache = substr(ereg_replace('([a-zA-Z]{1,3})[^-]*-',
		'\1-', $fichier_cache), -22);

	// Pour la page d'accueil
	if (!$fichier_cache)
		$fichier_cache = 'INDEX-';

	// morceau de md5
	$fichier_cache .= '.'.substr($md_cache, 1, 8);

	// Sous-repertoires 0...9a..f/
	$subdir = creer_repertoire(_DIR_CACHE, substr($md_cache, 0, 1));
	// Sous-sous-repertoires delais/ (inutile avec l'invalidation par 't')
	# $subdir2 = creer_repertoire(&quot;CACHE/$subdir&quot;, $delais);

	include_ecrire('inc_acces.php3');
	verifier_htaccess(_DIR_CACHE);

	$gzip = $flag_gz &amp;&amp; $compresser_cache ? '.gz' : '';

	return _DIR_CACHE . $subdir.$subdir2.$fichier_cache.$gzip;
}

//
// Destruction des fichiers caches invalides
//
// NE PAS appeler ces fonctions depuis l'espace prive 
// car openbase_dir peut leur interdire l'acces au repertoire de cache

// Securite : est sur que c'est un cache
function retire_cache($cache) {
	if ($GLOBALS['flag_ecrire']) return;
	if (preg_match('|^' . _DIR_CACHE .
		&quot;([0-9a-f]/)?([0-9]+/)?[^.][\-_\%0-9a-z]+\.[0-9a-f]+(\.gz)?$|i&quot;,
		       $cache)) {
		// supprimer le fichier (de facon propre)
		supprimer_fichier($cache);
	} else
		spip_log(&quot;Impossible de retirer $cache&quot;);
}

// Supprimer les caches marques &quot;x&quot;
function retire_caches() {
	if ($GLOBALS['flag_ecrire']) return;

	// signaler
	effacer_meta('invalider');
	ecrire_metas();

	// recuperer la liste des caches voues a la suppression
	$suppr = array();
	$q = spip_query(&quot;SELECT fichier FROM spip_caches WHERE type='x'&quot;);
	while ($r = spip_fetch_array($q))
		$suppr[$r['fichier']] = true;

	if ($n = count($suppr)) {
		spip_log (&quot;Retire $n caches&quot;);
		foreach ($suppr as $cache =&gt; $ignore)
			retire_cache($cache);
		spip_query(&quot;DELETE FROM spip_caches WHERE &quot;
		.calcul_mysql_in('fichier', &quot;'&quot;.join(&quot;','&quot;,$suppr).&quot;'&quot;) );
	}
}

//
// Retourne 0 s'il faut calculer le cache, 1 si on peut l'utiliser
//
function utiliser_cache($chemin_cache, $delais) {
	global $HTTP_SERVER_VARS;

	// ne jamais calculer pour les moteurs de recherche, proxies...
	if ($HTTP_SERVER_VARS['REQUEST_METHOD'] == 'HEAD')
		return 1;

	//  calcul par forcage
	if ($GLOBALS['var_mode'] &amp;&amp;
		($GLOBALS['HTTP_COOKIE_VARS']['spip_session']
		|| $GLOBALS['HTTP_COOKIE_VARS']['spip_admin']
		|| @file_exists(_ACCESS_FILE_NAME))) # insuffisant...
		return 0;

	// calcul par absence
	if (!@file_exists($chemin_cache)) return 0;

	// calcul par obsolescence
	return ((time() - @filemtime($chemin_cache)) &gt; $delais) ? 0 : 1;
}


// Obsolete ?  Utilisee pour vider le cache depuis l'espace prive
// (ou juste les squelettes si un changement de config le necessite)
function purger_repertoire($dir, $age='ignore', $regexp = '') {
	$handle = @opendir($dir);
	if (!$handle) return;

	while (($fichier = @readdir($handle)) != '') {
		// Eviter &quot;.&quot;, &quot;..&quot;, &quot;.htaccess&quot;, etc.
		if ($fichier[0] == '.') continue;
		if ($regexp AND !ereg($regexp, $fichier)) continue;
		$chemin = &quot;$dir/$fichier&quot;;
		if (is_file($chemin))
			@unlink($chemin);
		else if (is_dir($chemin))
			if ($fichier != 'CVS')
				purger_repertoire($chemin);
	}
	closedir($handle);
}

function purger_cache() {
	spip_log('vider le cache');
	include_ecrire('inc_invalideur.php3');
	supprime_invalideurs();
	purger_repertoire(_DIR_CACHE, 0);
}

function purger_squelettes() {
	spip_log('effacer les squelettes compiles');
	purger_repertoire(_DIR_CACHE, 0, '^skel_');
}


// Determination du fichier cache (si besoin)
function determiner_cache($delais, &amp;$use_cache, &amp;$chemin_cache) {

	// Le fichier cache est-il valide ?
	if ($delais == 0 OR !empty($GLOBALS['HTTP_POST_VARS'])) {
		$use_cache = 0;
		$chemin_cache = '';
	} else {
		$use_cache = utiliser_cache($chemin_cache, $delais);
	}

	// Sinon, tester qu'on a la connexion a la base
	if (!$use_cache) {
		include_local(_FILE_CONNECT);
		if (!$GLOBALS['db_ok']) {
			if ($chemin_cache AND @file_exists($chemin_cache)) {
				$use_cache = 1;
			}
			else {
				spip_log(&quot;Erreur base de donnees &amp; &quot;
					. &quot;impossible utiliser $chemin_cache&quot;);
				if (!$GLOBALS['flag_preserver']) {
					include_ecrire('inc_presentation.php3');
					install_debut_html(_T('info_travaux_titre'));
					echo _T('titre_probleme_technique');
					install_fin_html();
				}
				exit;
			}
		}
	}
}

?&gt;

--- NEW FILE: sommaire_texte-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;html lang=&quot;#LANG&quot;&gt;
&lt;!--
// ACCESSIBILITE
// la page /oo offre une lecture en mode &quot;texte seul&quot;
// des 3 articles les plus recents.
--&gt;
&lt;head&gt;
	&lt;title&gt;
		#NOM_SITE_SPIP
	&lt;/title&gt;
	&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;
	&lt;meta http-equiv=&quot;AUTHOR&quot; content=&quot;#NOM_SITE_SPIP&quot;&gt;
	&lt;meta http-equiv=&quot;DESCRIPTION&quot; content=&quot;Edition en mode texte de #NOM_SITE_SPIP&quot;&gt;
&lt;/head&gt;
&lt;body dir=&quot;#LANG_DIR&quot;&gt;
	&lt;hr /&gt;
	&lt;:edition_mode_texte:&gt; &lt;a href=&quot;#URL_SITE_SPIP&quot;&gt;{#NOM_SITE_SPIP}&lt;/a&gt;
	&lt;hr /&gt;
	&lt;b&gt;&lt;u&gt;Sommaire de la page :&lt;/u&gt;&lt;/b&gt;

	&lt;B_sarticles&gt;
	&lt;h2&gt;Articles&lt;/h2&gt;
	&lt;ul&gt;
		&lt;BOUCLE_sarticles(ARTICLES){0,3}{par date}{inverse}&gt;
			&lt;li&gt;&lt;a href=&quot;#ar#ID_ARTICLE&quot;&gt;#TITRE&lt;/a&gt;
		&lt;/BOUCLE_sarticles&gt;
	&lt;/ul&gt;
	&lt;/B_sarticles&gt;

	&lt;B_sbreves&gt;
	&lt;h2&gt;Br&egrave;ves&lt;/h2&gt;
	&lt;ul&gt;
		&lt;BOUCLE_sbreves(BREVES){0,5}{par date}{inverse}&gt;
			&lt;li&gt;&lt;a href=&quot;#br#ID_BREVE&quot;&gt;#TITRE&lt;/a&gt;
		&lt;/BOUCLE_sbreves&gt;
	&lt;/ul&gt;
	&lt;/B_sbreves&gt;


	&lt;B_articles&gt;
	&lt;h1&gt;Articles r&eacute;cents&lt;/h1&gt;

	&lt;BOUCLE_articles(ARTICLES){0,3}{par date}{inverse}&gt;
		&lt;a name=&quot;ar#ID_ARTICLE&quot;&gt;&lt;/a&gt;
		&lt;BOUCLE_RUB_AR(RUBRIQUES){ID_RUBRIQUE}&gt;
			Rubrique : &lt;a href=&quot;#URL_RUBRIQUE&quot;&gt;{#TITRE}&lt;/a&gt;
		&lt;/BOUCLE_RUB_AR&gt;

		[&lt;h2&gt;(#SURTITRE|majuscules)&lt;/h2&gt;]
		&lt;h2&gt;#TITRE&lt;/h2&gt;
		&lt;h3&gt;#SOUSTITRE&lt;/h3&gt;
		[Le (#DATE|nom_jour) ] [(#DATE|affdate)]
		[par (#LESAUTEURS)]
		&lt;p&gt;
		[(#CHAPO)]
		&lt;p&gt;
		[(#TEXTE)]

		
		&lt;p&gt;&lt;a href=&quot;#URL_ARTICLE&quot;&gt;{Consulter}&lt;/a&gt; l'article avec son forum. 

		
		&lt;hr /&gt;
	&lt;/BOUCLE_articles&gt;

	&lt;B_breves&gt;
	&lt;h1&gt;Derni&egrave;res br&egrave;ves&lt;/h1&gt;

	&lt;BOUCLE_breves(BREVES){0,5}{par date}{inverse}&gt;
		&lt;a name=&quot;br#ID_BREVE&quot;&gt;
		&lt;BOUCLE_RUB_BR(RUBRIQUES){ID_RUBRIQUE}&gt;
			Rubrique : &lt;a href=&quot;#URL_RUBRIQUE&quot;&gt;{#TITRE}&lt;/a&gt;
		&lt;/BOUCLE_RUB_BR&gt;
		&lt;h2&gt;#TITRE&lt;/h2&gt;
		[Le (#DATE|nom_jour) ] [(#DATE|affdate)]
		&lt;p&gt;
		[(#TEXTE)]
		[&lt;p&gt;Voir en ligne : &lt;a href=&quot;(#URL_SITE)&quot;&gt;#NOM_SITE&lt;/a&gt;]
		&lt;p&gt;&lt;a href=&quot;#URL_BREVE&quot;&gt;{Consulter}&lt;/a&gt; la br&egrave;ve avec son forum. 
	&lt;hr /&gt;
	&lt;/BOUCLE_breves&gt;
	[&lt;h1&gt;NOTES :&lt;/h1&gt;
	&lt;p class=&quot;spip_note&quot;&gt;(#NOTES)]
	
	&lt;hr /&gt;
	&lt;a name=&quot;about&quot;&gt;&lt;/a&gt;
	
	[&lt;p&gt;Rechercher sur ce site : (#FORMULAIRE_RECHERCHE|recherche.php3)&lt;/p&gt;]
	&lt;table&gt;&lt;tr&gt;
		&lt;td&gt;&lt;A href=&quot;<A HREF="http://www.uzine.net/spip">http://www.uzine.net/spip</A>&quot;&gt;{Site r&eacute;alis&eacute; avec le logiciel SPIP}&lt;/td&gt;
		[&lt;td&gt;&lt;A href=&quot;#URL_SITE_SPIP&quot;&gt;{(#NOM_SITE_SPIP|majuscules)}&lt;/a&gt;&lt;/td&gt;]
		&lt;td&gt;&lt;a href=&quot;#URL_SITE_SPIP/plan.php3&quot;&gt;{&lt;:plan_site:&gt;}&lt;/a&gt;&lt;/td&gt;
	&lt;/tr&gt;&lt;/table&gt;

&lt;/body&gt;
&lt;/html&gt;

--- NEW FILE: mot-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;BOUCLE_mot_principal(MOTS) {id_mot} {doublons}&gt;

&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[(#TITRE|textebrut)]&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;projection, screen, tv&quot;&gt;
&lt;!-- media=&quot;print&quot; permet d'utiliser cette feuille de style quand vous imprimez depuis votre navigateur --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;impression.css&quot; type=&quot;text/css&quot; media=&quot;print&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;

&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;


&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]


&lt;!-- Menu de navigation mots-cles : les autres mots cles du meme groupe--&gt;

&lt;B_mots_freres&gt;
&lt;h2 class=&quot;structure&quot;&gt;&lt;:mots_clefs_meme_groupe:&gt;&lt;/h2&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;div class=&quot;divers&quot;&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;BOUCLE_groupe(GROUPES_MOTS) {id_groupe} {doublons}&gt;#TITRE&lt;/BOUCLE_groupe&gt;&lt;/div&gt;
	&lt;ul class=&quot;menu-liste&quot;&gt;
&lt;BOUCLE_mots_freres(MOTS) {type} {doublons} {par titre}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_MOT&quot; title=&quot;[(#DESCRIPTIF|textebrut|entites_html)]&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_mots_freres&gt;
	&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/B_mots_freres&gt;


&lt;!-- Menu de navigation mots-cles : les autres groupes avec un lien sur le premier mot du groupe --&gt;

&lt;B_groupes_freres&gt;
&lt;h2 class=&quot;structure&quot;&gt;&lt;:autres_groupes_mots_clefs:&gt;&lt;/h2&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;div class=&quot;divers&quot;&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;:autres_groupes_mots_clefs:&gt;&lt;/div&gt;
	&lt;ul class=&quot;menu-liste&quot;&gt;
&lt;BOUCLE_groupes_freres(GROUPES_MOTS) {par titre} {doublons}&gt;
&lt;BOUCLE_mot_cousin(MOTS) {id_groupe} {par titre} {0,1}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_MOT&quot;&gt;#TYPE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_mot_cousin&gt;
&lt;/BOUCLE_groupes_freres&gt;
	&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/B_groupes_freres&gt;


&lt;/div&gt;

&lt;!-- Une : contenu du mot-cle --&gt;

&lt;div class=&quot;contenu&quot; id=&quot;principal&quot;&gt;

&lt;div class=&quot;cartouche&quot;&gt;
[(#LOGO_MOT|left)]
&lt;h1 class=&quot;titre-texte&quot;&gt;#TITRE&lt;/h1&gt;
&lt;/div&gt;

	&lt;div class=&quot;encart&quot;&gt;

	&lt;!-- Rubriques liees au mot-cle --&gt;

	&lt;B_rubriques&gt;
	&lt;h2 class=&quot;structure&quot;&gt;&lt;:rubriques:&gt;&lt;/h2&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;rubriques&quot;&gt;
	&lt;div class=&quot;menu-titre&quot;&gt;&lt;:rubriques:&gt;&lt;/div&gt;
		&lt;ul class=&quot;menu-liste&quot;&gt;
	&lt;BOUCLE_rubriques(RUBRIQUES) {id_mot} {par titre}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
	&lt;/BOUCLE_rubriques&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_rubriques&gt;

	&lt;!-- Breves liees au mot-cle --&gt;

	&lt;B_breves&gt;
	&lt;h2 class=&quot;structure&quot;&gt;&lt;:breves:&gt;&lt;/h2&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;breves&quot;&gt;
	&lt;div class=&quot;menu-titre&quot;&gt;&lt;:breves:&gt;&lt;/div&gt;
		&lt;ul class=&quot;menu-liste&quot;&gt;
	&lt;BOUCLE_breves(BREVES) {id_mot} {par titre}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
	&lt;/BOUCLE_breves&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_breves&gt;

	&lt;!-- Sites Web lies au mot-cle --&gt;

	&lt;B_sites&gt;
	&lt;h2 class=&quot;structure&quot;&gt;&lt;:sites_web:&gt;&lt;/h2&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;breves&quot;&gt;
	&lt;div class=&quot;menu-titre&quot;&gt;&lt;:sites_web:&gt;&lt;/div&gt;
		&lt;ul class=&quot;menu-liste&quot;&gt;
	&lt;BOUCLE_sites(SITES) {id_mot} {par nom_site}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_SITE&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
	&lt;/BOUCLE_sites&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_sites&gt;

	&lt;/div&gt;

[&lt;div class=&quot;chapo&quot;&gt;(#TEXTE)&lt;/div&gt;]
[&lt;div class=&quot;notes&quot;&gt;(#NOTES)&lt;/div&gt;]


&lt;!-- Articles lies au mot-cle --&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:articles:&gt;&lt;/h1&gt;

&lt;div class=&quot;liste-articles&quot;&gt;

&lt;BOUCLE_articles(ARTICLES) {id_mot} {par titre}&gt;
	&lt;h2&gt;&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;B_auteurs&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs&gt;
	&lt;/div&gt;
	&lt;br&gt;
&lt;/BOUCLE_articles&gt;

&lt;/div&gt;
&lt;/div&gt;
#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;
&lt;/BOUCLE_mot_principal&gt;
&lt;//B_mot_principal&gt;

--- NEW FILE: forum-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[#NOM_SITE_SPIP] &lt;:poster_message:&gt;&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;print, projection, screen, tv&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;


&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;/div&gt;


&lt;!-- Contenu : poster un message dans le forum --&gt;

&lt;div id=&quot;principal&quot; class=&quot;contenu&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:poster_message:&gt;&lt;/h1&gt;

&lt;BOUCLE_article(ARTICLES) {id_article}&gt;
	&lt;:en_reponse:&gt;
	[(#LOGO_ARTICLE|right)]
	[&lt;div class=&quot;surtitre&quot;&gt;(#SURTITRE)&lt;/div&gt;]
	&lt;h2 class=&quot;titre-extrait&quot;&gt;&lt;a href=&quot;#URL_ARTICLE&quot;&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	[&lt;div class=&quot;surtitre&quot;&gt;(#SOUSTITRE)&lt;/div&gt;]
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;B_auteurs_un&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs_un(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs_un&gt;
	&lt;/div&gt;
	[&lt;div class=&quot;texte&quot;&gt;&lt;div class=&quot;extrait&quot;&gt;(#INTRODUCTION)&lt;/div&gt;&lt;/div&gt;]
	&lt;br&gt;
&lt;/BOUCLE_article&gt;

&lt;BOUCLE_breve(BREVES) {id_breve}&gt;
	&lt;:en_reponse:&gt;
	[(#LOGO_BREVE|right)]
	&lt;h2 class=&quot;titre-extrait&quot;&gt;&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;/div&gt;
	[&lt;div class=&quot;texte&quot;&gt;&lt;div class=&quot;extrait&quot;&gt;(#INTRODUCTION)&lt;/div&gt;&lt;/div&gt;]
	&lt;br&gt;
&lt;/BOUCLE_breve&gt;

&lt;BOUCLE_forum_parent(FORUMS) {id_forum}&gt;
	&lt;:en_reponse:&gt;
	&lt;h2 class=&quot;titre-extrait&quot;&gt;&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;/div&gt;
	[&lt;div class=&quot;texte&quot;&gt;&lt;div class=&quot;extrait&quot;&gt;(#TEXTE)&lt;/div&gt;&lt;/div&gt;]
	&lt;br&gt;
&lt;/BOUCLE_forum_parent&gt;


#FORMULAIRE_FORUM


&lt;/div&gt;

#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;



--- NEW FILE: htaccess-propres.txt ---
###########################################################
# Fichier .htaccess pour les URLs propres ; a installer   #
# si vous reglez $type_urls='propre'                      #
# dans ecrire/mes_options.php3 ou dans mes_fonctions.php3 #
# (fichier associe : inc-urls-propres.php3)               #
###########################################################

RewriteEngine On

### si votre site est en sous-domaine, preciser ci-dessous
# RewriteBase /sous/domaine/

# Rediriger les mots et breves sans le &quot;+&quot; final
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(\+[^/\.\+]+)$ /$1+ [QSA,R]

# Les mots-cles
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^\+-[^/\.]+-\+$ mot.php3 [QSA,E=url_propre:$0]

# Les breves
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^\+[^/\.]+\+$ breve.php3 [QSA,E=url_propre:$0]

# Les rubriques
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^-[^/\.]+-$ rubrique.php3 [QSA,E=url_propre:$0]

# Les articles
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^[^/\.]+$ article.php3 [QSA,E=url_propre:$0]

--- NEW FILE: recherche.php3 ---
&lt;?php
$fond = &quot;recherche&quot;;
$delais = 0;

include (&quot;inc-public.php3&quot;);


?&gt;

--- NEW FILE: inc-formulaire_recherche.php3 ---
&lt;?php

global $balise_FORMULAIRE_RECHERCHE_collecte;
$balise_FORMULAIRE_RECHERCHE_collecte = array();

function balise_FORMULAIRE_RECHERCHE_stat($args, $filtres)
{
  return (lire_meta(&quot;activer_moteur&quot;) != &quot;oui&quot;) ? '' : array($filtres[0]);
}
 
function balise_FORMULAIRE_RECHERCHE_dyn($lien) {
	return array('formulaire_recherche', 3600, 
		     array('lien' =&gt; ($lien ? $lien : 'recherche.php3'),
			   'recherche' =&gt; ($GLOBALS['recherche'] ? $GLOBALS['recherche'] : _T('info_rechercher'))));
}

?&gt;
--- NEW FILE: spip_test_dirs.php3 ---
&lt;?php
if (defined(&quot;_TEST_DIRS&quot;)) return;
define(&quot;_TEST_DIRS&quot;, &quot;1&quot;);

include(&quot;ecrire/inc_version.php3&quot;);

include_ecrire(&quot;inc_presentation.php3&quot;);

utiliser_langue_visiteur();


//
// Tente d'ecrire
//
function test_ecrire($my_dir) {
	$ok = true;
	$nom_fich = &quot;$my_dir/test.txt&quot;;
	$f = @fopen($nom_fich, &quot;w&quot;);
	if (!$f) $ok = false;
	else if (!@fclose($f)) $ok = false;
	else if (!@unlink($nom_fich)) $ok = false;
	return $ok;
}

//
// teste les droits sur les repertoires $test_dirs declares dans inc_version
//

// rajouter celui passer dans l'url ou celui du source (a l'installation)

if ($test_dir) {
  if (!ereg(&quot;/$&quot;, $test_dir)) $test_dir .= '/';
  if (!in_array($test_dir, $test_dirs)) $test_dirs[] = $test_dir;
 }
else {
	if (!_FILE_CONNECT)
	  $test_dirs[] = dirname(_FILE_CONNECT_INS);
}

unset($bad_dirs);
unset($absent_dirs);

while (list(, $my_dir) = each($test_dirs)) {
	if (!test_ecrire($my_dir)) {
		@umask(0);
		if (@file_exists($my_dir)) {
			@chmod($my_dir, 0777);
			// ???
			if (!test_ecrire($my_dir))
				@chmod($my_dir, 0775);
			if (!test_ecrire($my_dir))
				@chmod($my_dir, 0755);
			if (!test_ecrire($my_dir))
				$bad_dirs[] = &quot;&lt;LI&gt;&quot;.$my_dir;
		} else
			$absent_dirs[] = &quot;&lt;LI&gt;&quot;.$my_dir;
	}
}

if ($bad_dirs OR $absent_dirs) {
	install_debut_html();

	if (!_FILE_CONNECT) {
		$titre = _T('dirs_preliminaire');
		$continuer = ' '._T('dirs_commencer');
	} else
		$titre = _T('dirs_probleme_droits');

	$bad_url = &quot;spip_test_dirs.php3&quot;;
	if ($test_dir) $bad_url .= '?test_dir='.$test_dir;

	echo &quot;&lt;FONT FACE=\&quot;Verdana,Arial,Helvetica,sans-serif\&quot; SIZE=3&gt;$titre&lt;/FONT&gt;\n&lt;p&gt;&quot;;
	echo &quot;&lt;div align='right'&gt;&quot;. menu_langues('var_lang_ecrire').&quot;&lt;/div&gt;\n&quot;;

	if ($bad_dirs) {
		echo &quot;&lt;p&gt;&quot;;
		echo _T('dirs_repertoires_suivants',
			array('bad_dirs' =&gt; join(&quot; &quot;, $bad_dirs)));
		echo &quot;&lt;B&gt;&quot;. _T('login_recharger').&quot;&lt;/b&gt;&quot;;
	}

	if ($absent_dirs) {
		echo &quot;&lt;p&gt;&quot;;
		echo _T('dirs_repertoires_absents',
			array('bad_dirs' =&gt; join(&quot; &quot;, $absent_dirs)));
		echo &quot;&lt;B&gt;&quot;. _T('login_recharger').&quot;&lt;/b&gt;&quot;;
	}

	echo $continuer.'. ';
	echo aide (&quot;install0&quot;);
	echo &quot;&lt;p&gt;&quot;;

	echo &quot;&lt;FORM ACTION='$bad_urls' METHOD='GET'&gt;\n&quot;;
	echo &quot;&lt;DIV align='right'&gt;&lt;INPUT TYPE='submit' CLASS='fondl' VALUE='&quot;. _T('login_recharger').&quot;'&gt;&lt;/DIV&gt;&quot;;
	echo &quot;&lt;/FORM&gt;&quot;;

	install_fin_html();

} else {
	if (!_FILE_CONNECT)
		header(&quot;Location: &quot; . _DIR_RESTREINT_ABS . &quot;install.php3?etape=1&quot;);
	else
		header(&quot;Location: &quot; . _DIR_RESTREINT_ABS);
}

?&gt;

--- NEW FILE: formulaire_menu_lang-dist.html ---
&lt;form	action='[(#HTTP_VARS{url})]'
	method='post'
	style='margin:0px; padding:0px;'&gt;[
	&lt;input type='hidden' name='url' value='(#HTTP_VARS{cible})' /&gt;
]	&lt;select	name='[(#HTTP_VARS{nom})]' 
		class='forml'
		style='vertical-align: top; max-height: 24px; margin-bottom: 5px; width: 120px;'
		onchange=&quot;document.location.href='[(#HTTP_VARS{retour})]&amp;[(#HTTP_VARS{nom})]='+this.options[this.selectedIndex].value&quot;&gt;
		[(#HTTP_VARS*{langues})]
      &lt;/select&gt;
      &lt;noscript&gt;
	&lt;input type='submit' value='&gt;&gt;' class='spip_bouton' /&gt;
      &lt;/noscript&gt;
&lt;/form&gt;

--- NEW FILE: inc-formulaire_site.php3 ---
&lt;?php

global $balise_FORMULAIRE_SITE_collecte;
$balise_FORMULAIRE_SITE_collecte = array('id_rubrique', 'nom_site', 'url_site', 'description_site');

function balise_FORMULAIRE_SITE_stat($args, $filtres)
{
  return ((lire_meta(&quot;proposer_sites&quot;) != 2) ? '' : $args);
}

function balise_FORMULAIRE_SITE_dyn($id_rubrique, $nom_site, $url_site, $description_site) {

	if (!$nom_site) return array('formulaire_site', 0);

	// Tester le nom du site
	if (strlen ($nom_site) &lt; 2){
		return _T('form_prop_indiquer_nom_site');
	}

	// Tester l'URL du site
	include_ecrire(&quot;inc_sites.php3&quot;);
	if (!recuperer_page($url_site)) {
		return _T('form_pet_url_invalide');
	}

	// Integrer a la base de donnees
		
	$nom_site = addslashes($nom_site);
	$url_site = addslashes($url_site);
	$description_site = addslashes($description_site);
			
	spip_query(&quot;INSERT INTO spip_syndic (nom_site, url_site, id_rubrique, descriptif, date, date_syndic, statut, syndication) VALUES ('$nom_site', '$url_site', $id_rubrique, '$description_site', NOW(), NOW(), 'prop', 'non')&quot;);
	return  _T('form_prop_enregistre');
}
?&gt;

--- NEW FILE: project.index ---
ecrire/inc_base.php3	d_ECRIRE_INC_BASE	o100	fspip_create_table	o556	fcreer_base	o1062	g$tables_principales	o1085	g$tables_auxiliaires	o1106	fstripslashes_base	o3887
ecrire/inc_invalideur.php3	d_ECRIRE_INVALIDEUR	o99	fsupprime_invalideurs	o177	fmaj_invalideurs	o307	finsere_invalideur	o1214	fsuivre_invalideur	o1612	fretire_vieux_caches	o1913	fapplique_invalideur	o2094
ecrire/inc.php3	g$spip_lang_ecrire	o401	g$GLOBALS	o421	g$spip_lang_ecrire	o474	g$auteur_session	o495	g$spip_lang_ecrire	o538	g$spip_lang_ecrire	o619	g$auteur_session	o684	g$spip_lang_ecrire	o710	g$auteur_session	o746	g$spip_session	o763	g$set_couleur	o786	g$prefs	o803	g$set_couleur	o829	g$prefs_mod	o845	g$set_disp	o870	g$prefs	o884	g$set_disp	o910	g$prefs_mod	o923	g$set_options	o948	g$set_options	o978	g$prefs	o1009	g$set_options	o1029	g$prefs_mod	o1044	g$prefs_mod	o1069	g$prefs	o1153	g$set_ecran	o1212	g$set_ecran	o1339	g$spip_ecran	o1379	g$set_ecran	o1393	g$spip_ecran	o1412	g$spip_ecran	o1425	g$debloquer_article	o1477	g$debloquer_article	o1504	g$where_id	o1536	g$debloquer_article	o1573	g$query	o1595	g$query	o1710	g$options	o1766	g$prefs	o1782	g$spip_display	o1801	g$prefs	o1817	g$couleurs_spip	o1851	g$couleurs_spip	o1870	g$couleurs_spip	o2053	g$couleurs_spip	o2072	g$couleurs_spip	o2249	g$couleurs_spip	o2268	g$couleurs_spip	o2445	g$couleurs_spip	o2464	g$couleurs_spip	o2649	g$c!
 ouleurs_spip	o2668	g$couleurs_spip	o2844	g$couleurs_spip	o2863	g$choix_couleur	o3027	g$prefs	o3044	g$couleurs_spip	o3074	g$choix_couleur	o3089	g$choix_couleur	o3129	g$couleur_foncee	o3150	g$couleurs_spip	o3168	g$choix_couleur	o3183	g$couleur_claire	o3218	g$couleurs_spip	o3236	g$choix_couleur	o3251	g$couleur_lien	o3286	g$couleurs_spip	o3302	g$choix_couleur	o3317	g$couleur_lien_off	o3350	g$couleurs_spip	o3370	g$choix_couleur	o3385	g$version_installee	o3452	g$version_installee	o3518	g$spip_version	o3540	g$version_installee	o3578	g$version_installee	o3598	g$adresse_site	o3998	g$nom_site_spip	o4016	g$adresse_site	o4057	g$activer_breves	o4107	g$activer_breves	o4126	g$articles_mots	o4174	g$activer_statistiques	o4227	g$activer_statistiques	o4252	g$nom_site_spip	o4319	g$nom_site_spip	o4338	g$nom_site_spip	o4406	g$adresse_site	o4448	g$adresse_site	o4466	g$REQUEST_URI	o4509	g$REQUEST_URI	o4533	g$adresse_site	o4589	ftester_rubrique_vide	o4635	g$cookie_admin	o5718	g$HTTP_COOKIE_VARS	o57!
 34	g$supp_rubrique	o5794	g$supp_rubrique	o5818	g$connect_statut	o5838	
g$supp_rubrique	o5888	g$query	o5908	g$result	o5981	g$query	o6002	g$controle_forum	o6058	g$id_controle_forum	o6078	g$hash	o6201	g$connect_id_auteur	o6208	g$controle_forum	o6240	g$id_controle_forum	o6306	g$id_controle_forum	o6397	g$id_controle_forum	o6488
oo/index.php3
backend.php3	g$fond	o6	g$delais	o25	g$flag_preserver	o130
ecrire/lang_raccourcis.php3	g$module	o37	g$module	o46	g$modules	o289	g$d	o315	g$f	o356	g$d	o369	g$f	o408	g$regs	o412	g$nom_module	o422	g$regs	o436	g$nom_module	o469	g$spip_lang	o507	g$nom_module	o523	g$reps	o536	g$modules	o547	g$reps	o560	g$d	o581	g$modules	o597	g$modules	o806	g$nom_module	o832	g$modules	o852	g$nom_module	o871	g$module	o886	fafficher_raccourcis	o1197	g$spip_lang	o1247	g$couleur_foncee	o1267	g$module	o2808
ecrire/lang/spip_bg.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/img_pack/index.php3	g$myDir	o298	g$file	o328	g$myDir	o344	g$file	o382
spip_inscription.php3	g$mode	o366	g$mail_inscription	o373	g$nom_inscription	o392	g$focus	o410
ecrire/auteurs.php3	g$supp	o108	g$connect_statut	o118	g$retour	o233	g$tri	o264	g$retour	o273	g$tri	o301	g$tri	o316	g$partri	o334	g$tri	o382	g$tri	o400	g$partri	o418	g$visiteurs	o470	g$retour	o556	g$partri	o649	g$visiteurs	o728	g$connect_statut	o884	g$connect_statut	o995	g$query	o1030	g$result	o1110	g$query	o1131	g$flag_visiteurs	o1141	g$result	o1173	g$flag_visiteurs	o1468	g$visiteurs	o1493	g$visiteurs	o1828	g$connect_statut	o1854	g$sql_statut_auteurs	o1890	g$sql_statut_articles	o1963	g$tri	o1991	g$connect_statut	o2016	g$sql_statut_auteurs	o2051	g$sql_statut_articles	o2125	g$sql_statut_auteurs	o2204	g$sql_statut_articles	o2291	g$tri	o2336	g$sql_order	o2360	g$type_requete	o2407	g$sql_order	o2458	g$type_requete	o2518	g$sql_order	o2575	g$type_requete	o2607	g$nombre_auteurs	o2937	g$auteurs	o2955	g$type_requete	o2980	g$result_auteurs	o3010	g$row	o3225	g$result_auteurs	o3249	g$auteurs	o3271	g$row	o3280	g$row	o3301	g$nombre_auteurs	o3309	g$nom_auteur	o3332	g$row	o3346	g$result_nombr!
 es	o3364	g$row	o3753	g$result_nombres	o3777	g$auteurs	o3797	g$row	o3806	g$row	o3839	g$connect_statut	o3975	g$auteurs	o4017	g$auteur	o4043	g$auteurs	o4060	g$auteur	o4082	g$auteur	o4107	g$auteurs	o4154	g$auteur	o4163	g$nombre_auteurs	o4191	g$lettres_nombre_auteurs	o4366	g$auteurs	o4405	g$auteur	o4417	g$lettres_nombre_auteurs	o4430	g$premiere_lettre	o4460	g$auteur	o4508	g$premiere_lettre	o4537	g$lettre_prec	o4557	g$lettre	o4576	g$premiere_lettre	o4584	g$lettres_nombre_auteurs	o4604	g$lettre_prec	o4637	g$premiere_lettre	o4652	g$result_nombres	o4702	g$vus	o5209	g$row	o5224	g$result_nombres	o5248	g$auteurs	o5270	g$row	o5279	g$row	o5300	g$vus	o5308	g$row	o5320	g$nombre_auteurs	o5341	g$connect_statut	o5483	g$sql_statut_auteurs_ajout	o5517	g$sql_statut_auteurs	o5545	g$sql_statut_auteurs_ajout	o5574	g$result_auteurs	o5641	g$row	o5974	g$result_auteurs	o5998	g$auteurs	o6020	g$row	o6029	g$row	o6050	g$nombre_auteurs	o6058	g$rub_restreinte	o6092	g$connect_statut	o6114	g$restreint	o6184	g$!
 row	o6257	g$restreint	o6281	g$rub_restreinte	o6296	g$row	o6312	g$row	o
6338	g$visiteurs	o6399	g$max_par_page	o6524	g$debut	o6548	g$nombre_auteurs	o6557	g$max_par_page	o6575	g$debut	o6591	g$nombre_auteurs	o6606	g$max_par_page	o6624	g$fin	o6640	g$nombre_auteurs	o6651	g$debut	o6668	g$max_par_page	o6677	g$i	o6732	g$auteurs	o6744	g$i	o6762	g$debut	o6769	g$auteurs	o6785	g$tri	o7044	g$tri	o7249	g$tri	o7263	g$options	o7420	g$visiteurs	o7516	g$tri	o7545	g$nombre_auteurs	o7765	g$max_par_page	o7783	g$options	o7858	g$j	o7966	g$j	o7972	g$nombre_auteurs	o7977	g$j	o7994	g$max_par_page	o7998	g$j	o8021	g$j	o8048	g$debut	o8054	g$j	o8094	g$debut	o8193	g$j	o8202	g$debut	o8210	g$j	o8219	g$max_par_page	o8222	g$tri	o8322	g$tri	o8340	g$options	o8350	g$key	o8543	g$val	o8548	g$lettre	o8561	g$val	o8580	g$debut	o8588	g$i	o8770	g$fin	o8778	g$row	o8793	g$auteurs	o8807	g$couleur	o8843	g$i	o8855	g$couleur_claire	o8877	g$row	o9037	g$row	o9175	g$row	o9203	g$connect_statut	o9230	g$row	o9265	g$rub_restreinte	o9297	g$row	o9313	g$options	o9417	g$row	o9523	g$row	o9555	g$activer_mess!
 agerie	o9575	g$connect_activer_messagerie	o9608	g$messagerie	o9649	g$row	o9695	g$connect_statut	o9738	g$row	o9782	g$row	o9828	g$row	o9913	g$row	o10017	g$row	o10240	g$row	o10269	g$row	o10326	g$debut_suivant	o10520	g$debut	o10537	g$max_par_page	o10546	g$debut_suivant	o10565	g$nombre_auteurs	o10582	g$debut	o10601	g$debut	o10698	g$debut_prec	o10714	g$debut	o10739	g$max_par_page	o10748	g$link	o10770	g$link	o10790	g$debut_prec	o10813	g$link	o10834	g$debut_suivant	o11085	g$nombre_auteurs	o11102	g$link	o11123	g$link	o11143	g$debut_suivant	o11166	g$link	o11190
ecrire/lang/spip_pt.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_forum.php3	d_ECRIRE_INC_FORUM	o101	fchanger_statut_forum	o170	fcontrole_cache_forum	o1426	fcalcul_index_forum	o1807	fcalculer_threads	o2092
ecrire/plugins/plug_carto_distant.php	favant_typo_carto_distant	o366
ecrire/forum_envoi.php3	g$modif_forum	o105	g$titre_message	o128	g$titre_message	o178	g$nom	o195	g$connect_nom	o233	g$adresse_retour	o249	g$adresse_retour	o280	g$valider_forum	o303	g$statut	o323	g$titre_message	o340	g$titre_message	o388	g$texte	o407	g$texte	o447	g$query	o458	g$result	o889	g$query	o910	g$id_message	o947	g$query	o968	g$result	o1057	g$query	o1078	g$adresse_retour	o1112	g$id_message	o1137	g$id_parent	o1316	g$query	o1331	g$result	o1395	g$query	o1416	g$row	o1430	g$result	o1454	g$id_article	o1468	g$row	o1482	g$id_breve	o1504	g$row	o1516	g$id_rubrique	o1536	g$row	o1551	g$id_message	o1574	g$row	o1588	g$id_syndic	o1610	g$row	o1623	g$statut	o1644	g$row	o1654	g$titre_parent	o1672	g$row	o1688	g$texte_parent	o1705	g$row	o1721	g$auteur_parent	o1738	g$row	o1755	g$id_auteur_parent	o1773	g$row	o1793	g$date_heure_parent	o1814	g$row	o1835	g$nom_site_parent	o1857	g$row	o1876	g$url_site_parent	o1896	g$row	o1915	g$titre_parent	o1945	g$titre_parent	o2021	g$auteur_parent	o2109	g$id_a!
 uteur_parent	o2132	g$activer_messagerie	o2154	g$connect_activer_messagerie	o2187	g$bouton	o2229	g$id_auteur_parent	o2255	g$row	o2274	g$bouton	o2287	g$bouton	o2310	g$texte_parent	o2346	g$url_site_parent	o2376	g$nom_site_parent	o2403	g$modif_forum	o2584	g$modif_forum	o2926	g$titre_message	o2997	g$texte	o3029	g$nom_site	o3051	g$titre_parent	o3360	g$adresse_retour	o3873	g$titre_message	o4066	g$titre_message	o4096	g$modif_forum	o4249	g$modif_forum	o4265	g$GLOBALS	o5111	g$texte	o5204	g$statut	o5243	g$options	o5266	g$lien_url	o5515
ecrire/inc_urls.php3	d_ECRIRE_INC_URLS	o100	fgenerer_url_article	o137	fgenerer_url_rubrique	o442	fgenerer_url_breve	o756	fgenerer_url_forum	o1046	fgenerer_url_mot	o1155	fgenerer_url_auteur	o1256	fgenerer_url_document	o1369
ecrire/inc_acces.php3	d_ECRIRE_INC_ACCES	o101	fcreer_pass_aleatoire	o139	flow_sec	o977	fafficher_low_sec	o1431	fverifier_low_sec	o1541	feffacer_low_sec	o1660	finitialiser_sel	o1786	g$htsalt	o1814	fecrire_logins	o1878	fecrire_acces	o2090	fgenerer_htpass	o3230	g$htsalt	o3262	g$flag_crypt	o3271	fverifier_htaccess	o3405	fgerer_htaccess	o4382
spip_redirect.php3	g$GLOBALS	o251	g$id_article	o288	g$url	o304	g$id_article	o331	g$id_breve	o356	g$url	o370	g$id_breve	o395	g$id_forum	o418	g$url	o432	g$id_forum	o457	g$id_rubrique	o480	g$url	o497	g$id_rubrique	o525	g$id_mot	o551	g$url	o563	g$id_mot	o586	g$id_auteur	o607	g$url	o622	g$id_auteur	o648	g$url	o671	g$url	o711	g$super	o725	g$super	o747	g$recalcul	o765	g$url	o776	g$super	o784	g$preview	o821	g$url	o831	g$super	o839
ecrire/lang/spip_ar.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/admin_vider.php3	g$connect_statut	o353	g$connect_toutes_rubriques	o388	g$purger_index	o477	g$hash	o547	g$taille	o2000	g$taille	o2101	g$info	o2115	g$taille	o2184	g$info	o2204	g$quota_cache	o2319	g$quota_cache	o2402	g$compresser_cache	o2493	g$row	o3195	g$row	o3288	g$hash	o3466
ecrire/mes_options.php3	g$server_ip_index	o133	g$server_ips	o151	g$nb_retry	o164	g$server_dns	o175	g$use_dns	o188	g$free_user_name	o198	g$free_user_passwd	o215	g$free_user_name	o236	g$free_user_passwd	o266	g$i	o351	g$server_ips	o360	g$i	o372	g$server_ips	o396	g$i	o408	g$server_ips	o432	g$i	o444	g$server_ips	o468	g$i	o480	g$server_ips	o504	g$i	o516	g$server_ips	o540	g$i	o552	g$server_ip_index	o667	g$server_ips	o699	g$nb_retry	o846	g$server_dns	o1010	g$use_dns	o1042
ecrire/inc_calendrier.php	d_ECRIRE_INC_CALENDRIER	o105	g$GLOBALS	o214	g$GLOBALS	o294	g$GLOBALS	o348	g$GLOBALS	o376	g$GLOBALS	o411	g$GLOBALS	o433	g$GLOBALS	o495	g$GLOBALS	o560	g$GLOBALS	o616	g$GLOBALS	o641	g$GLOBALS	o678	g$GLOBALS	o703	g$bleu	o952	g$vert	o959	g$jaune	o966	g$bleu	o975	g$vert	o1073	g$jaune	o1166	fhttp_calendrier_ics	o1469	fhttp_calendrier_tout	o4060	g$spip_lang_left	o4136	g$largeur_table	o4153	g$largeur_gauche	o4169	g$spip_ecran	o4186	fhttp_calendrier_aide_mess	o5826	g$bleu	o5865	g$vert	o5872	g$jaune	o5879	fhttp_calendrier_retire_args	o6237	fhttp_calendrier_navigation	o6822	g$spip_lang_right	o6952	g$spip_lang_left	o6970	fhttp_agenda_invisible	o10882	g$spip_lang_right	o10958	g$spip_lang_left	o10976	g$couleur_claire	o10993	fhttp_calendrier_navigation_jour	o13215	fhttp_calendrier_navigation_semaine	o13834	fhttp_calendrier_mois	o15062	g$couleur_claire	o15170	g$couleur_foncee	o15187	fhttp_calendrier_les_jours	o16769	fhttp_calendrier_suitede7	o17433	g$couleur_claire	!
 o17543	g$spip_lang_left	o17560	g$spip_lang_right	o17577	fhttp_calendrier_sans_clics	o19478	fhttp_calendrier_clics_jour_semaine	o19566	fhttp_calendrier_clics	o20421	g$bleu	o20483	g$jaune	o20490	g$vert	o20498	fhttp_calendrier_suite_heures	o21282	g$couleur_claire	o21411	g$couleur_foncee	o21428	g$spip_ecran	o21445	g$spip_lang_left	o21458	g$partie_cal	o21474	fhttp_calendrier_agenda	o24122	fhttp_calendrier_agenda_rv	o24955	g$couleur_foncee	o25080	g$spip_lang_left	o25105	g$spip_lang_right	o25122	fhttp_calendrier_image_et_typo	o28211	fhttp_calendrier_articles_et_breves	o28716	fhttp_calendrier_heures	o29284	g$spip_lang_left	o29363	g$spip_lang_right	o29380	fhttp_cal_top	o30563	fhttp_cal_height	o31064	fhttp_calendrier_jour_ics	o31826	g$spip_lang_left	o31926	fhttp_calendrier_journee	o35587	g$largeur_table	o35665	g$largeur_gauche	o35681	g$spip_ecran	o35698	fhttp_calendrier_semaine	o36991	g$spip_ecran	o37063	g$spip_lang_left	o37076	g$couleur_claire	o37093	fhttp_calendrier_jour	o38426	g$s!
 pip_lang_rtl	o38512	g$spip_lang_right	o38528	g$spip_lang_left	o38546	g
$bleu	o38563	g$vert	o38570	g$jaune	o38576	g$calendrier_message_fermeture	o38592	g$partie_cal	o38631	fhttp_calendrier_message	o41726	g$calendrier_message_fermeture	o41773	fhttp_calendrier_ical	o42149	fhttp_calendrier_rv	o42860	g$spip_lang_rtl	o42907	g$spip_lang_left	o42923	g$spip_lang_right	o42940	fsql_calendrier_interval_jour	o45529	fsql_calendrier_interval_semaine	o45831	fsql_calendrier_interval_mois	o46357	fsql_calendrier_interval_articles	o46977	fsql_calendrier_interval_breves	o47481	fsql_calendrier_interval_rv	o48008	g$connect_id_auteur	o48061	fsql_calendrier_taches_annonces	o50553	fsql_calendrier_taches_pb	o50854	g$connect_id_auteur	o50892	fsql_calendrier_taches_rv	o51209	g$connect_id_auteur	o51247	fsql_calendrier_agenda	o51941	g$connect_id_auteur	o51989	fsql_calendrier_jour_ical	o52676	fcalendrier_echelle	o52987	g$contrastes	o53456	g$contrastes	o53469	fcalendrier_div_style	o54549	g$contrastes	o54593
ecrire/lang/spip_es.php3	g$GLOBALS	o80	g$GLOBALS	o89
mot.php3	g$fond	o6	g$delais	o21
ecrire/accents.php3	fchanger_accents	o142
ecrire/lang/spip_fon.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/message_edit.php3	g$new	o86	g$type	o110	g$ok	o139	g$connect_statut	o146	g$ok	o235	g$ok	o271	g$ok	o294	fmy_sel	o466	fafficher_mois	o614	fafficher_annee	o1219	fafficher_jour	o1459	fafficher_jour_mois_annee_h_m	o1659	fafficher_si_rdv	o2289	g$spip_lang_rtl	o2347	g$new	o3726	g$mydate	o3744	g$query	o3795	g$result	o3886	g$query	o3907	g$type	o3922	g$statut	o3937	g$statut	o3963	g$id_message	o3984	g$rv	o4215	g$type	o4366	g$dest	o4519	g$type	o4658	g$ajouter_auteur	o4677	g$onfocus	o4705	g$row	o4782	g$id_message	o4880	g$row	o4894	g$date_heure	o4914	g$row	o4928	g$date_fin	o4948	g$row	o4960	g$titre	o4978	g$row	o5000	g$texte	o5016	g$row	o5038	g$type	o5054	g$row	o5062	g$statut	o5076	g$row	o5086	g$page	o5102	g$row	o5110	g$rv	o5124	g$row	o5130	g$expediteur	o5142	g$row	o5156	g$expediteur	o5254	g$connect_id_auteur	o5268	g$type	o5291	g$connect_statut	o5313	g$type	o5359	g$le_type	o5382	g$logo	o5426	g$type	o5452	g$le_type	o5471	g$logo	o5509	g$type	o5538	g$le_type	o5561	g$logo	o5596	g$type	o5!
 867	g$ajouter_auteur	o6360	g$rv	o6636	g$fonction	o6650	g$fonction	o6677	g$fonction	o6740	g$date_heure	o6794	g$date_fin	o6807	g$rv	o6819	g$texte	o6995
ecrire/lang/public_zh.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/public_oc_prv.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_majbase.php3	d_ECRIRE_INC_MAJBASE	o103	fmaj_version	o142	fmaj_base	o481	g$spip_version	o502	g$htsalt	o5924
ecrire/breves_voir.php3	g$id_breve	o146	g$id_breve	o157	g$flag_mots	o171	fmy_sel	o225	fafficher_mois	o378	fafficher_annee	o925	fafficher_jour	o1220	g$id_breve	o1392	g$new	o1413	g$id_rubrique	o1432	g$id_rubrique	o1454	g$langue_new	o1470	g$result_lang_rub	o1489	g$row	o1591	g$result_lang_rub	o1615	g$langue_new	o1638	g$row	o1652	g$langue_new	o1675	g$langue_new	o1688	g$langue_choisie_new	o1729	g$id_breve	o1760	g$clean_link	o1992	g$titre	o2061	g$modifier_breve	o2072	g$titre	o2092	g$titre	o2112	g$texte	o2122	g$texte	o2142	g$lien_titre	o2152	g$lien_titre	o2177	g$champs_extra	o2230	g$add_extra	o2285	g$add_extra	o2368	g$query	o2387	g$result	o2584	g$query	o2605	g$invalider_caches	o2647	g$id_breve	o2859	g$id_rubrique	o2936	g$row	o2973	g$langue_old	o3085	g$row	o3099	g$langue_choisie_old	o3115	g$row	o3137	g$langue_choisie_old	o3170	g$row	o3205	g$langue_new	o3311	g$row	o3325	g$langue_new	o3348	g$langue_old	o3363	g$jour	o3490	g$connect_statut	o3500	g$annee	o3539	g$mois	o3557	g$mois	o3576	g$!
 jour	o3591	g$query	o3606	g$result	o3699	g$query	o3720	g$query	o3756	g$result	o3821	g$query	o3842	g$row	o3859	g$result	o3883	g$id_breve	o3896	g$row	o3906	g$date_heure	o3925	g$row	o3937	g$titre_breve	o3958	g$row	o3971	g$titre	o3987	g$row	o3994	g$texte	o4010	g$row	o4017	g$extra	o4033	g$row	o4040	g$lien_titre	o4056	g$row	o4068	g$lien_url	o4089	g$row	o4099	g$statut	o4118	g$row	o4126	g$id_rubrique	o4143	g$row	o4156	g$flag_editable	o4180	g$connect_statut	o4199	g$id_rubrique	o4249	g$statut	o4267	g$id_rubrique	o4401	g$id_breve	o4737	g$statut	o4748	g$arton	o4859	g$artoff	o4888	g$id_breve	o4924	g$connect_statut	o4941	g$id_rubrique	o4991	g$arton	o5028	g$artoff	o5036	fenfant	o5406	g$id_parent	o5433	g$id_rubrique	o5453	g$i	o5475	g$titre	o5939	g$flag_editable	o5967	g$flag_editable	o6251	g$options	o6271	g$statut	o6297	g$statut	o6327	g$date_heure	o6413	g$regs	o6426	g$mois	o6446	g$regs	o6454	g$jour	o6474	g$regs	o6482	g$annee	o6502	g$regs	o6511	g$jour	o7146	g$mois	o7243	g$annee	o7342	g$date_h!
 eure	o7660	g$flag_mots	o7709	g$flag_editable	o7731	g$options	o7750	g$i
d_breve	o7803	g$nouv_mot	o7814	g$supp_mot	o7825	g$cherche_mot	o7836	g$flag_editable	o7850	g$flag_editable	o7947	g$row	o7967	g$langue_parent	o8071	g$row	o8088	g$changer_lang	o8108	g$changer_lang	o8131	g$changer_lang	o8214	g$langue_parent	o8348	g$row	o8426	g$langue_breve	o8537	g$row	o8553	g$langue_choisie_breve	o8568	g$row	o8592	g$langue_choisie_breve	o8622	g$herit	o8654	g$herit	o8676	g$langue_breve	o8981	g$langue_breve	o9194	g$langue_parent	o9213	g$texte	o9328	g$lien_url	o9355	g$lien_titre	o9379	g$lien_titre	o9485	g$lien_titre	o9530	g$lien_titre	o9609	g$lien_url	o9654	g$les_notes	o9754	g$champs_extra	o9879	g$extra	o9897	g$extra	o9961	g$connect_statut	o9988	g$id_rubrique	o10036	g$statut	o10055	g$statut	o10074	g$forum_retour	o10721	g$forum_retour	o10904	g$titre	o10965	g$query_forum	o11056	g$result_forum	o11197	g$query_forum	o11224	g$result_forum	o11254	g$forum_retour	o11269
ecrire/statistiques_visites.php3	fhttp_img_rien	o80	g$id_article	o330	g$id_article	o351	g$query	o367	g$result	o485	g$query	o506	g$row	o521	g$result	o545	g$titre	o559	g$row	o573	g$total_absolu	o591	g$row	o607	g$val_popularite	o626	g$row	o650	g$query	o685	g$result	o752	g$query	o773	g$row	o788	g$result	o812	g$total_absolu	o826	g$row	o842	g$titre	o875	g$pourarticle	o883	g$origine	o950	g$pourarticle	o1418	g$titre	o1607	g$titre	o1626	g$id_article	o1842	g$articles_recents	o2089	g$query	o2117	g$result	o2238	g$query	o2259	g$row	o2276	g$result	o2300	g$articles_recents	o2314	g$row	o2336	g$articles_recents	o2360	g$articles_recents	o2385	g$query	o2433	g$result	o2577	g$query	o2598	g$nombre_articles	o2609	g$result	o2642	g$nombre_articles	o2657	g$row	o2952	g$result	o2976	g$titre	o2991	g$row	o3005	g$l_article	o3024	g$row	o3037	g$visites	o3060	g$row	o3071	g$popularite	o3091	g$row	o3111	g$liste	o3135	g$classement	o3148	g$l_article	o3160	g$liste	o3174	g$liste	o3193	g$articles_vus	o3213	g$l_arti!
 cle	o3231	g$l_article	o3255	g$id_article	o3269	g$popularite	o3487	g$visites	o3513	g$articles_vus	o3557	g$articles_vus	o3578	g$query_suite	o3625	g$result_suite	o3833	g$query_suite	o3860	g$result_suite	o3898	g$row	o3963	g$result_suite	o3987	g$titre	o4009	g$row	o4023	g$l_article	o4043	g$row	o4056	g$visites	o4080	g$row	o4091	g$popularite	o4112	g$row	o4132	g$numero	o4157	g$classement	o4167	g$l_article	o4179	g$l_article	o4205	g$id_article	o4219	g$popularite	o4446	g$visites	o4472	g$query	o4722	g$result	o4874	g$query	o4895	g$result	o4926	g$row	o5250	g$result	o5274	g$titre	o5289	g$row	o5303	g$l_article	o5322	g$row	o5335	g$visites	o5358	g$row	o5369	g$popularite	o5389	g$row	o5409	g$numero	o5434	g$classement	o5444	g$l_article	o5456	g$l_article	o5482	g$id_article	o5496	g$popularite	o5723	g$visites	o5749	g$connect_statut	o5939	g$id_article	o5979	g$connect_statut	o6197	g$aff_jours	o6303	g$aff_jours	o6315	g$origine	o6339	g$id_article	o6360	g$table	o6377	g$table_ref	o6413	g$where	o6454	g$ta!
 ble	o6501	g$table_ref	o6528	g$where	o6560	g$query	o6580	g$result	o6687
	g$query	o6708	g$row	o6725	g$result	o6749	g$date_premier	o6763	g$row	o6779	g$query	o6803	g$result	o6960	g$query	o6979	g$row	o6997	g$result	o7021	g$date	o7035	g$row	o7043	g$visites	o7064	g$row	o7075	g$log	o7095	g$date	o7100	g$visites	o7109	g$i	o7125	g$date_debut	o7134	g$date	o7148	g$i	o7157	g$id_article	o7192	g$query	o7209	g$result	o7333	g$query	o7354	g$query	o7375	g$result	o7449	g$query	o7470	g$row	o7487	g$result	o7512	g$visites_today	o7524	g$row	o7541	g$visites_today	o7566	g$log	o7598	g$max	o7611	g$log	o7626	g$visites_today	o7632	g$date_today	o7651	g$nb_jours	o7675	g$date_today	o7694	g$date_debut	o7706	g$maxgraph	o7736	g$max	o7767	g$max	o7809	g$maxgraph	o7825	g$maxgraph	o7841	g$maxgraph	o7869	g$max	o7881	g$maxgraph	o7887	g$maxgraph	o7914	g$max	o7926	g$maxgraph	o7932	g$maxgraph	o7950	g$rapport	o7963	g$maxgraph	o7980	g$log	o8004	g$largeur	o8017	g$nb_jours	o8041	g$largeur	o8062	g$largeur	o8081	g$agreg	o8098	g$log	o8118	g$agreg	o8147	g$largeur	o8169	g$largeur	o8184	g$largeur_ab!
 s	o8253	g$aff_jours	o8274	g$largeur_abs	o8295	g$inc	o8318	g$largeur_abs	o8330	g$aff_jours_plus	o8352	g$largeur_abs	o8377	g$inc	o8392	g$aff_jours_moins	o8402	g$largeur_abs	o8428	g$inc	o8443	g$largeur_abs	o8463	g$aff_jours_plus	o8487	g$aff_jour_moins	o8513	g$largeur_abs	o8549	g$aff_jours_plus	o8572	g$largeur_abs	o8600	g$aff_jours_moins	o8623	g$largeur_abs	o8652	g$id_article	o8791	g$pour_article	o8804	g$date_premier	o8854	g$date_debut	o8870	g$date_today	o9087	g$date_debut	o9101	g$key	o10016	g$value	o10022	g$log	o10037	g$test_agreg	o10055	g$test_agreg	o10082	g$agreg	o10097	g$test_agreg	o10117	g$n	o10138	g$decal	o10156	g$decal	o10170	g$decal	o10186	g$tab_moyenne	o10201	g$decal	o10214	g$value	o10224	g$jour_prec	o10293	g$ecart	o10316	g$key	o10332	g$jour_prec	o10337	g$agreg	o10360	g$i	o10385	g$i	o10391	g$ecart	o10396	g$i	o10404	g$decal	o10421	g$decal	o10435	g$decal	o10453	g$tab_moyenne	o10470	g$decal	o10483	g$value	o10493	g$ce_jour	o10509	g$jour_prec	o10532	g$i	o10553	g$jour	o10568!
 	g$ce_jour	o10585	g$ce_jour	o10613	g$tab_moyenne	o10638	g$moyenne	o106
59	g$val_tab	o10692	g$tab_moyenne	o10709	g$moyenne	o10731	g$val_tab	o10743	g$moyenne	o10759	g$moyenne	o10770	g$tab_moyenne	o10787	g$hauteur_moyenne	o10811	g$moyenne	o10837	g$rapport	o10849	g$difference	o10920	g$hauteur_moyenne	o10935	g$moyenne	o10963	g$moyenne	o10980	g$tagtitle	o11028	g$difference	o11162	g$largeur	o11209	g$tagtitle	o11250	g$largeur	o11289	g$hauteur_moyenne	o11299	g$tagtitle	o11321	g$largeur	o11377	g$tagtitle	o11415	g$n	o11453	g$ce_jour	o11478	g$key	o11501	g$jour	o11512	g$ce_jour	o11529	g$ce_jour	o11557	g$total_loc	o11574	g$total_loc	o11587	g$value	o11600	g$tab_moyenne	o11618	g$moyenne	o11639	g$val_tab	o11670	g$tab_moyenne	o11687	g$moyenne	o11707	g$val_tab	o11719	g$moyenne	o11733	g$moyenne	o11744	g$tab_moyenne	o11761	g$hauteur_moyenne	o11784	g$moyenne	o11809	g$rapport	o11820	g$hauteur	o11839	g$value	o11856	g$rapport	o11865	g$moyenne	o11884	g$moyenne	o11901	g$tagtitle	o11997	g$value	o12076	g$hauteur	o12096	g$hauteur_moyenne	o12120	g$hauteur	o12139	g$difference!
 	o12157	g$hauteur_moyenne	o12172	g$hauteur	o12191	g$largeur	o12230	g$tagtitle	o12270	g$largeur	o12307	g$difference	o12317	g$tagtitle	o12334	g$largeur	o12371	g$tagtitle	o12420	g$key	o12451	g$largeur	o12522	g$hauteur	o12532	g$tagtitle	o12579	g$largeur	o12629	g$hauteur	o12638	g$tagtitle	o12685	g$hauteur_moyenne	o12713	g$hauteur	o12732	g$difference	o12750	g$hauteur	o12765	g$hauteur_moyenne	o12776	g$largeur	o12823	g$tagtitle	o12871	g$key	o12902	g$couleur	o12953	g$couleur_foncee	o12965	g$couleur	o13000	g$couleur_claire	o13011	g$largeur	o13053	g$difference	o13063	g$tagtitle	o13106	g$largeur	o13143	g$tagtitle	o13183	g$largeur	o13220	g$hauteur_moyenne	o13230	g$tagtitle	o13278	g$largeur	o13330	g$tagtitle	o13380	g$key	o13411	g$largeur	o13482	g$hauteur	o13492	g$tagtitle	o13539	g$largeur	o13589	g$hauteur	o13598	g$tagtitle	o13645	g$largeur	o13693	g$tagtitle	o13733	g$jour_prec	o13773	g$key	o13786	g$val_prec	o13796	g$value	o13808	g$hauteur	o13850	g$visites_today	o13867	g$rapport	o13884	g$t!
 otal_absolu	o13902	g$total_absolu	o13918	g$visites_today	o13934	g$haut
eur	o14004	g$largeur	o14043	g$id_article	o14208	g$val_popularite	o14221	g$moyenne	o14239	g$prevision	o14253	g$val_popularite	o14309	g$hauteurprevision	o14330	g$prevision	o14355	g$rapport	o14368	g$prevision	o14383	g$prevision	o14402	g$visites_today	o14416	g$largeur	o14590	g$hauteurprevision	o14600	g$tagtitle	o14647	g$largeur	o14684	g$hauteur	o14694	g$tagtitle	o14733	g$largeur	o14772	g$maxgraph	o15359	g$maxgraph	o15538	g$maxgraph	o15700	g$maxgraph	o15878	g$maxgraph	o16040	g$maxgraph	o16221	g$maxgraph	o16380	g$maxgraph	o16557	g$gauche_prec	o16891	g$jour	o16919	g$date_debut	o16927	g$jour	o16940	g$date_today	o16949	g$jour	o16962	g$jour	o16970	g$ce_jour	o16995	g$jour	o17016	g$ce_jour	o17037	g$afficher	o17061	g$jour	o17096	g$jour	o17124	g$afficher	o17137	g$jour	o17175	g$gauche	o17207	g$jour	o17218	g$date_debut	o17226	g$largeur	o17241	g$agreg	o17263	g$gauche	o17287	g$gauche_prec	o17297	g$jour	o17329	g$gauche	o17520	g$afficher	o17547	g$gauche_prec	o17573	g$gauche	o17588	g$moyenne	o17!
 655	g$total_absolu	o17673	g$date_premier	o17701	g$max	o18032	g$moyenne	o18081	g$visites_today	o18224	g$val_prec	o18246	g$val_prec	o18293	g$id_article	o18310	g$val_popularite	o18363	g$total_absolu	o18514	g$id_article	o18545	g$classement	o18567	g$id_article	o18579	g$classement	o18607	g$id_article	o18619	g$ch	o18648	g$liste	o18695	g$ch	o18724	g$liste	o18771	g$classement	o18797	g$id_article	o18809	g$ch	o18822	g$log	o19028	g$query	o19232	g$result	o19450	g$query	o19469	g$i	o19483	g$row	o19500	g$result	o19524	g$date	o19539	g$row	o19547	g$visites	o19569	g$row	o19580	g$i	o19606	g$entrees	o19615	g$visites	o19635	g$entrees	o19664	g$max	o19684	g$entrees	o19695	g$maxgraph	o19709	g$max	o19740	g$max	o19782	g$maxgraph	o19801	g$maxgraph	o19817	g$maxgraph	o19846	g$max	o19858	g$maxgraph	o19864	g$maxgraph	o19892	g$max	o19904	g$maxgraph	o19910	g$maxgraph	o19928	g$rapport	o19942	g$maxgraph	o19959	g$largeur	o19975	g$entrees	o20005	g$largeur	o20025	g$largeur	o20039	g$largeur	o20060	g$largeur	o2007!
 5	g$n	o20368	g$decal	o20378	g$tab_moyenne	o20392	g$key	o20429	g$value	
o20435	g$entrees	o20450	g$n	o20466	g$mois	o20479	g$key	o20506	g$decal	o20521	g$decal	o20535	g$decal	o20550	g$tab_moyenne	o20564	g$decal	o20577	g$value	o20587	g$total_loc	o20602	g$total_loc	o20615	g$value	o20628	g$tab_moyenne	o20645	g$moyenne	o20665	g$val_tab	o20695	g$tab_moyenne	o20712	g$moyenne	o20731	g$val_tab	o20743	g$moyenne	o20756	g$moyenne	o20767	g$tab_moyenne	o20784	g$hauteur_moyenne	o20806	g$moyenne	o20831	g$rapport	o20842	g$hauteur	o20860	g$value	o20877	g$rapport	o20886	g$tagtitle	o20952	g$value	o21030	g$hauteur	o21048	g$hauteur_moyenne	o21071	g$hauteur	o21090	g$difference	o21107	g$hauteur_moyenne	o21122	g$hauteur	o21141	g$largeur	o21179	g$largeur	o21246	g$difference	o21256	g$tagtitle	o21273	g$largeur	o21309	g$key	o21378	g$largeur	o21441	g$hauteur	o21450	g$tagtitle	o21496	g$largeur	o21554	g$hauteur	o21563	g$tagtitle	o21609	g$hauteur_moyenne	o21647	g$hauteur	o21666	g$difference	o21683	g$hauteur	o21698	g$hauteur_moyenne	o21709	g$largeur	o21755	g$tagtitle	o21803	g$key	!
 o21835	g$couleur	o21878	g$couleur_foncee	o21890	g$couleur	o21933	g$couleur_claire	o21944	g$largeur	o21992	g$difference	o22001	g$tagtitle	o22044	g$largeur	o22080	g$tagtitle	o22119	g$largeur	o22155	g$hauteur_moyenne	o22164	g$tagtitle	o22211	g$largeur	o22265	g$tagtitle	o22313	g$key	o22345	g$largeur	o22408	g$hauteur	o22418	g$tagtitle	o22465	g$largeur	o22523	g$hauteur	o22532	g$tagtitle	o22579	g$largeur	o22631	g$tagtitle	o22669	g$jour_prec	o22707	g$key	o22720	g$val_prec	o22729	g$value	o22741	g$maxgraph	o23274	g$maxgraph	o23450	g$maxgraph	o23609	g$maxgraph	o23784	g$maxgraph	o23943	g$maxgraph	o24121	g$maxgraph	o24277	g$maxgraph	o24451	g$limit	o24812	g$limit	o24828	g$limit	o24848	g$limit	o24862	g$vis	o24906	g$origine	o24928	g$where	o24941	g$vis	o24969	g$table_ref	o24993	g$query	o25026	g$query	o25261	g$limit	o25269
ecrire/inc_meta.php3	d_ECRIRE_INC_META	o100	flire_metas	o136	g$meta	o159	g$meta_maj	o166	fecrire_meta	o422	feffacer_meta	o570	fecrire_metas	o794	g$meta	o819	g$meta_maj	o826	g$GLOBALS	o1766
sommaire_texte.php3	g$fond	o114	g$delais	o140
ecrire/auteur_messagerie.php3	fafficher_auteur_rubriques	o144	g$id_parent	o190	g$id_rubrique	o210	g$toutes_rubriques	o232	g$i	o259	g$connect_id_auteur	o824	g$id_auteur	o846	g$perso_activer_messagerie	o865	g$query	o896	g$result	o1036	g$query	o1057	g$query	o1073	g$result	o1141	g$query	o1162	g$row	o1177	g$result	o1201	g$id_auteur	o1214	g$row	o1225	g$nom	o1245	g$row	o1250	g$bio	o1264	g$row	o1269	g$email	o1283	g$row	o1290	g$nom_site_auteur	o1306	g$row	o1323	g$url_site	o1342	g$row	o1352	g$login	o1371	g$row	o1378	g$pass	o1394	g$row	o1400	g$statut	o1415	g$row	o1423	g$pgp	o1440	g$row	o1445	g$messagerie	o1459	g$row	o1471	g$imessage	o1492	g$row	o1502	g$abonne	o1521	g$row	o1531	g$abonne_pass	o1548	g$row	o1563	g$nom_auteur	o1596	g$nom	o1665	g$connect_statut	o1678	g$connect_id_auteur	o1714	g$id_auteur	o1736	g$statut_auteur	o1752	g$statut	o1767	fmySel	o2145	g$connect_id_auteur	o2329	g$id_auteur	o2351	g$activer_messagerie	o2645	g$activer_imessage	o2676	g$activer_messagerie	o2712	g$messageri!
 e	o3873	g$activer_imessage	o4878	g$messagerie	o4913	g$imessage	o5589
ecrire/iframe_action.php3	g$connect_statut	o43	g$action	o267	g$id_article	o299	g$query	o321	g$result	o397	g$query	o418	g$row	o433	g$result	o457	g$statut_ancien	o472	g$row	o489	g$statut	o519	g$statut_ancien	o530	g$query	o551	g$result	o637	g$query	o658	g$statut	o720	g$id_article	o886	g$id_article	o992	g$statut_ancien	o1018	g$invalider_caches	o1049	g$statut	o1206	g$statut_ancien	o1228	g$id_article	o1324	g$action	o1356	g$id_breve	o1386	g$query	o1406	g$result	o1476	g$query	o1497	g$row	o1512	g$result	o1536	g$statut_ancien	o1551	g$row	o1568	g$statut	o1599	g$statut_ancien	o1610	g$query	o1631	g$result	o1729	g$query	o1750
ecrire/install.php3	d_ECRIRE_INSTALL	o53	flogin_hebergeur	o228	g$HTTP_X_HOST	o256	g$REQUEST_URI	o270	g$SERVER_NAME	o284	g$HTTP_HOST	o298	g$etape	o1060	g$login	o1399	g$nom	o1411	g$nom	o1429	g$login	o1438	g$login	o1458	g$query	o1469	g$result	o1539	g$query	o1563	g$id_auteur	o1580	g$row	o1602	g$result	o1626	g$id_auteur	o1636	g$row	o1649	g$mdpass	o1671	g$pass	o1685	g$htpass	o1695	g$pass	o1720	g$id_auteur	o1735	g$query	o1752	g$query	o1976	g$query	o2172	g$email	o2266	g$etape	o2998	g$flag_ldap	o4559	g$ldap_present	o4575	g$etape	o5060	g$link	o5316	g$choix_db	o5410	g$sel_db	o5439	g$table_new	o5449	g$sel_db	o5516	g$choix_db	o5526	g$sel_db	o5546	g$nouvelle	o5668	g$maj_ok	o5715	g$nouvelle	o5743	g$result_ok	o5844	g$result	o5888	g$result_ok	o5953	g$result	o5981	g$result_ok	o6043	g$maj_ok	o6057	g$conn	o6070	g$conn	o6094	g$conn	o6156	g$conn	o6212	g$conn	o6269	g$conn	o6322	g$conn	o6407	g$conn	o6512	g$myFile	o6532	g$myFile	o6611	g$conn	o6620	g$myFile	o6637	g$result_ok	o6983	g$spip_version	o705!
 1	g$etape	o7194	g$link	o7754	g$result	o7816	g$result	o7930	g$n	o7944	g$result	o7965	g$bases	o8075	g$i	o8095	g$i	o8103	g$n	o8108	g$i	o8112	g$table_nom	o8123	g$result	o8149	g$i	o8158	g$base	o8166	g$table_nom	o8210	g$base_fin	o8252	g$table_nom	o8287	g$table_nom	o8327	g$login_db	o8341	g$bases	o8358	g$bases	o8392	g$checked	o8404	g$bases	o8440	g$bases	o8486	g$login_db	o8639	g$login_db	o8753	g$login_db	o8830	g$checked	o8907	g$checked	o9010	g$etape	o9366	g$link	o9526	g$db_connect	o9588	g$db_connect	o9651	g$link	o9672	g$etape	o10425	g$adresse_db	o10639	g$login_db	o10667	g$pass_db	o10699	g$s	o10859	g$s	o11006	g$regs	o11010	g$adresse_db	o11023	g$regs	o11037	g$login_db	o11050	g$regs	o11062	g$s	o11149	g$regs	o11153	g$adresse_db	o11166	g$regs	o11180	g$port_db	o11197	g$regs	o11208	g$adresse_db	o11218	g$port_db	o11237	g$login_db	o11250	g$regs	o11262	g$etape	o12251	g$etape	o12328	g$menu_langues	o12339	g$menu_langues	o12395	g$menu_langues	o12844	g$etape	o13191	g$statut_ldap	o13369	g$etape	o1!
 3737	g$base_ldap	o13788	g$base_ldap	o13800	g$base_ldap_text	o13813	g$l
dap_link	o13832	g$ldap_link	o13903	g$r	o13988	g$ldap_link	o14007	g$base_ldap	o14019	g$fail	o14052	g$ldap_link	o14072	g$fail	o14098	g$base_ldap	o14341	g$conn	o14532	g$p	o14610	g$conn	o14622	g$conn	o14643	g$conn	o14658	g$p	o14668	g$conn	o14687	g$conn	o14721	g$conn	o14769	g$conn	o14862	g$conn	o14948	g$conn	o14998	g$conn	o15017	g$conn	o15075	g$conn	o15129	g$myFile	o15149	g$myFile	o15228	g$conn	o15237	g$myFile	o15254	g$etape	o16269	g$ldap_link	o16460	g$ldap_link	o16531	g$result	o16575	g$ldap_link	o16596	g$info	o16656	g$ldap_link	o16682	g$result	o16694	g$checked	o17122	g$info	o17155	g$info	o17166	g$n	o17253	g$i	o17268	g$i	o17276	g$info	o17281	g$i	o17297	g$names	o17308	g$info	o17317	g$i	o17323	g$names	o17362	g$j	o17382	g$j	o17390	g$names	o17395	g$j	o17412	g$n	o17425	g$names	o17495	g$j	o17502	g$checked	o17547	g$checked	o17588	g$names	o17676	g$j	o17683	g$checked	o17847	g$checked	o17880	g$etape	o18276	g$ldap_link	o18442	g$r	o18502	g$ldap_link	o18518	g$ldap_link	o18566	g$r	o18581	g$log!
 in_ldap	o18588	g$etape	o19385	g$adresse_ldap	o19592	g$port_ldap	o19622	g$s	o19763	g$s	o19878	g$regs	o19882	g$adresse_ldap	o19895	g$regs	o19911	g$port_ldap	o19924	g$regs	o19937
downloadfile.class.php	dDOWNLOADFILE_H	o365	cDOWNLOADFILE	o396	vdf_path	o419	vdf_contenttype	o441	vdf_contentdisposition	o470	vdf_filename	o506	kDOWNLOADFILE	o538	fmime_content_type	o718	mdf_exists	o1193	mdf_size	o1314	mdf_permitother	o1471	mdf_download	o1586
ecrire/delete_all.php3	g$action	o150	g$action	o202	g$action	o2077
ecrire/inc_version.php3	d_ECRIRE_INC_VERSION	o103	fdefine_once	o142	g$included_files	o764	finclude_local	o801	finclude_ecrire	o903	finclude_lang	o1161	finclude_plug	o1290	g$db_ok	o2058	fmagic_unquote	o2464	g$unquote_gpc	o2717	g$unquote_gpc	o2762	g$INSECURE	o3020	ffeed_globals	o3051	g$INSECURE	o3136	ffeed_post_files	o4093	g$INSECURE	o4127	g$table_prefix	o5004	g$cookie_prefix	o5134	g$cookie_path	o5159	g$dossier_squelettes	o5286	g$auto_compress	o5447	g$compresser_cache	o5608	g$type_urls	o5800	g$convert_command	o6052	g$pnmscale_command	o6269	g$mysql_debug	o6357	g$mysql_profile	o6425	g$mysql_rappel_connexion	o6680	g$test_i18n	o6770	g$activer_revision_nbsp	o6866	g$champs_extra	o6968	g$champs_extra_proposes	o6991	g$ignore_auth_http	o7269	g$ignore_remote_user	o7296	g$invalider_caches	o7546	g$quota_cache	o7897	g$code_activation_debug	o8111	g$help_server	o8184	g$tex_server	o8233	g$ortho_servers	o8467	g$traiter_math	o8570	g$extension_squelette	o8747	g$test_dirs	o10270	g$flag_ecrire	o11!
 192	g$dir_ecrire	o11263	g$GLOBALS	o11295	g$spip_version	o11517	g$spip_version_affichee	o11560	g$regs	o11674	g$spip_version_affichee	o11682	g$regs	o11707	g$auteur_session	o11737	g$connect_statut	o11759	g$hash_recherche	o11781	g$hash_recherche_strict	o11803	g$php_version	o11903	g$php_version_tab	o11932	g$php_version	o11964	g$php_version_maj	o11979	g$php_version_tab	o12005	g$php_version_med	o12027	g$php_version_tab	o12053	g$php_version_tab	o12096	g$match	o12117	g$php_version_min	o12126	g$match	o12152	g$flag_levenshtein	o12165	g$php_version_maj	o12186	g$flag_uniqid2	o12210	g$php_version_maj	o12227	g$php_version_min	o12251	g$flag_get_cfg_var	o12276	g$flag_strtr2	o12337	g$php_version_maj	o12353	g$flag_ini_get	o12377	g$flag_gz	o12491	g$flag_ob	o12542	g$flag_ini_get	o12554	g$flag_pcre	o12649	g$flag_crypt	o12695	g$flag_wordwrap	o12735	g$flag_apc	o12781	g$flag_sapi_name	o12820	g$flag_utf8_decode	o12872	g$flag_ldap	o12924	g$flag_flock	o12970	g$flag_ImageCreateTrueColor	o13010	g$flag_I!
 mageCopyResampled	o13080	g$flag_ImageGif	o13146	g$flag_ImageJpeg	o1319
2	g$flag_ImagePng	o13240	g$flag_imagick	o13286	g$flag_multibyte	o13395	g$flag_iconv	o13454	g$flag_strtotime	o13494	g$flag_gd	o13543	g$flag_ImageGif	o13554	g$flag_ImageJpeg	o13572	g$flag_ImagePng	o13591	g$flag_revisions	o13607	g$flag_pcre	o13626	fspip_setcookie	o13721	g$cookie_prefix	o14250	g$HTTP_COOKIE_VARS	o14286	g$name	o14319	g$value	o14325	g$HTTP_COOKIE_VARS	o14340	g$name	o14383	g$HTTP_COOKIE_VARS	o14402	g$name	o14420	g$name	o14439	g$HTTP_COOKIE_VARS	o14462	g$name	o14495	g$value	o14501	g$HTTP_COOKIE_VARS	o14516	g$cookie_prefix	o14553	g$name	o14573	g$spipname	o14586	g$cookie_prefix	o14616	g$name	o14645	g$HTTP_COOKIE_VARS	o14656	g$spipname	o14674	g$INSECURE	o14687	g$spipname	o14697	g$value	o14710	g$spipname	o14722	g$value	o14734	g$HTTP_SERVER_VARS	o14808	fspip_log	o14950	g$REQUEST_URI	o15819	g$REQUEST_URI	o15836	g$PHP_SELF	o15851	g$REQUEST_URI	o15875	g$QUERY_STRING	o15897	g$REQUEST_URI	o15914	g$QUERY_STRING	o15934	g$PATH_TRANSLATED	o15957	g$SCRIPT_FILENAME	o15982	g$PATH_TR!
 ANSLATED	o16000	g$SCRIPT_FILENAME	o16019	g$DOCUMENT_ROOT	o16047	g$SCRIPT_URL	o16065	g$PATH_TRANSLATED	o16078	g$DOCUMENT_ROOT	o16097	g$SCRIPT_URL	o16112	fspip_query	o16137	fappliquer_fonction	o16493	fappliquer_fonction_avant	o17072	fappliquer_fonction_apres	o17382	fcompleter_fonction	o17732	g$php_module	o18122	g$flag_sapi_name	o18138	g$SERVER_SOFTWARE	o18219	g$php_cgi	o18239	g$flag_sapi_name	o18251	fhttp_status	o18314	g$php_cgi	o18345	g$REDIRECT_STATUS	o18355	fhttp_gmoddate	o18698	fhttp_last_modified	o18789	g$flag_upload	o19319	g$flag_get_cfg_var	o19336	ftester_upload	o19410	ftest_obgz	o19598	g$flag_ob	o20266	cLink	o20409	vfile	o20422	vvars	o20434	varrays	o20446	kLink	o20596	vlink	o20644	mdelVar	o22879	maddVar	o23123	mgetUrl	o23379	mgetForm	o23937	g$clean_link	o24745	fquote_amp	o24814	flire_meta	o25088	g$meta	o25114	flire_meta_maj	o25153	g$meta_maj	o25183	g$meta	o25323	g$meta	o25493	femail_valide	o25650	f_T	o26140	f_L	o26408	g$langue_site	o26552	g$langue_site	o26598	g$spip_l!
 ang	o26645	g$langue_site	o26658	ftable_objet	o26722	fspip_timer	o26921
	vtime	o26954	fcron	o27418	fcalculer_hierarchie	o27768	fcreer_repertoire	o28295	fredirige_par_entete	o28833	fdebut_entete	o28985
ecrire/inc_mots.php3	d_ECRIRE_INC_MOTS	o100	g$GLOBALS	o207	g$GLOBALS	o244	flevenshtein255	o347	fmots_ressemblants	o466	fformulaire_mots	o1837	g$flag_mots_ressemblants	o1934	g$connect_statut	o1967	g$options	o1984	g$spip_lang_rtl	o2002	g$spip_lang_right	o2018
ecrire/import_all.php3	fverifier_version_sauvegarde	o257	g$spip_version	o306	g$flag_gz	o329	g$archive	o926	g$action	o939	g$archive	o1003	g$commentaire	o1016	g$archive	o1060	g$action	o1086	g$commentaire	o1095	g$archive	o1112	g$archive	o1139	g$archive	o1230	g$action	o1309
ecrire/inc_objet.php3	d_ECRIRE_INC_OBJET	o101	cArticleFactory	o1012	kArticleFactory	o1102	mnew_object	o1485	cArticle	o1628	kArticle	o1682	ffetch_article	o1764	cBreveFactory	o1983	kBreveFactory	o2071	mnew_object	o2374	cBreve	o2515	kBreve	o2567	ffetch_breve	o2645	cDocumentFactory	o2863	kDocumentFactory	o2954	mnew_object	o3291	cDocument	o3382	kDocument	o3437	ffetch_document	o3521
ecrire/lang/public_en.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/oo/index.php
ecrire/pclzip.lib.php	g$g_pclzip_version	o2874	cPclZip	o6141	vzipname	o6202	vzip_fd	o6274	verror_code	o6336	verror_string	o6362	kPclZip	o6835	mcreate	o9637	madd	o16338	mlistContent	o23932	mextract	o26427	mextractByIndex	o33187	mdelete	o39254	mdeleteByIndex	o42211	mproperties	o43215	mduplicate	o45666	mmerge	o48141	merrorCode	o50023	merrorName	o50518	merrorInfo	o52588	mprivCheckFormat	o54114	mprivParseOptions	o56186	mprivCreate	o72792	mprivAdd	o74036	mprivOpenFd	o81219	mprivCloseFd	o82757	mprivAddList	o84046	mprivAddFileList	o87058	mprivAddFile	o92385	mprivWriteFileHeader	o101719	mprivWriteCentralFileHeader	o104133	mprivWriteCentralHeader	o106633	mprivList	o107835	mprivConvertHeader2FileInfo	o111603	mprivExtractByRule	o113548	mprivExtractFile	o126579	mprivExtractFileInOutput	o138697	mprivExtractFileAsString	o144006	mprivReadFileHeader	o146582	mprivReadCentralFileHeader	o152536	mprivReadEndCentralDir	o159348	mprivDeleteByRule	o167847	mprivDirCheck	o184032	mprivMerge	o186366	mpr!
 ivDuplicate	o194716	mprivErrorLog	o197448	mprivErrorReset	o198058	fPclZipUtilPathReduction	o198729	fPclZipUtilPathInclusion	o200859	fPclZipUtilCopyBlock	o203713	fPclZipUtilRename	o206853	fPclZipUtilOptionText	o208265	fPclZipUtilTranslateWinPath	o210548
ecrire/plugins/plug_ancres.php	favant_propre_ancres	o68
ecrire/inc_admin.php3	d_ECRIRE_INC_ADMIN	o101	ffichier_admin	o139	g$connect_login	o172	fdebut_admin	o278	g$clean_link	o326	g$connect_statut	o347	ffin_admin	o1343	f_action_auteur	o1484	g$connect_id_auteur	o1562	g$connect_pass	o1582	fcalculer_action_auteur	o1919	fverifier_action_auteur	o2043
ecrire/lab_diff.php	d_ECRIRE_INC_DIFF	o97	flcs_opt	o412	flcs	o1065	ftest_lcs	o2175	ftest_lcs_opt	o2522	cDiff	o2883	vdiff	o2896	vfuzzy	o2908	kDiff	o2926	mcomparer	o3000	cDiffTexte	o4791	vr	o4809	kDiffTexte	o4823	m_diff	o4868	mfuzzy	o4974	msegmenter	o5012	majouter	o5078	msupprimer	o5210	mdeplacer	o5356	mcomparer	o5551	mresultat	o5638	cDiffPara	o5682	vr	o5699	kDiffPara	o5713	m_diff	o5757	mfuzzy	o5865	msegmenter	o5903	majouter	o6214	msupprimer	o6338	mdeplacer	o6476	mcomparer	o6633	mresultat	o6711	cDiffPhrase	o6755	vr	o6774	kDiffPhrase	o6788	mfuzzy	o6834	msegmenter	o6873	majouter	o8263	msupprimer	o8388	mcomparer	o8527	mresultat	o8582	fpreparer_diff	o8630	fafficher_diff	o8888
ecrire/lab_ortho.php	d_ECRIRE_INC_ORTHO	o98	fmaj_miroirs_ortho	o181	flire_miroirs_ortho	o1208	g$miroirs_ortho	o1239	g$index_miroirs_ortho	o1255	g$duree_cache_miroirs_ortho	o1277	fecrire_miroir_ortho	o2338	g$index_miroirs_ortho	o2382	fajouter_langue_miroir	o2589	g$miroirs_ortho	o2634	fenlever_langue_miroir	o2780	g$miroirs_ortho	o2825	freset_miroir	o2974	g$miroirs_ortho	o3003	fchercher_miroirs_ortho	o3141	g$miroirs_ortho	o3181	fchoisir_miroirs_ortho	o3616	fpost_ortho	o3905	fverifier_langue_miroir	o6552	fsuggerer_dico_ortho	o6998	fajouter_dico_ortho	o7556	g$connect_id_auteur	o7598	fsupprimer_dico_ortho	o7864	fgerer_dico_ortho	o8062	g$ajout_ortho	o8096	g$supp_ortho	o8110	fsuggerer_cache_ortho	o8326	g$duree_cache_ortho	o8372	fajouter_cache_ortho	o9133	g$duree_cache_ortho	o9187	fpreparer_ortho	o9958	fafficher_ortho	o10232	fcorriger_ortho	o10677	fpanneau_ortho	o14305	g$id_suggest	o14344	fsouligner_match_ortho	o17088	fsouligner_ortho	o17863	g$id_suggest	o17919	finit_ortho	o19452	g$d!
 uree_cache_ortho	o19475	g$duree_cache_miroirs_ortho	o19495
ecrire/lang/public_cpf.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/sites_edit.php3	g$proposer_sites	o66	fmySel	o123	fpremiere_rubrique	o267	fenfant	o519	g$id_parent	o546	g$id_rubrique	o566	vi	o589	g$statut	o618	g$connect_toutes_rubriques	o635	g$couleur_claire	o670	g$spip_lang_left	o687	g$browser_name	o712	g$proposer_sites	o2778	g$query	o2826	g$result	o2893	g$query	o2914	g$row	o2927	g$result	o2951	g$id_syndic	o2964	g$row	o2977	g$id_rubrique	o2997	g$row	o3012	g$nom_site	o3034	g$row	o3059	g$url_site	o3079	g$row	o3104	g$url_syndic	o3124	g$row	o3151	g$descriptif	o3173	g$row	o3200	g$syndication	o3222	g$row	o3237	g$syndication	o3268	g$new	o3291	g$id_rubrique	o3312	g$id_rubrique	o3330	g$id_rubrique	o3476	g$new	o3672	g$nom_site	o3952	g$new	o4010	g$proposer_sites	o4028	g$connect_statut	o4080	g$proposer_sites	o4114	g$link	o4179	g$link	o4213	g$id_rubrique	o4242	g$link	o4259	g$link	o4290	g$clean_link	o4316	g$link	o4342	g$link	o4388	g$cadre_ouvert	o4824	g$link	o4895	g$target	o4912	g$link	o4922	g$link	o4944	g$link	o4983	g$syndication	o5016	g$link	o!
 5036	g$nom_site	o5061	g$nom_site	o5086	g$url_site	o5098	g$url_site	o5123	g$url_syndic	o5135	g$url_syndic	o5162	g$url_site	o5314	g$url_site	o5328	g$id_rubrique	o5487	g$logo_parent	o5506	g$query	o5553	g$result	o5637	g$query	o5656	g$row	o5673	g$result	o5695	g$parent_parent	o5709	g$row	o5724	g$parent_parent	o5753	g$logo_parent	o5774	g$logo_parent	o5814	g$descriptif	o6304	g$activer_syndic	o6340	g$activer_syndic	o6469	g$syndication	o6526	g$syndication	o6841	g$url_syndic	o7277	g$url_syndic	o7295	g$cadre_ouvert	o7893
plan.php3	g$fond	o7	g$delais	o23
inc-balises.php3	d_INC_BALISES	o482	fchamps_traitements	o562	vtraitements	o597	fbalise_distante_interdite	o2613	fbalise_NOM_SITE_SPIP_dist	o2820	fbalise_EMAIL_WEBMASTER_dist	o2934	fbalise_CHARSET_dist	o3057	fbalise_LANG_LEFT_dist	o3164	fbalise_LANG_RIGHT_dist	o3353	fbalise_LANG_DIR_dist	o3543	fbalise_PUCE_dist	o3728	fbalise_DATE_dist	o4137	fbalise_DATE_REDAC_dist	o4319	fbalise_DATE_MODIF_dist	o4513	fbalise_DATE_NOUVEAUTES_dist	o4712	fbalise_URL_SITE_SPIP_dist	o4929	fbalise_URL_ARTICLE_dist	o5048	fbalise_URL_RUBRIQUE_dist	o5568	fbalise_URL_BREVE_dist	o5848	fbalise_URL_MOT_dist	o6117	fbalise_URL_FORUM_dist	o6306	fbalise_URL_DOCUMENT_dist	o6448	fbalise_URL_AUTEUR_dist	o6600	fbalise_NOTES_dist	o6869	fbalise_RECHERCHE_dist	o6995	fbalise_COMPTEUR_BOUCLE_dist	o7123	fbalise_TOTAL_BOUCLE_dist	o7373	fbalise_POINTS_dist	o7694	fbalise_POPULARITE_ABSOLUE_dist	o7779	fbalise_POPULARITE_SITE_dist	o7920	fbalise_POPULARITE_MAX_dist	o8052	fbalise_EXPOSER_dist	o8181	g$table_primary	o8216	fbalis!
 e_EMBED_DOCUMENT_dist	o9029	fbalise_DEBUT_SURLIGNE_dist	o9684	g$flag_pcre	o9725	fbalise_FIN_SURLIGNE_dist	o9844	g$flag_pcre	o9883	fbalise_INTRODUCTION_dist	o10004	fbalise_LANG_dist	o10332	fbalise_LESAUTEURS_dist	o10647	fbalise_PETITION_dist	o11530	fbalise_POPULARITE_dist	o11882	fcalculer_balise_logo	o12214	fbalise_EXTRA_dist	o15103	fbalise_PARAMETRES_FORUM_dist	o16002	fcode_invalideur_forums	o17289	fbalise_SELF_dist	o17714	fbalise_HTTP_VARS_dist	o17881
ecrire/lang/spip_oc_ni.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/spip_zh.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/spip_hu.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/recherche.php3	g$recherche	o99	g$recherche	o136	g$recherche	o211	g$recherche_aff	o248	g$onfocus	o292	g$recherche_aff	o452	g$onfocus	o526	g$recherche	o590	g$query_articles	o783	g$query_breves	o839	g$query_rubriques	o892	g$query_sites	o951	g$recherche	o1026	g$query_articles	o1043	g$query_breves	o1098	g$query_rubriques	o1149	g$query_sites	o1206	g$recherche	o1314	g$recherche	o1348	g$rech2	o1362	g$recherche	o1393	g$rech2	o1411	g$where	o1421	g$rech2	o1477	g$where	o1501	g$query_articles	o1521	g$query_breves	o1577	g$query_rubriques	o1635	g$query_sites	o1698	g$query_sites	o1755	g$query_sites	o1815	g$activer_moteur	o1833	g$activer_moteur	o1896	g$hash_recherche	o1977	g$recherche	o2011	g$query_articles_int	o2026	g$hash_recherche	o2080	g$query_breves_int	o2100	g$hash_recherche	o2150	g$query_rubriques_int	o2170	g$hash_recherche	o2226	g$query_sites_int	o2246	g$hash_recherche	o2296	g$query_auteurs_int	o2316	g$hash_recherche	o2368	g$query_articles	o2396	g$nba	o2415	g$query_articles	o2!
 470	g$activer_moteur	o2493	g$nba	o2518	g$doublons	o2529	g$nba	o2546	g$query_articles_int	o2561	g$query_articles_int	o2655	g$nba1	o2683	g$query_articles_int	o2750	g$query_breves	o2782	g$nbb	o2799	g$query_breves	o2850	g$activer_moteur	o2877	g$nbb	o2902	g$doublons	o2913	g$nbb	o2930	g$query_breves_int	o2945	g$query_breves_int	o3035	g$nbb1	o3061	g$query_breves_int	o3124	g$query_rubriques	o3160	g$nbr	o3180	g$query_rubriques	o3238	g$activer_moteur	o3262	g$nbr	o3287	g$doublons	o3298	g$nbr	o3315	g$query_rubriques_int	o3330	g$query_rubriques_int	o3426	g$nbr1	o3455	g$query_rubriques_int	o3525	g$activer_moteur	o3558	g$nbt	o3577	g$query_auteurs_int	o3630	g$query_sites	o3658	g$nbs	o3674	g$query_sites	o3723	g$activer_moteur	o3743	g$nbs	o3768	g$doublons	o3779	g$nbs	o3796	g$query_sites_int	o3811	g$query_sites_int	o3901	g$nbs1	o3926	g$query_sites_int	o3987	g$nba	o4017	g$nba1	o4027	g$nbb	o4038	g$nbb1	o4048	g$nbr	o4059	g$nbr1	o4069	g$nbt	o4080	g$nbs	o4090	g$nbs1	o4100
inc-urls-html.php3	d_INC_URLS2	o76	fgenerer_url_article	o106	fgenerer_url_rubrique	o188	fgenerer_url_breve	o274	fgenerer_url_mot	o348	fgenerer_url_auteur	o414	fgenerer_url_document	o492	frecuperer_parametres_url	o842	g$contexte	o890	fracine_forum	o1021	fgenerer_url_forum	o1611
ecrire/lang/spip_gl.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/spip_nl.php3	g$GLOBALS	o80	g$GLOBALS	o89
spip_cookie.php3	fauth_http	o112	g$change_session	o783	g$spip_session	o833	g$auteur_session	o1046	g$auteur_session	o1094	g$cookie	o1135	g$auteur_session	o1166	g$spip_session	o1205	g$cookie	o1255	g$url	o1580	g$url	o1587	g$url	o1604	g$essai_auth_http	o1655	g$ignore_auth_http	o1677	g$url	o1710	g$url	o1717	g$essai_auth_http	o1745	g$logout_public	o1826	g$logout	o1845	g$logout_public	o1855	g$url	o1877	g$url	o1885	g$logout	o1935	g$auteur_session	o1973	g$logout	o2001	g$auteur_session	o2115	g$spip_session	o2152	g$auteur_session	o2185	g$spip_session	o2256	g$PHP_AUTH_USER	o2302	g$ignore_auth_http	o2322	g$url	o2357	g$url	o2364	g$auteur_session	o2416	g$url	o2459	g$url	o2466	g$test_echec_cookie	o2651	g$url	o2811	g$url	o2818	g$cookie_session	o2879	g$redirect	o2897	g$url	o2910	g$url	o2917	g$essai_login	o2949	g$session_login_hidden	o3018	g$session_login	o3045	g$session_login	o3063	g$session_login_hidden	o3080	g$login	o3105	g$session_login	o3114	g$pass	o3131	g$session_password	o3139	g$auths	o!
 3212	g$ldap_present	o3308	g$auths	o3323	g$ok	o3343	g$auths	o3363	g$nom_auth	o3387	g$auths	o3405	g$nom_auth	o3445	g$classe_auth	o3467	g$nom_auth	o3490	g$auth	o3503	g$classe_auth	o3515	g$auth	o3535	g$ok	o3591	g$auth	o3597	g$login	o3627	g$session_password_md5	o3635	g$next_session_password_md5	o3658	g$ok	o3745	g$session_password	o3752	g$ok	o3771	g$auth	o3777	g$login	o3793	g$session_password	o3801	g$ok	o3828	g$auth	o3836	g$ok	o3873	g$auth	o3882	g$auth	o3907	g$auth	o3924	g$cookie_admin	o3992	g$auth	o4012	g$query	o4029	g$auth	o4092	g$result	o4113	g$query	o4134	g$row_auteur	o4149	g$result	o4180	g$cookie_session	o4193	g$row_auteur	o4232	g$redirect	o4278	g$redirect	o4300	g$redirect	o4321	g$redirect	o4413	g$redirect	o4430	g$redirect	o4467	g$redirect	o4488	g$session_password	o4545	g$session_password_md5	o4566	g$redirect	o4592	g$redirect	o4627	g$url	o4660	g$cookie_admin	o4698	g$spip_admin	o4754	g$redirect	o4789	g$redirect	o4841	g$redirect	o4854	g$redirect	o4875	g$cookie_admin	o4933	g$sp!
 ip_admin	o4951	g$cookie_admin	o4966	g$cookie_admin	o5013	g$cookie_sess
ion	o5084	g$session_remember	o5108	g$cookie_session	o5169	g$cookie_session	o5251	g$prefs	o5271	g$row_auteur	o5281	g$row_auteur	o5317	g$prefs	o5351	g$session_remember	o5368	g$prefs	o5482	g$row_auteur	o5514	g$var_lang	o5587	g$var_lang	o5655	g$var_lang	o5699	g$redirect	o5739	g$redirect	o5786	g$redirect	o5800	g$redirect	o5821	g$var_lang_ecrire	o5925	g$var_lang_ecrire	o6022	g$var_lang_ecrire	o6080	g$var_lang_ecrire	o6155	g$valeur	o6310	g$id_auteur	o6319	g$var_lang_ecrire	o6396	g$id_auteur	o6437	g$auteur_session	o6454	g$var_lang_ecrire	o6480	g$auteur_session	o6518	g$spip_session	o6535	g$redirect	o6605	g$redirect	o6652	g$redirect	o6666	g$redirect	o6687	g$SERVER_SOFTWARE	o6881	g$redirect	o6923	g$redirect	o6974	g$redirect	o7060	g$redirect	o7119
ecrire/configuration.php3	fmySel	o76	g$connect_statut	o435	g$connect_toutes_rubriques	o470	g$changer_config	o599	g$forums_publics	o665	g$forums_publics	o718	g$nom_site	o1055	g$adresse_site	o1105	g$email_webmaster	o1163	g$options	o1597	g$options	o2059	g$articles_surtitre	o2298	g$articles_soustitre	o2352	g$articles_descriptif	o2408	g$articles_chapeau	o2466	g$articles_ps	o2518	g$articles_redac	o2560	g$articles_urlref	o2608	g$articles_surtitre	o3078	g$articles_soustitre	o3399	g$articles_descriptif	o3722	g$articles_chapeau	o4042	g$articles_ps	o4360	g$articles_redac	o4688	g$articles_urlref	o4999	g$post_dates	o5467	g$post_dates	o5772	g$activer_breves	o6294	g$activer_breves	o6601	g$options	o7020	g$articles_mots	o7128	g$config_precise_groupes	o7174	g$mots_cles_forums	o7238	g$forums_publics	o7290	g$articles_mots	o7672	g$articles_mots	o7859	g$articles_mots	o8147	g$style	o8172	g$style	o8206	g$config_precise_groupes	o8663	g$forums_publics	o8873	g$mots_cles_forums	o9316	g$activer_sites	o1!
 0000	g$activer_syndic	o10045	g$proposer_sites	o10092	g$visiter_sites	o10139	g$moderation_sites	o10184	g$activer_sites	o10487	g$activer_sites	o10679	g$activer_sites	o10806	g$style	o10831	g$style	o10864	g$proposer_sites	o11397	g$proposer_sites	o11486	g$proposer_sites	o11570	g$options	o11735	g$activer_syndic	o12269	g$activer_syndic	o12463	g$activer_syndic	o12567	g$style	o12593	g$style	o12628	g$moderation_sites	o12896	g$activer_moteur	o13089	g$activer_moteur	o13143	g$visiter_sites	o13405	g$documents_rubrique	o14057	g$documents_article	o14112	g$documents_article	o14464	g$documents_rubrique	o14659
inc-messforum.php3	fprevenir_auteurs	o211	g$retour_forum	o1582	g$retour	o1611	g$forum_id_article	o1621	g$id_article	o1648	g$forum_id_rubrique	o1662	g$id_rubrique	o1690	g$forum_id_forum	o1705	g$id_forum	o1730	g$forum_id_breve	o1742	g$id_breve	o1767	g$forum_id_syndic	o1779	g$id_syndic	o1805	g$slash_texte	o1818	g$texte	o1844	g$slash_titre	o1853	g$titre	o1879	g$slash_nom_site_forum	o1888	g$nom_site_forum	o1923	g$slash_url_site	o1941	g$url_site	o1970	g$id_message	o1982	g$id_message	o2003	g$id_auteur	o2023	g$id_auteur	o2036	g$auteur_session	o2056	g$forum_id_article	o2092	g$r	o2114	g$r	o2211	g$r	o2233	g$r	o2243	g$forums_publics	o2249	g$r	o2267	g$forums_publics	o2297	g$forums_publics	o2354	g$forums_publics	o2420	g$auteur_session	o2453	g$statut	o2474	g$auteur_session	o2484	g$statut	o2518	g$statut	o2529	g$retour_forum	o2662	g$retour_forum	o2811	g$auteur	o2912	g$auteur_session	o2922	g$email_auteur	o2947	g$auteur_session	o2963	g$slash_auteur	o2994	g$auteur	o3021	g$slash_email_auteur	o30!
 31	g$email_auteur	o3064	g$slash_texte	o3093	g$slash_titre	o3116	g$slash_nom_site_forum	o3139	g$slash_url_site	o3171	g$slash_auteur	o3197	g$slash_email_auteur	o3221	g$retour_forum	o3364	g$ajouter_mot	o3474	g$ajouter_mot	o3502	g$key	o3516	g$ajouter_mot	o3525	g$ajouter_mot	o3544	g$les_mots	o3561	g$ajouter_mot	o3583	g$key	o3596	g$les_mots	o3609	g$les_mots	o3634	g$index	o3652	g$index	o3664	g$les_mots	o3679	g$index	o3691	g$le_mot	o3704	g$les_mots	o3714	g$index	o3724	g$le_mot	o3739	g$validation_finale	o3858	g$confirmer	o3887	g$afficher_texte	o3908	g$ajouter_mot	o3935	g$statut	o3951	g$validation_finale	o3964	g$forums_publics	o4000	g$forums_publics	o4039	g$forum_id_forum	o4094	g$id_thread	o4115	g$forum_id_forum	o4128	g$id_thread	o4150	g$id_message	o4163	g$validation_finale	o4744	g$hash	o4948	g$afficher_texte	o5053	g$id_article	o5084	g$forum_id_article	o5098	g$auteur	o5140	g$email_auteur	o5149	g$id_article	o5164	g$texte	o5177	g$titre	o5185	g$cookie_user	o5257	g$auteur	o5287	g$email_a!
 uteur	o5307	g$cookie_user	o5369	g$statut	o5488	g$forum_id_article	o557
4	g$forum_id_breve	o5598	g$forum_id_rubrique	o5620	g$forum_id_syndic	o5645	g$redirect	o5678	g$retour_forum	o5690
ecrire/inc_math.php3	d_ECRIRE_INC_MATH	o100	fimage_math	o202	g$traiter_math	o229	ftraiter_math	o1525
ecrire/inc_suivi_revisions.php	d_ECRIRE_INC_SUIVI_REVISIONS	o110	fafficher_para_modifies	o275	fafficher_suivi_versions	o632	g$connect_id_auteur	o746	g$connect_statut	o766	g$dir_lang	o783
ecrire/http.class.php	chttp_header	o5253	p5039	l205	v_headers	o5275	v_debug	o5293	khttp_header	o5315	mget_header	o5440	mset_header	o5694	mreset	o5916	mserialize_headers	o6108	m_format_header_name	o6320	madd_debug_info	o6566	mget_debug_info	o6639	chttp_response_header	o6950	p6727	l214	vcookies_headers	o7001	khttp_response_header	o7034	mdeserialize_headers	o7192	mreset	o7999	chttp_request_message	o8392	p8169	l214	vbody	o8443	khttp_request_message	o8465	mreset	o8599	chttp_response_message	o8893	p8669	l215	vbody	o8954	vcookies	o8968	khttp_response_message	o8993	mget_status	o9195	mget_protocol_version	o9357	mget_content_type	o9546	mget_body	o9629	mreset	o9687	mparse_cookies	o9773	chttp_cookie	o10152	p9938	l205	vcookies	o10174	khttp_cookie	o10197	m_now	o10299	m_timestamp	o10415	mget	o10617	mset	o11293	mparse	o11574	chttp	o13063	p12856	l198	v_socket	o13078	vhost	o13095	vport	o13109	vhttp_version	o13123	vuser_agent	o13145	verrstr	o13165	vconnected	o13181	vuri	o13200	v_proxy_host	o13!
 213	v_proxy_port	o13234	v_proxy_login	o13255	v_proxy_pwd	o13277	v_use_proxy	o13297	v_auth_login	o13317	v_auth_pwd	o13338	v_response	o13358	v_request	o13378	v_keep_alive	o13396	khttp	o13425	muse_proxy	o14305	mset_request_header	o14665	mget_response_body	o14772	mget_response	o14850	mhead	o14917	mget	o17176	mmultipart_post	o20006	mpost	o23420	mpost_xml	o26706	mdisconnect	o29947	m_connect	o30331	p30121	l192	m_merge_multipart_form_data	o30823	m_merge_form_data	o31950	m_current_directory	o32399	m_get_response	o32642	m_parse_location	o34510	m_redirect	o35340
ecrire/inc_auth_spip.php3	d_ECRIRE_INC_AUTH_SPIP	o105	cAuth_spip	o143	vnom	o161	minit	o235	mverifier_challenge_md5	o323	mverifier	o990	mlire	o1455	mactiver	o1493
distrib.php3	g$fond	o6	g$delais	o25	g$flag_preserver	o106
ecrire/admin_effacer.php3	g$connect_statut	o326	g$connect_toutes_rubriques	o361
ecrire/inc_filtres.php3	d_ECRIRE_INC_FILTRES	o103	fcorriger_entites_html	o343	fcorriger_toutes_entites_html	o547	fentites_html	o659	ffiltrer_entites	o801	fentites_unicode	o1063	ftexte_backend	o1196	fsupprimer_numero	o1939	fsupprimer_tags	o2133	fechapper_tags	o2463	ftextebrut	o2629	fliens_ouvrants	o3244	fhttp_href	o3525	fcorriger_caracteres	o3924	vtrans	o3963	fPtoBR	o4870	fmajuscules	o5132	ftaille_en_octets	o5923	ftexte_script	o6426	fattribut_html	o6631	fvider_url	o6860	g$var_preview	o6887	furl_var_recherche	o7229	fextraire_date	o7530	fantispam	o7722	fsinon	o7959	fchoixsivide	o8130	fchoixsiegal	o8282	fnormaliser_date	o8384	fvider_date	o8956	frecup_heure	o9117	fheures	o9369	fminutes	o9525	fsecondes	o9683	fheures_minutes	o9841	frecup_date	o9975	fdate_relative	o10635	faffdate_base	o11653	g$spip_lang	o11693	fnom_jour	o14298	fjour	o14375	fjournum	o14444	fmois	o14519	fnom_mois	o14588	fannee	o14665	fsaison	o14736	faffdate	o14809	faffdate_court	o14883	faffdate_jourcourt	o14962	faffda!
 te_mois_annee	o15049	faffdate_heure	o15138	faligner	o15315	fjustifier	o15582	faligner_droite	o15653	faligner_gauche	o15727	fcentrer	o15800	fstyle_align	o15868	g$spip_lang_left	o15896	ffiltrer_ical	o15986	fdate_ical	o16280	fdate_iso	o16473	freduire_image	o16738	fextra	o17012	fpost_autobr	o17160	fmulti_trad	o17978	fextraire_trad	o18735	fextraire_multi	o19179	g$flag_pcre	o19215	fajoute_popup_multi	o19623	vnum_multi	o19687	g$multi_popup	o19708	fextraire_attribut	o20342	fboutonne	o20786	fhttp_script	o20919	finscriptionok	o21188
ecrire/sites.php3	g$proposer_sites	o176	fcalculer_droits	o233	g$connect_statut	o261	g$statut	o278	g$id_rubrique	o287	g$id_rubrique_depart	o301	g$proposer_sites	o322	g$new	o339	g$flag_editable	o353	g$flag_administrable	o369	fmy_sel	o694	fafficher_mois	o847	fafficher_annee	o1394	fafficher_jour	o1688	g$new	o1889	g$flag_editable	o1932	g$id_rubrique	o1952	g$id_rubrique	o1974	g$mydate	o1993	g$query	o2041	g$result	o2124	g$query	o2145	g$moderation	o2158	g$id_syndic	o2233	g$query	o2500	g$result	o2585	g$query	o2606	g$row	o2620	g$result	o2644	g$statut	o2657	g$row	o2667	g$id_rubrique_depart	o2684	g$row	o2706	g$id_rubrique	o2733	g$id_rubrique	o2747	g$id_rubrique_depart	o2762	g$new	o2789	g$statut	o2804	g$analyser_site	o2888	g$flag_editable	o2916	g$v	o2936	g$url	o2955	g$v	o2968	g$nom_site	o2976	g$v	o2999	g$url_site	o3018	g$v	o3041	g$nom_site	o3065	g$nom_site	o3076	g$url_site	o3088	g$url_syndic	o3101	g$v	o3126	g$descriptif	o3147	g$v	o3172	g$syndication	o3193	g$v	o3208	g$query	o3238	g$id_syn!
 dic	o3451	g$result	o3466	g$query	o3487	g$syndication	o3502	g$id_syndic	o3539	g$link	o3554	g$link	o3588	g$link	o3618	g$redirect	o3647	g$link	o3659	g$redirect_ok	o3678	g$nouveau_statut	o3754	g$flag_administrable	o3774	g$statut	o3798	g$nouveau_statut	o3808	g$query	o3826	g$id_syndic	o3901	g$result	o3915	g$query	o3936	g$statut	o4000	g$query	o4025	g$result	o4108	g$query	o4129	g$statut	o4169	g$id_syndic	o4294	g$nom_site	o4321	g$modifier_site	o4335	g$flag_editable	o4363	g$nom_site	o4382	g$nom_site	o4405	g$url_site	o4418	g$url_site	o4441	g$descriptif	o4454	g$descriptif	o4479	g$url_syndic	o4505	g$syndication	o4523	g$url_syndic	o4546	g$url_syndic	o4571	g$query	o4587	g$id_syndic	o4814	g$result	o4828	g$query	o4849	g$syndication_old	o4864	g$syndication	o4884	g$url_syndic	o4900	g$old_syndic	o4915	g$recalcul	o4932	g$syndication_old	o4959	g$syndication	o4979	g$syndication	o4996	g$statut	o5159	g$invalider_caches	o5188	g$id_syndic	o5409	g$link	o5430	g$link	o5463	g$link	o5492	g$redirect	o5520	!
 g$link	o5532	g$redirect_ok	o5550	g$jour	o5580	g$flag_administrable	o55
90	g$annee	o5618	g$mois	o5636	g$mois	o5655	g$jour	o5670	g$query	o5685	g$id_syndic	o5769	g$result	o5783	g$query	o5804	g$redirect	o5845	g$redirect_ok	o5859	g$redirect	o5905	g$recalcul	o5943	g$result	o5967	g$result	o6094	g$result	o6120	g$erreur_syndic	o6134	g$id_syndic	o6166	g$query	o6230	g$result	o6297	g$query	o6318	g$row	o6332	g$result	o6356	g$id_syndic	o6369	g$row	o6382	g$id_rubrique	o6402	g$row	o6417	g$nom_site	o6439	g$row	o6464	g$url_site	o6484	g$row	o6509	g$url_syndic	o6529	g$row	o6556	g$descriptif	o6578	g$row	o6605	g$syndication	o6627	g$row	o6642	g$statut	o6664	g$row	o6674	g$date_heure	o6691	g$row	o6705	g$date_syndic	o6720	g$row	o6735	g$mod	o6757	g$row	o6764	g$nom_site	o6792	g$titre_page	o6804	g$titre_page	o6853	g$id_rubrique	o6997	g$rubon	o7446	g$ruboff	o7475	g$id_syndic	o7511	g$flag_administrable	o7528	g$rubon	o7570	g$ruboff	o7578	g$syndication	o7723	g$logo_statut	o7749	g$statut	o7800	g$logo_statut	o7824	g$statut	o7868	g$logo_statut	o7890	g$statut	o7936	g$logo_statut	o!
 7960	g$nom_site	o8132	g$logo_statut	o8143	g$url_affichee	o8159	g$url_site	o8175	g$url_affichee	o8198	g$url_affichee	o8219	g$url_affichee	o8242	g$descriptif	o8336	g$descriptif	o8580	g$flag_editable	o8665	g$link	o8684	g$link	o8722	g$link	o8751	g$clean_link	o8775	g$link	o8932	g$flag_editable	o9025	g$options	o9045	g$statut	o9071	g$statut	o9100	g$date_heure	o9185	g$regs	o9198	g$mois	o9218	g$regs	o9226	g$jour	o9246	g$regs	o9254	g$annee	o9274	g$regs	o9283	g$jour	o9909	g$mois	o10006	g$annee	o10105	g$date_heure	o10451	g$flag_editable	o10498	g$options	o10517	g$id_syndic	o10570	g$nouv_mot	o10582	g$supp_mot	o10593	g$cherche_mot	o10604	g$flag_editable	o10618	g$flag_administrable	o10642	g$link	o10666	g$GLOBALS	o10674	g$link	o10699	g$link	o10727	g$statut	o10982	g$statut	o11032	g$statut	o11084	g$syndication	o11290	g$syndication	o11315	g$syndication	o11340	g$erreur_syndic	o11476	g$syndication	o11556	g$url_syndic	o11666	g$date_syndic	o12118	g$date_syndic	o12213	g$flag_administrable	o12398	g$!
 options	o12421	g$moderation	o12451	g$moderation	o12475	g$id_syndic	o12
585	g$moderation	o12609	g$mod	o12623	g$moderation	o12636	g$moderation	o12660	g$moderation	o12913	g$forum_retour	o13300	g$link	o13352	g$link	o13390	g$link	o13424	g$forum_retour	o13456	g$link	o13472	g$link	o13500	g$nom_site	o13531	g$link	o13609	g$query_forum	o13708	g$result_forum	o13851	g$query_forum	o13878	g$result_forum	o13908	g$forum_retour	o13923
ical.php3	g$fond	o7	g$delais	o23	g$flag_preserver	o81
ecrire/lang/public_gl.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/calendrier_jour.php3	g$today	o69	g$jour_today	o93	g$today	o107	g$mois_today	o123	g$today	o137	g$annee_today	o152	g$today	o167	g$mois	o223	g$jour	o233	g$jour_today	o239	g$mois	o254	g$mois_today	o260	g$annee	o275	g$annee_today	o282	g$date	o299	g$mois	o334	g$jour	o341	g$annee	o348	g$jour	o358	g$date	o374	g$mois	o382	g$date	o395	g$annee	o403	g$date	o418	g$afficher_bandeau_calendrier	o428	g$jour_today	o640	g$mois_today	o652	g$annee_today	o664	g$mois	o710	g$jour	o717	g$annee	o724
ecrire/articles_ortho.php	g$query	o190	g$result	o261	g$query	o282	g$row	o296	g$result	o320	g$id_article	o333	g$row	o347	g$surtitre	o368	g$row	o380	g$titre	o399	g$row	o408	g$soustitre	o424	g$row	o437	g$id_rubrique	o457	g$row	o472	g$descriptif	o494	g$row	o508	g$nom_site	o529	g$row	o541	g$url_site	o560	g$row	o572	g$chapo	o591	g$row	o600	g$texte	o616	g$row	o625	g$ps	o641	g$row	o647	g$date	o660	g$row	o668	g$statut_article	o683	g$row	o701	g$maj	o718	g$row	o725	g$date_redac	o739	g$row	o753	g$visites	o774	g$row	o785	g$referers	o803	g$row	o815	g$extra	o834	g$row	o843	g$id_trad	o859	g$row	o870	g$lang_article	o888	g$row	o904	g$lang_article	o925	g$lang_article	o940	g$lang_article	o995	g$virtuel	o1049	g$chapo	o1071	g$virtuel	o1096	g$chapo	o1114	g$chapo	o1127	g$champs	o1143	g$echap	o1232	g$ortho	o1250	g$code_ie	o1331	g$titre	o1960	g$code_ie	o1978	g$lang_article	o2060	g$champs	o2211	g$champ	o2222	g$ortho	o2233	g$champ	o2244	g$ortho	o2258	g$ortho	o2282	g$lang_article	o2290	g$result_ortho	o2!
 306	g$ortho	o2337	g$lang_article	o2345	g$result_ortho	o2374	g$mots	o2393	g$result_ortho	o2401	g$erreur	o2432	g$result_ortho	o2442	g$result_ortho	o2656	g$erreur	o2682	g$result_ortho	o2692	g$lang_article	o2775	g$champs	o3126	g$champ	o3137	g$champ	o3156	g$champ	o3282	g$echap	o3290	g$champ	o3314	g$champ	o3335	g$champ	o3352	g$echap	o3382	g$champ	o3398	g$champ	o3413	g$champ	o3483	g$champ	o3508	g$lang_article	o3516	g$result_ortho	o3546	g$champ	o3565	g$champ	o3591	g$lang_article	o3599	g$result_ortho	o3614	g$champ	o3706	g$champ	o3731	g$echap	o3745	g$champ	o3756	g$champ	o3781	g$echap	o3789	g$les_notes	o3867	g$les_notes	o3882	g$les_notes	o3910	g$lang_article	o3922	g$result_ortho	o3952	g$les_notes	o3970	g$les_notes	o3999	g$lang_article	o4011	g$result_ortho	o4026	g$les_notes	o4043	g$les_notes	o4071	g$surtitre	o4114	g$surtitre	o4200	g$titre	o4254	g$soustitre	o4268	g$soustitre	o4355	g$descriptif	o4404	g$url_site	o4419	g$nom_site	o4432	g$texte_case	o4626	g$descriptif	o4641	g$texte_case	o47!
 11	g$nom_site	o4727	g$url_site	o4737	g$nom_site	o4780	g$url_site	o4795
	g$descriptif	o4821	g$virtuel	o4933	g$chapo	o5105	g$texte	o5169	g$ps	o5199	g$ps	o5357	g$les_notes	o5423	g$les_notes	o5552	g$champs_extra	o5624	g$extra	o5642	g$extra	o5699
inc-formulaire_recherche.php3	g$balise_FORMULAIRE_RECHERCHE_collecte	o14	g$balise_FORMULAIRE_RECHERCHE_collecte	o53	fbalise_FORMULAIRE_RECHERCHE_stat	o112	fbalise_FORMULAIRE_RECHERCHE_dyn	o252
inc-formulaire_admin.php3	g$balise_FORMULAIRE_ADMIN_collecte	o14	g$balise_FORMULAIRE_ADMIN_collecte	o50	fbalise_FORMULAIRE_ADMIN_stat	o229	fbalise_FORMULAIRE_ADMIN_dyn	o673	g$var_preview	o781	g$use_cache	o795	vdejafait	o816
ecrire/articles_versions.php3	g$champs	o119	g$query	o233	g$result	o304	g$query	o325	g$row	o339	g$result	o363	g$id_article	o376	g$row	o390	g$id_rubrique	o411	g$row	o426	g$date	o448	g$row	o456	g$statut_article	o471	g$row	o489	g$maj	o506	g$row	o513	g$date_redac	o527	g$row	o541	g$visites	o562	g$row	o573	g$referers	o591	g$row	o603	g$extra	o622	g$row	o631	g$id_trad	o647	g$row	o658	g$id_version	o684	g$id_version	o705	g$id_version	o723	g$row	o737	g$textes	o759	g$id_article	o787	g$id_version	o800	g$id_diff	o815	g$id_diff	o833	g$id_diff	o849	g$diff_auto	o862	g$query	o882	g$result	o1033	g$query	o1054	g$row	o1067	g$result	o1092	g$id_diff	o1104	g$row	o1115	g$id_version	o1172	g$id_diff	o1187	g$id_diff	o1232	g$id_version	o1243	g$t	o1260	g$id_version	o1265	g$id_version	o1280	g$id_diff	o1294	g$id_diff	o1306	g$t	o1317	g$old	o1323	g$textes	o1330	g$new	o1341	g$textes	o1348	g$id_article	o1376	g$id_version	o1389	g$old	o1416	g$id_article	o1441	g$id_diff	o1454	g$new	o1467	g$textes	o1474	g$textes	o1!
 488	g$champs	o1519	g$champ	o1530	g$new	o1547	g$champ	o1552	g$old	o1564	g$champ	o1569	g$diff	o1591	g$textes	o1626	g$champ	o1634	g$diff	o1658	g$new	o1688	g$champ	o1693	g$old	o1717	g$champ	o1722	g$textes	o1753	g$textes	o1772	g$var	o1783	g$t	o1791	g$var	o1796	g$t	o1803	g$id_rubrique	o1939	g$id_article	o2231	g$statut_article	o2342	g$logo_statut	o2372	g$statut_article	o2416	g$logo_statut	o2445	g$statut_article	o2491	g$logo_statut	o2519	g$statut_article	o2564	g$logo_statut	o2596	g$statut_article	o2640	g$logo_statut	o2674	g$surtitre	o2848	g$surtitre	o2939	g$titre	o2994	g$logo_statut	o3002	g$soustitre	o3022	g$soustitre	o3114	g$descriptif	o3165	g$url_site	o3180	g$nom_site	o3193	g$texte_case	o3387	g$descriptif	o3402	g$texte_case	o3472	g$nom_site	o3488	g$url_site	o3498	g$nom_site	o3541	g$url_site	o3556	g$texte_case	o3589	g$query	o3926	g$result	o4132	g$query	o4153	g$row	o4200	g$result	o4224	g$date	o4253	g$row	o4275	g$version_aff	o4291	g$row	o4306	g$titre_version	o4327	g$row	o4349	g$titr!
 e_aff	o4374	g$titre_version	o4387	g$titre_version	o4404	g$date	o4421	g
$version_aff	o4433	g$id_version	o4449	g$link	o4466	g$link	o4488	g$version_aff	o4516	g$link	o4533	g$link	o4578	g$row	o4722	g$version_aff	o4983	g$id_version	o4999	g$version_aff	o5057	g$id_diff	o5073	g$link	o5163	g$link	o5187	g$id_version	o5215	g$link	o5233	g$version_aff	o5258	g$link	o5295	g$id_version	o5571	g$virtuel	o5661	g$chapo	o5684	g$virtuel	o5710	g$chapo	o5728	g$virtuel	o5750	g$revision_nbsp	o5924	g$options	o5942	g$chapo	o6045	g$texte	o6132	g$ps	o6167	g$ps	o6337	g$revision_nbsp	o6404	g$les_notes	o6436	g$les_notes	o6578	g$champs_extra	o6656	g$extra	o6674	g$extra	o6733
spip_background.php3	g$image	o158	g$size	o309	g$image	o324	g$size	o395	g$image	o510
ecrire/inc_auxbase.php3	d_ECRIRE_INC_AUXBASE	o100	g$spip_petitions	o130	g$spip_petitions_key	o424	g$spip_visites_temp	o488	g$spip_visites_temp_key	o689	g$spip_visites	o764	g$spip_visites_key	o882	g$spip_visites_articles	o938	g$spip_visites_articles_key	o1108	g$spip_referers_temp	o1185	g$spip_referers_temp_key	o1475	g$spip_referers	o1564	g$spip_referers_key	o1864	g$spip_referers_articles	o1928	g$spip_referers_articles_key	o2189	g$spip_auteurs_articles	o2312	g$spip_auteurs_articles_key	o2453	g$spip_auteurs_rubriques	o2561	g$spip_auteurs_rubriques_key	o2704	g$spip_auteurs_messages	o2815	g$spip_auteurs_messages_key	o2988	g$spip_documents_articles	o3097	g$spip_documents_articles_key	o3242	g$spip_documents_rubriques	o3356	g$spip_documents_rubriques_key	o3503	g$spip_documents_breves	o3620	g$spip_documents_breves_key	o3761	g$spip_mots_articles	o3869	g$spip_mots_articles_key	o4004	g$spip_mots_breves	o4103	g$spip_mots_breves_key	o4234	g$spip_mots_rubriques	o4327	g$spip_mots_rubriques_!
 key	o4464	g$spip_mots_syndic	o4566	g$spip_mots_syndic_key	o4698	g$spip_mots_forum	o4793	g$spip_mots_forum_key	o4923	g$spip_meta	o5015	g$spip_meta_key	o5140	g$spip_index_articles	o5192	g$spip_index_articles_key	o5360	g$spip_index_auteurs	o5460	g$spip_index_auteurs_key	o5626	g$spip_index_breves	o5723	g$spip_index_breves_key	o5887	g$spip_index_mots	o5981	g$spip_index_mots_key	o6141	g$spip_index_rubriques	o6229	g$spip_index_rubriques_key	o6399	g$spip_index_syndic	o6502	g$spip_index_syndic_key	o6667	g$spip_index_signatures	o6763	g$spip_index_signatures_key	o6935	g$spip_index_forum	o7042	g$spip_index_forum_key	o7205	g$spip_index_dico	o7298	g$spip_index_dico_key	o7406	g$spip_versions	o7465	g$spip_versions_key	o7808	g$spip_versions_fragments	o7954	g$spip_versions_fragments_key	o8272	g$spip_caches	o8375	g$spip_caches_key	o8596	g$spip_ortho_cache	o8708	g$spip_ortho_cache_key	o8896	g$spip_ortho_dico	o8981	g$spip_ortho_dico_key	o9152	g$tables_auxiliaires	o9224	g$tables_auxiliaires	o924!
 6	g$spip_petitions	o9313	g$spip_petitions_key	o9348	g$spip_visites_tem
p	o9407	g$spip_visites_temp_key	o9441	g$spip_visites	o9498	g$spip_visites_key	o9532	g$spip_visites_articles	o9593	g$spip_visites_articles_key	o9635	g$spip_referers_temp	o9702	g$spip_referers_temp_key	o9738	g$spip_referers	o9797	g$spip_referers_key	o9830	g$spip_referers_articles	o9893	g$spip_referers_articles_key	o9937	g$spip_auteurs_articles	o10008	g$spip_auteurs_articles_key	o10050	g$spip_auteurs_rubriques	o10121	g$spip_auteurs_rubriques_key	o10165	g$spip_auteurs_messages	o10236	g$spip_auteurs_messages_key	o10278	g$spip_documents_articles	o10350	g$spip_documents_articles_key	o10396	g$spip_documents_rubriques	o10471	g$spip_documents_rubriques_key	o10519	g$spip_documents_breves	o10592	g$spip_documents_breves_key	o10634	g$spip_mots_articles	o10701	g$spip_mots_articles_key	o10737	g$spip_mots_breves	o10799	g$spip_mots_breves_key	o10838	g$spip_mots_rubriques	o10901	g$spip_mots_rubriques_key	o10939	g$spip_mots_syndic	o11002	g$spip_mots_syndic_key	o11041	g$spip_mots_forum	o11100	g$!
 spip_mots_forum_key	o11137	g$spip_meta	o11189	g$spip_meta_key	o11214	g$spip_index_articles	o11270	g$spip_index_articles_key	o11308	g$spip_index_auteurs	o11373	g$spip_index_auteurs_key	o11409	g$spip_index_breves	o11472	g$spip_index_breves_key	o11506	g$spip_index_mots	o11566	g$spip_index_mots_key	o11603	g$spip_index_rubriques	o11666	g$spip_index_rubriques_key	o11706	g$spip_index_syndic	o11771	g$spip_index_syndic_key	o11805	g$spip_index_signatures	o11871	g$spip_index_signatures_key	o11913	g$spip_index_forum	o11978	g$spip_index_forum_key	o12017	g$spip_index_dico	o12076	g$spip_index_dico_key	o12113	g$spip_versions	o12169	g$spip_versions_key	o12201	g$spip_versions_fragments	o12265	g$spip_versions_fragments_key	o12307	g$spip_caches	o12369	g$spip_caches_key	o12399	g$spip_ortho_cache	o12454	g$spip_ortho_cache_key	o12489	g$spip_ortho_dico	o12548	g$spip_ortho_dico_key	o12582
ecrire/inc_carto.php3	d_ECRIRE_INC_CARTE	o106	fembed_map_url	o145	fafficher_cartes	o338	g$couleur_claire	o402	g$couleur_foncee	o419	g$connect_id_auteur	o445	fafficher_carte_inteface	o2054	fcarte_editable	o6864	fcarte_administrable	o6911	fafficher_insertion_carte	o7050	g$connect_id_auteur	o7099	g$connect_statut	o7119	g$couleur_foncee	o7145	g$couleur_claire	o7162	g$options	o7179	g$spip_lang_left	o7198	g$spip_lang_right	o7215	g$clean_link	o7242
inc-calcul.php3	d_INC_CALCUL	o93	g$GLOBALS	o905	fsquelette_obsolete	o992	fcharger_squelette	o1623	fcherche_page	o3783	g$dossier_squelettes	o3834	g$delais	o3855	fcalculer_contexte	o5649	fcalculer_page_globale	o6122	g$contexte	o6298	fcalculer_page	o7131
recherche.php3	g$fond	o6	g$delais	o27
ecrire/lang/spip_oc_gsc.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/statistiques_referers.php3	g$id_article	o76	g$id_article	o97	g$query	o113	g$result	o231	g$query	o252	g$row	o267	g$result	o291	g$titre	o305	g$row	o319	g$total_absolu	o337	g$row	o353	g$val_popularite	o372	g$row	o396	g$query	o431	g$result	o498	g$query	o519	g$row	o534	g$result	o558	g$total_absolu	o572	g$row	o588	g$titre	o621	g$pourarticle	o629	g$connect_statut	o1089	g$limit	o1246	g$limit	o1262	g$limit	o1282	g$limit	o1295	g$jour	o1314	g$jour	o1332	g$jour	o1378	g$where	o1417	g$vis	o1445	g$table_ref	o1470	g$query	o1501	g$query	o1671	g$limit	o1679
ecrire/lang/public_eo.php3	g$GLOBALS	o80	g$GLOBALS	o89
inc-formulaire_signature.php3	g$balise_FORMULAIRE_SIGNATURE_collecte	o60	g$balise_FORMULAIRE_SIGNATURE_collecte	o99	fbalise_FORMULAIRE_SIGNATURE_stat	o280	fbalise_FORMULAIRE_SIGNATURE_dyn	o378	freponse_confirmation	o1327	vconfirm	o1391	freponse_signature	o4145	ftest_pass	o7551
ecrire/inc_statistiques.php3	d_ECRIRE_INC_STATISTIQUES	o105	fstats_load_engines	o347	fstats_show_keywords	o1010	varr_engines	o1072	vurl_site	o1094	fsupprimer_referers	o3291	fcalculer_n_referers	o4117	faff_referers	o6869
inc-compilo.php3	d_INC_COMPILO	o150	fcalculer_inclure	o811	g$dossier_squelettes	o880	fcalculer_texte	o2248	fcalculer_boucle	o3439	fcalculer_parties	o9254	fcalculer_liste	o10907	fcalculer_squelette	o14075	g$table_primary	o14206	g$table_des_tables	o14222	g$tables_des_serveurs_sql	o14241
ecrire/statistiques.php3	g$spip_ecran	o104	g$largeur_table	o132	g$taille	o156	g$largeur_table	o183	g$taille	o207	g$GLOBALS	o579	g$critere	o614	g$critere	o694	g$critere	o777	g$connect_statut	o936	fenfants	o1071	g$nombre_vis	o1100	g$total_vis	o1121	g$nombre_abs	o1141	g$critere	o1162	fenfants_aff	o1816	g$total_vis	o1871	g$ifond	o1891	g$niveau	o1907	g$nombre_vis	o1924	g$nombre_abs	o1945	g$couleur_claire	o1966	g$couleur_foncee	o1983	g$spip_lang_right	o2000	g$spip_lang_left	o2018	g$abs_total	o2043	g$taille	o2063	g$abs_total	o4779	g$abs_total	o4806	g$abs_total	o4820	g$nombre_vis	o4834	g$query	o4855	g$result	o4926	g$query	o4947	g$row	o4963	g$result	o4987	g$id_rubrique	o5000	g$row	o5015	g$nombre_vis	o5041	g$id_rubrique	o5053	g$total_vis	o5069	g$total_vis	o5081	g$nombre_vis	o5093	g$id_rubrique	o5105	g$total_vis	o5127	g$total_vis	o5141	g$taille	o5262
ecrire/inc_lab.php	finclude_spip	o350	fhtml_background	o867
breve.php3	g$fond	o6	g$delais	o23
ecrire/suivi_revisions.php3	g$debut	o324	g$debut	o332	g$uniq_auteur	o350	g$uniq_auteur	o364	g$uniq_auteur	o392	g$connect_statut	o419	g$req_where	o451	g$req_where	o523	g$uniq_auteur	o648	g$id_secteur	o665	g$nom_auteur	o817	g$GLOBALS	o831	g$uniq_auteur	o871	g$query	o1011	g$result	o1087	g$query	o1108	g$row	o1125	g$result	o1150	g$id_rubrique	o1163	g$row	o1178	g$titre	o1200	g$row	o1216	g$query_rub	o1235	g$result_rub	o1496	g$query_rub	o1521	g$id_rubrique	o1541	g$id_secteur	o1557	g$result_rub	o1621	g$langues	o1823	g$langues	o1894	g$lang	o1906	g$titre	o1917	g$lang	o1946	g$query_lang	o1958	g$result_lang	o2178	g$query_lang	o2204	g$lang	o2227	g$lang_choisie	o2236	g$result_lang	o2303	g$debut	o2563	g$id_secteur	o2571	g$uniq_auteur	o2584	g$lang_choisie	o2598
ecrire/lang/spip_oc_lms.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_getdocument.php3	fcreer_repertoire_documents	o16	g$dossier_squelettes	o59	fcopier_document	o520	fverifier_compactes	o1015	fafficher_compactes	o1978	fajout_doc	o2924	g$hash_id_auteur	o2981	g$hash	o2998	g$id_article	o3005	g$type	o3018	fajout_doc_zip	o5306	fajout_doc_s	o6749	feffacer_repertoire_temporaire	o7552
ecrire/sites_tous.php3	g$connect_statut	o70	g$supp_syndic	o105	g$query	o122	g$supp_syndic	o179	g$result	o195	g$query	o214	g$proposer_sites	o326	g$connect_statut	o785	g$proposer_sites	o819	g$link	o872	g$link	o910	g$link	o950	g$clean_link	o976	g$link	o1044	g$options	o1262	g$connect_statut	o1289
ecrire/lang/public_da.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/breves.php3	g$statut	o34	g$connect_statut	o46	g$query	o81	g$result	o175	g$query	o194	fenfant	o398	g$spip_lang_left	o425	g$spip_lang_right	o442
ecrire/lang/spip_lb.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/config-lang.php3	fmySel	o76	g$connect_statut	o425	g$connect_toutes_rubriques	o460	g$changer_config	o564	g$langues_prop	o901	g$langue_site	o960	g$langue_site	o1252	g$langues_prop	o1288	g$l	o1317	g$langues_prop	o1329	g$l	o1352	g$langue_site	o1358	g$l	o1421	g$options	o1631	g$charset	o1733	g$charset	o1971	g$charset	o2083	g$charset	o2194	g$charset	o2217	g$charset	o2263	g$charset	o2286
ecrire/inc_mail.php3	d_ECRIRE_INC_MAIL	o100	g$hebergeur	o201	g$HTTP_X_HOST	o220	g$REQUEST_URI	o234	g$SERVER_NAME	o248	g$HTTP_HOST	o262	g$hebergeur	o274	g$HTTP_X_HOST	o322	g$hebergeur	o361	g$SERVER_NAME	o425	g$hebergeur	o443	g$REQUEST_URI	o513	g$regs	o527	g$hebergeur	o538	g$SERVER_ADMIN	o587	g$hebergeur	o688	g$hebergeur	o768	g$GLOBALS	o870	fenvoyer_queue_mails	o910	g$queue_mails	o942	g$GLOBALS	o1212	ftester_mail	o1310	g$hebergeur	o1334	fenvoyer_mail	o1445	g$hebergeur	o1519	g$queue_mails	o1531	g$flag_wordwrap	o1545	fextrait_article	o3096	fnettoyer_titre_email	o4246	fenvoyer_mail_publication	o4366	g$connect_nom	o4414	fenvoyer_mail_proposition	o5392
ecrire/lang/public_oc_ni.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_index.php3	d_ECRIRE_INC_INDEX	o101	fseparateurs_indexation	o139	fspip_split	o637	g$flag_pcre	o672	fnettoyer_chaine_indexation	o788	g$translitteration_complexe	o833	findexer_chaine	o1175	g$index	o1233	g$mots	o1241	g$translitteration_complexe	o1248	fdeja_indexe	o2025	findexer_objet	o2284	g$index	o2387	g$mots	o2395	g$translitteration_complexe	o2402	fmarquer_indexer	o9365	findexer_article	o9588	findexer_auteur	o9672	findexer_breve	o9752	findexer_mot	o9828	findexer_rubrique	o9896	findexer_syndic	o9984	fcritere_indexation	o10101	feffectuer_une_indexation	o10464	fexecuter_une_indexation_syndic	o11229	fcreer_liste_indexation	o11646	fpurger_index	o11917	frequete_txt_integral	o12428	frequete_dico	o12921	frequete_hash	o13255	fprepare_recherche	o14486	vcache	o14568
ecrire/inc_flock.php3	d_ECRIRE_INC_FLOCK	o101	fspip_file_get_contents	o138	flire_fichier	o570	fecrire_fichier	o1374	fsupprimer_fichier	o2396
inc-login_public.php3	g$balise_LOGIN_PUBLIC_collecte	o144	g$balise_LOGIN_PUBLIC_collecte	o175	fbalise_LOGIN_PUBLIC_stat	o399	fbalise_LOGIN_PUBLIC_dyn	o519	g$clean_link	o586	flogin_explicite	o772	g$auteur_session	o821	g$clean_link	o838	flogin_pour_tous	o1691	g$ignore_auth_http	o1761	g$spip_admin	o1780	g$php_module	o1793	ffiltre_rester_connecte	o3458	fsilogoauteur	o3594
ecrire/inc_objet_base.php3	d_ECRIRE_INC_OBJET_BASE	o106	c_Abstract	o146	mabstract_error	o168	mabstract_func	o271	k_Abstract	o364	cObjectCacheInstance	o414	vfast_vars	o488	vslow_vars	o505	vfast_vars_loaded	o543	vslow_vars_loaded	o575	vdirty	o626	kObjectCacheInstance	o652	c_ObjectFactory	o750	vid_factory	o806	vobject_class	o867	vsql_table	o915	vsql_id	o932	vfast_vars_list	o963	vslow_vars_list	o1000	vfast_vars_array	o1060	vslow_vars_array	o1083	vfast_vars_sql	o1127	vslow_vars_sql	o1148	vcache	o1187	minit_factory	o1324	mnew_object	o2449	mcreate_object_cache_instance	o2499	mcreate_object_alias	o2814	mget_object_field	o3009	mset_object_field	o3584	mload_object_sql	o4225	mload_object_id	o5462	mfetch_object_id	o5652	mcreate_object	o5906	vnew_id	o5934	mfetch_object	o6256	mupdate_object	o6707	c_Object	o6851	vid_factory	o6900	vid	o6933	minit_object	o6952	mget	o7065	mset	o7164	mcommit	o7279	fadd_factory	o7430	g$factories	o7459
ecrire/carte_edit.php3	g$id_carte	o390	g$id_carte	o409	g$id_carte	o500	g$supp_carte	o519	g$supp_carte	o540	g$supp_confirme	o557	g$supp_rejet	o577	g$query	o594	g$result	o664	g$query	o685	g$id_carte	o758	g$new	o777	g$titre	o796	g$fichier	o829	g$commentaire	o846	g$callage	o867	g$id_srs	o884	g$js_titre	o899	g$titre	o1046	g$id_carte	o1063	g$modif_carte	o1266	g$id_carte	o1282	g$query	o1298	g$titre	o1363	g$fichier	o1393	g$commentaire	o1439	g$callage	o1486	g$id_srs	o1524	g$result	o1573	g$query	o1594	g$id_carte	o1613	g$query	o1629	g$result	o1700	g$query	o1721	g$row	o1737	g$result	o1761	g$titre	o1813	g$row	o1822	g$fichier	o1841	g$row	o1852	g$commentaire	o1873	g$row	o1888	g$callage	o1913	g$row	o1924	g$id_srs	o1945	g$row	o1962	g$js_titre	o1983	g$carte_link	o2021	g$retour	o2087	g$carte_link	o2096	g$retour	o2126	g$id_carte	o2188	g$id_carte	o2216	g$selection_type	o2257	g$geometrie	o2289	g$selection_type	o2300	g$selection_coords	o2320	g$objet_titre	o2345	g$id_carte	o2460	g$objet_titre	o2486!
 	g$geometrie	o2506	g$id_objet	o2526	g$modif_objet	o2585	g$query	o2603	g$objet_titre	o2709	g$objet_commentaire	o2760	g$objet_lien	o2799	g$objet_logo	o2830	g$geometrie	o2877	g$result	o2932	g$query	o2953	g$supp_objet	o3001	g$query	o3018	g$result	o3088	g$query	o3109	g$supp_carte	o3282	g$supp_confirme	o3298	g$supp_rejet	o3317	g$link	o3520	g$link	o3541	g$supp_carte	o3569	g$link	o3589	g$id_carte	o3850	g$titre	o3927	g$commentaire	o3943	g$commentaire	o4105	g$fichier	o4149	g$fichier	o4746	g$lefichier	o4759	g$fichier	o4807	g$lefichier	o4825	g$fichier	o4836	g$lefichier	o4877	g$id_carte	o4888	g$retour	o5428	g$retour	o5524	g$id_carte	o5586	g$id_carte	o5619	g$link	o5692	g$carte_link	o5700	g$link	o5714	g$id_carte	o5742	g$retour	o5760	g$link	o5773	g$nb_reponses	o5822	g$link	o5840	g$link	o5918	g$id_carte	o6051	g$link	o6139	g$carte_link	o6147	g$link	o6161	g$id_carte	o6190	g$link	o6208	g$titre	o6234	g$titre	o6255	g$fichier	o6265	g$fichier	o6275	g$commentaire	o6286	g$commentaire	o6313	g$callage!
 	o6329	g$callage	o6353	g$id_srs	o6365	g$id_srs	o6381	g$titre	o6608	g$f
ichier	o6874	g$commentaire	o7115	g$callage	o7371	g$id_srs	o7625	g$id_carte	o7859	g$query	o8122	g$result	o8191	g$query	o8212	g$t	o8229	g$result	o8251	g$id_objet	o8266	g$t	o8277	g$titre_objet	o8295	g$t	o8322	g$lien_objet	o8338	g$t	o8351	g$commentaire_objet	o8365	g$t	o8398	g$logo_objet	o8420	g$t	o8434	g$geometrie	o8448	g$t	o8474	g$nouveau	o8495	g$id_objet	o8507	g$nouveau_objet	o8520	g$nouveau	o8543	g$nouveau	o8733	g$titre_objet	o8847	g$nouveau	o8903	g$link	o9028	g$carte_link	o9036	g$link	o9052	g$id_objet	o9081	g$link	o9101	g$nouveau	o9197	g$js	o9310	g$js	o9403	g$titre_objet	o9580	g$commentaire_objet	o9918	g$lien_objet	o10133	g$logo_objet	o10358	g$geometrie	o10638	g$link	o10909	g$carte_link	o10917	g$link	o10933	g$id_objet	o10961	g$link	o11059
ecrire/lab_revisions.php	d_ECRIRE_INC_REVISIONS	o105	g$GLOBALS	o137	fseparer_paras	o185	freplace_fragment	o497	g$flag_gz	o590	fexec_replace_fragments	o1054	fexec_delete_fragments	o1306	fajouter_fragments	o1631	g$flag_gz	o1697	g$agregation_versions	o1707	fsupprimer_fragments	o3292	g$flag_gz	o3365	g$agregation_versions	o3375	frecuperer_fragments	o7876	fapparier_paras	o8749	frecuperer_version	o10746	fsupprimer_versions	o11338	fajouter_version	o11670	g$connect_id_auteur	o11739
ecrire/config-multilang.php3	fmySel	o76	g$connect_statut	o360	g$connect_toutes_rubriques	o395	g$changer_config	o499	g$langues	o2773	g$GLOBALS	o2784	g$cesure	o2813	g$langues	o2836	g$langues_installees	o2860	g$GLOBALS	o2895	g$langues_autorisees	o2921	g$l	o3007	g$langues_installees	o3019	g$langues_trad	o3046	g$l	o3060	g$l	o3092	g$langues_autorisees	o3104	g$langues_auth	o3131	g$l	o3145	g$langues_bloquees	o3164	g$query	o3215	g$result	o3291	g$query	o3312	g$row	o3330	g$result	o3354	g$langues_bloquees	o3369	g$row	o3387	g$query	o3412	g$result	o3486	g$query	o3507	g$row	o3525	g$result	o3549	g$langues_bloquees	o3564	g$row	o3582	g$query	o3607	g$result	o3684	g$query	o3705	g$row	o3723	g$result	o3747	g$langues_bloquees	o3762	g$row	o3780	g$langues_bloquees	o3912	g$code_langue	o3946	g$langues_bloquees	o3969	g$i	o3994	g$nom_langue	o4020	g$langues	o4034	g$code_langue	o4043	g$langues_trad	o4065	g$code_langue	o4079	g$nom_langue	o4094	g$nom_langue	o4133	g$i	o4474	g$cesure	o4480	g$code_langue	o4596!
 	g$nom_langue	o4610	g$langues	o4630	g$langues_bloquees	o4650	g$code_langue	o4668	g$i	o4696	g$langues_trad	o4726	g$code_langue	o4740	g$nom_langue	o4755	g$langues_auth	o4800	g$code_langue	o4814	g$nom_langue	o4952	g$i	o5274	g$cesure	o5280
ecrire/lang/public_oc_lnc.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/spip_eo.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/admin_tech.php3	g$options	o113	g$connect_statut	o356	g$connect_toutes_rubriques	o391	g$flag_gz	o1085	g$flag_gz	o2208	g$fichier_defaut	o2221	g$texte_compresse	o2255	g$fichier_defaut	o2323	g$texte_compresse	o2354	g$texte_compresse	o2477	g$options	o2822	g$res	o2849	g$row	o2894	g$res	o2918	g$row	o2930
ecrire/inc_rubriques.php3	d_ECRIRE_INC_RUBRIQUES	o105	fcalculer_rubriques	o305	fcalculer_langues_rubriques_etape	o5231	fcalculer_langues_rubriques	o5788
ecrire/lang/spip_pl.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/spip_fr.php3	g$GLOBALS	o80	g$GLOBALS	o89
inc-urls-propres.php3	d_INC_URLS2	o76	f_generer_url_propre	o354	fgenerer_url_article	o1845	fgenerer_url_rubrique	o2017	fgenerer_url_breve	o2223	fgenerer_url_forum	o2408	fgenerer_url_mot	o2492	fgenerer_url_auteur	o2665	fgenerer_url_document	o2754	frecuperer_parametres_url	o3104	g$contexte	o3152
ecrire/inc_documents.php3	d_ECRIRE_INC_DOCUMENTS	o105	fvignette_par_defaut	o225	fvignette_previsu_ou_par_defaut	o1015	fdocument_et_vignette	o1503	fembed_document	o1797	g$id_doublons	o1878	fintegre_image	o6197	g$id_doublons	o6254	ffichiers_upload	o10323	ftexte_upload_manuel	o10832	ftexte_vignette_document	o11911	g$connect_id_auteur	o12021	fafficher_upload	o13131	g$clean_link	o13283	g$connect_statut	o13296	g$connect_toutes_rubriques	o13313	g$options	o13340	vnum_form	o13359	fafficher_documents_non_inclus	o15242	g$connect_id_auteur	o15327	g$connect_statut	o15347	g$couleur_foncee	o15372	g$couleur_claire	o15389	g$clean_link	o15414	g$id_doublons	o15435	g$options	o15449	g$spip_lang_left	o15467	g$spip_lang_right	o15484	fafficher_horizontal_document	o35834	g$connect_id_auteur	o35933	g$connect_statut	o35953	g$couleur_foncee	o35978	g$couleur_claire	o35995	g$clean_link	o36020	g$options	o36041	g$id_document_deplie	o36051	fafficher_documents_colonne	o43978	g$connect_id_auteur	o44065	g$conn!
 ect_statut	o44085	g$couleur_foncee	o44110	g$couleur_claire	o44127	g$options	o44144	g$clean_link	o44162	g$descriptif	o44804	g$texte	o44817	g$chapo	o44825	fafficher_case_document	o47438	g$connect_id_auteur	o47536	g$connect_statut	o47556	g$couleur_foncee	o47581	g$couleur_claire	o47598	g$clean_link	o47623	g$options	o47644	g$id_doublons	o47662	g$spip_lang_left	o47684	g$spip_lang_right	o47701
inc-admin.php3	fperso_admin	o151
ecrire/messagerie.php3	g$supp_dest	o108	g$detruire_message	o233	g$connect_statut	o1449	g$connect_id_auteur	o1642	g$messages_vus	o1697	g$query_message	o1719	g$query_message	o1958	g$query_message	o1990	g$query_message	o2251	g$query_message	o2282	g$query_message	o2612	g$query_message	o2644	g$query_message	o2809	g$query	o2849	g$result	o3451	g$query	o3472	g$result	o3499	g$row	o3962	g$result	o3986	g$count	o4000	g$i	o4017	g$bgcolor	o4031	g$i	o4054	g$bgcolor	o4076	g$couleur_claire	o4087	g$i	o4107	g$id_auteur	o4121	g$row	o4134	g$nom	o4155	g$row	o4167	g$total	o4183	g$row	o4192	g$count	o4576	g$result	o4605	g$query_message	o4746	g$query_message	o4937	g$query_message	o4977	g$query_message	o5187
inc-formulaire_site.php3	g$balise_FORMULAIRE_SITE_collecte	o14	g$balise_FORMULAIRE_SITE_collecte	o48	fbalise_FORMULAIRE_SITE_stat	o159	fbalise_FORMULAIRE_SITE_dyn	o278
ecrire/aide_index.php3	g$lastmodified	o154	g$headers_only	o200	g$lastmodified	o235	g$headers_only	o275	g$var_lang	o596	g$var_lang	o622	fhelp_frame	o697	g$spip_lang	o726	ffichier_aide	o1472	g$help_server	o1512	fhelp_body	o2466	g$help_server	o2500	fhelp_img	o4902	g$help_server	o4928	fhelp_menu	o5522	g$spip_lang_left	o5556	g$spip_lang_rtl	o5573	g$spip_lang_right	o5589	frubrique	o7647	g$ligne_rubrique	o7693	g$block_rubrique	o7718	g$titre_rubrique	o7743	g$afficher_rubrique	o7768	g$ouvrir_rubrique	o7788	g$larubrique	o7814	g$aide_statut	o7836	ffin_rubrique	o8137	g$ligne_rubrique	o8162	g$block_rubrique	o8187	g$titre_rubrique	o8212	g$afficher_rubrique	o8237	g$ouvrir_rubrique	o8257	g$texte	o8283	farticle	o8842	g$aide	o8894	g$ligne	o8909	g$ligne_rubrique	o8925	g$rubrique	o8950	g$texte	o8969	g$afficher_rubrique	o8985	g$ouvrir_rubrique	o9005	g$aide_statut	o9031	g$spip_lang	o9053	fanalyse_aide	o9737	g$img	o10189	g$regs	o10195	g$regs	o10213	g$html	o10234	g$l	o10241	g$url_aide	o10245	g$html!
 	o10311	g$help_server	o10410	g$frame	o10855	g$aide	o10886	g$html	o10893	g$frame	o10912	g$aide	o10943	g$html	o10950	g$aide	o10979
ecrire/inc_sites.php3	d_INC_SITES	o94	g$supprimer_lien	o120	g$GLOBALS	o138	g$ajouter_lien	o281	g$GLOBALS	o297	frecuperer_page	o442	ftranscoder_page	o2257	ftrouver_format	o2795	fanalyser_site	o3159	fsyndic_a_jour	o5864	fafficher_sites	o15256	g$couleur_claire	o15305	g$couleur_foncee	o15322	g$spip_lang_left	o15339	g$spip_lang_right	o15356	g$connect_id_auteur	o15382	fafficher_syndic_articles	o19452	g$couleur_claire	o19535	g$connect_statut	o19560	g$REQUEST_URI	o19585	g$debut_liste_sites	o19607	g$flag_editable	o19635	vn_liste_sites	o19661	fexecuter_une_syndication	o24278
ecrire/lang/spip_oc_va.php3	g$GLOBALS	o80	g$GLOBALS	o89
inc-boucles.php3	d_INC_BOUCLES	o151	fboucle_DEFAUT	o224	fboucle_BOUCLE_dist	o482	fboucle_ARTICLES_dist	o630	fboucle_AUTEURS_dist	o1115	fboucle_BREVES_dist	o1941	fboucle_FORUMS_dist	o2330	fboucle_SIGNATURES_dist	o2777	fboucle_DOCUMENTS_dist	o3356	fboucle_TYPES_DOCUMENTS_dist	o3778	fboucle_GROUPES_MOTS_dist	o4042	fboucle_MOTS_dist	o4292	fboucle_RUBRIQUES_dist	o4531	fboucle_HIERARCHIE_dist	o4882	fboucle_SYNDICATION_dist	o5724	fboucle_SYNDIC_ARTICLES_dist	o6027
ecrire/lang/spip_oc_auv.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/public_vi.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/message.php3	fhttp_afficher_rendez_vous	o112	g$spip_lang_rtl	o173	fsql_nouveau_participant	o1356	fhttp_auteurs_ressemblants	o1653	g$connect_id_auteur	o1720	fhttp_visualiser_participants	o3789	fhttp_ajouter_participants	o4243	fhttp_afficher_forum_perso	o6754	g$row	o7516	g$row	o7621	g$ajout_forum	o7808	g$texte	o7832	g$titre	o7856	g$modifier_message	o7967	g$titre	o7998	g$titre	o8018	g$texte	o8028	g$texte	o8048	g$changer_rv	o8167	g$jour	o8270	g$date	o8400	g$heures	o8435	g$minutes	o8443	g$mois	o8454	g$jour	o8461	g$annee	o8468	g$jour	o8485	g$date	o8501	g$mois	o8512	g$date	o8525	g$annee	o8536	g$date	o8551	g$heures	o8562	g$date	o8579	g$minutes	o8590	g$date	o8609	g$unix_debut	o8688	g$heures	o8719	g$minutes	o8727	g$mois	o8738	g$jour	o8745	g$annee	o8752	g$unix_fin	o8765	g$heures_fin	o8794	g$minutes_fin	o8806	g$mois_fin	o8821	g$jour_fin	o8832	g$annee_fin	o8843	g$unix_fin	o8864	g$unix_debut	o8877	g$jour_fin	o8896	g$jour	o8908	g$mois_fin	o8919	g$mois	o8931	g$annee_fin	o8942	g$annee!
 	o8955	g$heures_fin	o8967	g$heures	o8981	g$minutes_fin	o8998	g$minutes	o9013	g$date_fin	o9034	g$heures_fin	o9073	g$minutes_fin	o9085	g$mois_fin	o9100	g$jour_fin	o9111	g$annee_fin	o9122	g$jour_fin	o9143	g$date_fin	o9163	g$mois_fin	o9178	g$date_fin	o9195	g$annee_fin	o9210	g$date_fin	o9229	g$heures_fin	o9244	g$date_fin	o9265	g$minutes_fin	o9280	g$date_fin	o9303	g$change_statut	o9523	g$supp_dest	o9747	g$row	o9876	g$id_message	o9976	g$row	o9990	g$date_heure	o10011	g$row	o10025	g$date_fin	o10046	g$row	o10058	g$titre	o10077	g$row	o10091	g$texte	o10108	g$row	o10124	g$type	o10141	g$row	o10149	g$statut	o10164	g$row	o10174	g$page	o10191	g$row	o10199	g$rv	o10214	g$row	o10220	g$expediteur	o10233	g$row	o10247	g$lejour	o10268	g$row	o10284	g$lemois	o10306	g$row	o10321	g$lannee	o10345	g$row	o10361	g$type	o10435	g$titre	o10592	g$rv	o10654	g$lemois	o10700	g$lannee	o10709	g$lejour	o10718	g$lemois	o10727	g$lannee	o10736	g$rv	o10965	g$lejour	o11038	g$lemois	o11046	g$lannee	o11054	g$id_message	o1!
 1070	g$type	o11110	g$le_type	o11133	g$la_couleur	o11184	g$couleur_fond
	o11211	g$type	o11251	g$le_type	o11270	g$la_couleur	o11325	g$couleur_fond	o11352	g$type	o11392	g$le_type	o11415	g$la_couleur	o11448	g$couleur_fond	o11475	g$statut	o12026	g$rv	o12189	g$date_heure	o12301	g$date_heure	o12332	g$type	o12475	g$cherche_auteur	o12560	g$cherche_auteur	o12665	g$id_message	o12683	g$nouv_auteur	o12732	g$nouv_auteur	o12774	g$id_message	o12788	g$query_auteurs	o12845	g$result_auteurs	o13016	g$query_auteurs	o13045	g$total_dest	o13066	g$result_auteurs	o13094	g$total_dest	o13120	g$couleurs	o13142	g$couleur_claire	o13170	g$auteurs_tmp	o13191	g$ze_auteurs	o13218	g$ifond	o13244	g$res	o13259	g$row	o13279	g$result_auteurs	o13303	g$id_auteur	o13327	g$row	o13340	g$nom_auteur	o13363	g$row	o13382	g$statut_auteur	o13400	g$row	o13417	g$ze_auteurs	o13437	g$id_auteur	o13453	g$couleur	o13470	g$couleurs	o13481	g$ifond	o13491	g$ifond	o13504	g$ifond	o13517	g$auteurs_tmp	o13530	g$id_auteur	o13589	g$nom_auteur	o13607	g$res	o13634	g$row	o13765	g$id_auteur	o13790	g$expediteur	o13!
 804	g$nom_auteur	o13917	g$id_auteur	o14076	g$connect_id_auteur	o14090	g$auteurs_tmp	o14327	g$res	o14502	g$statut	o14566	g$forcer_dest	o14588	g$ze_auteurs	o14642	g$id_message	o14665	g$rv	o15001	g$date_heure	o15041	g$date_fin	o15054	g$expediteur	o15319	g$connect_id_auteur	o15334	g$statut	o15357	g$type	o15386	g$total_dest	o15408	g$expediteur	o16050	g$connect_id_auteur	o16065	g$statut	o16089	g$type	o16111	g$type	o16130	g$connect_statut	o16152	g$statut	o16435	g$type	o16459	g$expediteur	o16743	g$connect_id_auteur	o16758	g$type	o16781	g$connect_statut	o16803	g$id_message	o17131	g$titre	o17144
resume.php3	g$fond	o6	g$delais	o24
ecrire/lang/public_ar.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/documents_liste.php3	g$res	o444	g$row	o509	g$res	o533	g$types	o542	g$row	o549	g$row	o568	g$query	o576	g$result	o1025	g$query	o1046	g$row	o1064	g$result	o1086	g$titre	o1100	g$row	o1107	g$descriptif	o1125	g$row	o1137	g$date	o1160	g$row	o1166	g$id_document	o1183	g$row	o1196	g$id_rubrique	o1215	g$row	o1228	g$titre_rub	o1247	g$row	o1265	g$fichier	o1288	g$row	o1299	g$titre	o1325	g$titre	o1333	g$id_document	o1366	g$types	o1449	g$row	o1456	g$date	o1496	g$descriptif	o1517	g$descriptif	o1552
ecrire/inc_abstract_sql.php3	d_INC_ABSTRACT_SQL	o98	fspip_abstract_select	o957	fspip_abstract_serveur	o1756	fspip_abstract_fetch	o2095	fspip_abstract_count	o2286	fspip_abstract_free	o2474	fspip_abstract_insert	o2663	fspip_abstract_fetsel	o2918
ecrire/synchro.php3	g$suivi_edito	o407	g$adresse_suivi	o446	g$adresse_site	o489	g$adresse_suivi_inscription	o530	g$suivi_edito	o656	g$adresse_suivi	o689	g$adresse_suivi_inscription	o720	g$lien	o837	fafficher_liens_calendrier	o1225	g$adresse_site	o1284	g$connect_id_auteur	o1953	g$adresse_site	o2249	g$query	o2348	g$result	o2425	g$query	o2446	g$result	o2475	g$row	o2515	g$result	o2537	g$id_rubrique	o2551	g$row	o2564	g$titre_rubrique	o2588	g$row	o2611	g$activer_breves	o2831	g$activer_breves	o2885	g$adresse_site	o2993	g$adresse_site	o3269
ecrire/inc_debug_sql.php3	d_INC_DEBUG_SQL	o98	faffiche_erreurs_page	o348	ferreur_requete_boucle	o975	ferreur_squelette	o2417	g$tableau_des_erreurs	o2467	g$auteur_session	o2497	vruns	o2523	fboucle_debug_resultat	o3304	g$debug_objets	o3359	vrequete	o3383	fboucle_debug_compile	o3784	g$debug_objets	o3856	fsquelette_debug_compile	o4031	g$debug_objets	o4096	fboucle_debug	o4287	g$debug_objets	o4331	fdebug_dumpfile	o4449	g$debug_objets	o4498	g$var_mode_objet	o4513	g$var_mode_affiche	o4530
mes_fonctions.php3	g$tables_principales	o87	g$spip_carto_carte	o111	g$spip_carto_carte_key	o384	g$spip_carto_objet	o482	g$spip_carto_objet_key	o809	g$tables_principales	o933	g$spip_carto_objet	o990	g$spip_carto_objet_key	o1019	g$tables_principales	o1044	g$spip_carto_carte	o1101	g$spip_carto_carte_key	o1130	g$table_primary	o1162	g$table_primary	o1179	fwkt2coords	o1842	fwkt2shape	o2543
ecrire/lang/public_lb.php3	g$GLOBALS	o80	g$GLOBALS	o89
article.php3	g$fond	o7	g$delais	o26
inc-formulaire_forum.php3	g$GLOBALS	o473	g$balise_FORMULAIRE_FORUM_collecte	o615	g$balise_FORMULAIRE_FORUM_collecte	o650	fbalise_FORMULAIRE_FORUM_stat	o769	fbalise_FORMULAIRE_FORUM_dyn	o1171	g$REMOTE_ADDR	o1304	g$id_message	o1318	g$afficher_texte	o1331	g$spip_forum_user	o1348	fbarre_forum	o7328	vnum_formulaire	o7515	ftable_des_mots	o8118	g$afficher_groupe	o8162	fafficher_petits_logos_mots	o9752	fsql_recherche_donnees_forum	o10473
ecrire/inc_export.php3	d_ECRIRE_INC_EXPORT	o102	g$GLOBALS	o133	fmysql_timestamp_to_time	o251	fbuild_begin_tag	o543	fbuild_end_tag	o597	ftext_to_xml	o695	fexport_objets	o873	g$debut_limit	o991
ecrire/plugins/plug_carto_vignette.php	favant_typo_carto_vignette	o114
ecrire/statistiques_svg.php3	g$date	o101	g$expire	o120	g$date	o130	g$headers_only	o148	g$expire	o183	g$date	o194	g$date	o227	g$expire	o235	g$expire	o270	g$headers_only	o327	g$date	o375	g$expire	o411	g$connect_statut	o436	g$couleur_claire	o1161	g$couleur_foncee	o1249	g$aff_jours	o1504	g$aff_jours	o1516	g$id_article	o1539	g$table	o1556	g$table_ref	o1592	g$where	o1633	g$table	o1680	g$table_ref	o1707	g$where	o1739	g$query	o1785	g$result	o1892	g$query	o1913	g$row	o1930	g$result	o1954	g$date_premier	o1968	g$row	o1984	g$query	o2038	g$result	o2195	g$query	o2214	g$row	o2232	g$result	o2256	g$date	o2270	g$row	o2278	g$visites	o2299	g$row	o2310	g$log	o2330	g$date	o2335	g$visites	o2344	g$i	o2360	g$date_debut	o2369	g$date	o2383	g$i	o2392	g$log	o2416	g$max	o2429	g$log	o2444	g$visites_today	o2450	g$date_today	o2469	g$nb_jours	o2493	g$date_today	o2512	g$date_debut	o2524	g$maxgraph	o2554	g$max	o2585	g$max	o2627	g$maxgraph	o2643	g$maxgraph	o2659	g$maxgraph	o2687	g$max	o2699	g$maxgraph	o2705	g$m!
 axgraph	o2732	g$max	o2744	g$maxgraph	o2750	g$maxgraph	o2768	g$rapport	o2781	g$maxgraph	o2798	g$log	o2822	g$largeur	o2835	g$nb_jours	o2859	g$largeur	o2880	g$largeur	o2899	g$agreg	o2916	g$log	o2936	g$agreg	o2965	g$largeur	o2987	g$largeur	o3002	g$largeur_abs	o3020	g$aff_jours	o3041	g$largeur_abs	o3062	g$inc	o3085	g$largeur_abs	o3097	g$aff_jours_plus	o3119	g$largeur_abs	o3144	g$inc	o3159	g$aff_jours_moins	o3169	g$largeur_abs	o3195	g$inc	o3210	g$largeur_abs	o3230	g$aff_jours_plus	o3254	g$aff_jour_moins	o3280	g$largeur_abs	o3316	g$aff_jours_plus	o3339	g$largeur_abs	o3367	g$aff_jours_moins	o3390	g$largeur_abs	o3419	g$largeur	o3486	g$nb_jours	o3495	g$agreg	o3505	g$largeur	o3610	g$nb_jours	o3619	g$agreg	o3629	g$largeur	o3735	g$nb_jours	o3744	g$agreg	o3754	g$largeur	o3862	g$nb_jours	o3871	g$agreg	o3881	g$largeur	o3986	g$nb_jours	o3995	g$agreg	o4005	g$largeur	o4111	g$nb_jours	o4120	g$agreg	o4130	g$largeur	o4236	g$nb_jours	o4245	g$agreg	o4255	g$key	o4363	g$value	o4369	g$log	o4384	g$tes!
 t_agreg	o4400	g$test_agreg	o4425	g$agreg	o4440	g$test_agreg	o4458	g$n	
o4478	g$decal	o4494	g$decal	o4508	g$decal	o4523	g$tab_moyenne	o4537	g$decal	o4550	g$value	o4560	g$jour_prec	o4626	g$ecart	o4648	g$key	o4664	g$jour_prec	o4669	g$agreg	o4692	g$i	o4715	g$i	o4721	g$ecart	o4726	g$i	o4734	g$decal	o4750	g$decal	o4764	g$decal	o4781	g$tab_moyenne	o4797	g$decal	o4810	g$value	o4820	g$ce_jour	o4849	g$jour_prec	o4872	g$i	o4893	g$jour	o4913	g$ce_jour	o4930	g$ce_jour	o4958	g$tab_moyenne	o4981	g$moyenne	o5001	g$val_tab	o5033	g$tab_moyenne	o5050	g$moyenne	o5071	g$val_tab	o5083	g$moyenne	o5098	g$moyenne	o5109	g$tab_moyenne	o5126	g$difference	o5199	g$hauteur_moyenne	o5214	g$moyenne	o5241	g$moyenne	o5258	g$hauteur_moyenne	o5305	g$moyenne	o5331	g$rapport	o5343	g$hauteur_moyenne_prec	o5369	g$n	o5433	g$largeur	o5439	g$largeur	o5454	g$n	o5477	g$largeur	o5483	g$largeur	o5498	g$hauteur_moyenne_prec	o5520	g$n	o5549	g$largeur	o5555	g$largeur	o5570	g$hauteur_moyenne	o5592	g$n	o5617	g$largeur	o5623	g$largeur	o5638	g$n	o5704	g$largeur	o5710	g$largeur	o5725	g$hauteur_moyen!
 ne_prec	o5752	g$n	o5786	g$largeur	o5792	g$largeur	o5807	g$hauteur_moyenne	o5834	g$hauteur_moyenne_prec	o5889	g$hauteur_moyenne	o5913	g$difference	o5942	g$n	o6369	g$ce_jour	o6390	g$key	o6413	g$jour	o6423	g$ce_jour	o6440	g$ce_jour	o6468	g$total_loc	o6483	g$total_loc	o6496	g$value	o6509	g$tab_moyenne	o6526	g$moyenne	o6545	g$val_tab	o6575	g$tab_moyenne	o6592	g$moyenne	o6611	g$val_tab	o6623	g$moyenne	o6636	g$moyenne	o6647	g$tab_moyenne	o6664	g$hauteur_moyenne	o6685	g$moyenne	o6710	g$rapport	o6721	g$hauteur	o6739	g$value	o6756	g$rapport	o6765	g$moyenne	o6783	g$moyenne	o6800	g$key	o7013	g$fill	o7061	g$couleur_foncee	o7069	g$fill	o7099	g$n	o7148	g$largeur	o7154	g$hauteur	o7177	g$n	o7273	g$largeur	o7279	g$hauteur	o7302	g$key	o7398	g$n	o7437	g$largeur	o7443	g$hauteur_moyenne	o7467	g$n	o7496	g$largeur	o7502	g$hauteur_moyenne_prec	o7561	g$n	o7623	g$largeur	o7629	g$largeur	o7644	g$n	o7667	g$largeur	o7673	g$largeur	o7688	g$hauteur_moyenne_prec	o7710	g$n	o7739	g$largeur	o7745	g$largeur	o7!
 760	g$hauteur_moyenne	o7782	g$n	o7807	g$largeur	o7813	g$largeur	o7828	
g$n	o7892	g$largeur	o7898	g$largeur	o7913	g$hauteur_moyenne_prec	o7940	g$n	o7974	g$largeur	o7980	g$largeur	o7995	g$hauteur_moyenne	o8022	g$hauteur_moyenne	o8120	g$n	o8144	g$largeur	o8150	g$largeur	o8165	g$hauteur_moyenne	o8187	g$n	o8212	g$largeur	o8218	g$largeur	o8233	g$hauteur_moyenne	o8307	g$n	o8336	g$largeur	o8342	g$largeur	o8357	g$hauteur_moyenne	o8384	g$hauteur_moyenne_prec	o8436	g$hauteur_moyenne	o8460	g$jour_prec	o8486	g$key	o8499	g$val_prec	o8509	g$value	o8521	g$largeur	o8581	g$nb_jours	o8590	g$agreg	o8600	g$largeur	o8731	g$nb_jours	o8740	g$agreg	o8750	g$largeur	o8913	g$nb_jours	o8922	g$agreg	o8932	g$maxgraph	o9049	g$largeur	o9110	g$nb_jours	o9119	g$agreg	o9129	g$maxgraph	o9246	g$largeur	o9307	g$nb_jours	o9316	g$agreg	o9326	g$maxgraph	o9444	g$largeur	o9505	g$nb_jours	o9514	g$agreg	o9524	g$maxgraph	o9639	g$gauche_prec	o9674	g$jour	o9701	g$date_debut	o9709	g$jour	o9722	g$date_today	o9731	g$jour	o9744	g$jour	o9752	g$ce_jour	o9776	g$jour	o9797	g$ce_jour	o9816	g$afficher	!
 o9839	g$jour	o9874	g$jour	o9901	g$afficher	o9914	g$jour	o9952	g$gauche	o9981	g$jour	o9992	g$date_debut	o10000	g$largeur	o10015	g$agreg	o10037	g$gauche	o10059	g$gauche_prec	o10069	g$jour	o10101	g$gauche	o10451	g$afficher	o10578	g$gauche_prec	o10620	g$gauche	o10635
ecrire/lang/spip_en.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/spip_oc_prv.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_popularites.php3	d_ECRIRE_INC_POPULARITES	o104	fcalculer_popularites	o190
site.php3	g$fond	o6	g$delais	o22
ecrire/auteurs_edit.php3	fsupp_auteur	o144	fafficher_auteur_rubriques	o293	g$id_parent	o339	g$id_rubrique	o359	g$toutes_rubriques	o381	g$i	o408	g$query	o969	g$result	o1037	g$query	o1058	g$row	o1073	g$result	o1097	g$id_auteur	o1110	g$row	o1121	g$nom	o1141	g$row	o1146	g$bio	o1160	g$row	o1165	g$email	o1179	g$row	o1186	g$nom_site_auteur	o1202	g$row	o1219	g$url_site	o1238	g$row	o1248	g$login	o1267	g$row	o1274	g$pass	o1290	g$row	o1296	g$statut	o1311	g$row	o1319	g$pgp	o1336	g$row	o1341	g$messagerie	o1355	g$row	o1367	g$imessage	o1388	g$row	o1398	g$extra	o1417	g$row	o1426	g$low_sec	o1442	g$row	o1453	g$connect_id_auteur	o1476	g$id_auteur	o1498	g$nom	o1521	g$nom	o1564	g$arton	o1999	g$artoff	o2027	g$id_auteur	o2062	g$connect_statut	o2081	g$connect_id_auteur	o2117	g$id_auteur	o2139	g$arton	o2174	g$artoff	o2182	fmySel	o2275	g$nom	o2600	g$email	o2648	g$nom_site_auteur	o2752	g$connect_statut	o2907	g$connect_id_auteur	o2942	g$id_auteur	o2964	g$bio	o3136	g$bio	o3179	g$pgp	o3220	g$pgp	o3267	g$!
 champs_extra	o3302	g$extra	o3320	g$extra	o3384	g$connect_statut	o3462	g$aff_art	o3494	g$connect_id_auteur	o3550	g$id_auteur	o3572	g$aff_art	o3584	g$aff_art	o3627	g$id_auteur	o3901	g$connect_id_auteur	o3915	g$query_message	o3991	g$query_message	o4374	g$query_message	o4408	g$query_message	o4810
ecrire/lang/public_pl.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/plugins/plug_carto.php	favant_typo_carto	o172
inc-cache.php3	d_INC_CACHE	o94	fnettoyer_uri	o166	fgenerer_nom_fichier_cache	o520	g$delais	o580	g$flag_gz	o597	g$compresser_cache	o607	fretire_cache	o2059	fretire_caches	o2416	futiliser_cache	o3064	g$HTTP_SERVER_VARS	o3113	fpurger_repertoire	o3792	fpurger_cache	o4272	fpurger_squelettes	o4430	fdeterminer_cache	o4602
ecrire/lang/public_fr.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/export_all.php3	g$archive	o191	g$gz	o208	g$archive	o213	g$archive	o245	g$action	o271	g$archive	o328	g$action	o353	g$debug_limit	o364	g$debut_limit	o421	g$debut_limit	o435	g$etape	o503	g$etape	o688	g$f	o701	g$gz	o707	g$archive	o737	g$archive	o777	g$f	o800	g$gz	o806	g$archive	o836	g$archive	o876	g$f	o899	g$_fputs	o990	g$gz	o1001	g$etape	o1029	g$_fputs	o1042	g$f	o1050	g$query	o1242	g$query	o1297	g$f	o1317	g$gz	o1321	g$etape	o1326	g$query	o1372	g$query	o1425	g$f	o1443	g$gz	o1447	g$etape	o1452	g$query	o1496	g$query	o1550	g$f	o1569	g$gz	o1573	g$etape	o1578	g$query	o1623	g$query	o1684	g$f	o1709	g$gz	o1713	g$etape	o1718	g$query	o1769	g$query	o1824	g$f	o1844	g$gz	o1848	g$etape	o1853	g$query	o1899	g$query	o1949	g$f	o1964	g$gz	o1968	g$etape	o1973	g$query	o2019	g$query	o2077	g$f	o2100	g$gz	o2104	g$etape	o2109	g$query	o2157	g$debug_limit	o2194	g$query	o2222	g$f	o2239	g$gz	o2243	g$etape	o2248	g$query	o2422	g$debug_limit	o2458	g$query	o2486	g$f	o2503	g$gz	o2507	g$etape	o2512	g$query!
 	o2555	g$query	o2610	g$f	o2630	g$gz	o2634	g$etape	o2639	g$query	o2686	g$debug_limit	o2727	g$query	o2755	g$f	o2776	g$gz	o2780	g$etape	o2785	g$query	o2833	g$query	o2885	g$f	o2903	g$gz	o2907	g$etape	o2912	g$query	o2966	g$debug_limit	o3012	g$query	o3040	g$f	o3066	g$gz	o3070	g$etape	o3075	g$etape	o3429	g$etape	o3439	g$_fputs	o3455	g$f	o3464	g$archive	o3602	g$etape_suivante	o3726	g$etape	o3744	g$debut_limit	o3761	g$gz	o4068	g$f	o4081	g$f	o4098	g$etape	o4109	g$etape	o4119	g$action	o4143
ecrire/plugins/plug_couleurs.php	g$couleurs_spip	o63	g$couleurs_spip	o80	g$couleurs_spip	o245	g$couleurs_spip	o409
forum.php3	g$fond	o6	g$delais	o23
ecrire/plugins/plug_carto_lien.php	favant_typo_cartelien	o105
ecrire/lang/public_pt.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_barre.php3	d_INC_BARRE	o93	fbouton_barre_racc	o187	fafficher_barre	o765	vnum_barre	o813	g$spip_lang	o917	g$spip_lang_right	o929	g$spip_lang_left	o947	fafficher_claret	o5202
ecrire/inc_surligne.php3	d_ECRIRE_INC_SURLIGNE	o104	dMARQUEUR_SURLIGNE	o286	dMARQUEUR_FSURLIGNE	o358	fsurligner_sans_accents	o416	fsplit_by_char	o1333	fsurligner_regexp_accents	o1494	fsurligner_mots	o2678	g$nombre_surligne	o2717	ftrouve_surligne	o4284	g$nombre_surligne	o4553
rubrique.php3	g$fond	o6	g$delais	o26
spip_cal.php3	fligne	o395	g$nom_site	o448	g$adresse_site	o483	g$id_utilisateur	o545	g$id_auteur	o563	g$id	o583	g$id_auteur	o630	g$cle	o642	g$query	o660	g$result	o727	g$query	o748	g$row	o763	g$result	o787	g$id_utilisateur	o801	g$row	o817	g$nom_utilisateur	o838	g$row	o855	g$statut_utilisateur	o870	g$row	o890	g$langue_utilisateur	o908	g$row	o928	g$id_utilisateur	o952	g$langue_utilisateur	o1026	g$result_messages	o1302	g$row	o1638	g$result_messages	o1660	g$id_message	o1681	g$row	o1693	g$date_heure	o1714	g$row	o1726	g$date_heure_fin	o1747	g$row	o1763	g$titre	o1813	g$row	o1822	g$texte	o1838	g$row	o1847	g$type	o1863	g$row	o1869	g$type	o1889	g$le_type	o1912	g$result_auteurs	o1947	g$row_auteur	o2138	g$result_auteurs	o2167	g$id_auteur	o2189	g$row_auteur	o2200	g$nom_auteur	o2229	g$row_auteur	o2241	g$email	o2264	g$row_auteur	o2273	g$id_auteur	o2304	g$id_utilisateur	o2318	g$titre	o2335	g$titre	o2344	g$nom_auteur	o2357	g$id_auteur	o2381	g$id_utilisateur	o2395	g$type	o2521	g$le_type	o2540	g!
 $type	o2587	g$le_type	o2610	g$titre	o2643	g$titre	o2722	g$date_heure	o2839	g$date_heure	o2883	g$date_heure_fin	o2903	g$date_heure	o2921	g$date_heure_fin	o2960	g$result_messages	o3122	g$row	o3452	g$result_messages	o3474	g$id_message	o3495	g$row	o3507	g$date_heure	o3528	g$row	o3540	g$titre	o3561	g$row	o3570	g$texte	o3586	g$row	o3595	g$type	o3611	g$row	o3617	g$type	o3637	g$le_type	o3660	g$result_auteurs	o3695	g$row_auteur	o3886	g$result_auteurs	o3915	g$id_auteur	o3937	g$row_auteur	o3948	g$nom_auteur	o3977	g$row_auteur	o3989	g$email	o4012	g$row_auteur	o4021	g$id_auteur	o4052	g$id_utilisateur	o4066	g$titre	o4083	g$titre	o4092	g$nom_auteur	o4105	g$id_auteur	o4129	g$id_utilisateur	o4143	g$type	o4269	g$le_type	o4288	g$type	o4335	g$le_type	o4358	g$titre	o4391	g$titre	o4470	g$date_heure	o4587	g$date_heure	o4631	g$titres	o4808	g$result_articles	o4827	g$row	o4939	g$result_articles	o4961	g$id_article	o4982	g$row	o4994	g$titre	o5015	g$row	o5041	g$titres	o5058	g$titre	o5070	g$date_heure	o!
 5079	g$row	o5093	g$nb_articles	o5108	g$date_heure	o5325	g$date_heure	o
5346	g$date_heure	o5366	g$date_heure	o5384	g$date_heure	o5403	g$date_heure	o5478	g$date_heure	o5499	g$date_heure	o5519	g$date_heure	o5537	g$date_heure	o5556	g$result_articles	o5723	g$row	o5837	g$result_articles	o5859	g$id_breve	o5880	g$row	o5890	g$titre	o5909	g$row	o5935	g$titres	o5952	g$titre	o5964	g$date_heure	o5973	g$row	o5987	g$nb_breves	o6008	g$date_heure	o6217	g$date_heure	o6238	g$date_heure	o6258	g$date_heure	o6276	g$date_heure	o6295	g$date_heure	o6370	g$date_heure	o6391	g$date_heure	o6411	g$date_heure	o6429	g$date_heure	o6448	g$nb_articles	o6619	g$nb_breves	o6634	g$nb_articles	o6657	g$titre_prop	o6675	g$nb_articles	o6725	g$nb_breves	o6744	g$titre_prop	o6760	g$nb_breves	o6807	g$titre	o6820	g$titre_prop	o6834	g$texte	o6955	g$titres	o6969	g$today	o7019	g$jour	o7044	g$today	o7052	g$mois	o7069	g$today	o7075	g$annee	o7091	g$today	o7098	g$mois	o7166	g$jour	o7172	g$annee	o7178	g$mois	o7241	g$jour	o7247	g$annee	o7253	g$result_messages	o7395	g$row	o7634	g$result_messages	o7656!
 	g$id_message	o7677	g$row	o7689	g$date_heure	o7710	g$row	o7722	g$titre	o7743	g$row	o7752	g$texte	o7768	g$row	o7777	g$type	o7793	g$row	o7799	g$type	o7819	g$le_type	o7842	g$result_auteurs	o7877	g$row_auteur	o8068	g$result_auteurs	o8097	g$id_auteur	o8119	g$row_auteur	o8130	g$nom_auteur	o8159	g$row_auteur	o8173	g$email	o8196	g$row_auteur	o8205	g$id_auteur	o8236	g$id_utilisateur	o8250	g$titre	o8267	g$nom_auteur	o8276	g$titre	o8294	g$id_auteur	o8313	g$id_utilisateur	o8327	g$query_forum	o8442	g$result_forum	o8572	g$query_forum	o8599	g$row_forum	o8620	g$result_forum	o8650	g$date_heure	o8671	g$row_forum	o8685	g$texte	o8714	g$row_forum	o8723	g$titre	o8747	g$row_forum	o8756	g$id_auteur	o8780	g$row_forum	o8793	g$result_auteurs2	o8822	g$row_auteur2	o8919	g$result_auteurs2	o8951	g$nom_auteur	o8975	g$row_auteur2	o8989	g$email	o9014	g$row_auteur2	o9023	g$titre	o9056	g$nom_auteur	o9065	g$titre	o9083	g$type	o9113	g$le_type	o9132	g$type	o9179	g$le_type	o9202	g$titre	o9235	g$titre	o9317	g$date!
 _heure	o9462	g$date_heure	o9483	g$date_heure	o9503	g$date_heure	o9521	
g$date_heure	o9540	g$date_heure	o9609	g$date_heure	o9630	g$date_heure	o9650	g$date_heure	o9668	g$date_heure	o9687	g$statut_utilisateur	o9870	g$query_forum	o9910	g$result_forum	o9976	g$query_forum	o10003	g$row	o10026	g$result_forum	o10048	g$nb_forum	o10067	g$id_forum	o10085	g$row	o10095	g$date_heure	o10115	g$row	o10129	g$titre	o10151	g$row	o10160	g$texte	o10177	g$row	o10186	g$auteur	o10203	g$row	o10213	g$email_auteur	o10231	g$row	o10247	g$email_auteur	o10275	g$email_auteur	o10290	g$date_heure	o10575	g$date_heure	o10596	g$date_heure	o10616	g$date_heure	o10634	g$date_heure	o10653	g$date_heure	o10723	g$date_heure	o10744	g$date_heure	o10764	g$date_heure	o10782	g$date_heure	o10801	g$date_heure	o10869	g$date_heure	o10890	g$date_heure	o10913	g$date_heure	o10931	g$date_heure	o10950	g$nb_forum	o11111	g$today	o11269	g$jour	o11295	g$today	o11303	g$mois	o11321	g$today	o11327	g$annee	o11344	g$today	o11351	g$mois	o11420	g$jour	o11426	g$annee	o11432	g$mois	o11496	g$jour	o11502	g$annee	o11508
ecrire/inc_auth_ldap.php3	d_ECRIRE_INC_AUTH_LDAP	o105	cAuth_ldap	o143	vuser_dn	o161	vnom	o176	minit	o230	mverifier_challenge_md5	o364	mverifier	o458	g$ldap_link	o493	g$ldap_base	o505	mlire	o1673	g$ldap_link	o1691	g$ldap_base	o1703	g$flag_utf8_decode	o1715	mactiver	o3420
ecrire/lang/public_fa.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_layer.php3	d_INC_LAYER	o93	fdebut_block_visible	o203	g$numero_block	o244	g$compteur_block	o259	g$browser_layer	o276	fdebut_block_invisible	o533	g$numero_block	o576	g$compteur_block	o591	g$browser_layer	o608	ffin_block	o1061	fbouton_block_invisible	o1174	g$numero_block	o1219	g$compteur_block	o1234	g$browser_layer	o1251	g$spip_lang_rtl	o1267	fbouton_block_visible	o2044	g$numero_block	o2086	g$compteur_block	o2101	g$browser_layer	o2118	g$spip_lang_rtl	o2134	fverif_butineur	o2934	g$HTTP_USER_AGENT	o2961	g$browser_name	o2979	g$browser_version	o2994	g$browser_description	o3020	g$browser_rev	o3042	g$browser_layer	o3056	g$browser_barre	o3072	fafficher_script_layer	o4848	ftest_layer	o4914	g$GLOBALS	o4982	g$GLOBALS	o5013
ecrire/inc_db_mysql.php3	d_ECRIRE_INC_DB_MYSQL	o104	fspip_query_db	o176	g$spip_mysql_link	o208	vtt	o235	fspip_mysql_select	o1623	ftraite_query	o2640	fspip_connect_db	o3494	g$spip_mysql_link	o3554	g$spip_mysql_db	o3572	fspip_fetch_array	o3819	fspip_sql_error	o4068	fspip_sql_errno	o4122	fspip_num_rows	o4176	fspip_free_result	o4246	fspip_insert	o4322	fspip_insert_id	o4467	fspip_get_lock	o4572	g$spip_mysql_db	o4616	g$table_prefix	o4632	fspip_release_lock	o4955	g$spip_mysql_db	o4989	g$table_prefix	o5005	fcalcul_mysql_in	o5280
backend-breves.php3	g$fond	o6	g$delais	o32	g$flag_preserver	o113
ecrire/inc_import.php3	d_ECRIRE_INC_IMPORT	o102	fxml_fetch_tag	o178	g$buf	o227	g$pos	o233	g$abs_pos	o239	vbuf_len	o258	fxml_parse_tag	o1061	fimport_debut	o1398	fimport_objet_1_2	o1857	g$import_ok	o1899	g$pos	o1911	g$abs_pos	o1917	vtime_javascript	o1936	vtables	o2092	fimport_objet_0_0	o5981	g$import_ok	o6023	g$pos	o6035	g$abs_pos	o6041	fimport_objet	o9296	fimport_fin	o9375	fimport_abandon	o9810	fimport_all	o10090	g$import_ok	o10126	g$meta	o10146	g$auth_htaccess	o10161	g$connect_id_auteur	o10185	faffiche_progression_javascript	o12475	g$affiche_progression_pourcent	o12526
spip_test_dirs.php3	d_TEST_DIRS	o48	ftest_ecrire	o211	g$test_dir	o593	g$test_dir	o624	g$test_dir	o636	g$test_dir	o670	g$test_dirs	o681	g$test_dirs	o694	g$test_dir	o709	g$test_dirs	o754	g$bad_dirs	o806	g$absent_dirs	o824	g$my_dir	o854	g$test_dirs	o870	g$my_dir	o903	g$my_dir	o947	g$my_dir	o969	g$my_dir	o1015	g$my_dir	o1036	g$my_dir	o1072	g$my_dir	o1093	g$my_dir	o1129	g$bad_dirs	o1143	g$my_dir	o1164	g$absent_dirs	o1185	g$my_dir	o1209	g$bad_dirs	o1228	g$absent_dirs	o1241	g$titre	o1306	g$continuer	o1342	g$titre	o1391	g$bad_url	o1430	g$test_dir	o1469	g$bad_url	o1480	g$test_dir	o1505	g$bad_dirs	o1681	g$bad_dirs	o1780	g$absent_dirs	o1847	g$absent_dirs	o1948	g$continuer	o2019
ecrire/inc_config_plug.php3	d_ECRIRE_INC_CONFIG_PLUG	o107	ffichiers_plugins	o152	finstaller_plugins	o618
ecrire/cartes.php3	g$link	o683	g$link	o721	g$link	o751	g$clean_link	o775	g$link	o845
ecrire/rubriques_edit.php3	fmySel	o40	fenfant	o183	g$id_parent	o210	g$id_rubrique	o230	g$connect_toutes_rubriques	o252	g$i	o287	g$couleur_claire	o299	g$spip_lang_left	o316	g$browser_name	o341	g$browser_version	o356	g$new	o2050	g$connect_statut	o2073	g$id_parent	o2122	g$id_parent	o2139	g$id_parent	o2159	g$id_rubrique	o2174	g$titre	o2194	g$onfocus	o2253	g$descriptif	o2328	g$texte	o2348	g$query	o2427	g$result	o2502	g$query	o2523	g$row	o2540	g$result	o2564	g$id_rubrique	o2578	g$row	o2593	g$id_parent	o2616	g$row	o2629	g$titre	o2650	g$row	o2659	g$descriptif	o2676	g$row	o2690	g$texte	o2712	g$row	o2721	g$id_secteur	o2738	g$row	o2752	g$extra	o2774	g$row	o2783	g$titre	o2858	g$id_parent	o2900	g$ze_logo	o2917	g$ze_logo	o2951	g$id_parent	o2986	g$logo_parent	o3003	g$query	o3048	g$result	o3130	g$query	o3149	g$row	o3165	g$result	o3187	g$parent_parent	o3200	g$row	o3215	g$parent_parent	o3242	g$logo_parent	o3263	g$logo_parent	o3302	g$id_parent	o3383	g$id_rubrique	o3609	g$ze_logo	o3691	g$ze_log!
 o	o3785	g$titre	o3966	g$id_rubrique	o4019	g$new	o4248	g$titre	o4319	g$titre	o4341	g$connect_toutes_rubriques	o4836	g$id_parent	o4892	g$id_parent	o5144	g$id_parent	o5396	g$query	o5529	g$row	o5614	g$query	o5649	g$contient_breves	o5659	g$row	o5678	g$contient_breves	o5695	g$scb	o5727	g$contient_breves	o5735	g$contient_breves	o5969	g$scb	o5996	g$options	o6072	g$descriptif	o6098	g$descriptif	o6298	g$descriptif	o6415	g$texte	o6596	g$champs_extra	o6632	g$extra	o6700	g$id_secteur	o6721
ecrire/spip_style.php3	g$lastmodified	o57	g$headers_only	o106	g$lastmodified	o141	g$headers_only	o183	g$regs	o382	g$couleur_claire	o399	g$couleur_foncee	o415	g$left	o431	g$right	o437	g$regs	o447	g$ltr	o456	g$left	o464	g$rtl	o484	g$right	o492	g$left	o520	g$_rtl	o537	g$_rtl	o556	g$couleur_claire	o621	g$couleur_claire	o642	g$couleur_foncee	o684	g$couleur_foncee	o705	fhttp_img_pack	o747	g$couleur_claire	o1080	g$couleur_foncee	o1177	g$couleur_foncee	o1234	g$left	o1289	g$couleur_claire	o1450	g$couleur_claire	o1685	g$couleur_claire	o1885	g$couleur_foncee	o2003	g$couleur_claire	o3500	g$right	o4048	g$left	o4087	g$ltr	o4249	g$ltr	o4516	g$left	o4617	g$_rtl	o4826	g$right	o4847	g$left	o4973	g$left	o5117	g$couleur_foncee	o5211	g$right	o5487	g$couleur_foncee	o5660	g$couleur_foncee	o6186	g$couleur_foncee	o7027	g$couleur_claire	o7964	g$couleur_foncee	o8801	g$couleur_foncee	o9920	g$couleur_claire	o9973	g$couleur_foncee	o10129	g$left	o10589	g$left	o10844	g$right	o11033	g$couleur_foncee	o11132	!
 g$right	o11285	g$left	o11677	g$couleur_foncee	o13262	g$couleur_foncee	o13386	g$couleur_foncee	o13542	g$couleur_claire	o13631	g$couleur_foncee	o13717	g$couleur_foncee	o13899	g$couleur_foncee	o13988	g$right	o17987	g$couleur_claire	o18020	g$left	o18094	g$couleur_claire	o18140	g$left	o18181	g$couleur_claire	o18213	g$right	o18339	g$couleur_claire	o18372	g$couleur_claire	o18853	g$couleur_foncee	o18941	g$couleur_foncee	o19517	g$couleur_claire	o19812	g$couleur_foncee	o19993	g$couleur_foncee	o20052	g$couleur_foncee	o20151	g$couleur_foncee	o20351	g$couleur_foncee	o20467	g$couleur_foncee	o20526	g$couleur_claire	o21040	g$left	o21304	g$couleur_claire	o21380	g$left	o21646	g$couleur_foncee	o21928	g$couleur_foncee	o22053	g$left	o22279	g$left	o22317	g$left	o22354	g$left	o22425	g$left	o22463	g$left	o22500	g$left	o22735	g$ltr	o22814	g$couleur_foncee	o23948	g$couleur_foncee	o24016	g$couleur_claire	o24099	g$couleur_foncee	o24140	g$couleur_foncee	o24192	g$right	o24439	g$left	o24661	g$left	o24711!
 	g$right	o25814	g$couleur_foncee	o25867	g$couleur_foncee	o25926	g$coul
eur_foncee	o25983	g$couleur_foncee	o26041	g$_rtl	o26124	g$right	o26146	g$right	o26290	g$couleur_foncee	o26343	g$couleur_foncee	o26402	g$couleur_foncee	o26459	g$couleur_foncee	o26517	g$_rtl	o26601	g$right	o26623	g$left	o26878	g$left	o26969	g$couleur_foncee	o27114	g$couleur_foncee	o27375	g$left	o28220	g$right	o28391	g$right	o28441	g$couleur_foncee	o28746	g$left	o28987	g$right	o29024	g$left	o29234	g$left	o29272	g$left	o29309	g$left	o29407	g$right	o29882	g$left	o29949	g$right	o29985
ecrire/js_menu_rubriques.php	g$expire	o69	g$date	o79	g$headers_only	o97	g$expire	o132	g$date	o143	g$date	o176	g$expire	o184	g$expire	o219	g$headers_only	o276	g$date	o324	g$expire	o360	fextraire_article	o387	fgen_liste_rubriques	o556	fbandeau_menu	o957	g$spip_ecran	o982	fbandeau_rubrique	o1954	g$zdecal	o2020	g$spip_ecran	o2037	g$spip_display	o2050	g$spip_lang	o2073	g$spip_lang_rtl	o2085	g$spip_lang_left	o2101	g$spip_lang_right	o2118
ecrire/forum_admin.php3	g$admin	o7
ecrire/index.php3	g$HTTP_REFERER	o73	g$HTTP_REFERER	o98	g$bonjour	o133	g$spip_display	o233	g$titre_cadre	o344	g$titre_cadre	o425	g$connect_nom	o457	g$titre_cadre	o561	g$connect_statut	o681	g$cookie_admin	o716	g$texte	o735	g$spip_display	o780	g$texte	o800	g$texte	o847	g$nom_site_spip	o961	g$nom_site_spip	o1015	g$nom_site_spip	o1031	g$nom_site_spip	o1145	g$spip_display	o1169	g$logo	o1231	g$logo	o1269	g$logo	o1374	g$query	o1448	g$res	o1528	g$query	o1546	g$row	o1566	g$res	o1590	g$var	o1603	g$row	o1621	g$var	o1642	g$row	o1649	g$nb_art_prepa	o1675	g$nb_art_prop	o1692	g$nb_art_publie	o1708	g$nb_art_prepa	o1896	g$nb_art_prepa	o1966	g$nb_art_prop	o1987	g$nb_art_prop	o2056	g$nb_art_publie	o2076	g$nb_art_publie	o2139	g$query	o2184	g$res	o2261	g$query	o2279	g$row	o2296	g$res	o2320	g$var	o2331	g$row	o2349	g$var	o2368	g$row	o2375	g$nb_bre_prop	o2398	g$nb_bre_publie	o2414	g$nb_bre_prop	o2595	g$nb_bre_prop	o2664	g$nb_bre_publie	o2684	g$nb_bre_publie	o2747	g$query	o2791	g$result	o2865	g$quer!
 y	o2903	g$nb_forum	o2914	g$result	o2926	g$nb_forum	o2948	g$connect_statut	o2967	g$nb_forum	o3196	g$query	o3235	g$res	o3313	g$query	o3331	g$row	o3348	g$res	o3372	g$var	o3383	g$row	o3401	g$var	o3420	g$row	o3427	g$nb_aut_0minirezo	o3450	g$nb_aut_1comite	o3471	g$nb_aut_6forum	o3490	g$nb_aut_0minirezo	o3671	g$nb_aut_0minirezo	o3734	g$nb_aut_1comite	o3759	g$nb_aut_1comite	o3815	g$nb_aut_6forum	o3838	g$nb_aut_6forum	o3892	g$today	o4411	g$jour_today	o4439	g$today	o4453	g$mois_today	o4471	g$today	o4485	g$annee_today	o4502	g$today	o4517	g$date	o4535	g$mois_today	o4570	g$annee_today	o4586	g$mois	o4604	g$date	o4617	g$annee	o4627	g$date	o4642	g$jour	o4652	g$date	o4665	g$result_messages	o4718	g$result_messages	o5163	g$mois_today	o5233	g$annee_today	o5246	g$jour_today	o5260	g$mois_today	o5273	g$annee_today	o5286	g$result_messages	o5348	g$result_messages	o5844	g$jour_today	o5910	g$mois_today	o5922	g$annee_today	o5934	g$meta	o6024	g$archive	o6117	g$meta	o6128	g$my_pos	o6160	g$meta	o6170	g$o!
 k	o6201	g$archive	o6220	g$ok	o6237	g$archive	o6264	g$affiche_progressi
on_pourcent	o6280	g$taille	o6322	g$my_pos	o6349	g$affiche_progression_pourcent	o6375	g$archive	o6416	g$taille	o6430	g$my_pos	o6452	g$affiche_progression_pourcent	o6462	g$texte_boite	o6505	g$texte_boite	o6799	g$gz	o7070	g$flag_gz	o7076	g$_fopen	o7087	g$gz	o7098	g$ok	o7127	g$f	o7136	g$_fopen	o7141	g$archive	o7149	g$pos	o7168	g$buf	o7180	g$f	o7209	g$gz	o7213	g$post_dates	o7334	g$post_dates	o7378	g$connect_statut	o7403	g$options	o7438	g$vos_articles	o7646	g$vos_articles	o7931	g$vos_articles	o7946	g$vos_articles	o8003	g$spip_display	o8129	g$query	o8173	g$result	o8235	g$query	o8256	g$result	o8286	g$activer_breves	o8415	g$activer_breves	o8468	g$connect_statut	o8623	g$connect_statut	o8739	g$connect_toutes_rubriques	o8774	g$query	o8950	g$result	o9013	g$query	o9034	g$gadget	o9045	g$result	o9082	g$id_rubrique	o9101	g$GLOBALS	o9116	g$id_rubrique	o9148	g$dans_rub	o9172	g$dans_parent	o9217	g$gadget	o9267	g$connect_statut	o9307	g$gadget	o9345	g$gadget	o9368	g$gadget	o9500	g$gadget	o9532	g$!
 gadget	o9554	g$gadget	o9691	g$activer_breves	o9718	g$activer_breves	o9772	g$gadget	o9804	g$gadget	o9827	g$gadget	o9961	g$connect_statut	o10044	g$gadget	o10118	g$gadget	o10142	g$gadget	o10276	g$gadget	o10318	g$gadget	o10364	g$connect_statut	o10381	g$gadget	o10419	g$nombre_articles	o10456	g$nombre_articles	o10681	g$gadget	o10708	g$gadget	o10730	g$gadget	o10842	g$activer_breves	o10870	g$activer_breves	o10921	g$gadget	o10951	g$gadget	o10973	g$gadget	o11069	g$articles_mots	o11097	g$articles_mots	o11148	g$gadget	o11178	g$gadget	o11200	g$gadget	o11305	g$activer_sites	o11332	g$activer_sites	o11383	g$gadget	o11411	g$gadget	o11433	g$gadget	o11543	g$gadget	o11569	g$gadget	o11618	g$connect_statut	o11674	g$spip_display	o11709	g$cookie_admin	o11737	g$relief	o12364	g$relief	o12387	g$query	o12399	g$result	o12504	g$query	o12525	g$relief	o12535	g$result	o12560	g$relief	o12583	g$query	o12595	g$result	o12671	g$query	o12692	g$relief	o12702	g$result	o12727	g$relief	o12750	g$query	o12803	g$result!
 	o12880	g$query	o12901	g$relief	o12911	g$result	o12936	g$relief	o12959
	g$connect_statut	o13012	g$connect_toutes_rubriques	o13047	g$query	o13077	g$result	o13158	g$query	o13179	g$relief	o13189	g$result	o13214	g$relief	o13237	g$query	o13611	g$query	o13785	g$connect_statut	o14184	g$connect_toutes_rubriques	o14219	g$connect_statut	o14527	g$connect_toutes_rubriques	o14562	g$result	o14593	g$row	o14699	g$result	o14723	g$row	o14737	g$row	o14801	g$connect_statut	o14947	g$connect_toutes_rubriques	o14982	g$result	o15013	g$row	o15108	g$result	o15132	g$row	o15146	g$row	o15217	g$row	o15240	g$options	o15525	g$maj_alea	o16392	g$meta_maj	o16404	g$t_jour	o16432	g$maj_alea	o16449	g$t_jour	o16475	g$alea	o16541	g$alea	o16666	g$bonjour	o16755	g$optimiser	o16772	g$lock	o16871	g$lock	o16937	g$lock	o16964	g$lock	o17077
ecrire/admin_repair.php3	g$connect_statut	o411	fverifier_base	o453	g$res1	o1317	g$message	o1357	g$tab	o1411	g$res1	o1435	g$version_mysql	o1444	g$tab	o1461	g$version_mysql	o1475	g$message	o1505	g$version_mysql	o1566	g$message	o1594	g$ok	o1638	g$action	o1656	g$ok	o1702	g$action	o1722	g$message	o1731	g$action	o2059
ecrire/articles_page.php3	g$query	o168	g$result	o229	g$query	o250	g$result	o278	g$connect_statut	o458
ecrire/admin_index.php3	g$connect_statut	o234	g$connect_toutes_rubriques	o269	g$forcer_indexation	o394	g$forcer_indexation	o422	g$forcer_indexation	o470	g$forcer_reindexation	o496	g$purger	o559	g$types	o1198	g$type	o1301	g$types	o1315	g$table	o1327	g$type	o1356	g$table_index	o1365	g$type	o1406	g$critere	o1415	g$type	o1445	g$mise_a_jour	o1534	g$vus	o1552	g$s	o1563	g$t	o1636	g$s	o1658	g$vus	o1666	g$t	o1676	g$vus	o1689	g$s	o1801	g$t	o1889	g$s	o1911	g$indexes	o1920	g$type	o1929	g$t	o1936	g$t	o1945	g$index_total	o1954	g$type	o1967	g$t	o1977	fjauge	o2023	g$types	o2175	g$type	o2197	g$types	o2211	g$index_total	o2224	g$type	o2237	g$ifond	o2257	g$ifond	o2274	g$couleur	o2289	g$ifond	o2333	g$couleur	o2348	g$type	o2533	g$a	o2577	g$indexes	o2592	g$type	o2601	g$index_total	o2615	g$type	o2628	g$b	o2653	g$indexes	o2667	g$type	o2676	g$index_total	o2690	g$type	o2703	g$a	o2732	g$b	o2735
ecrire/breves_edit.php3	fmySel	o113	fenfant	o257	g$id_parent	o285	g$id_rubrique	o305	g$spip_lang_left	o327	g$id_breve	o1060	g$id_breve	o1079	g$new	o1095	g$query	o1113	g$result	o1179	g$query	o1200	g$row	o1216	g$result	o1238	g$id_breve	o1252	g$row	o1262	g$date_heure	o1282	g$row	o1294	g$titre	o1316	g$row	o1323	g$texte	o1340	g$row	o1347	g$lien_titre	o1364	g$row	o1376	g$lien_url	o1398	g$row	o1408	g$statut	o1428	g$row	o1436	g$id_rubrique	o1454	g$row	o1467	g$id_secteur	o1490	g$id_rubrique	o1502	g$extra	o1518	g$row	o1527	g$pour_doublons	o1544	g$titre	o1600	g$onfocus	o1655	g$statut	o1729	g$id_document	o1754	g$query_doc	o1771	g$result_doc	o1878	g$query_doc	o1903	g$flag_document_editable	o1917	g$result_doc	o1958	g$flag_document_editable	o1987	g$modif_document	o2024	g$GLOBALS	o2042	g$modif_document	o2074	g$flag_document_editable	o2103	g$titre_document	o2131	g$titre_document	o2180	g$descriptif_document	o2200	g$descriptif_document	o2254	g$titre	o2474	g$id_rubrique	o2552	g$new	o2607	g$conn!
 ect_statut	o2626	g$statut	o2658	g$id_breve	o2705	g$new	o2782	g$titre	o3166	g$connect_statut	o3224	g$statut	o3256	g$new	o3275	g$id_breve	o3297	g$lien	o3308	g$new	o3625	g$titre	o3697	g$titre	o3719	g$lien_titre	o3729	g$lien_titre	o3756	g$id_rubrique	o4017	g$logo_parent	o4036	g$query	o4083	g$result	o4167	g$query	o4186	g$row	o4203	g$result	o4225	g$parent_parent	o4239	g$row	o4254	g$parent_parent	o4283	g$logo_parent	o4304	g$logo_parent	o4344	g$spip_ecran	o4652	g$rows	o4676	g$rows	o4694	g$GLOBALS	o4845	g$texte	o4929	g$lien_url	o5165	g$lien_url	o5181	g$champs_extra	o5329	g$extra	o5397	g$id_secteur	o5415	g$connect_statut	o5438	g$id_rubrique	o5486	g$statut	o5667	g$statut	o5778	g$statut	o5899
oo/index.php
spip_cache.php3	g$purger_cache	o150	g$hash	o220	g$id_auteur	o227	g$purger_squelettes	o265	g$hash	o345	g$id_auteur	o352	g$redirect	o411
ecrire/lang/spip_vi.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/brouteur_frame.php3	g$spip_ecran	o50	g$nb_col	o78	g$nb_col	o103	g$effacer_suivant	o125	g$i	o161	g$frame	o166	g$i	o176	g$nb_col	o181	g$i	o190	g$special	o331	g$query	o356	g$result	o654	g$query	o673	g$result	o702	g$row	o886	g$result	o908	g$id_article	o923	g$row	o935	g$titre	o959	g$row	o973	g$statut	o993	g$row	o1003	g$special	o1185	g$query	o1212	g$result	o1376	g$query	o1395	g$result	o1424	g$row	o1612	g$result	o1634	g$id_article	o1649	g$row	o1661	g$titre	o1685	g$row	o1699	g$statut	o1719	g$row	o1729	g$query	o1900	g$result	o1999	g$query	o2018	g$result	o2047	g$row	o2211	g$result	o2233	g$id_breve	o2248	g$row	o2258	g$titre	o2280	g$row	o2294	g$statut	o2314	g$row	o2324	g$puce	o2344	g$query	o2541	g$result	o2630	g$query	o2649	g$row	o2664	g$result	o2686	g$ze_rubrique	o2700	g$row	o2713	g$titre	o2737	g$row	o2751	g$id_parent	o2770	g$row	o2781	g$id_parent	o2811	g$icone	o2828	g$icone	o2863	g$frame	o3131	g$query	o3383	g$result	o3470	g$query	o3489	g$row	o3506	g$result	o3528	g$ze_rubrique	o!
 3542	g$row	o3555	g$titre	o3579	g$row	o3593	g$id_parent	o3612	g$row	o3623	g$id_parent	o3810	g$frame	o3979	g$frame	o4029	g$frame	o4084	g$nb_col	o4095	g$frame	o4253	g$frame	o4303	g$id_rubrique	o4570	g$connect_statut	o4597	g$query	o4629	g$query	o4790	g$result	o5189	g$query	o5208	g$result	o5238	g$row	o5420	g$result	o5442	g$id_article	o5458	g$row	o5470	g$titre	o5495	g$row	o5509	g$statut	o5530	g$row	o5540	g$query	o5716	g$result	o5825	g$query	o5844	g$result	o5874	g$row	o6036	g$result	o6058	g$id_breve	o6074	g$row	o6084	g$titre	o6107	g$row	o6121	g$statut	o6142	g$row	o6152	g$statut	o6181	g$puce	o6220	g$puce	o6279	g$puce	o6338	g$puce	o6398	g$puce	o6459	g$puce	o6505	g$query	o6701	g$result	o6814	g$query	o6833	g$result	o6863	g$row	o6993	g$result	o7015	g$id_syndic	o7031	g$row	o7042	g$titre	o7066	g$row	o7080	g$statut	o7104	g$row	o7114	g$statut	o7143	g$puce	o7182	g$puce	o7241	g$puce	o7300	g$puce	o7360	g$puce	o7421	g$frame	o7772	g$id_rubrique	o7788	g$query	o7812	g$result	o8111	g$query	o8130	g!
 $result	o8160	g$frame	o8426	g$frame	o8476	g$query	o8546	g$result	o8711
	g$query	o8732	g$total_articles	o8744	g$result	o8776	g$query	o8793	g$result	o8893	g$query	o8912	g$total_breves	o8924	g$result	o8954	g$total_articles	o8975	g$total_breves	o8993	g$frame	o9274	g$frame	o9324
ecrire/lang/public_es.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/spip_oc_lnc.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/public_fon.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/info.php3	g$connect_statut	o98
inc-html-squel.php3	d_INC_HTML_SQUEL	o96	fparser_inclure	o1260	fparser_champs	o1999	fparser_champs_etendus	o2993	fparser_champs_exterieurs	o3223	fparser_champs_interieurs	o3582	fparser_param	o4590	fparser	o6168
inc-formulaire_ecrire_auteur.php3	g$balise_FORMULAIRE_ECRIRE_AUTEUR_collecte	o14	g$balise_FORMULAIRE_ECRIRE_AUTEUR_collecte	o58	fbalise_FORMULAIRE_ECRIRE_AUTEUR_stat	o246	fbalise_FORMULAIRE_ECRIRE_AUTEUR_dyn	o464	g$spip_lang_rtl	o554
ecrire/mots_edit.php3	fmySel	o151	g$connect_statut	o319	g$supp_mot	o358	g$query	o373	g$result	o432	g$query	o453	g$query	o464	g$result	o532	g$query	o553	g$titre_mot	o571	g$new	o591	g$id_groupe	o608	g$id_mot	o626	g$ajouter_id_article	o747	g$ajouter_id_article	o784	g$titre_mot	o924	g$titre_mot	o948	g$texte	o963	g$texte	o983	g$descriptif	o994	g$descriptif	o1019	g$type	o1035	g$type	o1074	g$result	o1085	g$row	o1177	g$result	o1201	g$type	o1214	g$row	o1253	g$champs_extra	o1311	g$add_extra	o1368	g$add_extra	o1451	g$query	o1471	g$result	o1635	g$query	o1656	g$id_mot	o1765	g$new	o1792	g$titre_mot	o1816	g$titre	o1829	g$titre_mot	o1842	g$onfocus	o1900	g$redirect_ok	o2021	g$redirect	o2046	g$redirect	o2093	g$query	o2139	g$result	o2198	g$query	o2219	g$row	o2233	g$result	o2257	g$id_mot	o2270	g$row	o2280	g$titre_mot	o2297	g$row	o2310	g$descriptif	o2326	g$row	o2340	g$texte	o2361	g$row	o2370	g$type	o2386	g$row	o2394	g$extra	o2409	g$row	o2418	g$id_groupe	o2434	g$row	o2447	g$id_mot	o2638	g$id_mot	!
 o2922	g$new	o2979	g$adresse_retour	o2997	g$adresse_retour	o3094	g$arton	o3266	g$artoff	o3291	g$id_mot	o3323	g$connect_statut	o3339	g$arton	o3392	g$artoff	o3400	g$connect_statut	o3660	g$titre_mot	o4069	g$descriptif	o4088	g$descriptif	o4279	g$texte	o4396	g$texte	o4480	g$id_mot	o4515	g$connect_statut	o4545	g$aff_articles	o4579	g$aff_articles	o4639	g$connect_statut	o5613	g$id_mot	o5776	g$new	o5859	g$titre_mot	o6153	g$titre_mot	o6179	g$descriptif	o6193	g$descriptif	o6220	g$texte	o6235	g$texte	o6257	g$query_groupes	o6489	g$result	o6557	g$query_groupes	o6578	g$result	o6614	g$row_groupes	o6815	g$result	o6847	g$groupe	o6861	g$row_groupes	o6871	g$titre_groupe	o6901	g$row_groupes	o6951	g$groupe	o7002	g$id_groupe	o7011	g$row_groupes	o7114	g$result	o7146	g$row_groupes	o7163	g$row_groupes	o7262	g$row_groupes	o7627	g$options	o7668	g$descriptif	o7694	g$descriptif	o7853	g$options	o7980	g$texte	o8006	g$texte	o8153	g$champs_extra	o8265	g$extra	o8333	g$id_groupe	o8349
ecrire/inc_extra.php3	d_ECRIRE_INC_EXTRA	o1442	fextra_saisie	o1542	fextra_recup_saisie	o3734	fextra_filtres	o4071	fextra_champ_valide	o4352	fextra_affichage	o4520
ecrire/lang/public_bg.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_charsets.php3	d_ECRIRE_INC_CHARSETS	o104	fload_charset	o235	ftest_iconv	o60449	viconv_ok	o60473	ftest_pcre_unicode	o60829	vpcre_ok	o60860	fpcre_lettres_unicode	o61102	vplage_unicode	o61136	fplage_punct_unicode	o61566	fhtml2unicode	o61695	vtrans	o61727	g$CHARSET	o61759	fmathml2unicode	o62086	vtrans	o62120	g$CHARSET	o62152	fcharset2unicode	o62512	g$flag_multibyte	o62580	vtrans	o62606	g$CHARSET	o63954	funicode2charset	o64449	vCHARSET_REVERSE	o64501	fimporter_charset	o65729	futf_8_to_unicode	o65862	vdecrement	o65899	vshift	o65919	futf_32_to_unicode	o68104	fcaractere_utf_8	o69181	funicode_to_utf_8	o69526	funicode_to_javascript	o69754	fjavascript_to_unicode	o70061	fjavascript_to_binary	o70343	ftranslitteration	o70647	vtrans	o70714	g$CHARSET	o71041	ftranslitteration_complexe	o71715	g$GLOBALS	o71825
ecrire/lang/public_nl.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/statistiques_lang.php3	g$spip_ecran	o112	g$largeur_table	o140	g$largeur_table	o174	g$taille	o201	g$largeur_table	o211	g$GLOBALS	o498	g$critere	o533	g$critere	o613	g$critere	o696	g$connect_statut	o815	fenfants	o950	g$nombre_vis	o979	g$total_vis	o1000	g$nombre_abs	o1020	g$critere	o1041	g$total_vis	o1693	g$total_vis	o1707	g$query	o1765	g$critere	o1788	g$result	o1840	g$query	o1861	g$visites	o1872	g$row	o1892	g$result	o1916	g$total_visites	o1929	g$row	o1946	g$total_visites	o1979	g$query	o2017	g$critere	o2046	g$result	o2124	g$query	o2145	g$ifond	o2271	g$row	o2295	g$result	o2319	g$lang	o2334	g$row	o2342	g$visites	o2359	g$row	o2376	g$total_visites	o2390	g$taille	o2407	g$visites	o2428	g$ifond	o2453	g$ifond	o2470	g$couleur	o2485	g$ifond	o2519	g$couleur	o2534	g$dir	o2601	g$lang	o2615	g$lang	o2808	g$taille	o2960	g$visites_abs	o3124	g$visites	o3233	g$visites_abs	o3448	g$visites	o3464
inc-menu_lang_ecrire.php3	g$balise_MENU_LANG_ECRIRE_collecte	o14	g$balise_MENU_LANG_ECRIRE_collecte	o49	fbalise_MENU_LANG_ECRIRE_stat	o191	fbalise_MENU_LANG_ECRIRE_dyn	o398	fmenu_lang_pour_tous	o616
spip_image_reduite.php3	g$img	o7	g$_GET	o14	g$logo	o28	g$img	o36	g$taille_y	o153	g$taille_y	o165	g$taille_x	o177	g$logo	o224	g$regs	o231	g$i	o246	g$regs	o272	g$regs	o288	g$hash	o362	g$hash_id_auteur	o369	g$dir	o397	g$nom	o402	g$format	o407	g$i	o418	g$logo	o424	g$dir	o432	g$nom	o439	g$format	o452	g$suffixe	o502	g$taille_x	o517	g$taille_y	o531	g$preview	o544	g$logo	o570	g$taille_x	o577	g$taille_y	o588	g$format	o599	g$suffixe	o616	g$nom	o627	g$suffixe	o632	g$preview	o649	g$vignette	o664	g$preview	o676	g$width	o700	g$preview	o709	g$height	o731	g$preview	o741	g$retour	o932	g$vignette	o942	g$taille_origine	o968	g$logo	o1000	g$retour	o1125	g$logo	o1135	g$retour	o1298
ecrire/articles.php3	g$articles_surtitre	o181	g$articles_soustitre	o234	g$articles_descriptif	o289	g$articles_urlref	o346	g$articles_chapeau	o395	g$articles_ps	o446	g$articles_redac	o487	g$articles_mots	o534	g$articles_versions	o579	g$flag_revisions	o643	g$id_article	o665	g$new	o688	g$id_rubrique	o705	g$id_rubrique	o727	g$titre	o748	g$titre	o760	g$langue_new	o795	g$result_lang_rub	o815	g$row	o918	g$result_lang_rub	o942	g$langue_new	o964	g$row	o978	g$langue_new	o1000	g$langue_new	o1013	g$langue_choisie_new	o1055	g$forums_publics	o1087	g$id_article	o1149	g$clean_link	o1634	g$query	o1808	g$result	o1902	g$query	o1923	g$row	o1936	g$result	o1960	g$statut_article	o1973	g$row	o1991	g$titre_article	o2008	g$row	o2025	g$rubrique_article	o2041	g$row	o2061	g$statut_article	o2092	g$query	o2117	g$result_auteur	o2227	g$query	o2255	g$flag_auteur	o2265	g$result_auteur	o2295	g$flag_editable	o2317	g$rubrique_article	o2350	g$flag_auteur	o2374	g$statut_article	o2392	g$statut_article	o2422	g$statu!
 t_article	o2451	g$modif_document	o2559	g$GLOBALS	o2577	g$modif_document	o2609	g$flag_editable	o2638	g$titre_document	o2657	g$titre_document	o2706	g$descriptif_document	o2726	g$descriptif_document	o2780	g$query	o2805	g$largeur_document	o2907	g$hauteur_document	o2929	g$query	o2948	g$query	o3021	g$query	o3078	g$suivi_edito	o3129	g$ok_nouveau_statut	o3171	g$statut_nouv	o3205	g$rubrique_article	o3241	g$ok_nouveau_statut	o3261	g$flag_auteur	o3298	g$statut_nouv	o3320	g$statut_article	o3347	g$ok_nouveau_statut	o3378	g$statut_nouv	o3416	g$statut_article	o3444	g$ok_nouveau_statut	o3478	g$ok_nouveau_statut	o3513	g$query	o3537	g$result	o3627	g$query	o3648	g$statut_nouv	o3664	g$statut_nouv	o3693	g$statut_article	o3709	g$statut_ancien	o3812	g$statut_article	o3829	g$statut_article	o3914	g$statut_nouv	o3932	g$flag_editable	o3948	g$rubrique_article	o3981	g$flag_auteur	o4007	g$statut_article	o4025	g$statut_article	o4055	g$ok_nouveau_statut	o4120	g$statut_nouv	o4143	g$statut_nouv	o4172	g$stat!
 ut_ancien	o4188	g$id_article	o4302	g$ok_nouveau_statut	o4361	g$statut_
ancien	o4384	g$statut_nouv	o4415	g$statut_ancien	o4431	g$invalider_caches	o4450	g$jour	o4570	g$flag_editable	o4579	g$annee	o4602	g$mois	o4620	g$mois	o4639	g$jour	o4654	g$query	o4669	g$result	o4762	g$query	o4783	g$jour_redac	o4822	g$flag_editable	o4837	g$annee_redac	o4860	g$annee_redac	o4881	g$annee_redac	o4902	g$mois_redac	o4930	g$jour_redac	o4951	g$avec_redac	o4977	g$annee_redac	o5000	g$mois_redac	o5025	g$jour_redac	o5047	g$query	o5072	g$result	o5189	g$query	o5210	g$flag_editable	o5307	g$row	o5326	g$langue_parent	o5435	g$row	o5452	g$changer_lang	o5472	g$changer_lang	o5495	g$changer_lang	o5580	g$langue_parent	o5718	g$query	o5839	g$result	o6008	g$query	o6029	g$row	o6045	g$result	o6067	g$ze_doc	o6079	g$row	o6089	g$ze_doc	o6123	g$ze_docs	o6137	g$ze_doc	o6153	g$nb_texte	o6316	g$nb_texte	o6338	g$varname	o6410	g$texte_plus	o6440	g$varname	o6455	g$texte_plus	o6515	g$texte_plus	o6531	g$texte_plus	o6588	g$texte_ajout	o6604	g$texte_plus	o6624	g$texte	o6661	g$texte_ajout	o6670	g$texte	!
 o6685	g$changer_virtuel	o6722	g$flag_editable	o6742	g$virtuel	o6761	g$virtuel	o6808	g$virtuel	o6825	g$chapo	o6835	g$chapo	o6896	g$query	o6910	g$result	o6992	g$query	o7013	g$titre	o7029	g$ajout_forum	o7040	g$flag_editable	o7056	g$champs	o7075	g$champs_version	o7189	g$champs	o7226	g$nom_champ	o7237	g$t	o7253	g$champs_versions	o7258	g$nom_champ	o7275	g$nom_champ	o7310	g$nom_champ	o7326	g$t	o7350	g$champs_extra	o7397	g$add_extra	o7452	g$id_secteur	o7521	g$add_extra	o7550	g$flag_auteur	o7632	g$id_rubrique	o7663	g$change_rubrique	o7682	g$change_rubrique	o7746	g$articles_versions	o7849	g$new	o7910	g$query	o7988	g$query	o8109	g$select	o8125	g$champs	o8146	g$query	o8160	g$champs_originaux	o8239	g$query	o8287	g$id_version	o8301	g$id_article	o8331	g$champs_originaux	o8344	g$id_version	o8464	g$query	o8650	g$result	o8918	g$query	o8939	g$statut_article	o9004	g$invalider_caches	o9041	g$id_article	o9265	g$articles_versions	o9318	g$id_article	o9358	g$champs_versions	o9371	g$id_rubrique	o942!
 9	g$id_rubrique_old	o9445	g$row	o9467	g$langue_old	o9585	g$row	o9599	g
$langue_choisie_old	o9615	g$row	o9637	g$langue_choisie_old	o9668	g$row	o9703	g$langue_new	o9809	g$row	o9823	g$langue_new	o9844	g$langue_old	o9859	g$titre_article	o10028	g$titre	o10058	g$id_article_bloque	o10260	g$id_article	o10281	fget_forums_publics	o10416	g$query	o10872	g$result	o10943	g$query	o10964	g$row	o10978	g$result	o11002	g$id_article	o11015	g$row	o11029	g$surtitre	o11050	g$row	o11062	g$titre	o11081	g$row	o11090	g$soustitre	o11106	g$row	o11119	g$id_rubrique	o11139	g$row	o11154	g$descriptif	o11176	g$row	o11190	g$nom_site	o11211	g$row	o11223	g$url_site	o11242	g$row	o11254	g$chapo	o11273	g$row	o11282	g$texte	o11298	g$row	o11307	g$ps	o11323	g$row	o11329	g$date	o11342	g$row	o11350	g$statut_article	o11365	g$row	o11383	g$maj	o11400	g$row	o11407	g$date_redac	o11421	g$row	o11435	g$visites	o11456	g$row	o11467	g$referers	o11485	g$row	o11497	g$extra	o11516	g$row	o11525	g$id_trad	o11541	g$row	o11552	g$id_version	o11570	g$row	o11584	g$virtuel	o11644	g$chapo	o11666	g$virtuel	o1169!
 1	g$chapo	o11709	g$date_redac	o11769	g$regs	o11782	g$mois_redac	o11800	g$regs	o11814	g$jour_redac	o11832	g$regs	o11846	g$annee_redac	o11864	g$regs	o11879	g$annee_redac	o11901	g$annee_redac	o11922	g$date	o11992	g$regs	o11999	g$mois	o12017	g$regs	o12025	g$jour	o12043	g$regs	o12051	g$annee	o12069	g$regs	o12078	g$id_rubrique	o12207	g$id_article	o12637	g$statut_article	o12650	g$connect_statut	o12673	g$id_rubrique	o12721	g$query	o12739	g$row	o12866	g$query	o12901	g$nb_forums	o12915	g$row	o12928	g$nb_forums	o12949	g$nb_forums	o13029	g$activer_statistiques	o13131	g$connect_statut	o13195	g$statut_article	o13230	g$visites	o13262	g$activer_statistiques	o13279	g$options	o13314	g$visites	o13407	g$articles_versions	o13513	g$id_version	o13536	g$options	o13554	g$js_ortho	o13790	g$js_ortho	o14048	g$arton	o14125	g$artoff	o14154	g$id_article	o14190	g$flag_editable	o14208	g$arton	o14245	g$artoff	o14253	g$options	o14367	g$connect_statut	o14393	g$flag_editable	o14425	g$visible	o14502	g$change_ac!
 cepter_forum	o14513	g$change_petition	o14539	g$visible	o14636	g$visibl
e	o14816	g$forums_publics	o15017	g$id_article	o15054	g$change_accepter_forum	o15074	g$query_forum	o15102	g$result_forum	o15218	g$query_forum	o15245	g$forums_publics	o15262	g$change_accepter_forum	o15280	g$change_accepter_forum	o15310	g$forums_publics	o15599	g$forums_publics	o16036	g$forums_publics	o16465	g$forums_publics	o16902	g$change_petition	o17507	g$change_petition	o17533	g$email_unique	o17569	g$email_unique	o17584	g$site_obli	o17615	g$site_obli	o17627	g$site_unique	o17655	g$site_unique	o17669	g$message	o17699	g$message	o17709	g$texte_petition	o17731	g$texte_petition	o17760	g$query_pet	o17782	g$result_pet	o17998	g$query_pet	o18023	g$change_petition	o18051	g$query_pet	o18083	g$result_pet	o18158	g$query_pet	o18183	g$query_petition	o18205	g$result_petition	o18285	g$query_petition	o18315	g$petition	o18334	g$result_petition	o18361	g$row	o18394	g$result_petition	o18418	g$id_rubrique	o18441	g$row	o18454	g$email_unique	o18476	g$row	o18490	g$site_obli	o18514	g$row	o18525	g$site_!
 unique	o18546	g$row	o18559	g$message	o18582	g$row	o18591	g$texte_petition	o18610	g$row	o18626	g$petition	o18777	g$query_signatures	o18969	g$result	o19066	g$query_signatures	o19104	g$result	o19131	g$result	o19235	g$email_unique	o19317	g$site_obli	o19625	g$site_unique	o19906	g$message	o20207	g$texte_petition	o20623	g$petition	o20851	g$visible	o21525	g$changer_virtuel	o21537	g$virtuel	o21557	g$visible	o21647	g$visible	o21844	g$virtuelhttp	o22165	g$virtuel	o22181	g$vos_articles	o22756	g$vos_articles	o23089	g$row	o23320	g$vos_articles	o23344	g$ze_article	o23366	g$row	o23380	g$ze_titre	o23404	g$row	o23421	g$ze_statut	o23441	g$row	o23454	g$options	o23483	g$numero	o23514	g$id_article	o24000	fmySel	o24067	fmy_sel	o24210	fafficher_mois	o24363	fafficher_annee	o24910	fafficher_jour	o25204	g$logo_statut	o25433	g$statut_article	o25468	g$surtitre	o25622	g$surtitre	o25711	g$titre	o25767	g$logo_statut	o25775	g$soustitre	o25795	g$soustitre	o25885	g$descriptif	o25936	g$url_site	o25951	g$nom_s!
 ite	o25964	g$texte_case	o26156	g$descriptif	o26171	g$texte_case	o26241
	g$nom_site	o26257	g$url_site	o26267	g$nom_site	o26310	g$url_site	o26325	g$texte_case	o26358	g$statut_article	o26413	g$flag_editable	o26601	g$flag_modif	o26718	g$query	o26826	g$result	o26991	g$query	o27012	g$row	o27028	g$result	o27052	g$auteur_modif	o27067	g$row	o27083	g$modification	o27108	g$row	o27124	g$maintenant	o27149	g$row	o27163	g$date_diff	o27187	g$maintenant	o27207	g$modification	o27221	g$date_diff	o27249	g$date_diff	o27269	g$auteur_modif	o27289	g$auteur_modif	o27311	g$connect_id_auteur	o27328	g$flag_modif	o27354	g$query_auteur	o27378	g$result_auteur	o27462	g$query_auteur	o27490	g$row_auteur	o27514	g$result_auteur	o27545	g$nom_auteur_modif	o27569	g$row_auteur	o27594	g$flag_modif	o27638	g$nom_auteur_modif	o27881	g$date_diff	o27915	g$flag_editable	o28253	g$options	o28272	g$statut_article	o28485	g$date	o28686	g$jour	o28958	g$mois	o29109	g$annee	o29262	g$date	o29638	g$options	o29689	g$articles_redac	o29716	g$annee_redac	o29746	g$mois_redac	o29763	g$jour_redac	o29779	g$a!
 nnee_redac	o29817	g$mois_redac	o29834	g$jour_redac	o29850	g$date_affichee	o29879	g$date_redac	o29904	g$date_affichee	o29925	g$date_affichee	o30128	g$annee_redac	o30487	g$mois_redac	o30504	g$jour_redac	o30520	g$annee_redac	o30842	g$mois_redac	o30859	g$jour_redac	o30875	g$jour_redac	o31212	g$mois_redac	o31379	g$annee_redac	o31489	g$statut_article	o31943	g$texte_date	o31972	g$texte_date	o32030	g$date	o32219	g$annee_redac	o32268	g$mois_redac	o32285	g$jour_redac	o32301	g$date_affichee	o32335	g$date_redac	o32377	g$date_affichee	o32522	g$flag_editable	o32685	g$options	o32704	g$bouton	o32731	g$bouton	o32834	g$creer_auteur	o33107	g$connect_statut	o33125	g$creer_auteur	o33157	g$creer_auteur	o33184	g$nouv_auteur	o33202	g$ajout_auteur	o33312	g$cherche_auteur	o33371	g$query	o33417	g$result	o33470	g$query	o33491	g$table_auteurs	o33507	g$table_ids	o33531	g$row	o33552	g$result	o33576	g$table_auteurs	o33590	g$row	o33609	g$table_ids	o33624	g$row	o33639	g$resultat	o33662	g$cherche_auteur	o336!
 92	g$table_auteurs	o33709	g$table_ids	o33725	g$resultat	o33765	g$cherc
he_auteur	o33851	g$resultat	o33901	g$ajout_auteur	o33922	g$nouv_auteur	o33954	g$resultat	o33975	g$query	o34039	g$result	o34109	g$query	o34130	g$row	o34163	g$result	o34187	g$id_auteur	o34202	g$row	o34215	g$nom_auteur	o34237	g$row	o34251	g$email_auteur	o34267	g$row	o34283	g$bio_auteur	o34301	g$row	o34315	g$nom_auteur	o34415	g$resultat	o34503	g$resultat	o34530	g$les_auteurs	o34550	g$id_auteur	o34581	g$resultat	o34600	g$les_auteurs	o34612	g$id_auteur	o34629	g$les_auteurs	o34647	g$les_auteurs	o34666	g$les_auteurs	o34691	g$cherche_auteur	o34777	g$query	o34810	g$result	o34899	g$query	o34920	g$row	o34972	g$result	o34996	g$id_auteur	o35012	g$row	o35025	g$nom_auteur	o35048	g$row	o35062	g$email_auteur	o35079	g$row	o35095	g$bio_auteur	o35114	g$row	o35128	g$nom_auteur	o35166	g$email_auteur	o35196	g$bio_auteur	o35396	g$bio_auteur	o35445	g$cherche_auteur	o35607	g$GLOBALS	o35646	g$retour	o35731	g$GLOBALS	o35751	g$titre	o35788	g$cherche_auteur	o35807	g$ajout_auteur	o36114	g$flag_editable	o36!
 131	g$nouv_auteur	o36154	g$query	o36176	g$result	o36282	g$query	o36301	g$query	o36312	g$result	o36419	g$query	o36438	g$id_article	o36551	g$supp_auteur	o36575	g$flag_editable	o36591	g$query	o36610	g$result	o36715	g$query	o36734	g$id_article	o36843	g$les_auteurs	o36901	g$query	o36917	g$result	o37127	g$query	o37148	g$result	o37176	g$table	o37305	g$row	o37326	g$result	o37350	g$vals	o37364	g$id_auteur	o37378	g$row	o37391	g$nom_auteur	o37412	g$row	o37426	g$email_auteur	o37441	g$row	o37457	g$bio_auteur	o37478	g$row	o37520	g$bio_auteur	o37544	g$url_site_auteur	o37586	g$row	o37605	g$statut_auteur	o37625	g$row	o37642	g$row	o37664	g$row	o37695	g$messagerie	o37716	g$les_auteurs	o37740	g$id_auteur	o37757	g$connect_statut	o37776	g$aff_articles	o37808	g$aff_articles	o37872	g$query2	o37913	g$result2	o38190	g$query2	o38212	g$result2	o38228	g$nombre_articles	o38243	g$result2	o38280	g$nombre_articles	o38298	g$url_auteur	o38323	g$vals	o38382	g$row	o38408	g$vals	o38418	g$nom_auteur	o38471	g$val!
 s	o38495	g$id_auteur	o38521	g$email_auteur	o38547	g$vals	o38562	g$vals
	o38634	g$url_site_auteur	o38662	g$vals	o38680	g$vals	o38756	g$nombre_articles	o38784	g$vals	o38806	g$nombre_articles	o38817	g$nombre_articles	o38871	g$vals	o38894	g$vals	o38934	g$flag_editable	o38962	g$connect_id_auteur	o38982	g$id_auteur	o39004	g$connect_statut	o39018	g$options	o39054	g$vals	o39084	g$vals	o39324	g$table	o39347	g$vals	o39358	g$largeurs	o39373	g$styles	o39423	g$largeurs	o39531	g$table	o39542	g$styles	o39550	g$les_auteurs	o39591	g$les_auteurs	o39616	g$flag_editable	o39667	g$options	o39686	g$query	o39761	g$les_auteurs	o39812	g$query	o39826	g$query	o39877	g$result	o39975	g$query	o39996	g$connect_statut	o40056	g$rubrique_article	o40106	g$options	o40129	g$retour	o40184	g$clean_link	o40204	g$result	o40481	g$result	o40773	g$flag_mots_ressemblants	o40792	g$group	o41390	g$group2	o41409	g$row	o41437	g$result	o41461	g$id_auteur	o41477	g$row	o41490	g$nom	o41513	g$row	o41520	g$email	o41537	g$row	o41546	g$statut	o41565	g$row	o41575	g$statut	o41596	g$statut	o41658	g$statut!
 	o41672	g$statut	o41727	g$statut	o41741	g$statut	o41795	g$premiere	o41810	g$nom	o41845	g$connect_statut	o41869	g$p	o41910	g$email	o41922	g$email	o41942	g$email	o41958	g$p	o41969	g$email	o41989	g$email	o42002	g$statut	o42033	g$statut_old	o42044	g$premiere	o42197	g$premiere_old	o42210	g$statut	o42229	g$premiere_old	o42271	g$texte_option	o42336	g$statut_old	o42485	g$statut	o42499	g$premiere_old	o42512	g$premiere	o42528	g$options	o42968	g$articles_mots	o42995	g$id_article	o43051	g$nouv_mot	o43064	g$supp_mot	o43075	g$cherche_mot	o43086	g$flag_editable	o43100	g$row	o43283	g$langue_article	o43400	g$row	o43418	g$langue_choisie_article	o43433	g$row	o43459	g$titre_barre	o43525	g$titre_barre	o43581	g$titre_barre	o43626	g$langue_article	o43673	g$titre_barre	o43817	g$flag_editable	o43905	g$row	o43974	g$langue_parent	o44079	g$row	o44096	g$langue_choisie_article	o44117	g$herit	o44151	g$herit	o44174	g$langue_article	o44295	g$langue_parent	o44346	g$flag_editable	o44515	g$supp_trad	o44534	g$!
 result_autres_trad	o44777	g$row	o44898	g$result_autres_trad	o44922	g$n
ombre_autres_trad	o44948	g$row	o44970	g$nombre_autres_trad	o44992	g$id_trad	o45105	g$connect_statut	o45130	g$id_trad_new	o45163	g$id_trad	o45324	g$id_trad_new	o45335	g$flag_editable	o45360	g$lier_trad	o45379	g$query_lier	o45428	g$result_lier	o45510	g$query_lier	o45536	g$row	o45557	g$result_lier	o45581	g$id_lier	o45602	g$row	o45613	g$id_lier	o45639	g$nouveau_trad	o45732	g$lier_trad	o45748	g$id_lier	o45786	g$id_trad	o45798	g$err	o45808	g$nouveau_trad	o45862	g$id_lier	o45878	g$id_lier	o46001	g$id_trad	o46211	g$id_trad	o46319	g$nouveau_trad	o46330	g$err	o46362	g$err	o46426	g$id_trad	o46571	g$query_trad	o46591	g$result_trad	o46694	g$query_trad	o46720	g$table	o46745	g$row	o46766	g$result_trad	o46790	g$vals	o46811	g$id_article_trad	o46827	g$row	o46846	g$titre_trad	o46870	g$row	o46884	g$lang_trad	o46903	g$row	o46916	g$statut_trad	o46934	g$row	o46949	g$lang_trad	o46983	g$titre_trad	o47000	g$ifond	o47061	g$ifond	o47081	g$bgcolor	o47098	g$ifond	o47136	g$bgcolor	o47153	g$couleur_claire	!
 o47164	g$vals	o47193	g$statut_trad	o47237	g$id_article_trad	o47326	g$id_trad	o47346	g$vals	o47364	g$titre_trad	o47453	g$connect_statut	o47512	g$vals	o47542	g$vals	o47760	g$ret	o47859	g$id_article_trad	o47885	g$id_article	o47905	g$s	o47918	g$s	o47947	g$id_article_trad	o48031	g$id_trad	o48051	g$s	o48061	g$vals	o48097	g$s	o48107	g$vals	o48116	g$lang_trad	o48146	g$table	o48167	g$vals	o48178	g$vals	o48288	g$largeurs	o48594	g$styles	o48633	g$largeurs	o48697	g$table	o48708	g$styles	o48716	g$langue_article	o48790	g$flag_editable	o48905	g$options	o48924	g$ret	o48952	g$lien	o49046	g$GLOBALS	o49054	g$lien	o49081	g$nom_select	o49095	g$lien	o49112	g$lien	o49120	g$flag_editable	o49904	g$options	o49923	g$ret	o49950	g$connect_statut	o50947	g$rubrique_article	o50997	g$statut_url_javascript	o51408	g$statut_article	o51697	g$statut_article	o51827	g$statut_article	o51962	g$statut_article	o52087	g$statut_article	o52225	g$statut_article	o52386	g$virtuel	o52987	g$revision_nbsp	o53126	g$activer_rev!
 ision_nbsp	o53143	g$chapo	o53180	g$chapo	o53264	g$texte	o53366	g$ps	o5
3397	g$ps	o53562	g$revision_nbsp	o53625	g$les_notes	o53655	g$les_notes	o53795	g$champs_extra	o53861	g$extra	o53879	g$extra	o53943	g$flag_editable	o54014	g$date_diff	o54074	g$date_diff	o54094	g$auteur_modif	o54114	g$auteur_modif	o54136	g$connect_id_auteur	o54153	g$query_auteur	o54177	g$result_auteur	o54257	g$query_auteur	o54285	g$row_auteur	o54310	g$result_auteur	o54341	g$nom_auteur_modif	o54363	g$row_auteur	o54388	g$nom_auteur_modif	o54632	g$date_diff	o54666	g$spip_display	o54913	g$id_article	o54963	g$flag_editable	o54987	g$flag_auteur	o55045	g$statut_article	o55062	g$forum_retour	o55453	g$forum_retour	o55636	g$titre	o55701	g$query_forum	o55791	g$result_forum	o55914	g$query_forum	o55941	g$total	o55956	g$row	o55972	g$result_forum	o55996	g$total	o56012	g$row	o56021	g$debut	o56040	g$debut	o56048	g$total_afficher	o56060	g$total	o56085	g$total_afficher	o56094	g$i	o56164	g$i	o56172	g$total	o56177	g$i	o56185	g$i	o56190	g$total_afficher	o56195	g$y	o56215	g$i	o56220	g$total_afficher	!
 o56225	g$i	o56252	g$debut	o56258	g$query_forum	o56424	g$result_forum	o56587	g$query_forum	o56614	g$result_forum	o56644	g$forum_retour	o56659	g$debut	o56682	g$debut	o56690	g$total_afficher	o56702	g$total	o56727	g$total_afficher	o56736	g$i	o56806	g$i	o56814	g$total	o56819	g$i	o56827	g$i	o56832	g$total_afficher	o56837	g$y	o56857	g$i	o56862	g$total_afficher	o56867	g$i	o56894	g$debut	o56900	g$ok_nouveau_statut	o57117	g$statut_nouv	o57178	g$statut_ancien	o57207	g$statut_nouv	o57225	g$id_article	o57303	g$statut_nouv	o57325	g$statut_ancien	o57352	g$statut_nouv	o57370	g$statut_ancien	o57387	g$id_article	o57479
inc-compilo-api.php3	d_INC_COMPILO_API	o97	cTexte	o188	vtype	o202	vtexte	o224	cInclure	o240	vtype	o256	vfichier	o280	vparams	o295	cBoucle	o364	vtype	o379	vid_boucle	o402	vid_parent	o419	vcond_avant	o440	vlang_select	o494	vtype_requete	o513	vsql_serveur	o533	vparam	o552	vseparateur	o575	vdoublons	o593	vpartie	o609	vexterne	o652	vtout	o770	vplat	o790	vselect	o810	vfrom	o824	vwhere	o836	vlimit	o849	vgroup	o862	vorder	o880	vdate	o898	vhash	o920	vlien	o941	vsous_requete	o961	vcompte_requete	o989	vhierarchie	o1015	vid_table	o1083	vprimary	o1099	vreturn	o1114	vnumrows	o1128	cChamp	o1155	vtype	o1169	vnom_champ	o1191	vnom_boucle	o1208	vcond_avant	o1263	vfonctions	o1315	vetoile	o1354	vid_boucle	o1406	vboucles	o1423	vtype_requete	o1438	vcode	o1458	vstatut	o1488	vid_mere	o1675	vdocument	o1728	g$tables_des_serveurs_sql	o1830	g$tables_principales	o1856	g$exceptions_des_tables	o1909	g$table_des_tables	o1933	g$tables_relations	o1959	g$table_primary	o1979	g$table_date	o1995	g$tables_des_serv!
 eurs_sql	o2009	g$tables_principales	o2058	g$table_primary	o2119	g$table_des_tables	o2600	g$exceptions_des_tables	o3026	g$table_date	o3837	g$tables_relations	o4291
ecrire/mots_type.php3	g$connect_statut	o35	g$new	o70	g$id_groupe	o88	g$type	o106	g$onfocus	o160	g$ancien_type	o234	g$unseul	o254	g$obligatoire	o272	g$articles	o295	g$breves	o315	g$rubriques	o333	g$syndic	o354	g$acces_minirezo	o372	g$acces_comite	o398	g$acces_forum	o422	g$query_groupes	o454	g$result_groupes	o536	g$query_groupes	o565	g$row	o589	g$result_groupes	o613	g$id_groupe	o635	g$row	o648	g$type	o669	g$row	o677	g$ancien_type	o694	g$type	o709	g$titre	o718	g$type	o732	g$unseul	o742	g$row	o752	g$obligatoire	o770	g$row	o785	g$articles	o808	g$row	o820	g$breves	o840	g$row	o850	g$rubriques	o868	g$row	o881	g$syndic	o902	g$row	o912	g$acces_minirezo	o930	g$row	o948	g$acces_comite	o969	g$row	o985	g$acces_forum	o1004	g$row	o1019	g$titre	o1635	g$connect_statut	o1675	g$type	o1708	g$type	o1737	g$connect_statut	o2459	g$articles	o2701	g$checked	o2721	g$checked	o2750	g$activer_breves	o2932	g$activer_breves	o2985	g$breves	o3019	g$checked	o3037	g$checked	o3067	g$rubriques	o3320	g$checked	o33!
 41	g$checked	o3370	g$syndic	o3560	g$checked	o3578	g$checked	o3607	g$config_precise_groupes	o3812	g$config_precise_groupes	o3880	g$unseul	o3916	g$obligatoire	o3936	g$unseul	o4063	g$checked	o4084	g$checked	o4116	g$obligatoire	o4303	g$checked	o4329	g$checked	o4358	g$acces_minirezo	o4876	g$checked	o4902	g$checked	o4931	g$acces_comite	o5154	g$checked	o5178	g$checked	o5207	g$mots_cles_forums	o5403	g$forums_publics	o5456	g$mots_cles_forums	o5511	g$acces_forum	o5541	g$forums_publics	o5568	g$acces_forum	o5602	g$checked	o5625	g$checked	o5655
ecrire/optimiser.php3	d_ECRIRE_OPTIMISER	o101	foptimiser_base	o139
ecrire/articles_forum.php3	g$query	o102	g$result	o190	g$query	o211	g$row	o227	g$result	o251	g$titre	o264	g$row	o273	g$id_rubrique	o289	g$row	o304	g$titre	o340	g$id_rubrique	o419	g$titre	o1052	g$connect_statut	o1160	g$id_rubrique	o1208	g$debut	o1281	g$debut	o1289	g$pack	o1301	g$enplus	o1347	g$limitdeb	o1400	g$debut	o1413	g$enplus	o1422	g$debut	o1433	g$enplus	o1440	g$limitnb	o1453	g$debut	o1464	g$enplus	o1473	g$limitdeb	o1483	g$query_forum	o1495	g$result_forum	o1658	g$query_forum	o1685	g$i	o1702	g$limitdeb	o1707	g$i	o1722	g$row	o1821	g$result_forum	o1845	g$i	o1893	g$pack	o1899	g$i	o1911	g$pack	o1914	g$i	o1930	g$debut	o1936	g$i	o2128	g$mots_cles_forums	o2244	g$connect_statut	o2300	g$query_forum	o2335	g$result_forum	o2511	g$query_forum	o2538	g$result_forum	o2569	g$forum_retour	o2584	g$id_article	o2599
ecrire/lang/spip_fa.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_serialbase.php3	d_ECRIRE_INC_SERIALBASE	o103	g$spip_articles	o137	g$spip_articles_key	o1530	g$spip_auteurs	o1889	g$spip_auteurs_key	o2855	g$spip_breves	o3048	g$spip_breves_key	o3667	g$spip_messages	o3822	g$spip_messages_key	o4258	g$spip_mots	o4355	g$spip_mots_key	o4757	g$spip_groupes_mots	o4894	g$spip_groupes_mots_key	o5365	g$spip_rubriques	o5431	g$spip_rubriques_key	o6263	g$spip_documents	o6444	g$spip_documents_key	o7008	g$spip_types_documents	o7165	g$spip_types_documents_key	o7537	g$spip_syndic	o7669	g$spip_syndic_key	o8393	g$spip_syndic_articles	o8591	g$spip_syndic_articles_key	o8985	g$spip_forum	o9146	g$spip_forum_key	o10048	g$spip_signatures	o10378	g$spip_signatures_key	o10873	g$tables_principales	o11034	g$tables_principales	o11174	g$spip_articles	o11227	g$spip_articles_key	o11253	g$tables_principales	o11274	g$spip_auteurs	o11327	g$spip_auteurs_key	o11352	g$tables_principales	o11372	g$spip_breves	o11425	g$spip_breves_key	o11449	g$tables_principales	o11468	g$s!
 pip_messages	o11521	g$spip_messages_key	o11547	g$tables_principales	o11568	g$spip_mots	o11621	g$spip_mots_key	o11643	g$tables_principales	o11660	g$spip_groupes_mots	o11717	g$spip_groupes_mots_key	o11747	g$tables_principales	o11772	g$spip_rubriques	o11826	g$spip_rubriques_key	o11853	g$tables_principales	o11875	g$spip_documents	o11929	g$spip_documents_key	o11957	g$tables_principales	o11979	g$spip_types_documents	o12039	g$spip_types_documents_key	o12072	g$tables_principales	o12100	g$spip_syndic	o12151	g$spip_syndic_key	o12175	g$tables_principales	o12194	g$spip_syndic_articles	o12254	g$spip_syndic_articles_key	o12287	g$tables_principales	o12315	g$spip_forum	o12365	g$spip_forum_key	o12388	g$tables_principales	o12406	g$spip_signatures	o12461	g$spip_signatures_key	o12489
ecrire/oo/index.php3
inc-formulaire_inscription.php3	g$balise_FORMULAIRE_INSCRIPTION_collecte	o56	g$balise_FORMULAIRE_INSCRIPTION_collecte	o98	fbalise_FORMULAIRE_INSCRIPTION_stat	o272	fbalise_FORMULAIRE_INSCRIPTION_dyn	o492	ftest_mail_ins	o2548	fenvoyer_inscription	o2670	ftest_login	o3518
ecrire/lang/public_hu.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/public_de.php3	g$GLOBALS	o80	g$GLOBALS	o89
inc-url_logout.php3	g$balise_URL_LOGOUT_collecte	o14	g$balise_URL_LOGOUT_collecte	o43	fbalise_URL_LOGOUT_stat	o92	fbalise_URL_LOGOUT_dyn	o176
index.php
ecrire/lang/spip_it.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/public_oc_auv.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/articles_tous.php3	g$aff_art	o40	g$aff_art	o55	g$aff_art	o76	g$aff_art	o92	g$statut_art	o119	g$aff_art	o162	g$direction_generale	o312	g$spip_dir_lang	o334	g$query	o387	g$result	o471	g$query	o492	g$row	o508	g$result	o532	g$id_rubrique	o545	g$row	o560	g$titre	o582	g$row	o596	g$id_parent	o613	g$row	o626	g$les_rubriques	o648	g$nom_block	o694	g$numero_block	o737	g$compteur_block	o773	g$numero_block	o794	g$compteur_block	o824	g$first_couche	o849	g$first_couche	o864	g$compteur_block	o880	g$last_couche	o899	g$compteur_block	o914	g$id_parent	o940	g$rubrique	o963	g$id_rubrique	o973	g$rubrique	o1012	g$id_rubrique	o1022	g$enfant	o1054	g$id_parent	o1062	g$id_rubrique	o1078	g$query	o1097	g$result	o1156	g$query	o1177	g$row	o1193	g$result	o1217	g$id_rubrique	o1230	g$row	o1245	g$rubriques_actives	o1267	g$id_rubrique	o1286	g$id_rubrique	o1302	g$sel_lang	o1363	g$l	o1391	g$sel_lang	o1402	g$sel	o1416	g$l	o1421	g$l	o1427	g$sel_lang	o1432	g$sel	o1444	g$sel_lang	o1452	g$spip_lang	o1462	g$spi!
 p_lang	o1476	g$connect_statut	o1493	g$query	o1525	g$query	o1728	g$result	o2287	g$query	o2308	g$row	o2323	g$result	o2347	g$id_rubrique	o2360	g$row	o2373	g$id_article	o2395	g$row	o2409	g$titre	o2430	g$row	o2444	g$statut	o2461	g$row	o2471	g$lang	o2488	g$row	o2496	g$id_trad	o2511	g$row	o2522	g$date_modif	o2540	g$row	o2554	g$aff_statut	o2577	g$aff_lang	o2609	g$text_article	o2637	g$id_article	o2651	g$text_article	o2686	g$id_article	o2700	g$statut	o2725	g$text_article	o2735	g$id_article	o2749	g$lang	o2772	g$text_article	o2780	g$id_article	o2794	g$id_trad	o2820	g$text_article	o2831	g$id_article	o2845	g$date_modif	o2874	g$GLOBALS	o2888	g$lang	o2918	g$langues	o2937	g$langues	o3135	g$l	o3170	g$langues	o3182	g$sel_lang	o3204	g$l	o3214	g$text_article	o3219	g$id_article	o3233	g$id_trad	o3320	g$id_article	o3332	g$id_trad	o3347	g$text_article	o3366	g$id_article	o3380	g$article	o3519	g$id_rubrique	o3528	g$id_article	o3546	g$tmp	o3565	g$text_article	o3572	g$tmp	o3592	g$tmp	o3612	g$id_article!
 	o3619	g$tmp	o3637	g$tmp	o3649	g$id_trad	o3660	g$tmp	o3671	g$id_articl
e	o3676	g$date	o3703	g$tmp	o3711	g$id_article	o3716	g$date_modif	o3740	g$tmp	o3754	g$id_article	o3759	g$lang	o3789	g$tmp	o3797	g$id_article	o3802	g$id_trad	o3839	g$id_trad	o3856	g$id_article	o3868	g$sel_lang	o3884	g$lang	o3894	g$text_article	o3911	g$id_trad	o3925	g$text_article	o3951	g$id_article	o3965	g$text_article	o3999	g$id_trad	o4013	g$text_article	o4133	g$id_trad	o4147	g$aff_statut	o4475	g$aff_art	o4518	g$aff_statut	o4888	g$aff_art	o4929	g$aff_statut	o5293	g$aff_art	o5338	g$aff_statut	o5699	g$aff_art	o5743	g$aff_statut	o6105	g$aff_art	o6153	g$lf	o6821	g$langues	o7279	g$langues	o7349	g$langues	o7373	g$langues	o7545	g$l	o7594	g$langues	o7606	g$sel_lang	o7626	g$l	o7636	g$l	o7701	g$l	o7780	fafficher_rubriques_filles	o8039	g$rubrique	o8087	g$enfant	o8098	g$article	o8107	g$text_article	o8117	g$spip_lang_left	o8140	g$spip_lang_right	o8157	g$spip_lang	o8175	g$direction_generale	o8187	g$couleur_claire	o8216	g$decal	o8241	g$javasc_ouvrir	o10582	g$javasc_fermer	o10699	g$les_rubri!
 ques	o10845	g$browser_layer	o10864	g$les_rubriques	o10883	g$les_rubriques	o10905
inc-stats.php3	d_INC_STATS	o94	fecrire_stats	o124	g$id_article	o149	g$id_breve	o162	g$id_rubrique	o173	fafficher_raccourci_stats	o1632
ecrire/index.php
inc-chercher.php3	d_INC_CHERCHE	o93	fchercher_squelette	o237
ecrire/auteur_infos.php3	g$id_auteur	o228	g$id_auteur	o247	fmySel	o286	fafficher_auteur_rubriques	o464	g$id_parent	o510	g$id_rubrique	o530	g$toutes_rubriques	o552	g$i	o579	g$connect_toutes_rubriques	o1116	g$add_rub	o1146	g$add_rub	o1161	g$query	o1174	g$result	o1274	g$query	o1295	g$connect_toutes_rubriques	o1310	g$supp_rub	o1340	g$supp_rub	o1356	g$query	o1370	g$result	o1471	g$query	o1492	g$connect_statut	o1520	g$connect_id_auteur	o1555	g$id_auteur	o1577	g$auteur	o1705	g$id_auteur	o1720	g$auteur	o1735	g$new	o1833	g$auteur	o1877	g$titre	o1894	g$auteur	o1906	g$onfocus	o1968	g$auteur	o2045	g$auteur	o2077	g$statut	o2159	g$connect_statut	o2238	g$statut	o2319	g$auteur	o2352	g$statut	o2372	g$nom	o2387	g$auteur	o2414	g$nom	o2451	g$modif_login	o2493	g$old_login	o2509	g$auteur	o2522	g$new_login	o2546	g$old_login	o2558	g$connect_statut	o2574	g$connect_toutes_rubriques	o2609	g$auteur	o2639	g$new_login	o2676	g$new_login	o2704	g$echec	o2725	g$new_login	o2861	g$echec	o2934	g$new_login	o2989	!
 g$old_login	o3003	g$modif_login	o3021	g$auteur	o3046	g$new_login	o3065	g$auteur	o3124	g$modif_login	o3150	g$new_pass	o3230	g$statut	o3245	g$auteur	o3273	g$auteur	o3294	g$new_pass	o3331	g$new_pass2	o3344	g$echec	o3359	g$new_pass	o3416	g$new_pass	o3437	g$echec	o3456	g$modif_login	o3513	g$auteur	o3537	g$new_pass	o3559	g$modif_login	o3583	g$auteur	o3653	g$connect_id_auteur	o3688	g$auteur	o3710	g$GLOBALS	o3753	g$connect_statut	o3942	g$connect_toutes_rubriques	o3979	g$statut	o4008	g$email	o4040	g$email	o4070	g$echec	o4084	g$auteur	o4130	g$email	o4149	g$auteur	o4169	g$email	o4188	g$connect_id_auteur	o4205	g$id_auteur	o4227	g$perso_activer_imessage	o4247	g$query	o4277	g$result	o4378	g$query	o4399	g$auteur	o4411	g$perso_activer_imessage	o4433	g$auteur	o4497	g$bio	o4534	g$auteur	o4542	g$pgp	o4579	g$auteur	o4587	g$nom_site_auteur	o4629	g$auteur	o4689	g$url_site	o4721	g$new_pass	o4739	g$htpass	o4754	g$new_pass	o4779	g$alea_actuel	o4793	g$alea_futur	o4826	g$pass	o4858	g$alea_actuel	o487!
 0	g$new_pass	o4883	g$query_pass	o4897	g$auteur	o5020	g$query_pass	o505
3	g$champs_extra	o5110	g$extra	o5165	g$add_extra	o5207	g$extra	o5245	g$add_extra	o5268	g$echec	o5318	g$auteur	o5335	g$auteur	o5387	g$id_auteur	o5468	g$auteur	o5481	g$ajouter_id_article	o5519	g$ajouter_id_article	o5555	g$query	o5704	g$auteur	o5771	g$auteur	o5814	g$auteur	o5857	g$auteur	o5900	g$auteur	o5948	g$auteur	o5999	g$auteur	o6045	g$auteur	o6089	g$auteur	o6146	g$query	o6181	g$query	o6196	g$id_auteur	o6308	g$echec	o6426	g$redirect_ok	o6437	g$redirect	o6483	g$redirect	o6508	g$connect_id_auteur	o6592	g$id_auteur	o6614	g$auteur	o6638	g$auteur	o6692	g$id_auteur	o6776	g$echec	o7139	g$auteur	o7866	g$connect_statut	o7963	g$connect_toutes_rubriques	o7999	g$auteur	o8028	g$auteur	o8143	g$auteur	o8213	g$auteur	o8482	g$auteur	o8720	g$auteur	o8882	g$options	o8961	g$auteur	o9153	g$auteur	o9299	g$champs_extra	o9342	g$auteur	o9410	g$auteur	o9439	g$auteur	o9608	g$edit_login	o9640	g$edit_pass	o9662	g$connect_statut	o9694	g$connect_toutes_rubriques	o9730	g$edit_login	o9760	g$edit_pass	o9781!
 	g$connect_id_auteur	o9811	g$id_auteur	o9833	g$edit_login	o9848	g$edit_pass	o9870	g$edit_login	o9899	g$edit_pass	o9921	g$edit_login	o10042	g$edit_pass	o10057	g$connect_id_auteur	o10073	g$id_auteur	o10095	g$edit_login	o10385	g$auteur	o10591	g$auteur	o10732	g$edit_pass	o10900	g$connect_id_auteur	o11354	g$id_auteur	o11376	g$auteur	o11548	g$statut	o12737	g$auteur	o12747	g$connect_statut	o12795	g$connect_toutes_rubriques	o12832	g$statut	o12861	g$connect_id_auteur	o12890	g$id_auteur	o12912	g$connect_statut	o13064	g$connect_toutes_rubriques	o13099	g$statut	o13161	g$statut	o13236	g$statut	o13279	g$statut	o13421	g$statut	o13489	g$statut	o13775	g$query_admin	o13843	g$result_admin	o14059	g$query_admin	o14086	g$result_admin	o14121	g$row_admin	o14338	g$result_admin	o14368	g$id_rubrique	o14389	g$row_admin	o14404	g$titre	o14434	g$row_admin	o14448	g$connect_toutes_rubriques	o14499	g$connect_id_auteur	o14529	g$id_auteur	o14551	g$toutes_rubriques	o14717	g$toutes_rubriques	o14777	g$connect_to!
 utes_rubriques	o14828	g$connect_id_auteur	o14858	g$id_auteur	o14880	g$
result_admin	o14914
ecrire/inc_auth.php3	d_ECRIRE_INC_AUTH	o100	facces_rubrique	o311	g$connect_toutes_rubriques	o350	g$connect_id_rubrique	o385	facces_restreint_rubrique	o495	g$connect_id_rubrique	o544	g$connect_statut	o574	fauth	o686	g$INSECURE	o703	g$HTTP_POST_VARS	o714	g$HTTP_GET_VARS	o731	g$HTTP_COOKIE_VARS	o747	g$REMOTE_USER	o766	g$PHP_AUTH_USER	o780	g$PHP_AUTH_PW	o796	g$auth_can_disconnect	o818	g$ignore_auth_http	o840	g$ignore_remote_user	o859	g$connect_id_auteur	o889	g$connect_nom	o909	g$connect_bio	o923	g$connect_email	o937	g$connect_nom_site	o961	g$connect_url_site	o980	g$connect_login	o999	g$connect_pass	o1015	g$connect_activer_imessage	o1038	g$connect_activer_messagerie	o1065	g$connect_statut	o1102	g$connect_toutes_rubriques	o1119	g$connect_id_rubrique	o1146	g$auteur_session	o1177	g$prefs	o1194	g$clean_link	o1210
ecrire/inc_tidy.php	d_ECRIRE_INC_TIDY	o100	fversion_tidy	o137	vversion	o163	fechappe_xhtml	o383	fxhtml	o1212
ecrire/controle_petition.php3	fcontrole_forum	o233	g$debut	o284	g$couleur_foncee	o300	g$connect_statut	o2577	g$supp_petition	o2658	g$query_forum	o2677	g$result_forum	o2777	g$query_forum	o2804	g$add_petition	o2828	g$query_forum	o2846	g$result_forum	o2943	g$query_forum	o2970	g$id_signature	o3044	g$add_petition	o3061	g$add_petition	o3075	g$supp_petition	o3089	g$debut	o3336	g$debut	o3344	g$id_article	o3362	g$signature_article	o3379	g$url_article	o3433	g$signature_article	o3486	g$query_forum	o3513	g$result_forum	o3686	g$query_forum	o3713	g$total	o3729	g$row	o3746	g$result_forum	o3770	g$total	o3786	g$row	o3795	g$total	o3814	g$i	o3850	g$i	o3858	g$total	o3863	g$i	o3871	g$i	o3876	g$i	o3893	g$i	o3920	g$debut	o3926	g$query_forum	o4066	g$result_forum	o4208	g$query_forum	o4235	g$query_forum	o4252	g$result_forum	o4404	g$query_forum	o4431	g$result_forum	o4462
ecrire/controle_forum.php3	fforum_parent	o39	fcontrole_forum	o3295	g$couleur_foncee	o3335	g$mots_cles_forums	o3360	g$page	o7916	g$page	o7923	g$page	o8029	g$connect_statut	o8290	g$connect_toutes_rubriques	o8325	g$page	o8418	g$query_forum	o8443	g$query_forum	o8536	g$query_forum	o8643	g$query_forum	o8762	g$debut	o8800	g$debut	o8808	g$pack	o8820	g$enplus	o8866	g$limitdeb	o8919	g$debut	o8932	g$enplus	o8941	g$debut	o8952	g$enplus	o8959	g$limitnb	o8972	g$debut	o8983	g$enplus	o8992	g$limitdeb	o9002	g$rappel	o9013	g$mots_cles_forums	o9037	g$controle	o9088	g$i	o9134	g$limitdeb	o9139	g$i	o9154	g$result_forum	o9220	g$query_forum	o9284	g$row	o9364	g$result_forum	o9388	g$i	o9436	g$pack	o9442	g$i	o9454	g$pack	o9457	g$i	o9473	g$debut	o9479	g$i	o9681	g$debut	o9685	g$i	o9698	g$debut	o9702	g$pack	o9711	g$controle	o9723	g$row	o9751	g$i	o9783
ecrire/plugins/plug_small_caps.php	favant_typo_smallcaps	o74
carto.php3	g$fond	o9	g$delais	o27
ecrire/lang/spip_da.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/unpack.php3	g$action	o109	g$action	o152	g$hash	o163	g$action	o216
ecrire/config-fonctions.php3	g$connect_statut	o72	g$connect_toutes_rubriques	o107	g$changer_config	o198	fafficher_choix_vignette	o703	g$flag_gd	o1280	g$flag_imagick	o1292	g$convert_command	o1309	g$flag_imagick	o1376	g$image_process	o1395	g$formats_graphiques	o1468	g$flag_gd	o1589	g$convert_command	o1601	g$formats_graphiques	o1623	g$image_process	o1873	g$image_process	o1923	g$formats_graphiques	o2124	g$formats_graphiques	o2204	g$formats_graphiques	o2287	g$formats_graphiques	o2375	g$formats_graphiques	o2449	g$formats_graphiques	o2540	g$flag_gd	o2670	g$nb_process	o2686	g$p	o2730	g$flag_ImageCreateTrueColor	o2752	g$p	o2811	g$nb_process	o2829	g$p	o2884	g$nb_process	o2903	g$convert_command	o2928	g$p	o2976	g$nb_process	o2997	g$creer_preview	o3231	g$taille_preview	o3277	g$taille_preview	o3329	g$taille_preview	o3351	g$formats_graphiques	o3387	g$block	o3617	g$creer_preview	o3729	g$creer_preview	o3820	g$style	o3845	g$style	o3880	g$block	o4240	g$creer_preview	o4354	g$flag_gd	o4816	g$fla!
 g_imagick	o4828	g$convert_command	o4845	g$activer_moteur	o5066	g$activer_moteur	o5286	g$activer_statistiques	o5772	g$activer_statistiques	o5998	g$options	o6384	g$articles_modif	o6501	g$articles_modif	o6705	g$flag_revisions	o7094	g$options	o7114	g$articles_versions	o7230	g$articles_versions	o7438	g$articles_ortho	o7873	g$articles_ortho	o8210	g$preview	o8646	g$preview	o8932	g$options	o9354	g$http_proxy	o9484	g$http_proxy	o9740	g$options	o10434	g$REMOTE_USER	o10499	g$creer_htpasswd	o10665	g$creer_htpasswd	o10851
ecrire/naviguer.php3	g$id_rubrique	o181	g$id_rubrique	o203	g$flag_mots	o218	fenfant	o269	g$les_enfants	o298	g$couleur_foncee	o312	g$lang_dir	o329	g$spip_display	o348	g$spip_lang_left	o363	g$spip_lang_right	o380	g$connect_id_auteur	o406	fsous_enfant	o3098	g$lang_dir	o3133	g$spip_lang_dir	o3144	g$spip_lang_left	o3160	fmy_sel	o4011	fafficher_mois	o4164	fafficher_annee	o4711	fafficher_jour	o5006	g$id_parent	o5211	g$id_parent	o5231	g$id_rubrique	o5244	g$id_rubrique	o5266	g$flag_editable	o5281	g$connect_statut	o5299	g$id_parent	o5350	g$id_rubrique	o5380	g$modifier_rubrique	o5462	g$titre	o5523	g$new	o5567	g$flag_editable	o5585	g$id_rubrique	o5605	g$id_rubrique	o5623	g$result	o5768	g$query	o5789	g$clean_link	o5800	g$id_rubrique	o5835	g$query	o5961	g$row	o6047	g$query	o6082	g$row	o6098	g$confirme_deplace	o6121	g$id_parent	o6154	g$id_parent	o6253	g$change_parent	o6270	g$change_parent	o6329	g$titre	o6355	g$titre	o6375	g$descriptif	o6385	g$descriptif	o6410	g$texte	o6425	g$texte	o6445	g$!
 champs_extra	o6460	g$add_extra	o6515	g$add_extra	o6601	g$flag_editable	o6624	g$query	o6644	g$result	o6798	g$query	o6819	g$invalider_caches	o6919	g$id_rubrique	o7140	g$changer_lang	o7208	g$id_rubrique	o7226	g$id_parent	o7328	g$flag_editable	o7349	g$changer_lang	o7372	g$changer_lang	o7457	g$id_parent	o7545	g$langue_parent	o7565	g$row	o7620	g$langue_parent	o7724	g$row	o7741	g$langue_parent	o7818	g$query	o7965	g$result	o8037	g$query	o8056	g$row	o8072	g$result	o8094	g$id_rubrique	o8106	g$row	o8119	g$id_parent	o8141	g$row	o8152	g$titre	o8172	g$row	o8179	g$descriptif	o8195	g$row	o8207	g$texte	o8228	g$row	o8235	g$statut	o8251	g$row	o8261	g$extra	o8278	g$row	o8287	g$langue_rubrique	o8303	g$row	o8322	g$titre	o8343	g$titre_page	o8352	g$titre	o8392	g$titre_page	o8419	g$id_document	o8474	g$query_doc	o8491	g$result_doc	o8607	g$query_doc	o8632	g$flag_document_editable	o8646	g$result_doc	o8687	g$flag_document_editable	o8716	g$modif_document	o8753	g$GLOBALS	o8771	g$modif_document	o8803	g$fl!
 ag_document_editable	o8832	g$titre_document	o8860	g$titre_document	o89
09	g$descriptif_document	o8929	g$descriptif_document	o8983	g$query	o9009	g$largeur_document	o9111	g$hauteur_document	o9133	g$query	o9152	g$query	o9225	g$query	o9282	g$jour_doc	o9297	g$connect_statut	o9311	g$id_rubrique	o9361	g$annee_doc	o9384	g$mois_doc	o9406	g$mois_doc	o9430	g$jour_doc	o9449	g$query	o9469	g$result	o9578	g$query	o9599	g$titre_page	o9674	g$id_rubrique	o9761	g$id_parent	o9803	g$id_rubrique	o9867	g$spip_display	o9905	g$id_rubrique	o9932	g$id_rubrique	o10241	g$statut	o10255	g$rubon	o10328	g$ruboff	o10359	g$connect_statut	o10398	g$id_rubrique	o10448	g$id_rubrique	o10471	g$rubon	o10512	g$ruboff	o10520	g$rubon	o10621	g$ruboff	o10629	g$query	o10807	g$result	o10869	g$query	o10890	g$result	o11009	g$id_rubrique	o11031	g$activer_breves	o11188	g$activer_breves	o11241	g$id_parent	o11270	g$id_rubrique	o11292	g$connect_statut	o11467	g$id_rubrique	o11599	g$nom_site	o11621	g$titre	o11657	g$nom_site	o11694	g$id_rubrique	o11712	g$ze_logo	o11732	g$id_parent	o11774	g$ze_logo	o117!
 91	g$ze_logo	o11825	g$ze_logo	o11876	g$id_rubrique	o12041	g$fleche	o12057	g$fleche	o12202	g$titre	o12210	g$id_rubrique	o12238	g$flag_editable	o12259	g$ze_logo	o12493	g$descriptif	o12561	g$descriptif	o12763	g$champs_extra	o12854	g$extra	o12872	g$extra	o12936	g$flag_mots	o12981	g$flag_editable	o13004	g$options	o13023	g$id_rubrique	o13050	g$id_rubrique	o13115	g$nouv_mot	o13129	g$supp_mot	o13140	g$cherche_mot	o13151	g$flag_editable	o13165	g$texte	o13197	g$texte	o13321	g$id_rubrique	o13399	g$id_parent	o13501	g$flag_editable	o13522	g$row	o13542	g$langue_rubrique	o13662	g$row	o13681	g$langue_choisie_rubrique	o13696	g$row	o13723	g$id_parent	o13752	g$row	o13768	g$langue_parent	o13871	g$row	o13888	g$langue_parent	o13906	g$langue_rubrique	o14244	g$langue_rubrique	o14440	g$langue_parent	o14462	g$id_rubrique	o14612	g$les_enfants2	o14629	g$les_enfants	o14650	g$les_enfants	o14676	g$les_enfants	o14700	g$les_enfants2	o14727	g$les_enfants2	o14769	g$les_enfants2	o14790	g$les_enfants2	o14811	g!
 $les_enfants2	o14857	g$les_enfants1	o14875	g$les_enfants	o14896	g$les_
enfants	o14918	g$les_enfants2	o14939	g$les_enfants1	o14964	g$les_enfants	o14978	g$les_enfants2	o14993	g$les_enfants2	o15341	g$flag_editable	o15476	g$id_rubrique	o15499	g$relief	o16016	g$relief	o16039	g$query	o16051	g$result	o16187	g$query	o16208	g$relief	o16218	g$result	o16243	g$relief	o16266	g$query	o16278	g$result	o16405	g$query	o16426	g$relief	o16436	g$result	o16461	g$relief	o16484	g$query	o16537	g$result	o16645	g$query	o16666	g$relief	o16676	g$result	o16701	g$relief	o16724	g$connect_statut	o16777	g$connect_toutes_rubriques	o16812	g$query	o16842	g$result	o16954	g$query	o16975	g$relief	o16985	g$result	o17010	g$relief	o17033	g$query	o17395	g$query	o17573	g$connect_statut	o17937	g$connect_toutes_rubriques	o17972	g$id_rubrique	o18278	g$connect_statut	o18300	g$connect_toutes_rubriques	o18335	g$result	o18366	g$row	o18470	g$result	o18494	g$row	o18508	g$row	o18572	g$connect_statut	o18779	g$options	o18814	g$id_rubrique	o19184	g$activer_breves	o19576	g$id_parent	o19626	g$id_rubriqu!
 e	o19648	g$activer_breves	o19672	g$proposer_sites	o20178	g$id_rubrique	o20228	g$flag_editable	o20250	g$proposer_sites	o20268	g$link	o20294	g$link	o20333	g$id_rubrique	o20362	g$link	o20379	g$link	o20420	g$clean_link	o20446	g$link	o20539	g$id_rubrique	o20653	g$id_rubrique	o20701	g$flag_editable	o20727	g$id_rubrique	o20796	g$id_rubrique	o20837	g$flag_editable	o20855	g$link	o20874	g$link	o20910	g$id_parent	o20939	g$link	o20953	g$id_rubrique	o20984	g$link	o21072
inc-criteres.php3	d_INC_CRITERES	o143	fcritere_racine_dist	o220	fcritere_exclus_dist	o505	fcritere_doublons_dist	o916	fcritere_lang_select_dist	o1420	fcritere_debut_dist	o1857	fcritere_recherche_dist	o2240	fcritere_inverse_dist	o2901	fcritere_traduction_dist	o3431	fcritere_origine_traduction_dist	o4018	fcritere_meme_parent_dist	o4378	fcritere_branche_dist	o5193	fcritere_par_dist	o5862	g$table_des_tables	o7141	g$tables_des_serveurs_sql	o7160	fcalculer_critere_parties	o7766	g$tables_relations	o7841	g$table_des_tables	o7860	g$table_date	o7879	g$tables_des_serveurs_sql	o7892	fcalculer_critere_parties_aux	o8439	fcalculer_criteres	o8824	fcalculer_critere_DEFAUT	o9456	g$table_des_tables	o9521	g$table_date	o9540	g$tables_des_serveurs_sql	o9553	fcalculer_critere_externe	o16129	g$tables_relations	o16198	fcalculer_param_date	o16669	fcalculer_param_dynamique	o17144	fcalculer_params_dynamiques	o17937
inc-public.php3	g$page	o55	g$fond	o76	g$delais	o83	g$contexte_inclus	o92	g$fichier_inclus	o110	g$page	o134	g$page	o173	g$page	o214	g$page	o237	d_INC_PUBLIC	o322	g$INSECURE	o449	g$INSECURE	o470	g$delais	o511	g$delais	o523	g$recherche	o548	g$delais	o562	g$HTTP_COOKIE_VARS	o614	g$PHP_AUTH_USER	o653	g$ignore_auth_http	o673	g$forcer_lang	o784	g$forcer_lang	o802	g$HTTP_POST_VARS	o834	g$HTTP_GET_VARS	o920	g$HTTP_GET_VARS	o995	g$ajout_forum	o1143	g$redirect	o1161	g$redirect	o1216	g$redirect	o1247	g$val_confirm	o1267	g$id_article	o1356	g$val_confirm	o1369	g$var_mode	o1509	g$code_activation_debug	o1538	g$auteur_session	o1576	g$var_mode	o1652	g$affiche_boutons_admin	o1700	g$flag_preserver	o1727	g$HTTP_COOKIE_VARS	o1749	g$HTTP_COOKIE_VARS	o1785	g$tableau_des_erreurs	o1868	g$page	o1901	g$fond	o1932	g$delais	o1939	g$use_cache	o1948	g$flag_preserver	o1968	g$flag_dynamique	o2061	g$var_mode	o2080	g$HTTP_COOKIE_VARS	o2095	g$lastmodified	o2274	g$lastmodified	o2333	g$page	o2426	g$fond	o2541	g$f!
 lag_ob	o2578	g$var_mode	o2594	g$var_recherche	o2618	g$affiche_boutons_admin	o2636	g$page	o2718	g$page	o2785	g$contenu	o2804	g$contenu	o2831	g$page	o2842	g$page	o2974	g$contenu	o2994	g$res	o3039	g$page	o3063	g$contenu	o3083	g$res	o3234	g$affiche_boutons_admin	o3253	g$auteur_session	o3283	g$var_mode	o3496	g$var_mode_objet	o3580	g$var_mode_affiche	o3596	g$tableau_des_erreurs	o3642	g$affiche_boutons_admin	o3673	g$tableau_des_erreurs	o3721	g$var_recherche	o3800	g$contenu	o3859	g$contenu	o3885	g$var_recherche	o3895	g$affiche_boutons_admin	o3969	g$contenu	o4032	g$contenu	o4055	g$contenu	o4107	g$affiche_boutons_admin	o4229	g$id_article	o4308	g$id_breve	o4321	g$id_rubrique	o4332	g$id_mot	o4346	g$id_auteur	o4355
spip_image.php3	feffacer_image	o199	g$hash_id_auteur	o229	g$hash	o246	ftester_vignette	o397	g$djpeg_command	o440	g$cjpeg_command	o456	g$pnmscale_command	o472	fdeplacer_fichier_upload	o3248	fdecoder_type_image	o4037	fcorriger_extension	o4410	fajout_image	o4620	g$redirect_url	o4658	g$hash_id_auteur	o4673	g$hash	o4690	g$num_img	o4697	g$dossier_squelettes	o4707	fgdRotate	o5469	fcreer_fichier_vignette	o6960	fsupprime_document_et_vignette	o7587	g$hash_id_auteur	o7638	g$hash	o7655	ftourner_document	o9049	g$hash_id_auteur	o9117	g$hash	o9134	g$test_vignette	o11086	g$redirect	o11131	g$test_vignette	o11159	g$vignette	o11184	g$redirect	o11218	g$vignette	o11253	g$retour	o11275	g$redirect	o11285	g$redirect	o11299	g$ajout_doc	o11322	g$image_name	o11392	g$image2	o11408	g$image	o11421	g$image2	o11447	g$image_name	o11458	g$image	o11472	g$image_name	o11505	g$image	o11534	g$image_name	o11542	g$mode	o11555	g$forcer_document	o11562	g$id_document	o11580	g$hash	o11594	g$link	o11669	g$link	o11709	g$!
 link	o11747	g$retour	o11773	g$link	o11786	g$id_document	o11815	g$link	o11833	g$id_article	o11861	g$link	o11878	g$mode	o11900	g$link	o11911	g$type	o11933	g$link	o11944	g$hash	o11966	g$link	o11977	g$hash_id_auteur	o12009	g$image	o12044	g$image_name	o12052	g$mode	o12065	g$forcer_document	o12072	g$action_zip	o12090	g$id_document	o12103	g$hash	o12117	g$link	o12124	g$ajout_logo	o12151	g$image	o12186	g$logo	o12194	g$image_supp	o12213	g$image_supp	o12241	g$doc_supp	o12266	g$doc_supp	o12334	g$doc_rotate	o12357	g$var_rot	o12388	g$doc_rotate	o12398	g$convert_command	o12411	g$redirect	o12440	g$HTTP_POST_VARS	o12459	g$vars	o12476	g$HTTP_POST_VARS	o12484	g$vars	o12507	g$HTTP_GET_VARS	o12515	g$redirect	o12532	g$vars	o12544	g$link	o12564	g$redirect	o12602	g$vars	o12621	g$key	o12643	g$val	o12649	g$vars	o12663	g$key	o12794	g$link	o12808	g$key	o12822	g$val	o12828	g$id_document	o12848	g$link	o12865	g$id_document	o12893	g$type	o12913	g$link	o12937	g$redirect	o12969	g$link	o12981	g$redirect	o130!
 23
inc-public-global.php3	d_INC_PUBLIC_GLOBAL	o99	fobtenir_page	o190	g$lastmodified	o287	fafficher_page_globale	o2149	g$flag_preserver	o2211	g$flag_dynamique	o2228	g$lastmodified	o2245	g$var_preview	o2268	g$var_mode	o2282	fterminer_public_global	o5637	fmasquer_les_bugs	o6277	finclure_page	o6333	finclure_balise_dynamique	o7253
ecrire/calendrier_semaine.php3	g$mois	o69	g$today	o79	g$jour	o105	g$today	o111	g$mois	o129	g$today	o135	g$annee	o152	g$today	o159	g$date	o178	g$mois	o213	g$jour	o220	g$annee	o227	g$jour	o237	g$date	o253	g$mois	o261	g$date	o274	g$annee	o282	g$date	o297	g$afficher_bandeau_calendrier	o306	g$afficher_bandeau_calendrier_semaine	o343	g$date	o464	g$annee	o483	g$jour	o561	g$mois	o567	g$annee	o573
ecrire/lang/public_it.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/lang/spip_ca.php3	g$GLOBALS	o80	g$GLOBALS	o89
inc-menu_lang.php3	g$balise_MENU_LANG_collecte	o14	g$balise_MENU_LANG_collecte	o42	fbalise_MENU_LANG_stat	o168	fbalise_MENU_LANG_dyn	o370
ecrire/forum.php3	g$admin	o124	g$statutforum	o204	g$logo	o231	g$urlforum	o262	g$statutforum	o367	g$logo	o394	g$urlforum	o427	g$admin	o572	g$admin	o696	g$connect_statut	o716	g$debut	o828	g$debut	o836	g$query_forum	o849	g$result_forum	o950	g$query_forum	o977	g$total	o992	g$row	o1008	g$result_forum	o1032	g$total	o1048	g$row	o1057	g$total	o1075	g$i	o1109	g$i	o1117	g$total	o1122	g$i	o1130	g$i	o1135	g$i	o1151	g$i	o1177	g$debut	o1183	g$logo	o1497	g$query_forum	o1561	g$result_forum	o1687	g$query_forum	o1712	g$result_forum	o1743	g$urlforum	o1757
ecrire/inc_texte.php3	d_ECRIRE_INC_TEXTE	o101	ftester_variable	o467	g$INSECURE	o508	g$lang2	o1572	g$GLOBALS	o1592	g$GLOBALS	o1636	g$lang2	o1682	g$GLOBALS	o1693	g$GLOBALS	o1739	g$lang2	o1765	fnettoyer_chapo	o1874	fspip_avant_propre	o2047	fspip_apres_propre	o2183	fspip_avant_typo	o2281	fspip_apres_typo	o2413	fechappe_html	o3206	fechappe_retour	o6508	fsupprime_img	o7406	fechappe_retour_doublon	o7760	fcouper	o8099	fcouper_intro	o10116	finterdire_scripts	o10814	ftypo_fr	o10991	g$flag_strtr2	o11019	vtrans	o11042	ftypo_en	o12548	ftypo_generale	o13110	g$spip_lang	o13144	g$lang_typo	o13156	ftypo	o13534	ftypo_doublon	o13807	fextraire_lien	o14328	ftraiter_listes	o17975	ftraiter_raccourcis_generale	o19962	g$debut_intertitre	o20010	g$fin_intertitre	o20029	g$ligne_horizontale	o20046	g$url_glossaire_externe	o20066	g$compt_note	o20098	g$marqueur_notes	o20119	g$ouvre_ref	o20144	g$ferme_ref	o20164	g$ouvre_note	o20184	g$ferme_note	o20205	g$flag_pcre	o20226	g$lang_dir	o20246	ftraiter_les_notes	!
 o28045	ftraiter_raccourcis	o28484	ftraiter_raccourcis_doublon	o28926	fpropre	o29420
index.php3
ecrire/calendrier.php3	g$HTTP_GET_VARS	o17	g$HTTP_GET_VARS	o49	g$HTTP_GET_VARS	o143	g$today	o285	g$mois	o349	g$annee	o356	g$today	o363	g$mois	o378	g$today	o384	g$periode	o401	g$annee	o412	g$mois	o443	g$afficher_bandeau_calendrier	o460	g$periode	o573	g$annee	o595	g$mois	o671	g$annee	o677
ecrire/mots_tous.php3	g$conf_mot	o34	g$query	o50	g$result	o112	g$query	o133	g$row	o147	g$result	o171	g$id_mot	o185	g$row	o195	g$titre_mot	o213	g$row	o231	g$type_mot	o249	g$row	o266	g$connect_statut	o288	g$aff_articles	o318	g$aff_articles	o367	g$nb_articles	o399	g$nb_articles	o683	g$nb_articles	o698	g$nb_rubriques	o717	g$nb_rubriques	o926	g$nb_rubriques	o942	g$nb_breves	o962	g$nb_breves	o1224	g$nb_breves	o1237	g$nb_sites	o1254	g$nb_sites	o1521	g$nb_sites	o1533	g$nb_articles	o1554	g$nb_breves	o1569	g$nb_sites	o1582	g$connect_statut	o1739	g$modifier_groupe	o1778	g$change_type	o1809	g$change_type	o1855	g$ancien_type	o1873	g$ancien_type	o1919	g$ancien_type	o1942	g$query	o1977	g$query	o2073	g$query	o2086	g$query	o2408	g$query	o2450	g$query	o2744	g$supp_group	o2766	g$type	o2782	g$supp_group	o2799	g$query	o2815	g$result	o2887	g$query	o2906	g$conf_mot	o3135	g$nb_articles	o3155	g$texte_lie	o3178	g$nb_articles	o3230	g$texte_lie	o3252	g$nb_articles	o3315	g$nb_breves	o3344	g$texte_lie	o3!
 365	g$nb_breves	o3417	g$texte_lie	o3437	g$nb_breves	o3497	g$nb_sites	o3523	g$texte_lie	o3543	g$nb_sites	o3593	g$texte_lie	o3612	g$nb_sites	o3670	g$nb_rubriques	o3695	g$texte_lie	o3719	g$nb_rubriques	o3774	g$texte_lie	o3797	g$nb_rubriques	o3863	g$titre_mot	o3992	g$type_mot	o4018	g$texte_lie	o4044	g$connect_statut	o4488	g$aff_articles	o4518	g$aff_articles	o4566	g$result_articles	o4602	g$row_articles	o4841	g$result_articles	o4875	g$id_mot	o4896	g$row_articles	o4906	g$total_articles	o4932	g$row_articles	o4950	g$nb_articles	o4973	g$id_mot	o4986	g$total_articles	o4997	g$result_rubriques	o5018	g$row_rubriques	o5227	g$result_rubriques	o5261	g$id_mot	o5283	g$row_rubriques	o5293	g$total_rubriques	o5320	g$row_rubriques	o5339	g$nb_rubriques	o5363	g$id_mot	o5377	g$total_rubriques	o5388	g$result_breves	o5409	g$row_breves	o5633	g$result_breves	o5664	g$id_mot	o5683	g$row_breves	o5693	g$total_breves	o5717	g$row_breves	o5733	g$nb_breves	o5754	g$id_mot	o5765	g$total_breves	o5776	g$result_synd!
 ic	o5794	g$row_syndic	o6023	g$result_syndic	o6054	g$id_mot	o6073	g$row
_syndic	o6083	g$total_sites	o6107	g$row_syndic	o6122	g$nb_sites	o6143	g$id_mot	o6153	g$total_sites	o6164	g$query_groupes	o6234	g$result_groupes	o6301	g$query_groupes	o6330	g$row_groupes	o6355	g$result_groupes	o6387	g$id_groupe	o6408	g$row_groupes	o6421	g$titre_groupe	o6449	g$row_groupes	o6470	g$unseul	o6495	g$row_groupes	o6505	g$obligatoire	o6530	g$row_groupes	o6545	g$articles	o6575	g$row_groupes	o6587	g$breves	o6614	g$row_groupes	o6624	g$rubriques	o6649	g$row_groupes	o6662	g$syndic	o6690	g$row_groupes	o6700	g$acces_minirezo	o6725	g$row_groupes	o6743	g$acces_comite	o6771	g$row_groupes	o6787	g$acces_forum	o6813	g$row_groupes	o6828	g$titre_groupe	o6938	g$articles	o7090	g$breves	o7164	g$rubriques	o7235	g$syndic	o7309	g$unseul	o7389	g$obligatoire	o7409	g$unseul	o7450	g$obligatoire	o7518	g$acces_minirezo	o7616	g$acces_comite	o7701	g$acces_forum	o7779	g$query	o7918	g$result	o8001	g$query	o8022	g$table	o8032	g$result	o8066	g$row	o8233	g$result	o8257	g$vals	o8275	g$id_mot	o8294	g$ro!
 w	o8304	g$titre_mot	o8323	g$row	o8336	g$connect_statut	o8359	g$aff_articles	o8395	g$aff_articles	o8449	g$id_mot	o8486	g$conf_mot	o8495	g$couleur	o8512	g$ifond	o8523	g$couleur_claire	o8544	g$ifond	o8565	g$ifond	o8574	g$connect_statut	o8595	g$nb_articles	o8629	g$id_mot	o8642	g$s	o8661	g$titre_mot	o8756	g$s	o8790	g$titre_mot	o8800	g$vals	o8818	g$s	o8828	g$texte_lie	o8837	g$nb_articles	o8868	g$id_mot	o8881	g$texte_lie	o8901	g$nb_articles	o8951	g$id_mot	o8964	g$texte_lie	o8983	g$nb_articles	o8998	g$id_mot	o9011	g$nb_breves	o9057	g$id_mot	o9068	g$texte_lie	o9088	g$nb_breves	o9136	g$id_mot	o9147	g$texte_lie	o9166	g$nb_breves	o9181	g$id_mot	o9192	g$nb_sites	o9236	g$id_mot	o9246	g$texte_lie	o9266	g$nb_sites	o9313	g$id_mot	o9323	g$texte_lie	o9342	g$nb_sites	o9357	g$id_mot	o9367	g$nb_rubriques	o9407	g$id_mot	o9421	g$texte_lie	o9441	g$nb_rubriques	o9497	g$id_mot	o9511	g$texte_lie	o9530	g$nb_rubriques	o9545	g$id_mot	o9559	g$texte_lie	o9602	g$texte_lie	o9620	g$vals	o9647	g$texte_lie	o965!
 7	g$connect_statut	o9679	g$vals	o9716	g$table	o9925	g$vals	o9936	g$con
nect_statut	o9969	g$largeurs	o10004	g$styles	o10040	g$largeurs	o10104	g$styles	o10135	g$largeurs	o10194	g$table	o10205	g$styles	o10213	g$supprimer_groupe	o10286	g$connect_statut	o10329	g$supprimer_groupe	o10363	g$connect_statut	o10395	g$conf_mot	o10430	g$supprimer_groupe	o10674	g$connect_statut	o11224	g$conf_mot	o11259
ecrire/inc_config.php3	d_ECRIRE_INC_CONFIG	o102	finit_config	o421	favertissement_config	o2312	g$spip_lang_right	o2345	g$spip_lang_left	o2363	fbouton_radio	o2750	vid_label	o2826	fafficher_choix	o3174	fappliquer_modifs_config	o3445	g$clean_link	o3481	g$connect_id_auteur	o3494	g$adresse_site	o3522	g$email_webmaster	o3537	g$email_envoi	o3555	g$post_dates	o3569	g$tester_proxy	o3582	g$test_proxy	o3597	g$activer_moteur	o3610	g$forums_publics	o3635	g$forums_publics_appliquer	o3652	g$charset	o3687	g$charset_custom	o3697	g$langues_auth	o3714
inc-calcul-outils.php3	d_INC_CALCUL_OUTILS	o507	fcalcule_fichier_logo	o790	faffiche_logos	o1071	vnum_survol	o1119	g$espace_logos	o1141	fcalcule_logo	o1785	fcalcul_introduction	o2877	fexecuter_balise_dynamique	o3672	fcalcul_exposer	o4298	vexposer	o4349	vref_precedente	o4367	ftable_from_primary	o5293	g$tables_principales	o5327	fcalcul_generation	o5566	fcalcul_branche	o5929	fcalcule_document	o6208	fcalcule_embed_document	o8149	fcalculer_notes	o8406	fsql_profondeur	o8609	fsql_parent	o8716	fsql_rubrique	o8904	fsql_auteurs	o9094	fsql_petitions	o9836	fsql_chapo	o10310	fsql_rubrique_fond	o10589
ecrire/lang/spip_de.php3	g$GLOBALS	o80	g$GLOBALS	o89
inc-compilo-index.php3	d_INC_COMPILO_INDEX	o180	findex_pile	o709	g$exceptions_des_tables	o775	g$table_des_tables	o799	g$tables_des_serveurs_sql	o818	fcalculer_champ	o2879	fchamp_sql	o3529	fcalculer_balise	o3714	fcalculer_balise_dynamique	o5023	fparam_balise	o5441	fcollecter_balise_dynamique	o5800	fapplique_filtres	o6001	ffiltres_arglist	o7349	fcalculer_argument_precedent	o7969	frindex_pile	o8369
spip_login.php3	g$fond	o6	g$delais	o23	g$flag_dynamique	o39	g$flag_preserver	o63	g$forcer_lang	o87
ecrire/lang/public_ca.php3	g$GLOBALS	o80	g$GLOBALS	o89
spip_pass.php3	fformulaire_oubli_dyn	o439	g$p	o2558	g$oubli	o2562
ecrire/inc_visites.php3	d_ECRIRE_INC_VISITES	o100	fcalculer_visites	o139
spip_acces_doc.php3	g$id_document	o247	g$_GET	o263	g$file	o286	g$_GET	o304	g$file	o331	g$refus	o357	g$refus	o382	g$auteur_session	o562	g$cookie_session	o587	g$HTTP_COOKIE_VARS	o605	g$cookie_session	o671	g$auteur_session	o704	g$auteur_session	o751	g$auth_login	o799	g$auteur_session	o813	g$id_document	o862	g$id_document	o884	g$file	o1008	g$id_document	o1032	g$refus	o1046	g$id_document	o1064	g$id_document	o1079	g$file	o1127	g$id_document	o1235	g$file	o1267	g$refus	o1274	g$file	o1292	g$file	o1300	g$auth_login	o1334	g$refus	o1350	g$id_document	o1623	g$id_document	o1935	g$id_document	o2208	g$refus	o2247	g$refus	o2271	g$file	o2331	g$file	o2381	g$file	o2459	g$file	o2539	g$_GET	o2610	g$_GET	o2641
ecrire/lang/spip_cpf.php3	g$GLOBALS	o80	g$GLOBALS	o89
ecrire/inc_presentation.php3	d_ECRIRE_INC_PRESENTATION	o113	faide	o322	g$couleur_foncee	o348	g$spip_lang	o365	g$spip_lang_rtl	o377	g$spip_display	o393	fbouton_imessage	o972	g$connect_id_auteur	o1104	g$spip_lang_rtl	o1133	g$couche_invisible	o1158	fhr	o2208	fdebut_cadre	o2435	g$browser_name	o2508	g$spip_display	o2532	g$spip_lang_left	o2547	vaccesskey	o2574	ffin_cadre	o4077	fdebut_cadre_relief	o4309	ffin_cadre_relief	o4522	fdebut_cadre_enfonce	o4668	ffin_cadre_enfonce	o4882	fdebut_cadre_sous_rub	o5031	ffin_cadre_sous_rub	o5251	fdebut_cadre_forum	o5406	ffin_cadre_forum	o5622	fdebut_cadre_thread_forum	o5769	ffin_cadre_thread_forum	o5999	fdebut_cadre_gris_clair	o6160	ffin_cadre_gris_clair	o6386	fdebut_cadre_couleur	o6545	ffin_cadre_couleur	o6763	fdebut_cadre_couleur_foncee	o6916	ffin_cadre_couleur_foncee	o7148	fdebut_cadre_trait_couleur	o7313	ffin_cadre_trait_couleur	o7543	fdebut_boite_alerte	o7739	ffin_boite_alerte	o7956	fdebut_boite_info	o8079	ffin_boite_info	o8638	fbandeau_titr!
 e_boite	o8765	g$couleur_foncee	o8849	fbandeau_titre_boite2	o9531	g$spip_lang_left	o9626	g$spip_display	o9643	fdebut_raccourcis	o10429	g$spip_display	o10459	ffin_raccourcis	o10800	g$spip_display	o10828	fafficher_plus	o11006	g$options	o11038	g$spip_lang_right	o11048	g$browser_name	o11066	fafficher_liste	o11485	g$couleur_claire	o11544	g$browser_name	o11570	g$spip_display	o11594	g$spip_lang_left	o11618	fafficher_tranches_requete	o12802	vancre	o12859	g$spip_lang_right	o12879	g$spip_display	o12897	fafficher_liste_debut_tableau	o14918	g$spip_display	o14960	fafficher_liste_fin_tableau	o15092	g$spip_display	o15132	fpuce_statut_article	o15209	g$spip_lang_left	o15262	g$dir_lang	o15279	g$connect_statut	o15290	g$options	o15307	g$browser_name	o15317	fpuce_statut_breve	o18020	g$spip_lang_left	o18069	g$dir_lang	o18086	g$connect_statut	o18097	g$options	o18114	g$browser_name	o18124	fafficher_articles	o20112	g$connect_id_auteur	o20304	g$connect_statut	o20324	g$dir_lang	o20341	g$options	o20361!
 	g$spip_display	o20371	g$spip_lang_left	o20395	g$spip_lang_right	o2041
2	fafficher_breves	o26775	g$connect_id_auteur	o26841	g$spip_lang_right	o26861	g$spip_lang_left	o26879	g$dir_lang	o26896	g$couleur_claire	o26907	g$couleur_foncee	o26924	g$options	o26950	fafficher_rubriques	o30585	g$connect_id_auteur	o30639	g$spip_lang_rtl	o30668	fbonhomme_statut	o32055	g$connect_statut	o32088	fpuce_statut	o33022	fafficher_auteurs	o33299	fafficher_messages	o34693	g$messages_vus	o34846	g$connect_id_auteur	o34870	g$couleur_claire	o34899	g$couleur_foncee	o34916	g$spip_lang_rtl	o34942	g$spip_lang_left	o34958	fafficher_forum	o39097	g$debut	o39176	vcompteur_forum	o39194	vnb_forum	o39220	vi	o39240	g$couleur_foncee	o39252	g$connect_id_auteur	o39278	g$connect_activer_messagerie	o39298	g$mots_cles_forums	o39336	g$spip_lang_rtl	o39364	g$spip_lang_left	o39380	g$spip_lang_right	o39397	g$spip_display	o39415	fafficher_thread_forum	o45671	fbouton	o46178	fdebut_html	o46728	g$couleur_foncee	o46789	g$couleur_claire	o46806	g$couleur_lien	o46823	g$couleur_lien_off	o46838	g$mode	o4!
 6866	g$spip_lang_rtl	o46873	g$spip_display	o46889	g$connect_statut	o46913	g$connect_toutes_rubriques	o46930	fdebut_javascript	o49334	g$spip_lang_left	o49378	g$browser_name	o49404	g$browser_version	o49419	g$browser_rev	o49437	fonglet_relief_inter	o57273	g$spip_display	o57305	fdebut_onglet	o57367	g$spip_display	o57392	ffin_onglet	o57557	g$spip_display	o57580	fonglet	o57655	g$spip_display	o57720	g$spip_lang_left	o57735	fbarre_onglets	o58927	g$id_auteur	o58971	g$connect_id_auteur	o58983	g$connect_statut	o59003	g$statut_auteur	o59020	g$options	o59036	flargeur_icone_bandeau_principal	o62316	g$spip_display	o62367	g$spip_ecran	o62382	g$connect_statut	o62405	g$connect_toutes_rubriques	o62422	ficone_bandeau_principal	o62847	g$spip_display	o63014	g$spip_ecran	o63029	g$couleur_foncee	o63042	g$menu_accesskey	o63069	g$compteur_survol	o63086	ficone_bandeau_secondaire	o64453	g$spip_display	o64557	g$menu_accesskey	o64581	g$compteur_survol	o64598	ficone	o65997	g$spip_display	o66077	g$couleur!
 _claire	o66092	g$couleur_foncee	o66109	g$compteur_survol	o66126	ficone
_horizontale	o67405	g$spip_display	o67507	g$couleur_claire	o67522	g$couleur_foncee	o67539	g$compteur_survol	o67556	fbandeau_barre_verticale	o68479	flien_change_var	o68595	fafficher_menu_rubriques	o68864	g$spip_lang_rtl	o68901	g$spip_ecran	o68917	fdebut_page	o69107	g$couleurs_spip	o69207	g$couleur_foncee	o69232	g$couleur_claire	o69258	g$adresse_site	o69284	g$connect_id_auteur	o69308	g$connect_statut	o69337	g$connect_activer_messagerie	o69363	g$connect_toutes_rubriques	o69401	g$auth_can_disconnect	o69437	g$connect_login	o69459	g$options	o69484	g$spip_display	o69494	g$spip_ecran	o69509	g$spip_lang	o69531	g$spip_lang_rtl	o69543	g$spip_lang_left	o69559	g$spip_lang_right	o69576	fafficher_javascript	o87588	g$recherche	o93211	g$changer_config	o100521	g$activer_messagerie	o100547	g$activer_imessage	o100577	g$connect_activer_messagerie	o100605	g$connect_activer_imessage	o100643	fgros_titre	o101781	g$couleur_foncee	o101823	g$spip_display	o101840	fdebut_grand_cadre	o102255	g$spip_ecran	!
 o102285	ffin_grand_cadre	o102538	fdebut_cadre_formulaire	o102627	ffin_cadre_formulaire	o102711	fdebut_gauche	o102817	g$connect_statut	o102864	g$cookie_admin	o102881	g$options	o102905	g$spip_display	o102915	g$connect_id_auteur	o102939	g$spip_ecran	o102968	g$flag_3_colonnes	o102990	g$flag_centre_large	o103008	g$spip_lang_rtl	o103037	fcreer_colonne_droite	o103772	g$deja_colonne_droite	o103817	g$changer_config	o103848	g$activer_messagerie	o103874	g$activer_imessage	o103904	g$connect_activer_messagerie	o103932	g$connect_activer_imessage	o103970	g$connect_statut	o104006	g$cookie_admin	o104023	g$options	o104047	g$connect_id_auteur	o104066	g$spip_ecran	o104086	g$flag_3_colonnes	o104108	g$flag_centre_large	o104126	g$spip_lang_rtl	o104155	g$lang_left	o104171	fdebut_droite	o104746	g$options	o104784	g$spip_ecran	o104794	g$deja_colonne_droite	o104807	g$spip_display	o104829	g$connect_id_auteur	o104853	g$connect_statut	o104873	g$connect_toutes_rubriques	o104890	g$flag_3_colonnes	o104926	g!
 $flag_centre_large	o104944	g$couleur_foncee	o104964	g$couleur_claire	o
104981	g$lang_left	o105007	ffin_html	o107978	ffin_page	o108417	g$spip_version_affichee	o108450	g$spip_display	o108474	g$connect_id_auteur	o108498	g$multi_popup	o108527	fafficher_hierarchie	o109278	g$couleur_foncee	o109336	g$spip_lang_left	o109353	g$lang_dir	o109370	finstall_debut_html	o110743	g$spip_lang_rtl	o110790	finstall_fin_html	o112190	fvoir_en_ligne	o112354	g$connect_statut	o112431	fhttp_img_pack	o113791	vnum	o113836	fhttp_style_background	o113995	fhttp_href_img	o114162
ecrire/upgrade.php3	g$spip_lang	o361	g$langue_site	o384	g$spip_lang	o404	g$spip_lang	o416	g$reinstall	o488	g$link	o710	g$link	o768	g$upgrade_titre	o952	g$commentaire	o1033	g$spip_version	o1171	g$commentaire	o1229	g$spip_version	o1312	g$upgrade_titre	o1428	g$commentaire	o1444	g$ok	o1509	g$ok	o1532	g$upgrade_titre	o1586	g$ok	o1608	g$hash	o1616	g$spip_version	o1909
ecrire/inc_session.php3	d_ECRIRE_INC_SESSION	o102	g$GLOBALS	o289	fhash_env	o382	g$HTTP_SERVER_VARS	o403	ffichier_session	o564	fajouter_session	o819	fverifier_session	o1454	fsupprimer_session	o2453	fcreer_cookie_session	o2876	fcreer_uniqid	o3156	vseeded	o3182	fzap_sessions	o3598	fverifier_php_auth	o4328	g$PHP_AUTH_USER	o4358	g$PHP_AUTH_PW	o4374	g$ignore_auth_http	o4388	fask_php_auth	o5220	fverifier_visiteur	o5776
ecrire/inc_lang.php3	d_ECRIRE_INC_LANG	o97	fecrire_cache_lang	o173	fecrire_caches_langues	o1005	g$cache_lang_modifs	o1039	fcharger_langue	o1280	fchanger_langue	o2811	g$all_langs	o2843	g$spip_lang_rtl	o2855	g$spip_lang_right	o2871	g$spip_lang_left	o2889	g$spip_lang_dir	o2906	g$spip_dir_lang	o2922	fregler_langue_navigateur	o3465	g$HTTP_SERVER_VARS	o3502	g$HTTP_COOKIE_VARS	o3521	ftraduire_chaine	o3929	g$spip_lang	o3969	g$cache_lang	o3989	ftraduire_nom_langue	o5130	finit_codes_langues	o5311	flang_dir	o10206	flang_typo	o10364	fchanger_typo	o10638	g$lang_typo	o10687	g$lang_dir	o10699	g$dir_lang	o10710	flang_select	o11113	g$pile_langues	o11146	g$spip_lang	o11161	flang_dselect	o11283	g$pile_langues	o11317	fmenu_langues	o11597	g$couleur_foncee	o11687	g$couleur_claire	o11704	g$connect_id_auteur	o11721	fliste_options_langues	o13440	fverifier_lang_url	o14404	g$HTTP_GET_VARS	o14434	g$HTTP_COOKIE_VARS	o14450	g$spip_lang	o14469	g$clean_link	o14481	futiliser_langue_site	o15625	futiliser_lan!
 gue_visiteur	o15704	g$HTTP_COOKIE_VARS	o15741	finit_langues	o16130	g$all_langs	o16155	g$langue_site	o16167	g$cache_lang	o16181	g$cache_lang_modifs	o16194	g$pile_langues	o16222	g$lang_typo	o16237	g$lang_dir	o16249
inc-urls-standard.php3	d_INC_URLS2	o76	fgenerer_url_article	o106	fgenerer_url_rubrique	o200	fgenerer_url_breve	o299	fgenerer_url_mot	o383	fgenerer_url_auteur	o457	fgenerer_url_document	o546	frecuperer_parametres_url	o896	g$contexte	o944	fracine_forum	o1074	fgenerer_url_forum	o1664
sommaire.php3	g$fond	o6	g$delais	o26
inc-login_prive.php3	g$balise_LOGIN_PRIVE_collecte	o55	g$balise_LOGIN_PRIVE_collecte	o85	fbalise_LOGIN_PRIVE_stat	o308	fbalise_LOGIN_PRIVE_dyn	o427
ecrire/config-contenu.php3	g$connect_statut	o71	g$connect_toutes_rubriques	o106	g$changer_config	o210	fmySel	o293	g$forums_publics	o972	g$forums_publics	o1194	g$block	o1220	g$block	o1255	g$forums_publics	o1362	g$forums_publics	o1712	g$block	o1745	g$block	o1780	g$forums_publics	o1900	g$forums_publics	o2013	g$block	o2042	g$block	o2077	g$forums_publics	o2189	g$forums_publics	o2323	g$block	o2349	g$block	o2385	g$forums_publics	o2504	g$options	o2721	g$options	o4172	g$accepter_inscriptions	o4296	g$accepter_inscriptions	o4738	g$accepter_inscriptions	o5067	g$accepter_visiteurs	o5104	g$forums_publics	o5508	g$accepter_visiteurs	o5850	g$prevenir_auteurs	o6557	g$prevenir_auteurs	o7270	g$suivi_edito	o7503	g$adresse_suivi	o7543	g$adresse_suivi_inscription	o7587	g$suivi_edito	o8220	g$suivi_edito	o8318	g$style	o8341	g$style	o8377	g$adresse_suivi	o8640	g$adresse_suivi	o8656	g$adresse_suivi	o8753	g$suivi_edito	o9052	g$quoi_de_neuf	o9230	g$adresse_neuf	o9272	g$jours_neuf	o9314	g$envoi_now	o9357!
 	g$jours_neuf	o9411	g$quoi_de_neuf	o9944	g$quoi_de_neuf	o10239	g$style	o10263	g$style	o10299	g$quoi_de_neuf	o10914	g$options	o11250	g$email_envoi	o11278	g$options	o12114
ecrire/inc_logos.php3	d_ECRIRE_INC_LOGOS	o101	fcherche_image_nommee	o139	fdecrire_logo	o669	g$connect_id_auteur	o701	fresize_logo	o1606	fafficher_boite_logo	o2095	g$options	o2162	g$spip_display	o2172	fafficher_logo	o2601	g$id_article	o2649	g$id_rubrique	o2662	g$id_breve	o2676	g$id_auteur	o2687	g$id_mot	o2699	g$id_syndic	o2708	g$connect_id_auteur	o2720	g$couleur_foncee	o2748	g$couleur_claire	o2765	g$clean_link	o2790	fimage_ratio	o5831	fcreer_vignette	o6321	g$convert_command	o6438	g$djpeg_command	o6456	g$cjpeg_command	o6472	g$pnmscale_command	o6488	finserer_vignette_base	o12138	freduire_image_logo	o13297
ecrire/inc_cron.php3	d_ECRIRE_INC_CRON	o97	fspip_cron	o1920	g$frequence_taches	o1958	ftaches_generales	o3131	g$frequence_taches	o4277	g$frequence_taches	o4296	fcron_rubriques	o4665	fcron_index	o4732	fcron_sites	o4804	fcron_statistiques	o5132	fcron_popularites	o5342	fcron_visites	o5509	fcron_mail	o5747	fcron_invalideur	o6912	g$quota_cache	o7373
auteur.php3	g$fond	o6	g$delais	o24
ecrire/articles_edit.php3	g$articles_surtitre	o104	g$articles_soustitre	o157	g$articles_descriptif	o212	g$articles_urlref	o269	g$articles_chapeau	o318	g$articles_ps	o369	g$articles_redac	o410	g$articles_mots	o457	g$articles_modif	o502	g$id_article	o562	g$id_article	o583	g$id_rubrique	o597	g$id_rubrique	o619	g$lier_trad	o634	g$lier_trad	o654	g$flag_editable	o674	g$id_article	o734	g$id_article_bloque	o870	g$id_article	o891	g$query	o978	g$result	o1048	g$query	o1069	g$row	o1084	g$result	o1108	g$id_article	o1122	g$row	o1136	g$surtitre	o1158	g$row	o1170	g$titre	o1190	g$row	o1199	g$soustitre	o1216	g$row	o1229	g$id_rubrique	o1250	g$row	o1265	g$id_secteur	o1288	g$row	o1302	g$descriptif	o1324	g$row	o1338	g$nom_site	o1360	g$row	o1372	g$url_site	o1392	g$row	o1404	g$chapo	o1424	g$row	o1433	g$texte	o1450	g$row	o1459	g$ps	o1476	g$row	o1482	g$date	o1496	g$row	o1504	g$statut	o1520	g$row	o1530	g$date_redac	o1548	g$row	o1562	g$date_redac	o1632	g$regs	o1644	g$mois_redac	o1663	g$regs	o1677	g$jou!
 r_redac	o1697	g$regs	o1711	g$annee_redac	o1731	g$regs	o1746	g$annee_redac	o1770	g$annee_redac	o1791	g$extra	o1819	g$row	o1826	g$query	o1844	g$result_auteur	o1956	g$query	o1984	g$flag_auteur	o1995	g$result_auteur	o2025	g$flag_editable	o2050	g$id_rubrique	o2083	g$flag_auteur	o2101	g$statut	o2123	g$statut	o2145	g$new	o2166	g$new	o2198	g$lier_trad	o2218	g$changer_lang	o2272	g$query	o2339	g$result	o2409	g$query	o2430	g$row	o2447	g$result	o2471	g$surtitre	o2486	g$row	o2498	g$titre	o2519	g$row	o2580	g$soustitre	o2598	g$row	o2611	g$id_rubrique_trad	o2633	g$row	o2653	g$descriptif	o2677	g$row	o2691	g$nom_site	o2714	g$row	o2726	g$url_site	o2747	g$row	o2759	g$chapo	o2780	g$row	o2789	g$texte	o2807	g$row	o2816	g$ps	o2834	g$row	o2840	g$date	o2855	g$row	o2863	g$date_redac	o2880	g$row	o2894	g$date_redac	o2961	g$regs	o2973	g$mois_redac	o2987	g$regs	o3001	g$jour_redac	o3015	g$regs	o3029	g$annee_redac	o3043	g$regs	o3058	g$annee_redac	o3076	g$annee_redac	o3097	g$extra	o3127	g$row	o3136	g$langue!
 s_autorisees	o3157	g$changer_lang	o3478	g$spip_lang	o3494	g$id_parent	
o3686	g$query	o3718	g$row_rub	o3803	g$query	o3842	g$id_parent	o3857	g$row_rub	o3870	g$query	o3903	g$row_rub	o4011	g$query	o4050	g$id_rubrique	o4067	g$id_secteur	o4082	g$row_rub	o4096	g$changer_lang	o4126	g$titre	o4218	g$onfocus	o4273	g$id_secteur	o4355	g$row_rub	o4372	g$id_secteur	o4487	g$row_rub	o4501	g$flag_editable	o4529	g$flag_editable	o4560	g$id_article	o4634	g$id_document	o4649	g$query_doc	o4666	g$result_doc	o4779	g$query_doc	o4804	g$flag_document_editable	o4818	g$result_doc	o4859	g$flag_document_editable	o4888	g$modif_document	o4924	g$GLOBALS	o4942	g$modif_document	o4974	g$flag_document_editable	o5003	g$titre_document	o5031	g$titre_document	o5080	g$descriptif_document	o5100	g$descriptif_document	o5154	g$query	o5179	g$largeur_document	o5281	g$hauteur_document	o5303	g$query	o5322	g$query	o5395	g$query	o5452	fcoupe_trop_long	o5539	g$titre	o6230	g$id_rubrique	o6332	g$new	o6441	g$id_article	o6485	g$flag_editable	o6509	g$id_article	o6709	g$id_article	o6835	fmySel	o6937	fmy_!
 sel	o7084	fafficher_mois	o7237	fafficher_jour	o7742	fenfant	o7874	g$id_parent	o7901	g$id_rubrique	o7921	vi	o7944	g$statut	o7973	g$connect_toutes_rubriques	o7990	g$couleur_claire	o8025	g$spip_lang_left	o8042	g$browser_name	o8067	g$browser_version	o8082	g$lier_trad	o10655	g$titre	o11021	g$titre	o11091	g$titre	o11113	g$soustitre	o11123	g$soustitre	o11149	g$surtitre	o11163	g$surtitre	o11188	g$descriptif	o11202	g$descriptif	o11229	g$nom_site	o11244	g$nom_site	o11269	g$url_site	o11282	g$url_site	o11307	g$chapo	o11320	g$chapo	o11342	g$texte	o11352	g$texte	o11374	g$ps	o11384	g$ps	o11403	g$lien	o11411	g$id_article	o11441	g$lien	o11454	g$id_article	o11561	g$new	o11654	g$lier_trad	o11730	g$options	o11893	g$articles_surtitre	o11920	g$surtitre	o11952	g$articles_soustitre	o12427	g$soustitre	o12460	g$id_rubrique	o12766	g$logo_parent	o12785	g$query	o12832	g$result	o12916	g$query	o12935	g$row	o12952	g$result	o12974	g$parent_parent	o12988	g$row	o13003	g$parent_parent	o13032	g$logo_parent	o13!
 053	g$logo_parent	o13093	g$new	o13489	g$options	o13588	g$articles_desc
riptif	o13615	g$descriptif	o13649	g$descriptif	o13882	g$options	o14015	g$articles_urlref	o14042	g$nom_site	o14072	g$url_site	o14085	g$chapo	o14406	g$virtuel	o14432	g$chapo	o14450	g$chapo	o14464	g$connect_statut	o14486	g$virtuel	o14519	g$virtuel	o15015	g$virtuel	o15025	g$articles_chapeau	o15438	g$chapo	o15469	g$spip_ecran	o15486	g$rows	o15510	g$rows	o15529	g$chapo	o15752	g$spip_ecran	o15878	g$rows	o15902	g$rows	o15920	g$texte	o15945	g$textes_supplement	o16008	g$texte	o16105	g$nombre_textes	o16129	g$texte1	o16156	g$texte	o16164	g$texte	o16190	g$textes_supplement	o16203	g$textes_supplement	o16236	g$nombre_textes	o16301	g$textes_supplement	o16321	g$GLOBALS	o16405	g$texte1	o16474	g$textes_supplement	o16653	g$GLOBALS	o16788	g$texte	o16872	g$articles_ps	o16910	g$options	o16936	g$ps	o16963	g$ps	o17104	g$champs_extra	o17212	g$extra	o17280	g$id_secteur	o17300	g$date	o17323	g$new	o17409
ecrire/export.php3	fliste_objets	o306	g$maj	o345	g$articles	o359	fliste_rubriques	o827	g$maj	o862	g$rubriques	o876	g$id_rubrique	o1569	g$query	o1584	g$query	o1662	g$query	o1747	g$rubriques	o1762	g$rubriques	o1777	g$rubriques	o1800	g$query	o1815	g$query	o1936	g$query	o1959	g$query	o2076	g$articles	o2101	g$articles	o2116	g$articles	o2138	g$query	o2153	g$query	o2358
ecrire/brouteur.php3	g$spip_ecran	o35	g$largeur_table	o63	g$hauteur_table	o87	g$nb_col	o111	g$largeur_table	o136	g$hauteur_table	o160	g$nb_col	o184	g$largeur_col	o201	g$largeur_table	o222	g$nb_col	o237	g$id_rubrique	o462	g$j	o480	g$nb_col	o485	g$id_rubrique	o503	g$query	o526	g$result	o616	g$query	o635	g$row	o653	g$result	o675	g$j	o690	g$j	o695	g$ze_rubrique	o705	g$row	o720	g$titre	o745	g$row	o759	g$id_rubrique	o779	g$row	o793	g$dest	o821	g$j	o827	g$ze_rubrique	o833	g$dest	o861	g$j	o867	g$dest	o891	g$i	o911	g$i	o919	g$nb_col	o924	g$i	o933	g$dest	o945	g$i	o951	g$dest	o957	g$i	o963	g$dest	o989	g$parent	o1006	g$dest	o1016	g$nb_col	o1022	g$la_rubrique	o1244	g$dest	o1259	g$query	o1276	g$result	o1353	g$query	o1374	g$row	o1393	g$result	o1417	g$la_rubrique	o1433	g$row	o1447	g$la_rubrique	o1485	g$query	o1509	g$result	o1587	g$query	o1608	g$row	o1628	g$result	o1652	g$compteur	o1669	g$compteur	o1681	g$ze_rubrique	o1701	g$row	o1716	g$titre	o1742	g$row	o1756	g$la_rubrique	o1777	g$row	o1791!
 	g$lien	o1815	g$dest	o1823	g$nb_col	o1829	g$compteur	o1837	g$la_rubrique	o1860	g$icone	o1879	g$icone	o1916	g$ret	o1949	g$icone	o1995	g$lien	o2242	g$dest	o2250	g$nb_col	o2256	g$compteur	o2264	g$ret	o2281	g$ret	o2598	g$id_rubrique	o2668	g$dest	o2688	g$i	o2769	g$i	o2775	g$nb_col	o2780	g$i	o2789	g$dest	o2947	g$i	o2953

--- NEW FILE: site.php3 ---
&lt;?php
$fond = &quot;site&quot;;
$delais = 24 * 3600;


include (&quot;inc-public.php3&quot;);


?&gt;

--- NEW FILE: backend-dist.html ---
&lt;?php echo '&lt;'.'?xml version=&quot;1.0&quot; encoding=&quot;#CHARSET&quot;?'.&quot;&gt;\n&quot;; ?&gt;
&lt;rss version=&quot;0.91&quot; xmlns:dc=&quot;<A HREF="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</A>&quot;&gt;

&lt;channel&gt;
	&lt;title&gt;[(#NOM_SITE_SPIP|texte_backend)]&lt;/title&gt;
	&lt;link&gt;#URL_SITE_SPIP/&lt;/link&gt;
	&lt;description&gt;&lt;/description&gt;
	&lt;language&gt;#LANG&lt;/language&gt;

	&lt;image&gt;
		&lt;title&gt;[(#NOM_SITE_SPIP|texte_backend)]&lt;/title&gt;
		&lt;url&gt;#URL_SITE_SPIP[/(#LOGO_SITE_SPIP||extraire_attribut{src})]&lt;/url&gt;
		&lt;link&gt;#URL_SITE_SPIP/&lt;/link&gt;
		&lt;description&gt;&lt;/description&gt;
	&lt;/image&gt;

	&lt;BOUCLE_10recents(ARTICLES){lang ?}{branche ?}{par date}{inverse}{0,10}{unique}&gt;
		&lt;item&gt;
		&lt;title&gt;[(#TITRE|texte_backend)]&lt;/title&gt;
		&lt;link&gt;#URL_SITE_SPIP/#URL_ARTICLE&lt;/link&gt;
		&lt;date&gt;#DATE&lt;/date&gt;
		&lt;description&gt;[&lt;img src=&quot;#URL_SITE_SPIP/(#LOGO_ARTICLE||extraire_attribut{src})&quot; align=&quot;left&quot; hspace=&quot;4&quot; vspace=&quot;4&quot;&gt; ][(#INTRODUCTION|texte_backend)]&lt;/description&gt;
		&lt;author&gt;&lt;BOUCLE_auteurs(AUTEURS){id_article}{&quot;, &quot;}&gt;[(#NOM|texte_backend)]&lt;/BOUCLE_auteurs&gt;&lt;/author&gt;
		&lt;dc:date&gt;[(#DATE|date_iso)]&lt;/dc:date&gt;
		&lt;dc:format&gt;text/html&lt;/dc:format&gt;
		&lt;dc:language&gt;#LANG&lt;/dc:language&gt;
		&lt;dc:creator&gt;&lt;BOUCLE_auteursb(AUTEURS){id_article}{&quot;, &quot;}&gt;[(#NOM|texte_backend)]&lt;/BOUCLE_auteursb&gt;&lt;/dc:creator&gt;
		&lt;/item&gt;
	&lt;/BOUCLE_10recents&gt;
	&lt;BOUCLE_tres_recents(ARTICLES){lang ?}{branche ?}{par date}{inverse}{age&lt;3}{unique}&gt;
		&lt;item&gt;
		&lt;title&gt;[(#TITRE|texte_backend)]&lt;/title&gt;
		&lt;link&gt;#URL_SITE_SPIP/#URL_ARTICLE&lt;/link&gt;
		&lt;date&gt;#DATE&lt;/date&gt;
		&lt;description&gt;[&lt;img src=&quot;#URL_SITE_SPIP/(#LOGO_ARTICLE||extraire_attribut{src})&quot; align=&quot;left&quot; hspace=&quot;4&quot; vspace=&quot;4&quot;&gt; ][(#INTRODUCTION|texte_backend)]&lt;/description&gt;
		&lt;author&gt;&lt;BOUCLE_auteurs_t(AUTEURS){id_article}{&quot;,&quot;}&gt;[(#NOM|texte_backend)]&lt;/BOUCLE_auteurs_t&gt;&lt;/author&gt;
		&lt;dc:date&gt;[(#DATE|date_iso)]&lt;/dc:date&gt;
		&lt;dc:format&gt;text/html&lt;/dc:format&gt;
		&lt;dc:language&gt;#LANG&lt;/dc:language&gt;
		&lt;dc:creator&gt;&lt;BOUCLE_auteurs_tb(AUTEURS){id_article}{&quot;, &quot;}&gt;[(#NOM|texte_backend)]&lt;/BOUCLE_auteurs_tb&gt;&lt;/dc:creator&gt;
		&lt;/item&gt;
	&lt;/BOUCLE_tres_recents&gt;

&lt;/channel&gt;

&lt;/rss&gt;

--- NEW FILE: spip_cookie.php3 ---
&lt;?php

include (&quot;ecrire/inc_version.php3&quot;);
include_ecrire (&quot;inc_session.php3&quot;);

// gerer l'auth http
function auth_http($url, $essai_auth_http) {
	if ($essai_auth_http == 'oui') {
		if (!verifier_php_auth()) {
		  $url = quote_amp(urlencode($url));
		  ask_php_auth(_T('login_connexion_refusee'),_T('login_login_pass_incorrect'),_T('login_retour_site'), &quot;url=$url&quot;,_T('login_nouvelle_tentative'), (ereg(_DIR_RESTREINT_ABS, $url)));
		  exit;
		}
		else
			redirige_par_entete($url);
	}
	// si demande logout auth_http
	else if ($essai_auth_http == 'logout') {
		ask_php_auth(_T('login_deconnexion_ok'),_T('login_verifiez_navigateur'),_T('login_retour_public'),&quot;redirect=ecrire&quot;,_T('login_test_navigateur'), true);
		exit;
	}
}

// rejoue le cookie pour renouveler spip_session
if ($change_session == 'oui') {
	if (verifier_session($spip_session)) {
		// Attention : seul celui qui a le bon IP a le droit de rejouer,
		// ainsi un eventuel voleur de cookie ne pourrait pas deconnecter
		// sa victime, mais se ferait deconnecter par elle.
		if ($auteur_session['hash_env'] == hash_env()) {
			$auteur_session['ip_change'] = false;
			$cookie = creer_cookie_session($auteur_session);
			supprimer_session($spip_session);
			spip_setcookie('spip_session', $cookie);
		}
		@header('Content-Type: image/gif');
		@header('Expires: 0');
		@header(&quot;Cache-Control: no-store, no-cache, must-revalidate&quot;);
		@header('Pragma: no-cache');
		@header(&quot;Last-Modified: &quot; . gmdate(&quot;D, d M Y H:i:s&quot;) . &quot; GMT&quot;);
		@readfile(_DIR_IMG_PACK . 'rien.gif');
		exit;
	}
}
#spip_log(&quot;cookie: $url&quot;);

if ($url)  $url = urldecode($url);

// tentative de connexion en auth_http
if ($essai_auth_http AND !$ignore_auth_http) {
	auth_http(($url ? $url : _DIR_RESTREINT_ABS), $essai_auth_http);
	exit;
}

// cas particulier, logout dans l'espace public
if ($logout_public) {
	$logout = $logout_public;
	if (!$url)
		$url = 'index.php3';
}
// tentative de logout
if ($logout) {
	verifier_visiteur();
	if ($auteur_session['login'] == $logout) {
		spip_query(&quot;UPDATE spip_auteurs SET en_ligne = DATE_SUB(NOW(),INTERVAL 6 MINUTE) WHERE id_auteur = &quot;.$auteur_session['id_auteur']);
		if ($spip_session) {
			zap_sessions($auteur_session['id_auteur'], true);
			spip_setcookie('spip_session', $spip_session, time() - 3600 * 24);
		}
		if ($PHP_AUTH_USER AND !$ignore_auth_http) {
			auth_http(($url ? $url : _DIR_RESTREINT_ABS), 'logout');
		}
		unset ($auteur_session);
	}

	redirige_par_entete($url ? $url : &quot;spip_login.php3&quot;);
}

// en cas de login sur bonjour=oui, on tente de poser un cookie
// puis de passer a spip_login qui diagnostiquera l'echec de cookie
// le cas echeant.
if ($test_echec_cookie == 'oui') {
	spip_setcookie('spip_session', 'test_echec_cookie');
	redirige_par_entete(&quot;spip_login.php3?var_echec_cookie=oui&amp;url=&quot; .
			    ($url ? $url : _DIR_RESTREINT_ABS));
}

// Tentative de login
unset ($cookie_session);
$redirect = ($url ? $url : _DIR_RESTREINT_ABS);
if ($essai_login == &quot;oui&quot;) {
	// Recuperer le login en champ hidden
	if ($session_login_hidden AND !$session_login)
		$session_login = $session_login_hidden;

	$login = $session_login;
	$pass = $session_password;

	// Essayer differentes methodes d'authentification
	$auths = array('spip');
	include_local(_FILE_CONNECT); // pour savoir si ldap est present 
	if ($ldap_present) $auths[] = 'ldap';
	$ok = false;
	reset($auths);
	while (list(, $nom_auth) = each($auths)) {
		include_ecrire(&quot;inc_auth_&quot;.$nom_auth.&quot;.php3&quot;);
		$classe_auth = &quot;Auth_&quot;.$nom_auth;
		$auth = new $classe_auth;
		if ($auth-&gt;init()) {
			// Essayer les mots de passe md5
			$ok = $auth-&gt;verifier_challenge_md5($login, $session_password_md5, $next_session_password_md5);
			// Sinon essayer avec le mot de passe en clair
			if (!$ok &amp;&amp; $session_password) $ok = $auth-&gt;verifier($login, $session_password);
			if ($ok)  { $auth-&gt;lire(); break; }
		}
	}

	if ($ok) {
		$auth-&gt;activer();

		if ($auth-&gt;login AND $auth-&gt;statut == '0minirezo') // force le cookie pour les admins
			$cookie_admin = &quot;@&quot;.$auth-&gt;login;

		$query = &quot;SELECT * FROM spip_auteurs WHERE login='&quot;.addslashes($auth-&gt;login).&quot;'&quot;;
		$result = spip_query($query);
		if ($row_auteur = spip_fetch_array($result))
			$cookie_session = creer_cookie_session($row_auteur);

		if (ereg(_DIR_RESTREINT_ABS, $redirect)) {
		      $redirect .= (strpos($redirect, &quot;?&quot;) ? &quot;&amp;&quot; : &quot;?&quot;) . 'bonjour=oui';
		}
	}
	else {
		if (ereg(_DIR_RESTREINT_ABS, $redirect)) {
			$redirect = &quot;spip_login.php3&quot;;
		}
		$redirect .= (strpos($redirect, &quot;?&quot;) ? &quot;&amp;&quot; : &quot;?&quot;) . &quot;var_login=$login&quot;;
		if ($session_password || $session_password_md5)
			$redirect .= '&amp;var_erreur=pass';
		$redirect .= '&amp;url=' . urlencode($url);
	}
 }

// cookie d'admin ?
if ($cookie_admin == &quot;non&quot;) {
	spip_setcookie('spip_admin', $spip_admin, time() - 3600 * 24);
	$redirect = ereg_replace(&quot;[?&amp;]var_login=[^&amp;]*&quot;, '', $redirect);
	$redirect .= (strpos($redirect, &quot;?&quot;) ? &quot;&amp;&quot; : &quot;?&quot;) . &quot;var_login=-1&quot;;
}
else if ($cookie_admin AND $spip_admin != $cookie_admin) {
	spip_setcookie('spip_admin', $cookie_admin, time() + 3600 * 24 * 14);
}

// cookie de session ?
if ($cookie_session) {
	if ($session_remember == 'oui')
		spip_setcookie('spip_session', $cookie_session, time() + 3600 * 24 * 14);
	else
		spip_setcookie('spip_session', $cookie_session);

	$prefs = ($row_auteur['prefs']) ? unserialize($row_auteur['prefs']) : array();
	$prefs['cnx'] = ($session_remember == 'oui') ? 'perma' : '';
	spip_query (&quot;UPDATE spip_auteurs SET prefs = '&quot;.addslashes(serialize($prefs)).&quot;' WHERE id_auteur = &quot;.$row_auteur['id_auteur']);

}

// changement de langue espace public
if ($var_lang) {
	include_ecrire('inc_lang.php3');

	if (changer_langue($var_lang)) {
		spip_setcookie('spip_lang', $var_lang, time() + 365 * 24 * 3600);
		$redirect = ereg_replace(&quot;[?&amp;]lang=[^&amp;]*&quot;, '', $redirect);
		$redirect .= (strpos($redirect, &quot;?&quot;) ? &quot;&amp;&quot; : &quot;?&quot;) . &quot;lang=$var_lang&quot;;
	}
}

// changer de langue espace prive (ou login)
if ($var_lang_ecrire) {
	include_ecrire('inc_lang.php3');
	verifier_visiteur();

	if (changer_langue($var_lang_ecrire)) {
		spip_setcookie('spip_lang_ecrire', $var_lang_ecrire, time() + 365 * 24 * 3600);
		spip_setcookie('spip_lang', $var_lang_ecrire, time() + 365 * 24 * 3600);

		if (_FILE_CONNECT) {
			include_ecrire('inc_admin.php3');
			if (verifier_action_auteur('var_lang_ecrire', $valeur, $id_auteur)) {
				spip_query (&quot;UPDATE spip_auteurs SET lang = '&quot;.addslashes($var_lang_ecrire).&quot;' WHERE id_auteur = &quot;.$id_auteur);
				$auteur_session['lang'] = $var_lang_ecrire;
				ajouter_session($auteur_session, $spip_session);	// enregistrer dans le fichier de session
			}
		}

		$redirect = ereg_replace(&quot;[?&amp;]lang=[^&amp;]*&quot;, '', $redirect);
		$redirect .= (strpos($redirect, &quot;?&quot;) ? &quot;&amp;&quot; : &quot;?&quot;) . &quot;lang=$var_lang_ecrire&quot;;
	}
}

// Redirection
// Sous Apache, les cookies avec une redirection fonctionnent
// Sinon, on fait un refresh HTTP

if (ereg(&quot;^Apache&quot;, $SERVER_SOFTWARE)) {
	redirige_par_entete($redirect);
}
else {
	@header(&quot;Refresh: 0; url=&quot; . $redirect);
	echo &quot;&lt;html&gt;&lt;head&gt;&quot;;
	echo &quot;&lt;meta http-equiv='Refresh' content='0; url=&quot;.$redirect.&quot;'&gt;&quot;;
	echo &quot;&lt;/head&gt;\n&quot;;
	echo &quot;&lt;body&gt;&lt;a href='&quot;.$redirect.&quot;'&gt;&quot;._T('navigateur_pas_redirige').&quot;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;&quot;;
}

?&gt;

--- NEW FILE: spip_image_reduite.php3 ---
&lt;?php

$img = $_GET['img'];
$logo = $img;
include (&quot;ecrire/inc_version.php3&quot;);
include_ecrire(&quot;inc_admin.php3&quot;);
include_ecrire(&quot;inc_logos.php3&quot;);

if (!$taille_y)
	$taille_y = $taille_x;
	
if (eregi(&quot;(.*)\.(jpg|gif|png)$&quot;, $logo, $regs)) {
	if ($i = cherche_image_nommee($regs[1], array($regs[2]))
	    AND verifier_action_auteur(&quot;reduire $taille_x $taille_y&quot;, $hash, $hash_id_auteur))
	{
		list($dir,$nom,$format) = $i;
		$logo = $dir . $nom . '.' . $format;
		
		include_ecrire(&quot;inc_logos.php3&quot;);
		$suffixe = '-'.$taille_x.'x'.$taille_y;
		$preview = creer_vignette($logo, $taille_x, $taille_y, $format,('cache'.$suffixe), $nom.$suffixe);
		if ($preview) {
			$vignette = $preview['fichier'];
			$width = $preview['width'];
			$height = $preview['height'];
			//echo &quot;&lt;img src='$vignette' name='$name' border='0' align='$align' alt='' hspace='$espace' vspace='$espace' width='$width' height='$height' class='spip_logos' /&gt;&quot;;
			$retour = $vignette;
		}
		else if ($taille_origine = @getimagesize($logo)) {
			//list ($destWidth,$destHeight) = image_ratio($taille_origine[0], $taille_origine[1], $taille_x, $taille_y);
			$retour = $logo;
		}	

	// Afficher l'image resultante, meme grande...
//	header(&quot;Content-type: image/$format&quot;);
//	echo implode ('', file ($retour));

	redirige_par_entete($retour);
	}
 }

?&gt;
--- NEW FILE: inc-menu_lang_ecrire.php3 ---
&lt;?php

global $balise_MENU_LANG_ECRIRE_collecte;
$balise_MENU_LANG_ECRIRE_collecte = array('menu_lang');

// s'il n'y a qu'une langue proposee eviter definitivement la balise ?php 

function balise_MENU_LANG_ECRIRE_stat ($args, $filtres)
{
  if (!strpos(lire_meta('langues_proposees'),',')) return '';
  return $args;
}

// normalement $opt sera toujours non vide suite au test ci-dessus

function balise_MENU_LANG_ECRIRE_dyn($default)
{
  include_ecrire(&quot;inc_lang.php3&quot;);
  $opt = liste_options_langues('var_lang_ecrire', $default);
  return (!$opt ? '' : menu_lang_pour_tous('var_lang_ecrire', $opt));
}

function menu_lang_pour_tous($nom, $opt)
{
  $site = lire_meta(&quot;adresse_site&quot;);
  $post = ($site ? $site : '..') . &quot;/spip_cookie.php3&quot;;
  $cible = $GLOBALS['clean_link']-&gt;getUrl();
  $postcomplet = new Link($post);
  $postcomplet-&gt;addvar('url', $cible);

  return array('formulaire_menu_lang',
	       10, 
	       array('nom' =&gt; $nom,
		     'url' =&gt; $post,
		     'cible' =&gt; $cible,
		     'retour' =&gt; $postcomplet-&gt;getUrl(),
		     'langues' =&gt; $opt));
}
?&gt;

--- NEW FILE: formulaire_ecrire_auteur-dist.html ---
[&lt;br /&gt;&lt;img src='puce(#HTTP_VARS{sujetko}).gif' border='0' alt='-' /&gt; &lt;:form_prop_indiquer_sujet:&gt;&lt;br /&gt;&nbsp;][
&lt;br /&gt;&lt;img src='puce(#HTTP_VARS{mailko}).gif' border='0' alt='-' /&gt; &lt;:form_prop_indiquer_email:&gt;&lt;br /&gt;&lt;br /&gt;
]&lt;form action=&quot;[(#HTTP_VARS{action})]&quot; method='post'&gt;
&lt;p&gt;&lt;label&gt;&lt;:form_pet_votre_email:&gt;
	&lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;email_message_auteur&quot;
		 value=&quot;[(#HTTP_VARS{mail})]&quot; size=&quot;30&quot; /&gt;
&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label&gt;&lt;:form_prop_sujet:&gt;&lt;br /&gt;
	&lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;sujet_message_auteur&quot;
		 value=&quot;[(#HTTP_VARS{sujet})]&quot; size=&quot;30&quot; /&gt;
&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;
&lt;textarea name='texte_message_auteur' rows='10' class='forml' cols='40'&gt;[(#HTTP_VARS{texte})]&lt;/textarea&gt;
&lt;/p&gt;
[&lt;input type=&quot;hidden&quot; name=&quot;id_auteur&quot; value=&quot;(#HTTP_VARS{id_auteur})&quot; /&gt;]
&lt;div align=&quot;right&quot;&gt;
	&lt;input type=&quot;submit&quot;  class=&quot;spip_bouton&quot; name=&quot;valide&quot;
		 value=&quot;[(#HTTP_VARS{valide})]&quot; /&gt;
&lt;/div&gt;
&lt;/form&gt;

--- NEW FILE: inc-chercher.php3 ---
&lt;?php

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_CHERCHE&quot;)) return;
define(&quot;_INC_CHERCHE&quot;, &quot;1&quot;);

// Ce fichier doit imperativement contenir la fonction chercher-squelette
// (cf commentaires dans inc-calcul)

function chercher_squelette($fond, $id_rubrique, $dossier, $lang) {
	$ext = $GLOBALS['extension_squelette'];

	$d =&quot;$dossier$fond&quot;;

	// On selectionne, dans l'ordre :
	// fond=10
	
	$f = &quot;$d=$id_rubrique&quot;;
	if (($id_rubrique &gt; 0) AND (@file_exists(&quot;$f.$ext&quot;)))
		$squelette = $f;

	// fond-10 fond-&lt;rubriques parentes&gt;
	if (!$squelette)
		while ($id_rubrique &gt; 0) {
			if (@file_exists(&quot;$d-$id_rubrique.$ext&quot;)) {
				$squelette = &quot;$d-$id_rubrique&quot;;
				break;
			}
			else
				$id_rubrique = sql_parent($id_rubrique);
		}

	if (!$squelette) {
		// fond
		if (@file_exists(&quot;$d.$ext&quot;))
			$squelette = $d;
		// fond, a la racine
		else if (@file_exists(&quot;$fond.$ext&quot;))
			$squelette = $fond;
		else if (@file_exists(&quot;$fond-dist.$ext&quot;))
			$squelette = &quot;$fond-dist&quot;;
		else {
			// erreur webmaster : $fond ne correspond a rien
			erreur_squelette(_T('info_erreur_squelette2',
				 array('fichier'=&gt;$fond)),
				 $dossier);
			return '';
		}
	}

	// Affiner par lang
	if ($lang) {
		lang_select($lang);
		$f = &quot;$squelette.$lang&quot;;
		if (@file_exists(&quot;$f.$ext&quot;))
			$squelette = $f;
	}

	return $squelette;
}

?&gt;

--- NEW FILE: formulaire_forum-dist.html ---
&lt;form action='[(#HTTP_VARS{url})]' method='post' name='formulaire'&gt;
      &lt;input type='hidden' name='ajout_forum' value=&quot;oui&quot; /&gt;
      &lt;input type='hidden' name='id_message' value=&quot;[(#HTTP_VARS{id_message})]&quot; /&gt;
      &lt;input type='hidden' name='alea' value=&quot;[(#HTTP_VARS{alea})]&quot; /&gt;
      &lt;input type='hidden' name='hash' value=&quot;[(#HTTP_VARS{hash})]&quot; /&gt;
      &lt;input type='hidden' name='retour' value=&quot;[(#HTTP_VARS{retour})]&quot; /&gt;
      [(#HTTP_VARS*{modere})&lt;p&gt;]
      [(#HTTP_VARS*{afficher_non})]
      [(#HTTP_VARS*{previsu})
      &lt;fieldset class='spip_encadrer'&gt;
	&lt;legend&gt;&lt;b&gt;&lt;:forum_titre:&gt;&lt;/b&gt;&lt;/legend&gt;
	&lt;label&gt;
	  &lt;input type='text' name='titre' 
	    [value=&quot;(#HTTP_VARS{titre})&quot; ]class='forml' size='40' /&gt;
	&lt;/label&gt;
      &lt;/fieldset&gt;
      &lt;br /&gt;
      &lt;fieldset class='spip_encadrer'&gt;
	&lt;legend&gt;&lt;b&gt;&lt;:forum_texte:&gt;&lt;/b&gt;&lt;/legend&gt;
	&lt;p&gt;&lt;:info_creation_paragraphe:&gt;&lt;/p&gt;
[(#HTTP_VARS{texte}|barre_forum)]
      &lt;/fieldset&gt;
      &lt;br /&gt;
      [(#HTTP_VARS*{table})]
      &lt;fieldset class='spip_encadrer'&gt;
	&lt;legend&gt;&lt;:forum_lien_hyper:&gt;&lt;/legend&gt;
	&lt;p&gt;&lt;:forum_page_url:&gt;&lt;/p&gt;
	&lt;p&gt;&lt;label&gt;&lt;:forum_titre:&gt;
	  &lt;input type='text' name='nom_site_forum' class='forml' size='40'
	  value=&quot;[(#HTTP_VARS{nom_site_forum})]&quot;  /&gt;
	&lt;/label&gt;&lt;/p&gt;
	&lt;p&gt;&lt;label&gt;&lt;:forum_url:&gt;
	&lt;input type='text' name='url_site' class='forml'  size='40'
	  value=&quot;[(#HTTP_VARS{url_site})]&quot; /&gt;
	&lt;/label&gt;&lt;/p&gt;
	&lt;/fieldset&gt;
      &lt;br /&gt;
	&lt;fieldset class='spip_encadrer'&gt;
	  &lt;legend&gt;&lt;:forum_qui_etes_vous:&gt;&lt;/legend&gt;
	  &lt;p&gt;
	  &lt;label&gt;
	    &lt;:forum_votre_nom:&gt;
	    &lt;input type='text' name='auteur' value=&quot;[(#HTTP_VARS{auteur})]&quot;
	      class='forml' size='40' [(#HTTP_VARS{disabled})] /&gt;
	  &lt;/label&gt;
	  &lt;/p&gt;
	  &lt;p&gt;
	  &lt;label&gt;
	    &lt;:forum_votre_email:&gt;
	    &lt;input type='text' name='email_auteur' value=&quot;[(#HTTP_VARS{email_auteur})]&quot;
	      class='forml' size='40' [(#HTTP_VARS{disabled})] /&gt;
	  &lt;/label&gt;
	&lt;/p&gt;
      &lt;/fieldset&gt;
      &lt;br /&gt;&lt;div align='right'&gt;
	&lt;input type='submit'  value=&quot;&lt;:forum_voir_avant:&gt;&quot; class='spip_bouton'&gt;&lt;/div&gt;]
&lt;/form&gt;


--- NEW FILE: habillage.css ---


/*
 * Mise en page des textes (bordures...)
 */

.chapo {
	line-height: 1.4em;
	margin-top: 1em;
}
.texte {
}
.ps {
	padding-top: 0.6em;
	margin-top: 0.6em;
	border-top: 1px dashed #404040;
}
.notes {
	margin-top: 0.6em;
	margin-bottom: 0.6em;
	border-top: 1px solid #a0a0a0;
	padding: 1.5em;
}

/*
 * Habillage des menus et de la navigation
 */

.menu {
	border: 1px solid #a0a0a0;
	border-top: 0px;
	padding: 0px;
	margin: 0px;
	margin-bottom: 16px;
}
.menu ul {
	display: block;
	margin: 0px;
	padding: 0px;
	padding-bottom: 4px;
	list-style: none;
}
.menu ol {
	display: block;
	margin: 0px;
	padding: 0px;
	padding-bottom: 4px;
	list-style: none;
}
.menu-titre {
	border-top: 1px solid #a0a0a0;
	border-bottom: 1px dashed #d0d0d0;
	margin: 0px;
	padding-left: 4px;
	padding-right: 4px;
	padding-top: 3px;
	padding-bottom: 2px;
	font-size: 90%;
}
.menu-item {
	margin: 0px;
	padding-left: 4px;
	padding-right: 4px;
	padding-top: 1px;
	padding-bottom: 1px;
	font-size: 80%;
}

/* Des couleurs specifiques selon les types de menus */

.general		{ background-color: #f8f8e8; text-align:center; }
.general .menu-titre 	{ background-color: #fcfcf0; }

.rubriques 		{ background-color: #eaffea; text-align:center; }
.rubriques .menu-titre	{ background-color: #f2fff2; }

.breves 		{ background-color: #ffeaea; }
.breves .menu-titre	{ background-color: #fff2f2; text-align:center; }

.divers 		{ background-color: #eaeaff; }
.divers .menu-titre	{ background-color: #f2f2ff; text-align:center; }

.forums 		{ background-color: #e8f8f8; }
.forums .menu-titre	{ background-color: #f0fcfc; text-align:center; }


/*
 * Styles pour le contenu (c-a-d. la colonne principale)
 */

.contenu {
	margin: 15px;
}
.contenu h2.titre-extrait {
}
.contenu h2.titre-texte {
}
.contenu .surtitre {
	margin-top: 0em;
	margin-bottom: 0em;
}
.contenu .detail {
	margin-left: 2em;
}
.contenu .detail .important {
	color: #a02020;
}
.extrait {
	margin: 0.1em;
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 2em;
	margin-right: 0.1em;
	line-height: 1.4em;
}
.liste-articles {
	margin-top: 1em;
	margin-bottom: 1em;
	clear: left;
}
.contenu .forum-repondre {
	font-family: Verdana, Arial, Helvetica, sans-serif;
	text-align: left;
	font-size: 90%;
	font-weight: bold;
	margin-top: 0.6em;
}


/*
 * Disposition a l'ecran : colonnes, encarts, cartouches
 */

#principal {
	position: absolute;
	left: 30%;
	/*left: 18em;*/
	top: 0px;
	margin: 0px;
	padding: 0px;
	/*margin-right: 2em;*/
	margin-right: 3%;
	margin-top: 1.5em;
}

#plan {
	position: absolute;
	left: 2em;
	top: 0px;
	margin: 0px;
	padding: 0px;
	margin-right: 2em;
	margin-top: 2em;
}

#navigation {
	position: absolute;
	left: 0px;
	top: 0px;
	width: 24%;
	/*width: 14em;*/
	padding: 0px;
	margin: 0px;
	/*margin-left: 1.8em;*/
	margin-left: 3%;
	margin-top: 1.5em;
}

.encart {
	float: right;
	/*width: 14em;*/
	width: 34%;
	margin-left: 4%;
	/*margin-left: 2em;*/
	margin-top: 1em;
	margin-bottom: 0em;
	margin-right: 0px;
}

.cartouche {
	padding-top: 1em;
	border-top: 2px solid #404040;
	margin-bottom: 0em;
}

.cartouche .spip_logos {
	margin-left: 0px;
	padding-left: 0px;
	margin-right: 0.8em;
}


/*
 * Habillage du plan du site
 */

.plan-secteur {
	margin-top: 0em;
	margin-bottom: 3em;
	clear: right;
}

.plan-secteur h1 {
	display: block;
	border: 1px solid #a0a0a0;
	margin: 0px;
	padding: 8px;
	font-size: 150%;
	font-weight: bold;
	background-color: #e0ffe0;
	text-align:center;
}
.plan-rubriques {
	clear: left;
	display: block;
	list-style: none;
}
.plan-rubrique {
	display: inline;
	border: 1px solid #a0a0a0;
	padding: 3px;
	font-weight: bold;
}
.plan-articles {
	clear: left;
	margin-top: 0.5em;
	margin-bottom: 1em;
	list-style: square;
}

/* Eclaircissement progressif des rubriques en fonction de la profondeur */

ul .plan-rubrique {
	background-color: #e0ffe0;
	border-color: #b8b8b8;
}
ul ul .plan-rubrique {
	background-color: #eaffea;
	border-color: #d0d0d0;
}
ul ul ul .plan-rubrique {
	background-color: #f4fff4;
	border-color: #e8e8e8;
}


/*
 * Habillage des forums
 */

ul.forum-total {
	display: block;
	padding: 0px;
	margin: 0px;
	list-style: none;
}
.forum-fil {
	margin-top: 3em;
}
.forum-fil ul {
	display: block;
	margin: 0px;
	margin-left: 2em;
	padding: 0px;
	list-style: none;
}
.forum-titre {
	font-weight: bold;
	font-size: 120%;
}
.forum-item {
	margin: 0px;
	padding: 1em;
	padding-top: 0.5em;
	padding-bottom: 0em;
	text-align: justify;
	color: #303030;
	font-size: 80%;
}
.forum-repondre-message {
	text-align: right;
}

/* Boite d'un forum : eclaircissement progressif des bords */

ul .forum {
	border: 1px solid #909090;
	padding: 0px;
	margin: 0px;
	margin-bottom: 1em;
}
ul ul .forum {
	border: 1px solid #a4a4a4;
}
ul ul ul .forum {
	border: 1px solid #b8b8b8;
}
ul ul ul ul .forum {
	border: 1px solid #cccccc;
}
ul ul ul ul ul .forum {
	border: 1px solid #e0e0e0;
}
ul ul ul ul ul ul .forum {
	border: 1px dashed #e0e0e0;
}

/* Boite de titre d'un forum : mise en couleur selon la profondeur du forum */

ul .forum-chapo {
	border: 0px;
	border-bottom: 1px dashed #b8b8b8;
	margin: 0px;
	padding-left: 6px;
	padding-right: 6px;
	padding-top: 3px;
	padding-bottom: 2px;
	font-size: 90%;
	background: #c4e0e0;
}
ul ul .forum-chapo {
	background: #d4e8e8;
}
ul ul ul .forum-chapo {
	background: #e4f0f0;
}
ul ul ul ul .forum-chapo {
	background: #f4f8f8;
}
ul ul ul ul ul .forum-chapo {
	background: #ffffff;
}


/*
 * Habillage des petitions
 */

.signatures {
	margin-left: 0px;
	margin-right: 0px;
	margin-top: 1em;
	margin-bottom: 1em;
	width: 100%;
}
.signatures td {
	-moz-border-radius: 0.4em;
}
.signatures-titre {
	clear: right;
	font-weight: bold;
	font-size: 120%;
	text-align: center;
	padding: 0.5em;
	margin: 0px;
}
.signature-date {
	white-space: nowrap;
	background: #e4f0f0;
	padding: 0.5em;
}
.signature-nom {
	font-weight: bold;
	background: #ecf4f4;
	padding: 0.2em;
	text-align: center;
}
.signature-message {
	font-size: 85%;
	background: #f4f8f8;
	padding: 0.4em;
	text-align: justify;
}


/*
 * Formulaires
 */

.formrecherche {
	background-color: #f2f2f2;
	color: #505030;
	margin: 0px;
	padding: 2px;
	border: solid 1px #909090;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 80%;
	font-weight: normal;
}

.formulaire {
	color: black;
	margin: 0px;
	margin-bottom: 16px;
	padding: 4px;
	border: 1px solid #a0a0a0;
	background-color: #f6f6f6;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 80%;
	font-weight: normal;
}
.forml {
	background-color: #ececec;
	margin: 4px;
	padding: 1px;
	border: dashed 1px #909090;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 90%;
}
.spip_bouton {
	border: 2px solid #404040;
	padding: 3px;
	background: #d0d0d0;
	font-family: &quot;Trebuchet MS&quot;, Tahoma, Arial, Helvetica, sans-serif;
}

.spip-admin {
}



--- NEW FILE: puce_rtl.gif ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: sommaire.php3 ---
&lt;?php
$fond = &quot;sommaire&quot;;
$delais = 2 * 3600;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: carto.html ---
&lt;BOUCLE_carte(CARTO_CARTE){id_carte}&gt;&lt;img alt=&quot;#TITRE&quot; src=&quot;spip_carto.php?id_carte=[(#FICHIER|propre)]&amp;scale=[(#HTTP_VARS{scale})]&amp;x=[(#HTTP_VARS{x})]&amp;y=[(#HTTP_VARS{y})]&quot; usemap=&quot;#map#ID_CARTE&quot;/&gt;&lt;B_objets&gt;&lt;map name=&quot;map#ID_CARTE&quot;&gt;&lt;BOUCLE_objets(CARTO_OBJET){id_carte=#ID_CARTE}&gt;&lt;area shape=&quot;[(#GEOMETRIE|wkt2shape)]&quot; coords=&quot;[(#GEOMETRIE|wkt2coords)]&quot; href=&quot;#LIEN&quot;/&gt;&lt;/BOUCLE_objets&gt;&lt;/map&gt;&lt;/B_objets&gt;&lt;/BOUCLE_carte&gt;


--- NEW FILE: rubrique-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;BOUCLE_rubrique_principal(RUBRIQUES) {id_rubrique}&gt;

&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[(#TITRE|textebrut)]&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;projection, screen, tv&quot;&gt;
&lt;!-- media=&quot;print&quot; permet d'utiliser cette feuille de style quand vous imprimez depuis votre navigateur --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;impression.css&quot; type=&quot;text/css&quot; media=&quot;print&quot;&gt;

&lt;!-- Lien vers le backend pour navigateurs eclaires --&gt;
&lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot; title=&quot;&lt;:syndiquer_rubrique:&gt;&quot; href=&quot;backend.php3?id_rubrique=#ID_RUBRIQUE&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;

&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;


&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]


&lt;!-- Menu de navigation rubriques --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ol class=&quot;rubriques&quot; title=&quot;&lt;:hierarchie_site:&gt;&quot;&gt;
&lt;BOUCLE_hierarchie(HIERARCHIE) {id_rubrique} {tout}&gt;
&lt;li&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
&lt;B_rubriques_soeurs&gt;
	&lt;ul class=&quot;menu-liste&quot;&gt;
&lt;BOUCLE_rubriques_soeurs(RUBRIQUES) {meme_parent} {exclus} {par titre}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_rubriques_soeurs&gt;
	&lt;/ul&gt;
&lt;/B_rubriques_soeurs&gt;
&lt;/li&gt;
&lt;/BOUCLE_hierarchie&gt;
&lt;/ol&gt;
&lt;/div&gt;


&lt;!-- Breves dans la rubrique --&gt;

&lt;B_breves_rubrique&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;div class=&quot;breves&quot; title=&quot;&lt;:dernieres_breves:&gt;&quot;&gt;
	&lt;div class=&quot;menu-titre&quot;&gt;
	&lt;:breves:&gt;
	&lt;/div&gt;
	&lt;ul&gt;
&lt;BOUCLE_breves_rubrique(BREVES) {id_secteur} {par date} {inverse} {0,5}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;i&gt;[(#DATE|affdate_court)]&lt;/i&gt;:
	&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;
	&lt;/li&gt;
&lt;/BOUCLE_breves_rubrique&gt;
	&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/B_breves_rubrique&gt;


&lt;/div&gt;


&lt;!-- Une : contenu de la rubrique --&gt;

&lt;div class=&quot;contenu&quot; id=&quot;principal&quot;&gt;

&lt;div class=&quot;cartouche&quot;&gt;
[(#LOGO_RUBRIQUE|left)]
&lt;h1 class=&quot;titre-texte&quot;&gt;#TITRE&lt;/h1&gt;
[&lt;:dernier_ajout:&gt; : (#DATE|nom_jour)] [(#DATE|affdate).]
&lt;/div&gt;

	&lt;div class=&quot;encart&quot;&gt;

	&lt;!-- Menu de navigation mots-cles --&gt;

	&lt;B_mots&gt;
	&lt;h2 class=&quot;structure&quot;&gt;&lt;:mots_clefs:&gt;&lt;/h2&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;ul class=&quot;divers&quot; title=&quot;&lt;:mots_clefs:&gt;&quot;&gt;
	&lt;BOUCLE_mots(MOTS) {id_rubrique} {par titre}&gt;
	&lt;li&gt;
	&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_MOT&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
	&lt;B_rubriques_mots&gt;
		&lt;ul class=&quot;menu-liste&quot;&gt;
	&lt;BOUCLE_rubriques_mots(RUBRIQUES) {id_mot} {par hasard} {0,4}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; title=&quot;[(#DESCRIPTIF|textebrut|entites_html)]&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
	&lt;/BOUCLE_rubriques_mots&gt;
		&lt;/ul&gt;
	&lt;/B_rubriques_mots&gt;
	&lt;/li&gt;
	&lt;/BOUCLE_mots&gt;
	&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/B_mots&gt;

	&lt;!-- Sous-rubriques --&gt;

	&lt;B_sous_rubriques&gt;
	&lt;h2 class=&quot;structure&quot;&gt;&lt;:sous_rubriques:&gt;&lt;/h2&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;ul class=&quot;rubriques&quot; title=&quot;&lt;:sous_rubriques:&gt;&quot;&gt;
	&lt;BOUCLE_sous_rubriques(RUBRIQUES) {id_parent} {par titre}&gt;
	&lt;li&gt;
	&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
	&lt;B_sous_sous_rubriques&gt;
		&lt;ul class=&quot;menu-liste&quot;&gt;
	&lt;BOUCLE_sous_sous_rubriques(RUBRIQUES) {id_parent} {par titre}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
	&lt;/BOUCLE_sous_sous_rubriques&gt;
		&lt;/ul&gt;
	&lt;/B_sous_sous_rubriques&gt;
	&lt;/li&gt;
	&lt;/BOUCLE_sous_rubriques&gt;
	&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/B_sous_rubriques&gt;
	
	&lt;!-- Sites syndiques --&gt;
	
	&lt;B_sites&gt;
	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;divers&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:sur_web:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_sites(SITES) {id_rubrique} {par nom_site}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;a href=&quot;#URL_SITE&quot;&gt;#NOM_SITE&lt;/a&gt;
		&lt;B_syndic&gt;
		&lt;ul class=&quot;menu-liste&quot;&gt;
		&lt;BOUCLE_syndic(SYNDIC_ARTICLES) {id_syndic} {par date} {inverse} {0,3}&gt;
			&lt;li class=&quot;menu-item&quot;&gt;&lt;small&gt;&lt;a href=&quot;#URL_ARTICLE&quot;&gt;#TITRE&lt;/a&gt;&lt;/small&gt;&lt;/li&gt;
		&lt;/BOUCLE_syndic&gt;
		&lt;/ul&gt;
		&lt;/B_syndic&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_sites&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_sites&gt;
	[
&lt;div class=&quot;menu&quot;&gt;
    &lt;div class=&quot;divers&quot;&gt;
      &lt;div class=&quot;menu-titre&quot;&gt;&lt;:proposer_site:&gt;
	&lt;div class='reponse_formulaire'&gt;(#FORMULAIRE_SITE)&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
]
	&lt;/div&gt;

[&lt;div class=&quot;chapo&quot;&gt;(#TEXTE)&lt;/div&gt;]
[&lt;div class=&quot;notes&quot;&gt;(#NOTES)&lt;/div&gt;]

&lt;BOUCLE_documents_joints(DOCUMENTS) {id_rubrique} {mode=document} {doublons} {&quot;&lt;br&gt;&quot;}&gt;
[(#LOGO_DOCUMENT|#URL_DOCUMENT)][&lt;br&gt;(#TITRE)][ - (#DESCRIPTIF)]
&lt;/BOUCLE_documents_joints&gt;
&lt;br&gt;

&lt;!-- Articles de la rubrique --&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:articles_rubrique:&gt;&lt;/h1&gt;

&lt;div class=&quot;liste-articles&quot;&gt;

&lt;BOUCLE_articles_recents(ARTICLES) {id_rubrique} {par titre}&gt;
	&lt;h2&gt;&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;B_auteurs_recents&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs_recents(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs_recents&gt;
	&lt;/div&gt;
	&lt;br&gt;
&lt;/BOUCLE_articles_recents&gt;


&lt;/div&gt;


&lt;/div&gt;
#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;


&lt;/BOUCLE_rubrique_principal&gt;
&lt;:aucune_rubrique:&gt;
&lt;//B_rubrique_principal&gt;

--- NEW FILE: spip_admin.css ---
/* Les boutons d'admin survolent la page (sauf #FORMULAIRE_ADMIN) */
.spip-admin-float {
	top: 0px;
	right: 20px;
	position: absolute;
	z-index: 100;
}


/* Couleurs et design des boutons d'admin */
.spip-admin-bloc {
	font-family: Verdana,Arial,Helvetica,sans-serif;
	background-color: transparent;
	font-size: 10px;
}

.spip-admin-bloc li {
	padding: 0 2px;
	display: inline;
}

.spip-admin-bloc ul {
	display: inline;
}

a.spip-admin-boutons {
	border-top: 1px solid #cecece;
	border-bottom: 2px solid #4a4a4a;
	border-left: 1px solid #cecece;
	border-right: 1px solid #cecece;
	text-decoration: none;
	width: 3em;
	text-align: center;
	margin: 0;
	padding: 1px .5em;
	font-family: helvetica,arial,sans-serif;
	font-size: 10px;
	font-weight: bold;
	background-color: #fff;
	color: #0c479d;
}

a:hover.spip-admin-boutons {
	background-color: #fc3;
	border-bottom: 2px solid #36f;
}

a:active.spip-admin-boutons {
	background-color: #ccc;
	border-bottom: 2px solid #f00;
}


/* Style pour le mode debug */
#spip-debug {
	background-color: #f0f0f0;
	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
}
#spip-debug ul table {
	font-size: 80%;
}

#spip-debug fieldset {
	background-color: #FFF;
	font-family: &quot;Courier New&quot;, Courier, monospace;
	font-size: 12;
}

#spip-debug legend {
	background-color: #FFF;
	border: solid 1px #F00;
	padding: 1px 1em;
	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
	font-weight: bold;
}

#spip-debug ul table a {
	text-decoration: none;
}

#spip-debug ul table a:hover {
	text-decoration: underline;
}

--- NEW FILE: spip_cache.php3 ---
&lt;?php

include (&quot;ecrire/inc_version.php3&quot;);

include_ecrire(&quot;inc_meta.php3&quot;);
include_ecrire(&quot;inc_admin.php3&quot;);
include_local(&quot;inc-cache.php3&quot;);

if ($purger_cache == &quot;oui&quot;) {
	if (verifier_action_auteur(&quot;purger_cache&quot;, $hash, $id_auteur))
		purger_cache();
}

if ($purger_squelettes == &quot;oui&quot;) {
	if (verifier_action_auteur(&quot;purger_squelettes&quot;, $hash, $id_auteur))
	  purger_squelettes();
}
redirige_par_entete($redirect);

?&gt;

--- NEW FILE: site-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;BOUCLE_site(SITES){id_syndic}&gt;

&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[(#NOM_SITE|textebrut)]&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;projection, screen, tv&quot;&gt;
&lt;!-- media=&quot;print&quot; permet d'utiliser cette feuille de style quand vous imprimez depuis votre navigateur --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;impression.css&quot; type=&quot;text/css&quot; media=&quot;print&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot;&gt;

&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;


&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]


&lt;/div&gt;

&lt;!-- Une : affichage du site --&gt;

&lt;div class=&quot;contenu&quot; id=&quot;principal&quot;&gt;

&lt;div class=&quot;cartouche&quot;&gt;
[(#LOGO_SITE|left)]
&lt;h1 class=&quot;titre-texte&quot;&gt;&lt;a href=&quot;#URL_SITE&quot;&gt;#NOM_SITE&lt;/a&gt;&lt;/h1&gt;

[&lt;div class=&quot;chapo&quot;&gt;(#DESCRIPTIF)&lt;/div&gt;]
[&lt;div class=&quot;notes&quot;&gt;(#NOTES)&lt;/div&gt;]
&lt;/div&gt;


&lt;!-- Articles du site --&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:articles:&gt;&lt;/h1&gt;

&lt;div class=&quot;liste-articles&quot;&gt;

&lt;BOUCLE_articles(SYNDIC_ARTICLES) {id_syndic} {par date}{inverse}{0,10}&gt;
	&lt;h2&gt;&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;/div&gt;
	&lt;br&gt;
&lt;/BOUCLE_articles&gt;

&lt;/div&gt;

&lt;/div&gt;

#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;


&lt;/BOUCLE_site&gt;
&lt;:aucun_site:&gt;
&lt;//B_site&gt;

--- NEW FILE: sommaire_texte.php3 ---
&lt;?php

// ACCESSIBILITE
// cette page offre une lecture en mode &quot;texte seul&quot;
// des 3 articles les plus recents.

$fond = &quot;sommaire_texte&quot;;
$delais = 3600;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: spip_redirect.php3 ---
&lt;?php
// redirige vers l'URL canonique de l'article,
// en indiquant recalcul et previsu

include (&quot;ecrire/inc_version.php3&quot;);

// Gestionnaire d'URLs
if (@file_exists(&quot;inc-urls.php3&quot;))
	include_local(&quot;inc-urls.php3&quot;);
else
	include_local(&quot;inc-urls-&quot;.$GLOBALS['type_urls'].&quot;.php3&quot;);

if ($id_article) {
	$url = generer_url_article($id_article);
}
else if ($id_breve) {
	$url = generer_url_breve($id_breve);
}
else if ($id_forum) {
	$url = generer_url_forum($id_forum);
}
else if ($id_rubrique) {
	$url = generer_url_rubrique($id_rubrique);
}
else if ($id_mot) {
	$url = generer_url_mot($id_mot);
}
else if ($id_auteur) {
	$url = generer_url_auteur($id_auteur);
}
else {
	$url = _DIR_RESTREINT_ABS;
}
if (strpos($url,'?')) {
	$super='&amp;';
}
else {
	$super='?';
}
if ($recalcul) $url .= $super.&quot;var_mode=recalcul&quot;;
else if ($preview) $url .= $super.&quot;var_preview=oui&quot;;
@header(&quot;Location: $url&quot;);

?&gt;
--- NEW FILE: .project ---
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;projectDescription&gt;
	&lt;name&gt;spipcarto&lt;/name&gt;
	&lt;comment&gt;&lt;/comment&gt;
	&lt;projects&gt;
	&lt;/projects&gt;
	&lt;buildSpec&gt;
		&lt;buildCommand&gt;
			&lt;name&gt;net.sourceforge.phpeclipse.parserbuilder&lt;/name&gt;
			&lt;arguments&gt;
			&lt;/arguments&gt;
		&lt;/buildCommand&gt;
	&lt;/buildSpec&gt;
	&lt;natures&gt;
		&lt;nature&gt;net.sourceforge.phpeclipse.phpnature&lt;/nature&gt;
	&lt;/natures&gt;
&lt;/projectDescription&gt;

--- NEW FILE: breve.php3 ---
&lt;?php
$fond = &quot;breve&quot;;
$delais = 12 * 3600;

include (&quot;inc-public.php3&quot;);


?&gt;

--- NEW FILE: resume.php3 ---
&lt;?php
$fond = &quot;resume&quot;;
$delais = 2 * 3600;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: inc-login_prive.php3 ---
&lt;?php

include_local(&quot;inc-login_public.php3&quot;);

global $balise_LOGIN_PRIVE_collecte;
$balise_LOGIN_PRIVE_collecte = array('url');

# retourner:
# 1. l'url collectee ci-dessus (args0) ou donnee en filtre (filtre0)
# 2. l'eventuel parametre de la balise (args1) fournie par calculer_balise_dynamique

function balise_LOGIN_PRIVE_stat ($args, $filtres)
{
	return array($filtres[0] ? $filtres[0] : $args[0], $args[1]);
}

function balise_LOGIN_PRIVE_dyn($cible, $login)
{
	return login_explicite($login, $cible,  'redac');
}
?&gt;

--- NEW FILE: inc-formulaire_inscription.php3 ---
&lt;?php

include_ecrire('inc_abstract_sql.php3');

global $balise_FORMULAIRE_INSCRIPTION_collecte ;
$balise_FORMULAIRE_INSCRIPTION_collecte = array('mail_inscription', 'nom_inscription');

// args 0 et 1 sont mail et nom ci-dessus, args2 le parametre de la balise

function balise_FORMULAIRE_INSCRIPTION_stat($args, $filtres)
{
  return ((lire_meta('accepter_inscriptions') != 'oui') ? '' :
	  array('redac', $args[0], $args[1], 
		($args[2] == 'focus' ? 'nom_inscription' : '')));
}

function balise_FORMULAIRE_INSCRIPTION_dyn($mode, $mail_inscription, $nom_inscription, $focus) {
	if (($mode == 'redac') AND (lire_meta(&quot;accepter_inscriptions&quot;) == &quot;oui&quot;))
		$statut = &quot;nouveau&quot;;
	else if (($mode == 'forum') AND ((lire_meta('accepter_visiteurs') == 'oui') OR (lire_meta('forums_publics') == 'abo')))
		$statut = &quot;6forum&quot;;
	else return _T('pass_rien_a_faire_ici');

	if (test_mail_ins($mode, $mail_inscription) &amp;&amp; $nom_inscription) {
		include(_FILE_CONNECT);
		// envoyer les identifiants si l'abonne n'existe pas d&#233;j&#224;.
		if (!$row = spip_fetch_array(spip_query(&quot;SELECT statut, id_auteur, login, pass FROM spip_auteurs WHERE email='&quot;.addslashes($mail_inscription).&quot;' LIMIT 1&quot;)))
		  {
			include_ecrire(&quot;inc_acces.php3&quot;);
			$pass = creer_pass_aleatoire(8, $mail_inscription);
			$login = test_login($mail_inscription);
			$mdpass = md5($pass);
			$htpass = generer_htpass($pass);
			$r = spip_abstract_insert('auteurs', 
					 '(nom, email, login, pass, statut, htpass)',
					 &quot;('&quot;.addslashes($nom_inscription).&quot;',  '&quot;.addslashes($mail_inscription).&quot;', '$login', '$mdpass', '$statut', '$htpass')&quot;);
			ecrire_acces();
			return envoyer_inscription($mail_inscription, $statut, $mode, $login, $pass);
		  }

		else {
		  // existant mais encore muet, renvoyer les infos
			if ($row['statut'] == 'nouveau') {
			  return (envoyer_inscription($mail_inscription, $row['statut'], $mode, $row['login'], $row['pass']));
			} else {
				if ($row['statut'] == '5poubelle')
		  // dead
				  return _T('form_forum_access_refuse');
				else  
		  // deja inscrit
				  return _T('form_forum_email_deja_enregistre');
			}
		}
	}
	// demande du formulaire
	else {
		if (!$nom_inscription) 
		  {
		    return array(&quot;formulaire_inscription&quot;,0,
				 array('focus' =&gt; $focus,
				       'mode' =&gt; $mode));
		  }
		else {
		  spip_log(&quot;Mail incorrect: '$mail_inscription'&quot;);
		  return _L('adresse mail incorrecte');
		}
	}
}

// fonction qu'on peut redefinir pour filtrer selon l'adresse mail
// cas general: controler juste que l'adresse n'est pas vide

function test_mail_ins($mode, $mail_inscription) {
  return trim($mail_inscription);
}

	// envoyer identifiants par mail
function envoyer_inscription($mail, $statut, $type, $login, $pass) {
	$nom_site_spip = lire_meta(&quot;nom_site&quot;);
	$adresse_site = lire_meta(&quot;adresse_site&quot;);
	
	$message = _T('form_forum_message_auto').&quot;\n\n&quot;._T('form_forum_bonjour').&quot;\n\n&quot;;
	if ($type == 'forum') {
		$message .= _T('form_forum_voici1', array('nom_site_spip' =&gt; $nom_site_spip, 'adresse_site' =&gt; $adresse_site)) . &quot;\n\n&quot;;
	} else {
		$message .= _T('form_forum_voici2', array('nom_site_spip' =&gt; $nom_site_spip, 'adresse_site' =&gt; $adresse_site)) . &quot;\n\n&quot;;
	}
	$message .= &quot;- &quot;._T('form_forum_login').&quot; $login\n&quot;;
	$message .= &quot;- &quot;._T('form_forum_pass').&quot; $pass\n\n&quot;;

	include_ecrire(&quot;inc_mail.php3&quot;);
	if (envoyer_mail($mail, &quot;[$nom_site_spip] &quot;._T('form_forum_identifiants'), $message))
	  return _T('form_forum_identifiant_mail');
	else
	  return _T('form_forum_probleme_mail');
}

function test_login($mail) {
	if (strpos($mail, &quot;@&quot;) &gt; 0) $login_base = substr($mail, 0, strpos($mail, &quot;@&quot;));
	else $login_base = $mail;

	$login_base = strtolower($login_base);
	$login_base = ereg_replace(&quot;[^a-zA-Z0-9]&quot;, &quot;&quot;, $login_base);
	if (!$login_base) $login_base = &quot;user&quot;;
	$login = $login_base;

	for ($i = 1; ; $i++) {
		$query = &quot;SELECT id_auteur FROM spip_auteurs WHERE login='$login' LIMIT 1&quot;;
		if (!spip_num_rows(spip_query($query))) return $login;
		$login = $login_base.$i;
	}


}

?&gt;

--- NEW FILE: plan-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[#NOM_SITE_SPIP] &lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;print, projection, screen, tv&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;


&lt;!-- Plan du site --&gt;

&lt;div id=&quot;plan&quot; class=&quot;contenu&quot;&gt;

&lt;BOUCLE_secteurs(RUBRIQUES) {racine} {par titre}&gt;

&lt;div class=&quot;plan-secteur&quot;&gt;

	[(#LOGO_RUBRIQUE|left)]&lt;h1&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot;&gt;#TITRE&lt;/a&gt;&lt;/h1&gt;

	&lt;div class=&quot;encart&quot;&gt;

	&lt;!-- Breves --&gt;

	&lt;h2 class=&quot;structure&quot;&gt;&lt;:breves:&gt;&lt;/h2&gt;

	&lt;B_breves&gt;
	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;breves&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:breves:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_breves(BREVES) {id_secteur} {par date} {inverse} {0,15}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;i&gt;[(#DATE|affdate_court)]&lt;/i&gt;:
		&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_breves&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_breves&gt;

	&lt;!-- Sur le Web --&gt;

	&lt;h2 class=&quot;structure&quot;&gt;&lt;:sites_web:&gt;&lt;/h2&gt;

	&lt;B_sites&gt;
	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;divers&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:sur_web:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_sites(SITES) {id_secteur} {par nom_site}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;a href=&quot;#URL_SITE&quot;&gt;#NOM_SITE&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_sites&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_sites&gt;

	&lt;/div&gt;

&lt;!-- Articles et sous-rubriques --&gt;

&lt;h2 class=&quot;structure&quot;&gt;&lt;:articles:&gt;&lt;/h2&gt;

&lt;B_articles_racine&gt;
&lt;ul class=&quot;plan-articles&quot;&gt;

&lt;BOUCLE_articles_racine(ARTICLES) {id_rubrique} {par titre}&gt;
&lt;li class=&quot;plan-article&quot;&gt;&lt;a href=&quot;#URL_ARTICLE&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_articles_racine&gt;

&lt;/ul&gt;
&lt;/B_articles_racine&gt;

&lt;B_rubriques&gt;

&lt;ul class=&quot;plan-rubriques&quot;&gt;

&lt;BOUCLE_rubriques(RUBRIQUES) {id_parent} {par titre}&gt;
&lt;li&gt;
&lt;div class=&quot;plan-rubrique&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot;&gt;#TITRE&lt;/a&gt;&lt;/div&gt;

	&lt;B_articles&gt;
	&lt;ul class=&quot;plan-articles&quot;&gt;
	&lt;BOUCLE_articles(ARTICLES) {id_rubrique} {par titre}&gt;
	&lt;li class=&quot;plan-article&quot;&gt;&lt;a href=&quot;#URL_ARTICLE&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
	&lt;/BOUCLE_articles&gt;
	&lt;/ul&gt;
	&lt;/B_articles&gt;

	&lt;BOUCLE_sous_rubriques(BOUCLE_rubriques)&gt;&lt;/BOUCLE_sous_rubriques&gt;

&lt;/li&gt;
&lt;/BOUCLE_rubriques&gt;

&lt;/ul&gt;
&lt;/B_rubriques&gt;


&lt;/div&gt;

&lt;/BOUCLE_secteurs&gt;

&lt;/div&gt;
#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;

--- NEW FILE: spip_barre.js ---
// Barre de raccourcis
// derive du:
// bbCode control by subBlue design : www.subBlue.com

// Startup variables
var theSelection = false;

// Check for Browser &amp; Platform for PC &amp; IE specific bits
// More details from: <A HREF="http://www.mozilla.org/docs/web-developer/sniffer/browser_type.html">http://www.mozilla.org/docs/web-developer/sniffer/browser_type.html</A>
var clientPC = navigator.userAgent.toLowerCase(); // Get client info
var clientVer = parseInt(navigator.appVersion); // Get browser version

var is_ie = ((clientPC.indexOf(&quot;msie&quot;) != -1) &amp;&amp; (clientPC.indexOf(&quot;opera&quot;) == -1));
var is_nav = ((clientPC.indexOf('mozilla')!=-1) &amp;&amp; (clientPC.indexOf('spoofer')==-1)
                &amp;&amp; (clientPC.indexOf('compatible') == -1) &amp;&amp; (clientPC.indexOf('opera')==-1)
                &amp;&amp; (clientPC.indexOf('webtv')==-1) &amp;&amp; (clientPC.indexOf('hotjava')==-1));
var is_moz = 0;

var is_win = ((clientPC.indexOf(&quot;win&quot;)!=-1) || (clientPC.indexOf(&quot;16bit&quot;) != -1));
var is_mac = (clientPC.indexOf(&quot;mac&quot;)!=-1);


function barre_raccourci(debut,fin,champ) {
	var txtarea = champ;

	txtarea.focus();
	donotinsert = false;
	theSelection = false;
	bblast = 0;

	if ((clientVer &gt;= 4) &amp;&amp; is_ie &amp;&amp; is_win)
	{
		theSelection = document.selection.createRange().text; // Get text selection
		if (theSelection) {

			while (theSelection.substring(theSelection.length-1, theSelection.length) == ' ')
			{
				theSelection = theSelection.substring(0, theSelection.length-1);
				fin = fin + &quot; &quot;;
			}
			if (theSelection.substring(0,1) == '{' &amp;&amp; debut.substring(0,1) == '{')
			{
				debut = debut + &quot; &quot;;
			}
			if (theSelection.substring(theSelection.length-1, theSelection.length) == '}' &amp;&amp; fin.substring(0,1) == '}')
			{
				fin = &quot; &quot; + fin;
			}

			// Add tags around selection
			document.selection.createRange().text = debut + theSelection + fin;
			txtarea.focus();
			theSelection = '';
			return;
		}
	}
	else if (txtarea.selectionEnd &amp;&amp; (txtarea.selectionEnd - txtarea.selectionStart &gt; 0))
	{
		mozWrap(txtarea, debut, fin);
		return;
	}
}

function barre_demande(debut,milieu,fin,affich,champ) {
	var inserer = prompt(affich);

	if (inserer != null) {
		if (inserer == &quot;&quot;) {inserer = &quot;xxx&quot;; }

		barre_raccourci(debut, milieu+inserer+fin, champ);
	}
}

function barre_inserer(text,champ) {
	var txtarea = champ;
	
	if (txtarea.createTextRange &amp;&amp; txtarea.caretPos) {
		var caretPos = txtarea.caretPos;
		caretPos.text = caretPos.text.charAt(caretPos.text.length - 1) == ' ' ? caretPos.text + text + ' ' : caretPos.text + text;
		txtarea.focus();
	} else {
		//txtarea.value  += text;
		//txtarea.focus();
		mozWrap(txtarea, '', text);
		return;
	}
}


// D'apres Nicolas Hoizey 
function barre_tableau(toolbarfield)
{
	var txtarea = toolbarfield;
	txtarea.focus();
	var cols = prompt(&quot;Nombre de colonnes du tableau :&quot;, &quot;&quot;);
	var rows = prompt(&quot;Nombre de lignes du tableau :&quot;, &quot;&quot;);
	if (cols != null &amp;&amp; rows != null) {
		var tbl = '';
		var ligne = '|';
		var entete = '|';
		for(i = 0; i &lt; cols; i++) {
			ligne = ligne + ' valeur |';
			entete = entete + ' {{entete}} |';
		}
		for (i = 0; i &lt; rows; i++) {
			tbl = tbl + ligne + '\n';
		}
		if (confirm('Voulez vous ajouter une ligne d\'en-t&#234;te ?')) {
			tbl = entete + '\n' + tbl;
		}
		if ((clientVer &gt;= 4) &amp;&amp; is_ie &amp;&amp; is_win) {
			var str = document.selection.createRange().text;
			var sel = document.selection.createRange();
			sel.text = str + '\n\n' + tbl + '\n\n';
		} else {
			mozWrap(txtarea, '', &quot;\n\n&quot; + tbl + &quot;\n\n&quot;);
		}
	}
	return;
}



// Shows the help messages in the helpline window
function helpline(help, champ) {
	champ.value = help;
}


function setCaretToEnd (input) {
  setSelectionRange(input, input.value.length, input.value.length);
}


function setSelectionRange(input, selectionStart, selectionEnd) {
  if (input.setSelectionRange) {
    input.focus();
    input.setSelectionRange(selectionStart, selectionEnd);
  }
  else if (input.createTextRange) {
    var range = input.createTextRange();
    range.collapse(true);
    range.moveEnd('character', selectionEnd);
    range.moveStart('character', selectionStart);
    range.select();
  }
}

// From <A HREF="http://www.massless.org/mozedit/">http://www.massless.org/mozedit/</A>
function mozWrap(txtarea, open, close)
{
	var selLength = txtarea.textLength;
	var selStart = txtarea.selectionStart;
	var selEnd = txtarea.selectionEnd;
	if (selEnd == 1 || selEnd == 2)
		selEnd = selLength;
	
	// Raccourcir la selection par double-clic si dernier caractere est espace	
	if (selEnd - selStart &gt; 0 &amp;&amp; (txtarea.value).substring(selEnd-1,selEnd) == ' ') selEnd = selEnd-1;
	
	var s1 = (txtarea.value).substring(0,selStart);
	var s2 = (txtarea.value).substring(selStart, selEnd)
	var s3 = (txtarea.value).substring(selEnd, selLength);

	// Eviter melange bold-italic-intertitre
	if ((txtarea.value).substring(selEnd,selEnd+1) == '}' &amp;&amp; close.substring(0,1) == &quot;}&quot;) close = close + &quot; &quot;;
	if ((txtarea.value).substring(selEnd-1,selEnd) == '}' &amp;&amp; close.substring(0,1) == &quot;}&quot;) close = &quot; &quot; + close;
	if ((txtarea.value).substring(selStart-1,selStart) == '{' &amp;&amp; open.substring(0,1) == &quot;{&quot;) open = &quot; &quot; + open;
	if ((txtarea.value).substring(selStart,selStart+1) == '{' &amp;&amp; open.substring(0,1) == &quot;{&quot;) open = open + &quot; &quot;;

	txtarea.value = s1 + open + s2 + close + s3;
	selDeb = selStart + open.length;
	selFin = selEnd + close.length;
	window.setSelectionRange(txtarea, selDeb, selFin);
	txtarea.focus();
	
	return;
}

// Insert at Claret position. Code from
// <A HREF="http://www.faqts.com/knowledge_base/view.phtml/aid/1052/fid/130">http://www.faqts.com/knowledge_base/view.phtml/aid/1052/fid/130</A>
     function storeCaret (textEl) {
       if (textEl.createTextRange) 
         textEl.caretPos = document.selection.createRange().duplicate();
     }


--- NEW FILE: spip_style.css ---
a {
	text-decoration: none;
}

a:hover {
	color:#FF9900;
	text-decoration: underline;
}

a.spip_url { }
a.spip_in { }
a.spip_out { }
a.spip_glossaire { }

.spip_code { }

p.spip_note { }

h3.spip {
	font-family: Verdana,Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 120%;
	text-align: center;
	margin-top : 40px;
	margin-bottom : 40px;
	padding: 0em;
}

.spip_puce {
	list-style-position: inside;
}

.spip_documents{
	font-family: Verdana,Arial,Helvetica,sans-serif;
	font-size : 70%;
}


table.spip {
}

table.spip tr.row_first {
	background-color: #FCF4D0;
}

table.spip tr.row_odd {
	background-color: #C0C0C0;
}

table.spip tr.row_even {
	background-color: #F0F0F0;
}

table.spip td {
	padding: 1px;
	text-align: left;
	vertical-align: middle;
}

hr.spip { }
b.spip { }
i.spip { }
blockquote.spip {
	margin-left : 40px;
	margin-top : 10px;
	margin-bottom : 10px;
	margin-right: 0px;
	border : solid 1px #aaaaaa;
	background-color: #ffffff;
	padding-left: 10px;
	padding-right: 10px;
}

.forml { width: 100% ; background-color: #FFDDAA;}

.spip_encadrer {
	font-family: helvetica, arial, sans-serif;
	width : 95%;
	background-color: #FFFFFF;
	padding: 5px;
	border: 1px #666666 solid;
}

.spip_cadre {
	width : 95%;
	background-color: #FFFFFF;
	padding: 5px;
	margin-top: 10px;
}

div.spip_poesie {
	margin-bottom: 5px;
	margin-left: 10px;
	padding-left: 10px;
	border-left: 1px solid #999999;
}
div.spip_poesie div {
	text-indent: -60px;
	margin-left: 60px;
}

.spip_bouton { background-color: #FFCC00;}

form.formrecherche { 
	margin-top: 5px;
	margin-bottom: 5px;
}
input.formrecherche {
	width: 95%;
	background-color: #FFDDAA;
}

.reponse_formulaire {
	font-family: Verdana,Arial,Helvetica,sans-serif;
	font-weight: bold;
	font-size: 110%;
	color: red;
}

.spip_surligne { background-color: #FFFF66; }


/*
 * Barre de raccourcis
 */

a.spip_barre img {
	border-left: 1px solid #ffffff;
	border-top: 1px solid #ffffff;
	border-right: 1px solid #aa9966;
	border-bottom: 1px solid #aa9966;
	padding: 3px;
	background-color: #FFDDAA;
}
a.spip_barre:hover img {
	border: 1px solid #808080;
	padding: 3px;
	background-color: #f8f8f4;
}

--- NEW FILE: ical.php3 ---
&lt;?php

$fond = &quot;ical&quot;;
$delais = 3600;

@header (&quot;content-type:text/calendar&quot;);

$flag_preserver=true;
include (&quot;inc-public.php3&quot;);


?&gt;

--- NEW FILE: article-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;BOUCLE_article_principal(ARTICLES) {id_article}&gt;
&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[(#TITRE|textebrut)]&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;
&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;projection, screen, tv&quot;&gt;
&lt;!-- media=&quot;print&quot; permet d'utiliser cette feuille de style quand vous imprimez depuis votre navigateur --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;impression.css&quot; type=&quot;text/css&quot; media=&quot;print&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;
&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]


&lt;!-- Menu de navigation rubriques --&gt;

&lt;B_rubriques&gt;
&lt;div class=&quot;menu&quot;&gt;
&lt;ol class=&quot;rubriques&quot;&gt;
&lt;BOUCLE_rubriques(HIERARCHIE) {id_article}&gt;
&lt;li&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
&lt;B_sous_rubriques&gt;
	&lt;ul class=&quot;menu-liste&quot;&gt;
&lt;BOUCLE_sous_rubriques(RUBRIQUES) {meme_parent} {exclus} {par date} {inverse} {0,3}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_sous_rubriques&gt;
	&lt;/ul&gt;
&lt;/B_sous_rubriques&gt;
&lt;/li&gt;
&lt;/BOUCLE_rubriques&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/B_rubriques&gt;


&lt;!-- Menu de navigation mots-cles --&gt;

&lt;B_mots&gt;
&lt;div class=&quot;menu&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:mots_clefs:&gt;&lt;/h1&gt;

&lt;ul class=&quot;divers&quot; title=&quot;&lt;:mots_clefs:&gt;&quot;&gt;
&lt;BOUCLE_mots(MOTS) {id_article} {par titre}&gt;
&lt;li&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_MOT&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
&lt;B_articles_mots&gt;
	&lt;ul class=&quot;menu-liste&quot;&gt;
&lt;BOUCLE_articles_mots(ARTICLES) {id_mot} {par hasard} {0,4}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_ARTICLE&quot; title=&quot;[(#DESCRIPTIF|textebrut|entites_html)]&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_articles_mots&gt;
	&lt;/ul&gt;
&lt;/B_articles_mots&gt;
&lt;/li&gt;
&lt;/BOUCLE_mots&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/B_mots&gt;


&lt;!-- Liens des forums --&gt;
&lt;BOUCLE_forums_decompte(FORUMS){id_article}{plat}&gt;&lt;/BOUCLE_forums_decompte&gt;
[&lt;div class=&quot;menu&quot; title=&quot;&lt;:derniers_commentaires:&gt;&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:derniers_commentaires:&gt;&lt;/h1&gt;

&lt;ul class=&quot;forums&quot;&gt;

&lt;li class=&quot;menu-titre&quot;&gt;&lt;:messages_forum:&gt;: (#TOTAL_BOUCLE)&lt;/li&gt;]
&lt;//B_forums_decompte&gt;
&lt;BOUCLE_forums_liens(FORUMS){id_article}{par date}{inverse}{0,5}&gt;
    &lt;li class=&quot;menu-item&quot;&gt;[&lt;i&gt;(#DATE|affdate_court)&lt;/i&gt;:]
    &lt;a href=&quot;#forum#ID_FORUM&quot;&gt;#TITRE&lt;/a&gt;
    &lt;/li&gt;
&lt;/BOUCLE_forums_liens&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/B_forums_liens&gt;


&lt;/div&gt;


&lt;!-- Une : derniers articles publies --&gt;

&lt;div class=&quot;contenu&quot; id=&quot;principal&quot;&gt;

&lt;div class=&quot;cartouche&quot;&gt;
#DEBUT_SURLIGNE[
(#LOGO_ARTICLE|left)][
&lt;div class=&quot;surtitre&quot;&gt;(#SURTITRE)&lt;/div&gt;
]&lt;h1 class=&quot;titre-texte&quot;&gt;#TITRE&lt;/h1&gt;[
&lt;div class=&quot;surtitre&quot;&gt;(#SOUSTITRE)&lt;/div&gt;
]#FIN_SURLIGNE
[(#DATE|nom_jour)] [(#DATE|affdate).]
&lt;/div&gt;
&lt;div style=&quot;line-height: 0em&quot;&gt;&nbsp;&lt;/div&gt;&lt;!-- Bug Mozilla <A HREF="http://bugzilla.mozilla.org/show_bug.cgi?id=200510">http://bugzilla.mozilla.org/show_bug.cgi?id=200510</A> --&gt;

	&lt;div class=&quot;encart&quot;&gt;

	&lt;!-- Auteurs de l'article --&gt;

	&lt;B_auteurs&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;h2 class=&quot;structure&quot;&gt;&lt;:memes_auteurs:&gt;&lt;/h2&gt;
	&lt;ul class=&quot;divers&quot;&gt;
	&lt;BOUCLE_auteurs(AUTEURS) {id_article} {par nom}&gt;
		&lt;li&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_AUTEUR&quot;&gt;#NOM&lt;/a&gt;&lt;/div&gt;
		&lt;ul&gt;
		[&lt;li class=&quot;menu-item&quot; style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;(#URL_SITE)&quot;&gt;#NOM_SITE&lt;/a&gt;&lt;/li&gt;]
		[&lt;li class=&quot;menu-item&quot; style=&quot;text-align: center&quot;&gt;(#BIO)&lt;/li&gt;]
	&lt;B_articles_auteur&gt;
	&lt;BOUCLE_articles_auteur(ARTICLES) {id_auteur} {par popularite} {inverse} {0,5}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
	&lt;/BOUCLE_articles_auteur&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_auteurs&gt;
	&lt;/ul&gt;
	&lt;/div&gt;

	&lt;/B_auteurs&gt;

	&lt;!-- Articles dans la meme rubrique --&gt;

	&lt;B_articles_rubrique&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;breves&quot;&gt;
		&lt;h2 class=&quot;structure&quot;&gt;&lt;:meme_rubrique:&gt;&lt;/h2&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:meme_rubrique:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_articles_rubrique(ARTICLES) {id_rubrique} {par hasard} {exclus} {0,8}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_articles_rubrique&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;

	&lt;/B_articles_rubrique&gt;
  [&lt;div class='reponse_formulaire'&gt;
	&lt;a name='sp#ID_ARTICLE' id='sp#ID_ARTICLE'&gt;&lt;/a&gt;
    (#FORMULAIRE_SIGNATURE)
  &lt;/div&gt;]
	&lt;/div&gt;

#DEBUT_SURLIGNE[
&lt;div class=&quot;chapo&quot;&gt;(#CHAPO)&lt;/div&gt;
][&lt;div class=&quot;texte&quot;&gt;(#TEXTE)&lt;/div&gt;
][&lt;div class=&quot;ps&quot;&gt;(#PS)&lt;/div&gt;][
&lt;div class=&quot;notes&quot;&gt;(#NOTES)&lt;/div&gt;
]#FIN_SURLIGNE

&lt;BOUCLE_documents_joints(DOCUMENTS) {id_article} {mode=document} {doublons} {&quot;&lt;br&gt;&quot;}&gt;
[(#LOGO_DOCUMENT|#URL_DOCUMENT)][&lt;br&gt;(#TITRE)][ - (#DESCRIPTIF)]
&lt;/BOUCLE_documents_joints&gt;
&lt;br&gt;


&lt;!-- Signatures petition --&gt;

&lt;BOUCLE_signatures_decompte(SIGNATURES) {id_article}&gt;&lt;/BOUCLE_signatures_decompte&gt;
[&lt;div class=&quot;signatures-titre&quot;&gt;&lt;:signatures_petition:&gt;: (#TOTAL_BOUCLE)&lt;/div&gt;

&lt;table class=&quot;signatures&quot;&gt;
&lt;thead class=&quot;structure&quot;&gt;
&lt;tr&gt;
	&lt;td&gt;&lt;:date:&gt;&lt;/td&gt;
	&lt;td&gt;&lt;:nom:&gt;&lt;/td&gt;
	&lt;td&gt;&lt;:message:&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;]
&lt;//B_signatures_decompte&gt;
&lt;BOUCLE_signatures(SIGNATURES) {id_article} {par date} {inverse} {debut_signatures,30}&gt;
&lt;tr&gt;
	&lt;td class=&quot;signature-date&quot;&gt;[(#DATE|affdate_court)]&lt;/td&gt;
	&lt;td class=&quot;signature-nom&quot;&gt;#NOM[&lt;br&gt;&lt;a href=&quot;#URL_SITE&quot;&gt;(#NOM_SITE)&lt;/a&gt;]&lt;/td&gt;
	[&lt;td class=&quot;signature-message&quot;&gt;(#MESSAGE)&lt;/td&gt;]
&lt;/tr&gt;
&lt;/BOUCLE_signatures&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/B_signatures&gt;


&lt;!-- Forums --&gt;

[&lt;div class=&quot;forum-repondre&quot;&gt;&lt;B&gt;&lt;A  HREF=&quot;forum.php3?(#PARAMETRES_FORUM)&quot;&gt;&lt;:repondre_article:&gt;&lt;/A&gt;&lt;/B&gt;&lt;/div&gt;]
&lt;br&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:Forum:&gt;&lt;/h1&gt;

&lt;B_forums&gt;
&lt;ul class=&quot;forum-total&quot;&gt;

&lt;BOUCLE_forums(FORUMS){id_article}{par date}{inverse}&gt;

&lt;li&gt;
&lt;div class=&quot;forum-fil&quot;&gt;

&lt;div class=&quot;forum&quot;&gt;
&lt;div class=&quot;forum-chapo&quot;&gt;
&lt;div class=&quot;forum-titre&quot;&gt;&lt;a name=&quot;forum#ID_FORUM&quot;&gt;&lt;/a&gt;#TITRE&lt;/div&gt;
[(#DATE|affdate)][, &lt;:par_auteur:&gt; &lt;A HREF=&quot;mailto:#EMAIL&quot;&gt;(#NOM)&lt;/A&gt;]
&lt;/div&gt;
&lt;div class=&quot;forum-item&quot;&gt;
#TEXTE
[&lt;div class=&quot;forum-titre&quot;&gt;&lt;a href=&quot;(#URL_SITE)&quot; class=&quot;spip_out&quot;&gt;#NOM_SITE&lt;/a&gt;&lt;/div&gt;]
[&lt;div class=&quot;forum-repondre-message&quot;&gt;&lt;a href=&quot;forum.php3?(#PARAMETRES_FORUM)&quot;&gt;&lt;:repondre_message:&gt;&lt;/a&gt;&lt;/div&gt;]
&lt;/div&gt;
&lt;/div&gt;

&lt;B_forums_fils&gt;
	&lt;ul&gt;
	&lt;BOUCLE_forums_fils(FORUMS){id_parent}{par date}&gt;

	&lt;li&gt;
	&lt;div class=&quot;forum&quot;&gt;
	&lt;div class=&quot;forum-chapo&quot;&gt;
	&lt;div class=&quot;forum-titre&quot;&gt;&lt;a name=&quot;forum#ID_FORUM&quot;&gt;&lt;/a&gt;#TITRE&lt;/div&gt;
	[(#DATE|affdate)][, &lt;:par_auteur:&gt; &lt;A HREF=&quot;mailto:#EMAIL&quot;&gt;(#NOM)&lt;/A&gt;]
	&lt;/div&gt;
	&lt;div class=&quot;forum-item&quot;&gt;
	#TEXTE
	[&lt;div class=&quot;forum-titre&quot;&gt;&lt;a href=&quot;(#URL_SITE)&quot; class=&quot;spip_out&quot;&gt;#NOM_SITE&lt;/a&gt;&lt;/div&gt;]
	[&lt;div class=&quot;forum-repondre-message&quot;&gt;&lt;a href=&quot;forum.php3?(#PARAMETRES_FORUM)&quot;&gt;&lt;:repondre_message:&gt;&lt;/a&gt;&lt;/div&gt;]
	&lt;/div&gt;

	&lt;/div&gt;

	&lt;BOUCLE_Forums_Boucle(boucle_forums_fils)&gt;&lt;/BOUCLE_Forums_Boucle&gt;
	&lt;/li&gt;

	&lt;/BOUCLE_forums_fils&gt;
	&lt;/ul&gt;
&lt;/B_forums_fils&gt;

&lt;/div&gt;
&lt;/li&gt;
&lt;/BOUCLE_forums&gt;

&lt;/ul&gt;
&lt;/B_forums&gt;

&lt;/div&gt;


#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;


&lt;/BOUCLE_article_principal&gt;
&lt;:aucun_article:&gt;
&lt;//B_article_principal&gt;

--- NEW FILE: forum.php3 ---
&lt;?php
$fond = &quot;forum&quot;;
$delais = 3600;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: resume-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[#NOM_SITE_SPIP] &lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;print, projection, screen, tv&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;

&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;


&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]

&lt;!-- Liens des forums --&gt;
&lt;B_forums_liens&gt;
&lt;div class=&quot;menu&quot; title=&quot;&lt;:derniers_messages_forum:&gt;&quot;&gt;
	&lt;h1 class=&quot;structure&quot;&gt;&lt;:messages_recents:&gt;&lt;/h1&gt;
	&lt;div class=&quot;forums&quot;&gt;
	&lt;div class=&quot;menu-titre&quot;&gt;
	&lt;:derniers_commentaires:&gt;
	&lt;/div&gt;
	&lt;ul&gt;
&lt;BOUCLE_forums_liens(FORUMS){plat}{par date}{inverse}{0,15}&gt;
        &lt;li class=&quot;menu-item&quot;&gt;[&lt;i&gt;(#DATE|affdate_court)&lt;/i&gt;:]
        &lt;a href=&quot;#URL_FORUM&quot;&gt;#TITRE&lt;/a&gt;
        &lt;/li&gt;
&lt;/BOUCLE_forums_liens&gt;
	&lt;/ul&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;/B_forums_liens&gt;


&lt;/div&gt;

&lt;!-- Une : articles les plus populaires --&gt;

&lt;div id=&quot;principal&quot; class=&quot;contenu&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:articles_populaires:&gt;&lt;/h1&gt;

&lt;BOUCLE_article_un(ARTICLES) {par popularite} {inverse} {0,2}&gt;
	[(#LOGO_ARTICLE_RUBRIQUE|right|#URL_ARTICLE)]
	[&lt;div class=&quot;surtitre&quot;&gt;(#SURTITRE)&lt;/div&gt;]
	&lt;h2 class=&quot;titre-extrait&quot;&gt;&lt;a href=&quot;#URL_ARTICLE&quot;&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	[&lt;div class=&quot;surtitre&quot;&gt;(#SOUSTITRE)&lt;/div&gt;]
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;B_auteurs_un&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs_un(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs_un&gt;
	[&lt;br&gt;&lt;:popularite:&gt;&nbsp;: &lt;span class=&quot;important&quot;&gt;(#POPULARITE)&lt;/span&gt; %]
	&lt;/div&gt;
	[&lt;div class=&quot;texte&quot;&gt;&lt;div class=&quot;extrait&quot;&gt;(#INTRODUCTION)&lt;/div&gt;&lt;/div&gt;]
	&lt;br&gt;
&lt;/BOUCLE_article_un&gt;


	&lt;div class=&quot;encart&quot;&gt;

	&lt;!-- &lt;:sur_web:&gt; --&gt;

	&lt;h1 class=&quot;structure&quot;&gt;&lt;:nouveautes_web:&gt;&lt;/h1&gt;

	&lt;B_syndic&gt;
	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;divers&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:sur_web:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_syndic(SYNDIC_ARTICLES) {par date} {inverse} {0,15}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		[&lt;i&gt;(#DATE|affdate_court)&lt;/i&gt;:]
		&lt;a href=&quot;#URL_ARTICLE&quot;&gt;[(#TITRE*)]&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_syndic&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_syndic&gt;

	&lt;/div&gt;


&lt;h1 class=&quot;structure&quot;&gt;&lt;:articles_populaires:&gt; (&lt;:suite:&gt;)&lt;/h1&gt;

&lt;!-- Articles les plus populaires (suite) --&gt;

&lt;BOUCLE_articles_populaires(ARTICLES) {par popularite} {inverse} {2,8}&gt;
	&lt;h2&gt;&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;B_auteurs_recents&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs_recents(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs_recents&gt;&lt;br&gt;
	&lt;:popularite:&gt;&nbsp;: &lt;span class=&quot;important&quot;&gt;#POPULARITE&lt;/span&gt; %
	&lt;/div&gt;
	&lt;br&gt;
&lt;/BOUCLE_articles_populaires&gt;


&lt;/div&gt;
#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;



--- NEW FILE: puce.gif ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: carto.php3 ---
&lt;?php

$fond = &quot;carto&quot;;
$delais = 24*3600;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: inc-formulaire_ecrire_auteur.php3 ---
&lt;?php

global $balise_FORMULAIRE_ECRIRE_AUTEUR_collecte ;
$balise_FORMULAIRE_ECRIRE_AUTEUR_collecte = array('id_auteur',
			     'email',
			     'sujet_message_auteur',
			     'texte_message_auteur',
			     'email_message_auteur'
);

function balise_FORMULAIRE_ECRIRE_AUTEUR_stat($args, $filtres)
{
  list($id_auteur, $mail, $sujet, $texte, $adres) = $args;
  return (!email_valide($mail) ? '' :
	  array($id_auteur, $mail,$sujet, $texte, $adres));
}

function balise_FORMULAIRE_ECRIRE_AUTEUR_dyn($id_auteur, $mail, $sujet, $texte, $adres) {
  global $spip_lang_rtl;
	include_ecrire(&quot;inc_lang.php3&quot;); // pour spip_lang_rtl 
	if (!$spip_lang_rt) $spip_lang_rtl = '_rtl'; # INDISPENSABLE cf skel
	$mailko = $texte &amp;&amp; !email_valide($adres);
	$validable = $texte &amp;&amp; $sujet &amp;&amp; (!$mailko);

	if ($validable &amp;&amp; ($GLOBALS['valide'] == _T('form_prop_confirmer_envoi'))) { 
		$texte .= &quot;\n\n-- &quot;._T('envoi_via_le_site').&quot; &quot;.lire_meta('nom_site').&quot; (&quot;.lire_meta('adresse_site').&quot;/) --\n&quot;;
		include_ecrire(&quot;inc_mail.php3&quot;);
		envoyer_mail($mail, $sujet, $texte, $adres,
				&quot;X-Originating-IP: &quot;.$GLOBALS['REMOTE_ADDR']);
		return _T('form_prop_message_envoye');
	    }


	// repartir de zero pour les boutons car clean_link a pu etre utilisee

	$link = new Link;

	$link-&gt;delVar('sujet_message_auteur');
	$link-&gt;delVar('texte_message_auteur');
	$link-&gt;delVar('email_message_auteur');
	$link-&gt;delVar('id_auteur');
	return 
	  array('formulaire_ecrire_auteur', 0,
		array(
		      'action' =&gt; $link-&gt;getUrl(),
		      'id_auteur' =&gt; $id_auteur,
		      'mailko' =&gt; $mailko ? $spip_lang_rtl : '',
		      'mail' =&gt; $adres,
		      'sujetko' =&gt; ($texte &amp;&amp; !$sujet) ? $spip_lang_rtl : '',
		      'sujet' =&gt; $sujet,
		      'texte' =&gt; $texte,
		      'valide' =&gt; ($validable ?
				    _T('form_prop_confirmer_envoi') :
				    _T('form_prop_envoyer'))
		      )
		);
}
?&gt;

--- NEW FILE: formulaire_admin-dist.html ---
&lt;div class=&quot;spip-admin-float&quot;&gt;
&lt;div class=&quot;spip-admin-bloc&quot; dir='#LANG_DIR'&gt;
&lt;div class=&quot;spip-admin&quot;&gt;
	&lt;ul&gt;[
	&lt;li&gt;&lt;a href='ecrire/articles.php3?id_article=(#HTTP_VARS{id_article})' class='spip-admin-boutons'&gt;&lt;:admin_modifier_article:&gt; ([(#HTTP_VARS{id_article})])&lt;/a&gt;&lt;/li&gt;][
	&lt;li&gt;&lt;a href='ecrire/breves_voir.php3?id_breve=(#HTTP_VARS{id_breve})' class='spip-admin-boutons'&gt;&lt;:admin_modifier_breve:&gt; ([(#HTTP_VARS{id_breve})])&lt;/a&gt;&lt;/li&gt;][
	&lt;li&gt;&lt;a href='ecrire/naviguer.php3?id_rubrique=(#HTTP_VARS{id_rubrique})' class='spip-admin-boutons'&gt;&lt;:admin_modifier_rubrique:&gt; ([(#HTTP_VARS{id_rubrique})])&lt;/a&gt;&lt;/li&gt;][
	&lt;li&gt;&lt;a href='ecrire/mots_edit.php3?id_mot=(#HTTP_VARS{id_mot})' class='spip-admin-boutons'&gt;&lt;:admin_modifier_mot:&gt; ([(#HTTP_VARS{id_mot})])&lt;/a&gt;&lt;/li&gt;][
	&lt;li&gt;&lt;a href='ecrire/auteurs_edit.php3?id_auteur=(#HTTP_VARS{id_auteur})' class='spip-admin-boutons'&gt;&lt;:admin_modifier_auteur:&gt; ([(#HTTP_VARS{id_auteur})])&lt;/a&gt;&lt;/li&gt;]
	&lt;li&gt;&lt;a href='[(#HTTP_VARS{action})]var_mode=recalcul' class='spip-admin-boutons'&gt;&lt;:admin_recalculer:&gt;[(#HTTP_VARS{use_cache})]&lt;/a&gt;&lt;/li&gt;[
	&lt;li&gt;&lt;a href='ecrire/(#HTTP_VARS{statistiques})[id_article=(#HTTP_VARS{id_article})]' class='spip-admin-boutons'&gt;&lt;:info_visites:&gt;&nbsp;[(#HTTP_VARS{visites})];&nbsp;&lt;:info_popularite_5:&gt;&nbsp;[(#HTTP_VARS{popularite})]&lt;/a&gt;&lt;/li&gt;][
	&lt;li&gt;&lt;a href='[(#HTTP_VARS{action})]var_mode=(#HTTP_VARS{debug})' class='spip-admin-boutons'&gt;Debug&lt;/a&gt;&lt;/li&gt;]
	&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

--- NEW FILE: inc-menu_lang.php3 ---
&lt;?php

global $balise_MENU_LANG_collecte;
$balise_MENU_LANG_collecte = array('menu_lang');

// s'il n'y a qu'une langue eviter definitivement la balise ?php 

function balise_MENU_LANG_stat ($args, $filtres)
{
  if (!strpos(lire_meta('langues_multilingue'),',')) return '';
  return $args;
}

// normalement $opt sera toujours non vide suite au test ci-dessus

function balise_MENU_LANG_dyn($default)
{
  include_ecrire(&quot;inc_lang.php3&quot;);
  $opt = liste_options_langues('var_lang', $default);
  if (!$opt) return '';
  include_local(&quot;inc-menu_lang_ecrire.php3&quot;);
  return menu_lang_pour_tous('var_lang', $opt);
}
?&gt;

--- NEW FILE: plan.php3 ---
&lt;?php

$fond = &quot;plan&quot;;
$delais = 2 * 3600;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: backend-breves-dist.html ---
&lt;?php echo '&lt;'.'?xml version=&quot;1.0&quot; encoding=&quot;#CHARSET&quot;?'.&quot;&gt;\n&quot;; ?&gt;
&lt;rss version=&quot;0.91&quot; xmlns:dc=&quot;<A HREF="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</A>&quot;&gt;

&lt;channel&gt;

	&lt;title&gt;[(#NOM_SITE_SPIP|texte_backend)]&lt;/title&gt;
	&lt;link&gt;#URL_SITE_SPIP/&lt;/link&gt;
	&lt;description&gt;&lt;/description&gt;
	&lt;language&gt;#LANG&lt;/language&gt;

	&lt;image&gt;
		&lt;title&gt;[(#NOM_SITE_SPIP|texte_backend)]&lt;/title&gt;
		&lt;url&gt;#URL_SITE_SPIP[/(#LOGO_SITE_SPIP||extraire_attribut{src})]&lt;/url&gt;
		&lt;link&gt;#URL_SITE_SPIP/&lt;/link&gt;
		&lt;description&gt;&lt;/description&gt;
	&lt;/image&gt;

	&lt;BOUCLE_breves(BREVES){id_rubrique ?}{lang ?}{par date}{inverse}{0,10}&gt;
	&lt;item&gt;
		&lt;title&gt;[(#TITRE|texte_backend)]&lt;/title&gt;
		&lt;link&gt;#URL_SITE_SPIP/#URL_BREVE&lt;/link&gt;
		&lt;date&gt;#DATE&lt;/date&gt;
		&lt;description&gt;[&lt;img src=&quot;#URL_SITE_SPIP/(#LOGO_BREVE||extraire_attribut{src})&quot; align=&quot;left&quot; hspace=&quot;4&quot; vspace=&quot;4&quot;&gt; ][(#TEXTE|texte_backend)]&lt;/description&gt;
		&lt;dc:date&gt;[(#DATE|date_iso)]&lt;/dc:date&gt;
		&lt;dc:format&gt;text/html&lt;/dc:format&gt;
		&lt;dc:language&gt;#LANG&lt;/dc:language&gt;
	&lt;/item&gt;
	&lt;/BOUCLE_breves&gt;

&lt;/channel&gt;

&lt;/rss&gt;

--- NEW FILE: spip_acces_doc.php3 ---
&lt;?
# script d'acces aux documents joints
# doit etre appele avec un de ces 2 parametres de GET:
# - id_document 
# - file 
# il verifie soit que le demandeur est authentifie
# soit que le fichier est joint &#224; au moins 1 article, breve ou rubrique

$id_document = ($_GET['id_document']);
$file = urldecode($_GET['file']);
if (strpos($file,'../') !== false)
  $refus = 1;
else
  {
    $refus = false;
    include (&quot;ecrire/inc_version.php3&quot;);
    include_local(_FILE_CONNECT);
    include_ecrire(&quot;inc_meta.php3&quot;);
    include_ecrire(&quot;inc_session.php3&quot;);

    global $auteur_session;
    if ($cookie_session = $HTTP_COOKIE_VARS['spip_session']) 
      {
	if (verifier_session($cookie_session)) 
	  {
	    if ($auteur_session['statut'] == '0minirezo' 
		OR $auteur_session['statut'] == '1comite') 
	      $auth_login = $auteur_session['login'];
	  }
      }

    if (!$id_document) {
      $id_document = @spip_fetch_array(spip_query(&quot;select id_document from spip_documents as documents where documents.fichier='&quot;.$file.&quot;'&quot;));
      if (!$id_document) $refus = 2;
      $id_document = $id_document['id_document'];
    } else {
      $file = @spip_fetch_array(spip_query(&quot;select fichier from spip_documents as documents where id_document='&quot;. $id_document .&quot;'&quot;));
      if (!$file) $refus = 3;
      $file = $file['fichier'];
    }
  }

if (!$auth_login &amp;&amp; !$refus) { 
    if (!spip_num_rows(spip_query(&quot;select articles.id_article
from spip_documents_articles as rel_articles, spip_articles as articles 
where rel_articles.id_article = articles.id_article AND
articles.statut = 'publie' AND rel_articles.id_document ='&quot;.
			       $id_document .
				&quot;' LIMIT 1&quot;))) {
      if (!spip_num_rows(spip_query(&quot;select rubriques.id_rubrique
from spip_documents_rubriques as rel_rubriques, spip_rubriques as rubriques 
where rel_rubriques.id_rubrique = rubriques.id_rubrique AND
rubriques.statut = 'publie' AND rel_rubriques.id_document ='&quot;.
			       $id_document .
				  &quot;' LIMIT 1&quot;))) {
	if (!spip_num_rows(spip_query(&quot;select breves.id_breve
from spip_documents_breves as rel_breves, spip_breves as breves 
where rel_breves.id_breve = breves.id_breve AND
breves.statut = 'publie' AND rel_breves.id_document ='&quot;.
			       $id_document .
				  &quot;' LIMIT 1&quot;)))
	  $refus = 4; } } }

if (!$refus)
  {
     header(&quot;Content-Type: &quot;. mime_content_type($file));
     header(&quot;Content-Length: &quot;. filesize($file));
     header(&quot;Content-Disposition: attachment; filename=\&quot;&quot;. basename($file) .&quot;\&quot;;&quot;);
     header(&quot;Content-Transfer-Encoding: binary&quot;);
     readfile($file);
   }
 else
   spip_log(&quot;Acces refuse ($refus) au document &quot; . ($_GET['id_document']) . ': ' .($_GET['file']));

?&gt;
--- NEW FILE: index.php ---
&lt;?php
	// pour hebergeurs ayant oublie de configurer DirectoryIndex index.php3
	include (&quot;index.php3&quot;);
?&gt;

--- NEW FILE: inc-boucles.php3 ---
&lt;?php

//
// Ce fichier definit les boucles standard de SPIP
//

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_BOUCLES&quot;)) return;
define(&quot;_INC_BOUCLES&quot;, &quot;1&quot;);


//
// Boucle sur une table hors SPIP
//
function boucle_DEFAUT($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$boucle-&gt;from[] =  $boucle-&gt;type_requete . &quot; AS &quot; . $boucle-&gt;type_requete;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(BOUCLE)&gt; boucle dite recursive
//
function boucle_BOUCLE_dist($id_boucle, &amp;$boucles) {

	    return &quot;\n	\$t0 = &quot; . $boucles[$id_boucle]-&gt;return . &quot;;&quot;;
}

//
// &lt;BOUCLE(ARTICLES)&gt;
//
function boucle_ARTICLES_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;articles AS $id_table&quot;;
	if (!$GLOBALS['var_preview']) {
		$boucle-&gt;where[] = &quot;$id_table.statut='publie'&quot;;
		if (lire_meta(&quot;post_dates&quot;) == 'non')
			$boucle-&gt;where[] = &quot;$id_table.date &lt; NOW()&quot;;
	} else
		$boucle-&gt;where[] = &quot;$id_table.statut IN ('publie','prop')&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}

//
// &lt;BOUCLE(AUTEURS)&gt;
//
function boucle_AUTEURS_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;auteurs AS $id_table&quot;;
	// Si pas de lien avec un article, selectionner
	// uniquement les auteurs d'un article publie
	if (!$GLOBALS['var_preview'])
	if (!$boucle-&gt;lien AND !$boucle-&gt;tout) {
		$boucle-&gt;from[] =  &quot;auteurs_articles AS lien&quot;;
		$boucle-&gt;from[] =  &quot;articles AS articles&quot;;
		$boucle-&gt;where[] = &quot;lien.id_auteur=$id_table.id_auteur&quot;;
		$boucle-&gt;where[] = 'lien.id_article=articles.id_article';
		$boucle-&gt;where[] = &quot;articles.statut='publie'&quot;;
		$boucle-&gt;group =  $boucle-&gt;id_table . '.' . $boucle-&gt;primary;
	}
	// pas d'auteurs poubellises
	$boucle-&gt;where[] = &quot;NOT($id_table.statut='5poubelle')&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}

//
// &lt;BOUCLE(BREVES)&gt;
//
function boucle_BREVES_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;breves AS $id_table&quot;;
	if (!$GLOBALS['var_preview'])
		$boucle-&gt;where[] = &quot;$id_table.statut='publie'&quot;;
	else
		$boucle-&gt;where[] = &quot;$id_table.statut IN ('publie','prop')&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(FORUMS)&gt;
//
function boucle_FORUMS_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;forum AS $id_table&quot;;
	// Par defaut, selectionner uniquement les forums sans pere
	if (!$boucle-&gt;tout AND !$boucle-&gt;plat) 
		{
	$boucle-&gt;where[] = &quot;$id_table.id_parent=0&quot;;
		}
	$boucle-&gt;where[] = &quot;$id_table.statut='publie'&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(SIGNATURES)&gt;
//
function boucle_SIGNATURES_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;signatures AS $id_table&quot;;
	$boucle-&gt;from[] =  &quot;petitions AS petitions&quot;;
	$boucle-&gt;from[] =  &quot;articles articles&quot;;
	$boucle-&gt;where[] = &quot;petitions.id_article=articles.id_article&quot;;
	$boucle-&gt;where[] = &quot;petitions.id_article=$id_table.id_article&quot;;
	$boucle-&gt;where[] = &quot;$id_table.statut='publie'&quot;;
	$boucle-&gt;group =  $boucle-&gt;id_table . '.' . $boucle-&gt;primary;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(DOCUMENTS)&gt;
//
function boucle_DOCUMENTS_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;documents AS $id_table&quot;;
	$boucle-&gt;from[] =  &quot;types_documents AS types_documents&quot;;
	$boucle-&gt;where[] = &quot;$id_table.id_type=types_documents.id_type&quot;;
	$boucle-&gt;where[] = &quot;$id_table.taille &gt; 0&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(TYPES_DOCUMENTS)&gt;
//
function boucle_TYPES_DOCUMENTS_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;types_documents AS $id_table&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(GROUPES_MOTS)&gt;
//
function boucle_GROUPES_MOTS_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;groupes_mots AS $id_table&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(MOTS)&gt;
//
function boucle_MOTS_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;mots AS $id_table&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(RUBRIQUES)&gt;
//
function boucle_RUBRIQUES_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;rubriques AS $id_table&quot;;
	if (!$GLOBALS['var_preview'])
		if (!$boucle-&gt;tout) $boucle-&gt;where[] = &quot;$id_table.statut='publie'&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(HIERARCHIE)&gt;
//
function boucle_HIERARCHIE_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;rubriques AS $id_table&quot;;

	// Si la boucle mere est une boucle RUBRIQUES il faut ignorer la feuille
	// sauf si le critere {tout} est present (cf. inc-html-squel)
	$exclure_feuille = ($boucle-&gt;tout ? 'false' : 'true');

	// $hierarchie sera calculee par une fonction de inc-calcul-outils
	$boucle-&gt;where[] = 'id_rubrique IN ($hierarchie)';
	$boucle-&gt;select[] = 'FIND_IN_SET(id_rubrique, \'$hierarchie\')-1 AS rang';
	$boucle-&gt;order = 'rang';
	$boucle-&gt;hierarchie = '$hierarchie = calculer_hierarchie('
	. calculer_argument_precedent($boucle-&gt;id_boucle, 'id_rubrique', $boucles)
	. ', '
	. $exclure_feuille
	. ');';
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(SYNDICATION)&gt;
//
function boucle_SYNDICATION_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;syndic AS $id_table&quot;;
	$boucle-&gt;where[] = &quot;$id_table.statut='publie'&quot;;
	return calculer_boucle($id_boucle, $boucles); 
}


//
// &lt;BOUCLE(SYNDIC_ARTICLES)&gt;
//
function boucle_SYNDIC_ARTICLES_dist($id_boucle, &amp;$boucles) {
	$boucle = &amp;$boucles[$id_boucle];
	$id_table = $boucle-&gt;id_table;
	$boucle-&gt;from[] =  &quot;syndic_articles  AS $id_table&quot;;
	$boucle-&gt;from[] =  &quot;syndic AS syndic&quot;;
	$boucle-&gt;where[] = &quot;$id_table.id_syndic=syndic.id_syndic&quot;;
	$boucle-&gt;where[] = &quot;$id_table.statut='publie'&quot;;
	$boucle-&gt;where[] = &quot;syndic.statut='publie'&quot;;
	$boucle-&gt;select[]='syndic.nom_site AS nom_site'; # derogation zarbi
	$boucle-&gt;select[]='syndic.url_site AS url_site'; # idem
	return calculer_boucle($id_boucle, $boucles); 
}


?&gt;

--- NEW FILE: inc-compilo.php3 ---
&lt;?php

//
// Fichier principal du compilateur de squelettes
//

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_COMPILO&quot;)) return;
define(&quot;_INC_COMPILO&quot;, &quot;1&quot;);


// Definition de la structure $p, et fonctions de recherche et de reservation
// dans l'arborescence des boucles
include_local(&quot;inc-compilo-index.php3&quot;);  # index ? structure ? pile ?

// definition des boucles
include_local(&quot;inc-boucles.php3&quot;);

// definition des criteres
include_local(&quot;inc-criteres.php3&quot;);

// definition des balises
include_local(&quot;inc-balises.php3&quot;);

// definition de l'API
include_local(&quot;inc-compilo-api.php3&quot;);

# definition des tables
include_ecrire('inc_serialbase.php3');

// outils pour debugguer le compilateur
#include_local(&quot;inc-compilo-debug.php3&quot;); # desactive

//
// Calculer un &lt;INCLURE()&gt;
//
function calculer_inclure($fichier, $params, $id_boucle, &amp;$boucles) {
	global $dossier_squelettes;

	$l = array();
	if ($params) {
		foreach($params as $var =&gt; $val) {
			if ($val) {
			  $val = trim($val);
			  $val = ereg_replace('^[&quot;\'](.*)[&quot;\']$', &quot;\\1&quot;,$val);
			  $l[] = &quot;\'$var\' =&gt; \'&quot; .
				 addslashes(calculer_param_dynamique($val,
								     $boucles,
								     $idb)) .
				  &quot;\'&quot;;
			}
			else {
			// Cas de la langue : passer $spip_lang
			  // et non table.lang (car depend de {lang_select})
				if ($var =='lang')
					$l[] = &quot;\'lang\' =&gt; \''.\$GLOBALS[\&quot;spip_lang\&quot;].'\'&quot;;
				else
					$l[] = &quot;\'$var\' =&gt; \'' . addslashes(&quot; . index_pile($id_boucle, $var, $boucles) . &quot;) .'\'&quot;;
				}
			}
	}
	return &quot;\n'&lt;&quot;.
		&quot;?php\n\t\$contexte_inclus = array(&quot; .
		join(&quot;, &quot;,$l) .
		&quot;);\n\t\$fichier_inclus = \'$fichier\';\n&quot; .
		(($dossier_squelettes) ?
		(&quot;
			if (@file_exists(\'$dossier_squelettes/$fichier\')){
				include(\'$dossier_squelettes/$fichier\');
			} else {
				include(\'$fichier\');
			} &quot; ) :
		(&quot;\tinclude(\'$fichier\');&quot;)) .
		&quot;\n?'.&quot; . &quot;'&gt;'&quot;;
}


//
// Traite une partie &quot;texte&quot; d'un squelette (c'est-a-dire tout element
// qui ne contient ni balise, ni boucle, ni &lt;INCLURE()&gt; ; le transforme
// en une EXPRESSION php (qui peut etre l'argument d'un Return ou la
// partie droite d'une affectation). Ici sont analyses les elements
// multilingues des squelettes : &lt;:xxx:&gt; et &lt;multi&gt;[fr]coucou&lt;/multi&gt;
//
function calculer_texte($texte, $id_boucle, &amp;$boucles, $id_mere) {
	$code = &quot;'&quot;.ereg_replace(&quot;([\\\\'])&quot;, &quot;\\\\1&quot;, $texte).&quot;'&quot;;

	// bloc multi
	if (eregi('&lt;multi&gt;', $texte)) {
		$ouvre_multi = 'extraire_multi(';
		$ferme_multi = ')';
	} else {
		$ouvre_multi = $ferme_multi = '';
	}

	// Reperer les balises de traduction &lt;:toto:&gt;
	while (eregi(&quot;&lt;:(([a-z0-9_]+):)?([a-z0-9_]+)(\|[^&gt;]*)?:&gt;&quot;, $code, $match)) {
		//
		// Traiter la balise de traduction multilingue
		//
		$chaine = strtolower($match[3]);
		if (!($module = $match[2]))
			// ordre standard des modules a explorer
			$module = 'local/public/spip';
		$c = new Champ;
		$c-&gt;code = &quot;_T('$module:$chaine')&quot;;
		$c-&gt;fonctions = explode('|', substr($match[4],1));
		$c-&gt;id_boucle = $id_boucle;
		$c-&gt;boucles = &amp;$boucles;
		$c-&gt;statut = 'php'; // ne pas manger les espaces avec trim()
		$c = applique_filtres($c);
		$code = str_replace($match[0], &quot;'$ferme_multi.$c.$ouvre_multi'&quot;, $code);
	}

	return $ouvre_multi . $code . $ferme_multi;
}


//
// calculer_boucle() produit le corps PHP d'une boucle Spip 
// (sauf les recursives)
// Ce corps est essentiellement une boucle while
// remplissant une variable $t0 retournee en valeur
//
function calculer_boucle($id_boucle, &amp;$boucles) {

	$boucle = &amp;$boucles[$id_boucle];
	$type_boucle = $boucle-&gt;type_requete;
	$return = $boucle-&gt;return;
	$id_table = $boucle-&gt;id_table;
	$primary = $boucle-&gt;primary;
	$id_field = $id_table . &quot;.&quot; . $primary;
	// La boucle doit-elle selectionner la langue ?
	// 1. par defaut, les boucles suivantes le font
	// &quot;peut-etre&quot;, c'est-a-dire si forcer_lang == false.
	if (
		$type_boucle == 'articles'
		OR $type_boucle == 'rubriques'
		OR $type_boucle == 'hierarchie'
		OR $type_boucle == 'breves'
	) $lang_select = 'maybe';
	else
		$lang_select = false;

	// 2. a moins d'une demande explicite
	if ($boucle-&gt;lang_select == 'oui') $lang_select = 'oui';
	if ($boucle-&gt;lang_select == 'non') $lang_select = false;

	// Penser a demander le champ lang
	if ($lang_select)
		$boucle-&gt;select[] = 
			// cas des tables SPIP
			($id_table ? $id_table.'.' : '')
			// cas general ({lang_select} sur une table externe)
			. 'lang';

	// Calculer les invalideurs si c'est une boucle non constante
	$constant = ereg(&quot;^\(?'[^']*'\)?$&quot;,$return);

	if ((!$primary) || $constant)
		$invalide = '';
	else {
		$boucle-&gt;select[] = $id_field;

		$invalide = &quot;\n			\$Cache['$primary']&quot;;
		if ($primary != 'id_forum')
			$invalide .= &quot;[\$Pile[\$SP]['$primary']] = 1;&quot;;
		else
			$invalide .= &quot;[calcul_index_forum(&quot; . 
				// Retournera 4 [$SP] mais force la demande du champ a MySQL
				index_pile($id_boucle, 'id_article', $boucles) . ',' .
				index_pile($id_boucle, 'id_breve', $boucles) .  ',' .
				index_pile($id_boucle, 'id_rubrique', $boucles) .',' .
				index_pile($id_boucle, 'id_syndic', $boucles) .  &quot;)] = 1;&quot;;
		$invalide .= ' // invalideurs';
	}

	// Cas {1/3} {1,4} {n-2,1}...

	$flag_cpt = $boucle-&gt;mode_partie || // pas '$compteur' a cause du cas 0
		strpos($return,'compteur_boucle');

	//
	// Creer le debut du corps de la boucle :
	//
	$debut = '';
	if ($flag_cpt)
		$debut = &quot;\n		\$compteur_boucle++;&quot;;

	if ($boucle-&gt;mode_partie)
		$debut .= '
		if ($compteur_boucle-1 &gt;= $debut_boucle
		AND $compteur_boucle-1 &lt;= $fin_boucle) {';
	
	if ($lang_select AND !$constant) {
		$selecteur = 
			(($lang_select == 'maybe') ? 
			'if (!$GLOBALS[&quot;forcer_lang&quot;]) ':'')
			. 'if ($x = $Pile[$SP][&quot;lang&quot;]) $GLOBALS[\'spip_lang\'] = $x;'
			. ' // lang_select';
		$debut .= &quot;\n			&quot;.$selecteur;
	}

	$debut .= $invalide;

	if ($boucle-&gt;doublons)
		$debut .= &quot;\n			\$doublons['&quot;.$boucle-&gt;doublons.&quot;'] .= ','. &quot; .
		index_pile($id_boucle, $primary, $boucles)
		. &quot;; // doublons&quot;;

	// gestion optimale des separateurs et des boucles constantes

	$corps = $debut . 
		((!$boucle-&gt;separateur) ? 
			(($constant &amp;&amp; !$debut) ? $return :
			 	(&quot;\n\t\t&quot; . '$t0 .= ' . $return . &quot;;&quot;)) :
		 (&quot;\n\t\t\$t1 &quot; .
			((strpos($return, '$t1.') === 0) ? 
			 (&quot;.=&quot; . substr($return,4)) :
			 ('= ' . $return)) .
		  &quot;;\n\t\t&quot; .
		  '$t0 .= (($t1 &amp;&amp; $t0) ? \'' . $boucle-&gt;separateur .
		  &quot;' : '') . \$t1;&quot;));
     
	// Fin de parties
	if ($boucle-&gt;mode_partie)
		$corps .= &quot;\n		}\n&quot;;

	$texte = '';

	// Gestion de la hierarchie (voir inc-boucles.php3)
	if ($boucle-&gt;hierarchie)
		$texte .= &quot;\n	&quot;.$boucle-&gt;hierarchie;


	// si le corps est une constante, ne pas appeler le serveur N fois!
	if (ereg(&quot;^\(?'[^']*'\)?$&quot;,$corps)) {
		// vide ?
		if (($corps == &quot;''&quot;) || ($corps == &quot;('')&quot;)) {
			if (!$boucle-&gt;numrows)
				return 'return &quot;&quot;;';
			else
				$corps = &quot;&quot;;
		} else {
			$boucle-&gt;numrows = true;
			$corps = &quot;\n		&quot;.'for($x=$Numrows[&quot;'.$id_boucle.'&quot;];$x&gt;0;$x--)
			$t0 .= ' . $corps .';';
		}
	} else {

	$corps = '

	// RESULTATS
	while ($Pile[$SP] = @spip_abstract_fetch($result,&quot;' .
		  $boucle-&gt;sql_serveur .
		  '&quot;)) {'. &quot;\n$corps\n	}\n&quot;;
		 

		// Memoriser la langue avant la boucle pour la restituer apres
		if ($lang_select) {
			$texte .= &quot;\n	\$old_lang = \$GLOBALS['spip_lang'];&quot;;
			$corps .= &quot;\n	\$GLOBALS['spip_lang'] = \$old_lang;&quot;;
		}
	}

	//
	// Requete
	//

	// hack critere recherche : ignorer la requete en cas de hash vide
	// Recherche : recuperer les hash a partir de la chaine de recherche
	if ($boucle-&gt;hash) {
		$init =  '
	// RECHERCHE
	list($rech_select, $rech_where) = prepare_recherche($GLOBALS[&quot;recherche&quot;], &quot;'.$boucle-&gt;primary.'&quot;, &quot;'.$boucle-&gt;id_table.'&quot;);
	if ($rech_select) ';
	}

	else $init = '';

	$init .= &quot;\n\n	// REQUETE
	\$result = spip_abstract_select(\n\t\tarray(\&quot;&quot;. 
		# En absence de champ c'est un decompte : 
	  	# prendre la primary pour avoir qqch
	  	# (COUNT incompatible avec le cas general
		(($boucle-&gt;select) ? 
			join(&quot;\&quot;,\n\t\t\&quot;&quot;, array_unique($boucle-&gt;select)) :
			$id_field) .
		'&quot;), # SELECT
		array(&quot;' .
		join('&quot;,&quot;', array_unique($boucle-&gt;from)) .
		'&quot;), # FROM
		array(' .
		(!$boucle-&gt;where ? '' : ( '&quot;' . join('&quot;,
		&quot;', $boucle-&gt;where) . '&quot;')) .
		&quot;), # WHERE
		'&quot;.addslashes($boucle-&gt;group).&quot;', # GROUP
		&quot; . ($boucle-&gt;order ? $boucle-&gt;order : &quot;''&quot;) .&quot;, # ORDER
		&quot; . (strpos($boucle-&gt;limit, 'intval') === false ?
			&quot;'&quot;.$boucle-&gt;limit.&quot;'&quot; :
			$boucle-&gt;limit). &quot;, # LIMIT
		'&quot;.$boucle-&gt;sous_requete.&quot;', # sous
		&quot;.$boucle-&gt;compte_requete.&quot;, # compte
		'&quot;.$id_table.&quot;', # table
		'&quot;.$boucle-&gt;id_boucle.&quot;', # boucle
		'&quot;.$boucle-&gt;sql_serveur.&quot;'); # serveur&quot;;

	$init .= &quot;\n	&quot;.'$t0 = &quot;&quot;;
	$SP++;';
	if ($flag_cpt)
		$init .= &quot;\n	\$compteur_boucle = 0;&quot;;


	if ($boucle-&gt;mode_partie)
		$init .= calculer_parties($boucle-&gt;partie,
			$boucle-&gt;mode_partie,
			$boucle-&gt;total_parties,
			$id_boucle);
	else if ($boucle-&gt;numrows)
		$init .= &quot;\n	\$Numrows['&quot; .
			$id_boucle .
			&quot;'] = @spip_abstract_count(\$result,'&quot; .
			$boucle-&gt;sql_serveur .
			&quot;');&quot;;

	//
	// Conclusion et retour
	//
	$conclusion = &quot;\n	@spip_abstract_free(\$result,'&quot; .
	  $boucle-&gt;sql_serveur . &quot;');&quot;;

	return $texte . $init . $corps . $conclusion;
}


//
// fonction traitant les criteres {1,n} (analyses dans inc-criteres)
//
## a deplacer dans inc-criteres ??
function calculer_parties($partie, $mode_partie, $total_parties, $id_boucle) {

	// Notes :
	// $debut_boucle et $fin_boucle sont les indices SQL du premier
	// et du dernier demandes dans la boucle : 0 pour le premier,
	// n-1 pour le dernier ; donc total_boucle = 1 + debut - fin

	// nombre total avant partition
	$retour = &quot;\n\n	// Partition\n	&quot; .
		'$nombre_boucle = @spip_abstract_count($result,&quot;' .
		$boucle-&gt;sql_serveur .
		'&quot;);';

	ereg(&quot;([+-/])([+-/])?&quot;, $mode_partie, $regs);
	list(,$op1,$op2) = $regs;

	// {1/3}
	if ($op1 == '/') {
		$retour .= &quot;\n	&quot;
			.'$debut_boucle = ceil(($nombre_boucle * '
			. ($partie - 1) . ')/' . $total_parties . &quot;);\n	&quot;
			. '$fin_boucle = ceil (($nombre_boucle * '
			. $partie . ')/' . $total_parties . &quot;) - 1;&quot;;
	}

	// {1,x}
	if ($op1 == '+') {
		$retour .= &quot;\n	&quot;
			. '$debut_boucle = ' . $partie . ';';
	}
	// {n-1,x}
	if ($op1 == '-') {
		$retour .= &quot;\n	&quot;
			. '$debut_boucle = $nombre_boucle - ' . $partie . ';';
	}
	// {x,1}
	if ($op2 == '+') {
		$retour .= &quot;\n	&quot;
			. '$fin_boucle = $debut_boucle + ' . $total_parties . ' - 1;';
	}
	// {x,n-1}
	if ($op2 == '-') {
		$retour .= &quot;\n	&quot;
			.'$fin_boucle = $debut_boucle + $nombre_boucle - '.$total_parties.' - 1;';
	}

	// Rabattre $fin_boucle sur le maximum
	$retour .= &quot;\n	&quot;
		.'$fin_boucle = min($fin_boucle, $nombre_boucle - 1);';

	// calcul du total boucle final
	$retour .= &quot;\n	&quot;
		.'$Numrows[\''.$id_boucle.'\'] = $fin_boucle - $debut_boucle + 1;';

	return $retour;
}

// Production du code PHP a partir de la sequence livree par le phraseur
// $boucles est passe par reference pour affectation par index_pile.
// Retourne une expression PHP,

function calculer_liste($tableau, $descr, &amp;$boucles, $id_boucle='', $niv=1) {
	if (!$tableau) return &quot;''&quot;;
        $codes = array();
	$t = '$t' . $niv;

	for ($i=0; $i&lt;=$niv; $i++) $tab .= &quot;\t&quot;;

	foreach ($tableau as $p) {

		switch($p-&gt;type) {
		// texte seul
		case 'texte':
			$code = calculer_texte($p-&gt;texte, $id_boucle, $boucles, $descr['id_mere']);
			$commentaire='';
			$avant='';
			$apres='';
			$altern = &quot;''&quot;;
			break;

		// inclure
		case 'include':
			$code= calculer_inclure($p-&gt;fichier,
						$p-&gt;params,
						$id_boucle,
						$boucles);
			$commentaire = '&lt;INCLURE('.$p-&gt;fichier.')&gt;';
			$avant='';
			$apres='';
			$altern = &quot;''&quot;;
			break;

		// boucle
		case 'boucle':
			$nom = $p-&gt;id_boucle;
			$newdescr = $descr;
			$newdescr['id_mere'] = $nom;
			$code = 'BOUCLE' .
			  ereg_replace(&quot;-&quot;,&quot;_&quot;, $nom) . $descr['nom'] .
			  '($Cache, $Pile, $doublons, $Numrows, $SP)';
			$commentaire='';
			$avant = calculer_liste($p-&gt;cond_avant,
				$newdescr, $boucles, $id_boucle, $niv+2);
			$apres = calculer_liste($p-&gt;cond_apres,
				$newdescr, $boucles, $id_boucle, $niv+2);
			$altern = calculer_liste($p-&gt;cond_altern,
				$newdescr, $boucles, $id_boucle, $niv+1);
			break;

		// balise SPIP
		default: 

			// cette structure pourrait etre completee des le phrase' (a faire)
			$p-&gt;id_boucle = $id_boucle;
			$p-&gt;boucles = &amp;$boucles;
			$p-&gt;id_mere = $descr['id_mere'];
			$p-&gt;documents = $descr['documents'];
			$p-&gt;statut = 'html';
			$p-&gt;type_requete = $boucles[$id_boucle]-&gt;type_requete;

			$code = calculer_champ($p);
			$commentaire = '#' . $p-&gt;nom_champ . $p-&gt;etoile;
			$avant = calculer_liste($p-&gt;cond_avant,
				$descr, $boucles, $id_boucle, $niv+1);
			$apres = calculer_liste($p-&gt;cond_apres,
				$descr, $boucles, $id_boucle, $niv+1);
			$altern = &quot;''&quot;;
			break;

		} // switch

		if ($avant == &quot;''&quot;) $avant = '';
		if ($apres == &quot;''&quot;) $apres = '';
		if ($avant||$apres||($altern!=&quot;''&quot;))
		  {
		    $res = (!$avant ? &quot;&quot; : &quot;$avant . &quot;) . 
		      $t .
		      (!$apres ? &quot;&quot; : &quot; . $apres&quot;);

		    if (($res != $t) || ($altern != &quot;''&quot;))
		      $code = &quot;(($t = $code) ?\n\t$tab($res) :\n\t$tab($altern))&quot;;
		  }
		// if ($code) # c'est toujours etre ainsi
		  $codes[]= (!$commentaire ? $code : 
			     (&quot;/&quot;.&quot;* $commentaire *&quot;.&quot;/ &quot; . $code));
	} // foreach

	return &quot;(&quot; . join (&quot;\n$tab. &quot;, $codes) . &quot;)&quot;;
}

// Prend en argument le source d'un squelette, sa grammaire et un nom.
// Retourne une fonction PHP/SQL portant ce nom et calculant une page HTML.
// Pour appeler la fonction produite, lui fournir 2 tableaux de 1 e'le'ment:
// - 1er: element 'cache' =&gt; nom (du fichier ou` mettre la page)
// - 2e: element 0 contenant un environnement ('id_article =&gt; $id_article, etc)
// Elle retourne alors un tableau de 4 e'le'ments:
// - 'texte' =&gt; page HTML, application du squelette a` l'environnement;
// - 'squelette' =&gt; le nom du squelette
// - 'process_ins' =&gt; 'html' ou 'php' selon la pre'sence de PHP dynamique
// - 'invalideurs' =&gt;  de'pendances de cette page, pour invalider son cache.
// (voir son utilisation, optionnelle, dans invalideur.php)
// En cas d'erreur, elle retourne un tableau des 2 premiers elements seulement

function calculer_squelette($squelette, $nom, $gram, $sourcefile) {
# 3 variables qui sont en fait des constantes apr&#232;s chargement
  global $table_primary, $table_des_tables, $tables_des_serveurs_sql;
	// Phraser le squelette, selon sa grammaire
	// pour le moment: &quot;html&quot; seul connu (HTML+balises BOUCLE)
	$boucles = '';
	spip_timer('calcul_skel');

	include_local(&quot;inc-$gram-squel.php3&quot;);

	$racine = parser($squelette, '',$boucles, $nom);

	// tableau des informations sur le squelette
	$descr = array('nom' =&gt; $nom, 'documents' =&gt; false);

	if ($boucles) {
	  // une boucle documents est conditionnee par tout le reste!
	  // une boucle avec critere de recheche conditionne tout le reste!
	  // (a cause du cas #nom_de_boucle:URL_*)
	  // 
		foreach($boucles as $idb =&gt; $boucle)
		  {
		    if ($boucle-&gt;param &amp;&amp; is_array($boucle-&gt;param)) {
				if (($boucle-&gt;type_requete == 'documents') &amp;&amp; 
				    in_array('doublons',$boucle-&gt;param))
				  { $descr['documents'] = true; break; }
				if (in_array('recherche',$boucle-&gt;param))
					$boucles[$idb]-&gt;hash = true;
			}
		  }
	// Commencer par reperer les boucles appelees explicitement 
	// car elles indexent les arguments de maniere derogatoire
		foreach($boucles as $id =&gt; $boucle) { 
			if ($boucle-&gt;type_requete == 'boucle') {
				$rec = &amp;$boucles[$boucle-&gt;param];
				if (!$rec) {
					return array(_T('info_erreur_squelette'),
						($boucle-&gt;param
						. _L(' boucle recursive non definie')));
				} else {
					$rec-&gt;externe = $id;
					$descr['id_mere'] = $id;
					$boucles[$id]-&gt;return =
						calculer_liste(array($rec),
							 $descr,
							 $boucles,
							 $boucle-&gt;param);
				}
			}
		}
		foreach($boucles as $id =&gt; $boucle) { 
			$type = $boucle-&gt;type_requete;
			if ($type != 'boucle') {
				$boucles[$id]-&gt;id_table = $table_des_tables[$type];
				if ($boucles[$id]-&gt;id_table) {
					$boucles[$id]-&gt;primary = $table_primary[$type];
				} else { 
					// table non Spip.
					$boucles[$id]-&gt;id_table = $type;
					$serveur = $boucle-&gt;sql_serveur;
					$boucles[$id]-&gt;primary = $tables_des_serveurs_sql[$serveur ? $serveur : 'localhost'][$type]['key'][&quot;PRIMARY KEY&quot;]; 
				}
				if ($boucle-&gt;param) {
					$res = calculer_criteres($id, $boucles);
					if (is_array($res))
						return $res; # erreur
				}
				$descr['id_mere'] = $id;
				$boucles[$id]-&gt;return =
				calculer_liste($boucle-&gt;milieu,
					 $descr,
					 $boucles,
					 $id);
			}
		}
	}

	// idem pour la racine
	$descr['id_mere'] = '';
	$corps = calculer_liste($racine, $descr, $boucles);

	// Corps de toutes les fonctions PHP,
	// en particulier les requetes SQL et TOTAL_BOUCLE
	// de'terminables seulement maintenant
	// Les 3 premiers parame`tres sont passe's par re'fe'rence
	// (sorte d'environnements a` la Lisp 1.5)
	// sauf pour la fonction principale qui recoit les initialisations

	$code = '';
	if ($boucles) {

		foreach($boucles as $id =&gt; $boucle) {
			// appeler la fonction de definition de la boucle
			$f = 'boucle_'.strtoupper($boucle-&gt;type_requete);
			// si pas de definition perso, definition spip
			if (!function_exists($f)) $f = $f.'_dist';
			// laquelle a une definition par defaut
			if (!function_exists($f)) $f = 'boucle_DEFAUT';
			$boucles[$id]-&gt;return = $f($id, $boucles);
		}

		foreach($boucles as $id =&gt; $boucle) {

			// Reproduire la boucle en commentaire
			$pretty = &quot;BOUCLE$id(&quot;.strtoupper($boucle-&gt;type_requete).&quot;)&quot;;
		    if ($boucle-&gt;param &amp;&amp; is_array($boucle-&gt;param)) 
				$pretty .= &quot; {&quot;.join(&quot;} {&quot;, $boucle-&gt;param).&quot;}&quot;;
			// sans oublier les parametres traites en amont
			if ($boucle-&gt;separateur)
			  $pretty .= '{&quot;' . $boucle-&gt;separateur . '&quot;}';
			if ($boucle-&gt;tout)
			  $pretty .= '{tout}';
			if ($boucle-&gt;plat)
			  $pretty .= '{plat}';
			$pretty = ereg_replace(&quot;[\r\n]&quot;, &quot; &quot;, $pretty);

			// Puis envoyer son code
			$codeboucle = &quot;\n//\n// &lt;$pretty&gt;\n//\n&quot;
			.&quot;function BOUCLE&quot; . ereg_replace(&quot;-&quot;,&quot;_&quot;,$id) . $nom .
			'(&amp;$Cache, &amp;$Pile, &amp;$doublons, &amp;$Numrows, $SP) {' .
			$boucle-&gt;return;

			$fincode = &quot;\n	return \$t0;&quot;
			.&quot;\n}\n\n&quot;;

			## inserer les elements pour le debuggueur, a deux niveaux :
			## 1) apres le calcul d'une boucle compilee, envoyer le code
			##    compile vers boucle_debug_compile()
			## 2) le resultat de la boucle, lui, sera plus tard envoye vers
			##    boucle_debug_resultat()
			if ($GLOBALS['var_mode'] == 'debug') {
				boucle_debug_compile ($id, $nom, $pretty,
					$sourcefile, $codeboucle.$fincode);
				$codedebug = &quot;
	boucle_debug_resultat('$id', '$nom', \$t0);&quot;;
			}

			$code .= $codeboucle.$codedebug.$fincode;
		}
	}

	$secondes = spip_timer('calcul_skel');
	spip_log(&quot;calcul skel $sourcefile ($secondes)&quot;);

	if (is_array($boucles))
		$aff_boucles = join (', ', array_keys($boucles));
	else
		$aff_boucles = &quot;pas de boucle&quot;;

	$squelette_compile = &quot;&lt;&quot;.&quot;?php
/*
 * Squelette : $sourcefile
 * Date :      &quot;.http_gmoddate(@filemtime($sourcefile)).&quot; GMT
 * Compile :   &quot;.http_gmoddate(time()).&quot; GMT ($secondes)
 * Boucles :   &quot;.$aff_boucles.&quot;
 */
$code

//
// Fonction principale du squelette $sourcefile
//
function $nom (\$Cache, \$Pile, \$doublons=array(), \$Numrows='', \$SP=0) {
\$t0 = $corps;

	return array(
		'texte' =&gt; \$t0,
		'squelette' =&gt; '$nom',
		'process_ins' =&gt; ((strpos(\$t0,'&lt;'.'?')=== false) ? 'html' : 'php'),
		'invalideurs' =&gt; \$Cache
	);
}

?&quot;.&quot;&gt;&quot;;

	if ($GLOBALS['var_mode'] == 'debug')
		squelette_debug_compile($nom, $sourcefile, $squelette_compile);

	return $squelette_compile;

}

?&gt;

--- NEW FILE: spipcarto.zip ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: formulaire_site-dist.html ---
&lt;form action=&quot;#SELF&quot; method=&quot;post&quot;&gt;
      &lt;br /&gt;
      &lt;fieldset	class='spip_encadrer' style='color: black; font-size: 90%'&gt;
	&lt;legend&gt;&lt;/legend&gt;
	&lt;label&gt;
	  &lt;:form_prop_nom_site:&gt;
	  &lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;nom_site&quot; value=&quot;&quot; size=&quot;30&quot;&gt;
	&lt;/label&gt;
	&lt;label&gt;
	  &lt;:form_prop_url_site:&gt;
	  &lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;url_site&quot; value=&quot;&quot; size=&quot;30&quot;&gt;
	&lt;/label&gt;
	&lt;label&gt;&lt;:form_prop_description:&gt;
	  &lt;textarea name='description_site' rows='5' class='forml' cols='40'&gt;&lt;/textarea&gt;
	&lt;/label&gt;
	&lt;div align=&quot;right&quot;&gt;&lt;input type=&quot;submit&quot; class=&quot;spip_bouton&quot; value=&quot;&lt;:bouton_valider:&gt;&quot;&gt;&lt;/div&gt;
      &lt;/fieldset&gt;
&lt;/form&gt;

--- NEW FILE: inc-compilo-api.php3 ---
&lt;?php

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_COMPILO_API&quot;)) return;
define(&quot;_INC_COMPILO_API&quot;, &quot;1&quot;);


// Definition des classes Boucle, Texte, Inclure, Champ

class Texte {
	var $type = 'texte';
	var $texte;
}

class Inclure {
	var $type = 'include';
	var $fichier;
	var $params;
}

//
// encodage d'une boucle SPIP en un objet PHP
//
class Boucle {
	var $type = 'boucle';
	var $id_boucle;
	var $id_parent ='';
	var $cond_avant, $milieu, $cond_apres, $cond_altern;
	var $lang_select;
	var $type_requete;
	var $sql_serveur;
	var $param = array();
	var $separateur;
	var $doublons;
	var $partie, $total_parties,$mode_partie;
	var $externe = ''; # appel a partir d'une autre boucle (recursion)
	// champs pour la construction de la requete SQL
	var $tout = false;
	var $plat = false;
	var $select;
	var $from;
	var $where;
	var $limit;
	var $group = '';
	var $order = '';
	var $date = 'date' ;
	var $hash = false ;
	var $lien = false;
	var $sous_requete = false;
	var $compte_requete = 1;
	var $hierarchie = '';
	// champs pour la construction du corps PHP
	var $id_table;
	var $primary;
	var $return;
	var $numrows = false; 
}

class Champ {
	var $type = 'champ';
	var $nom_champ;
	var $nom_boucle= ''; // seulement si boucle explicite
	var $cond_avant, $cond_apres; // tableaux d'objets
	var $fonctions;  // filtre explicites
	var $etoile;
	// champs pour la production de code
	var $id_boucle;
	var $boucles;
	var $type_requete;
	var $code;	// code du calcul
	var $statut;	// 'numerique, 'h'=texte (html) ou 'p'=script (php) ?
			// -&gt; definira les pre et post-traitements obligatoires
	// champs pour la production de code dependant du contexte
	var $id_mere;    // pour TOTAL_BOUCLE hors du corps
	var $document;   // pour embed et img dans les textes
}


//
// Globales de description de la base

global $tables_des_serveurs_sql, $tables_principales; // (voir inc_serialbase)
global $exceptions_des_tables, $table_des_tables;
global $tables_relations,  $table_primary, $table_date;

$tables_des_serveurs_sql = array('localhost' =&gt; &amp;$tables_principales);
	

	// champ principal des tables SQL
	$table_primary = array(
		'articles' =&gt; &quot;id_article&quot;,
		'auteurs' =&gt; &quot;id_auteur&quot;,
		'breves' =&gt; &quot;id_breve&quot;,
		'documents' =&gt; &quot;id_document&quot;,
		'forums' =&gt; &quot;id_forum&quot;,
		'groupes_mots' =&gt; &quot;id_groupe&quot;,
		'hierarchie' =&gt; &quot;id_rubrique&quot;,
		'mots' =&gt; &quot;id_mot&quot;,
		'rubriques' =&gt; &quot;id_rubrique&quot;,
		'signatures' =&gt; &quot;id_signature&quot;,
		'syndication' =&gt; &quot;id_syndic&quot;,
		'syndic_articles' =&gt; &quot;id_syndic_article&quot;,
		'types_documents' =&gt; &quot;id_type&quot;
	);
	
	# cf. fonction table_objet dans inc_version
	$table_des_tables = array(
		'articles' =&gt; 'articles',
		'auteurs' =&gt; 'auteurs',
		'breves' =&gt; 'breves',
		'forums' =&gt; 'forum',
		'signatures' =&gt; 'signatures',
		'documents' =&gt; 'documents',
		'types_documents' =&gt; 'types_documents',
		'mots' =&gt; 'mots',
		'groupes_mots' =&gt; 'groupes_mots',
		'rubriques' =&gt; 'rubriques',
		'syndication' =&gt; 'syndic',
		'syndic_articles' =&gt; 'syndic_articles',
		'hierarchie' =&gt; 'rubriques'
	);
	
	$exceptions_des_tables = array(
		'breves' =&gt; array(
			'id_secteur' =&gt; 'id_rubrique',
			'date' =&gt; 'date_heure',
			'nom_site' =&gt; 'lien_titre',
			'url_site' =&gt; 'lien_url'
			),
		'forums' =&gt; array(
			'date' =&gt; 'date_heure',
			'nom' =&gt; 'auteur',
			'email' =&gt; 'email_auteur'
			),
		'signatures' =&gt; array(
			'date' =&gt; 'date_time',
			'nom' =&gt; 'nom_email',
			'email' =&gt; 'ad_email'
		),
		'documents' =&gt; array(
			'type_document' =&gt; array('types_documents', 'titre'),
			'extension_document' =&gt; array('types_documents', 'extension')
		),
		'syndic_articles' =&gt; array(
			'url_article' =&gt; 'url',		  # ne sert pas ? cf balise_URL_ARTICLE
			'lesauteurs' =&gt; 'lesauteurs', # ne sert pas ? cf balise_LESAUTEURS
			'url_site' =&gt; array('syndic', 'url_site'),
			'nom_site' =&gt; array('syndic', 'nom_site')
		)
	);
	
	$table_date = array (
		'articles' =&gt; 'date',
		'auteurs' =&gt;  'date',
		'breves' =&gt;  'date_heure',
		'forums' =&gt;  'date_heure',
		'signatures' =&gt; 'date_time',
		'documents' =&gt; 'date',
		'types_documents' =&gt; 'date',
		'groupes_mots' =&gt; 'date',
		'mots' =&gt; 'date',
		'rubriques' =&gt; 'date',
		'syndication' =&gt; 'date',
		'syndic_articles' =&gt; 'date'
	);


//
// tableau des tables de relations,
// Ex: gestion du critere {id_mot} dans la boucle(ARTICLES)
//

$tables_relations = array(
	'articles' =&gt; array (
		'id_mot' =&gt; 'mots_articles',
		'id_auteur' =&gt; 'auteurs_articles',
		'id_document' =&gt; 'documents_articles'
		),

	'auteurs' =&gt; array (
		'id_article' =&gt; 'auteurs_articles'
		),

	'breves' =&gt; array (
		'id_mot' =&gt; 'mots_breves',
		'id_document' =&gt; 'documents_breves'
		),

	'documents' =&gt; array (
		'id_article' =&gt; 'documents_articles',
		'id_rubrique' =&gt; 'documents_rubriques',
		'id_breve' =&gt; 'documents_breves'
		),

	'forums' =&gt; array (
		'id_mot' =&gt; 'mots_forum',
		),

	'mots' =&gt; array (
		'id_article' =&gt; 'mots_articles',
		'id_breve' =&gt; 'mots_breves',
		'id_forum' =&gt; 'mots_forum',
		'id_rubrique' =&gt; 'mots_rubriques',
		'id_syndic' =&gt; 'mots_syndic'
		),

	'groupes_mots' =&gt; array (
		'id_groupe' =&gt; 'mots'
		),

	'rubriques' =&gt; array (
		'id_mot' =&gt; 'mots_rubriques',
		'id_document' =&gt; 'documents_rubriques'
		),

	'syndication' =&gt; array (
		'id_mot' =&gt; 'mots_syndic'
		)
	);
?&gt;

--- NEW FILE: formulaire_login-dist.html ---
[(#HTTP_VARS{echec_cookie})
	&lt;h3 class=&quot;spip&quot;&gt;&lt;:erreur_probleme_cookie:&gt;&lt;/h3&gt;
		&lt;b&gt;&lt;:login_cookie_oblige:&gt;&lt;/b&gt;
		  &lt;:login_cookie_accepte:&gt;&lt;p /&gt;
][
(#HTTP_VARS{message})
	&lt;br /&gt;
	 &lt;:forum_vous_enregistrer:&gt;
	[&lt;a href='(#URL_SITE_SPIP|inscriptionok{forum})spip_inscription.php3?mode=forum&amp;focus=nom_inscription' target=&quot;spip_pass&quot;
onclick=&quot;javascript:window.open(this.href, 'spip_inscription', 'scrollbars=yes, resizable=yes, width=480, height=450'); return false;&quot;&gt;&lt;:forum_vous_inscrire:&gt;&lt;/a&gt;]&nbsp;&nbsp;&#91;&lt;a
		href=&quot;spip_pass.php3&quot;
		target=&quot;spip_pass&quot; 
		onclick=&quot;javascript:window.open(this.href, 'spip_pass', 'scrollbars=yes, resizable=yes, width=480, height=280'); return false;&quot;&gt;&lt;:login_motpasseoublie:&gt;&lt;/a&gt;&#93;&lt;br /&gt;&lt;br /&gt;
]&lt;div style=&quot;font-family: Verdana,arial,helvetica,sans-serif; font-size: 12px;&quot;&gt;
	&lt;script type=&quot;text/javascript&quot; src=&quot;ecrire/md5.js&quot;&gt;&lt;/script&gt;
	&lt;form	id=&quot;login[_(#HTTP_VARS{login})]&quot;
		action=&quot;[(#HTTP_VARS{action2})]&quot;
		method=&quot;post&quot;[(#HTTP_VARS{source}|choixsiegal{spip,' ',''})
		onSubmit='if (this.session_password.value) {
			this.session_password_md5.value = calcMD5(&quot;[(#HTTP_VARS{alea_actuel})]&quot; + this.session_password.value);
			this.next_session_password_md5.value = calcMD5(&quot;[(#HTTP_VARS{alea_futur})]&quot; + this.session_password.value);
			this.session_password.value = &quot;&quot;;
			}']&gt;
		&lt;div class=&quot;spip_encadrer&quot; style=&quot;[(#URL_SITE_SPIP|style_align)]&quot;&gt;[
			&lt;div class=&quot;reponse_formulaire&quot;&gt;(#HTTP_VARS*{erreur})&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;
][
			&lt;label&gt;&lt;b&gt;&lt;:login_login2:&gt;&lt;/b&gt;&lt;br /&gt;&lt;/label&gt;(#HTTP_VARS{login}|choixsivide{' ',''})
			&lt;input type=&quot;text&quot; id='var_login' name=&quot;var_login&quot; class=&quot;forml&quot; value=&quot;&quot; size=&quot;40&quot; /&gt;
][
&lt;div&gt;
			&lt;input type=&quot;hidden&quot; name=&quot;session_login_hidden&quot; value=&quot;(#HTTP_VARS{login})&quot; /&gt;
&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--
document.write(&quot;&lt;:login_login:&gt;&nbsp;&lt;b&gt;[(#HTTP_VARS{login})]&lt;&quot; + &quot;/b&gt;&lt;br /&gt;&#91;&lt;a href='spip_cookie.php3?cookie_admin=non&amp;url=[(#HTTP_VARS{url})]'&gt;&lt;font size='2'&gt;&lt;:login_autre_identifiant:&gt;&lt;&quot; + &quot;/font&gt;&lt;&quot; + &quot;/a&gt;&#93;&quot;)
//--&gt;&lt;/script&gt;
&lt;noscript&gt;
	&lt;font face=&quot;Georgia, Garamond, Times, serif&quot; size=&quot;3&quot;&gt;
		&lt;:login_non_securise:&gt;
		&lt;a href=&quot;[(#HTTP_VARS{action})]&quot;&gt;&lt;:login_recharger:&gt;&lt;/a&gt;
	&lt;/font&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;label&gt;&lt;b&gt;&lt;:login_login2:&gt;&lt;/b&gt;&lt;br /&gt;&lt;/label&gt;
	&lt;input type='text' name='session_login' class='forml' [value=&quot;(#HTTP_VARS{login})&quot; ]size='40' /&gt;
&lt;/noscript&gt;
[&lt;img src=&quot;(#HTTP_VARS{id_auteur}|silogoauteur)&quot; width=&quot;75&quot; align=&quot;right&quot; alt=&quot;[(#HTTP_VARS{login})]&quot;&gt;]
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;
		&lt;label&gt;&lt;b&gt;&lt;:login_pass2:&gt;&lt;/b&gt;&lt;/label&gt;&nbsp;&lt;input type=&quot;password&quot; name=&quot;session_password&quot;[ id=&quot;var_login_(#HTTP_VARS{login})]&quot; class=&quot;forml&quot; value=&quot;&quot; size=&quot;40&quot; /&gt;
		&lt;br /&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type=&quot;checkbox&quot;
			 name=&quot;session_remember&quot;
			 id=&quot;session[_(#HTTP_VARS{login})]&quot;
			 value=&quot;oui&quot;[(#HTTP_VARS*{prefs}|filtre_rester_connecte)checked=&quot;checked&quot;]/&gt;
		&lt;label for=&quot;session[_(#HTTP_VARS{login})]&quot;&gt;&lt;:login_rester_identifie:&gt;&lt;/label&gt;
&lt;/p&gt;
		&lt;input type=&quot;hidden&quot; name=&quot;session_password_md5&quot; value=&quot;&quot; /&gt;
		&lt;input type=&quot;hidden&quot; name=&quot;next_session_password_md5&quot; value=&quot;&quot; /&gt;
		&lt;input type=&quot;hidden&quot; name=&quot;essai_login&quot; value=&quot;oui&quot; /&gt;
]		&lt;input type=&quot;hidden&quot; name=&quot;url&quot; value=&quot;[(#HTTP_VARS{url})]&quot; /&gt;
		&lt;div align=&quot;right&quot;&gt;&lt;input type=&quot;submit&quot; class=&quot;spip_bouton&quot; value=&quot;&lt;:bouton_valider:&gt;&quot; /&gt;&lt;/div&gt;
		&lt;/div&gt;
	&lt;/form&gt;
&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--
document.getElementById('var_login[_(#HTTP_VARS{login})]').focus()
--&gt;&lt;/script&gt;[
	&lt;form action=&quot;(#HTTP_VARS{auth})&quot; method=&quot;get&quot;&gt;
		&lt;fieldset&gt;
		&lt;p&gt;
		&lt;:login_preferez_refuser:&gt;
		&lt;input type=&quot;hidden&quot; name=&quot;essai_auth_http&quot; value=&quot;oui&quot;/&gt;
		[&lt;input type=&quot;hidden&quot; name=&quot;url&quot; value=&quot;(#HTTP_VARS{url})&quot;/&gt;]
		&lt;div align=&quot;right&quot;&gt;&lt;input type=&quot;submit&quot; class=&quot;spip_bouton&quot; value=&quot;&lt;:login_sans_cookiie:&gt;&quot;/&gt;&lt;/div&gt;
		&lt;/fieldset&gt;
	&lt;/form&gt;
]
&lt;/div&gt;

--- NEW FILE: backend.php3 ---
&lt;?php
$fond = &quot;backend&quot;;
$delais = 3600;

// cette ligne empeche l'affichage des boutons d'administration
// Et les headers !!!!

$flag_preserver = true;

@header(&quot;Content-type: text/xml&quot;);

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: login-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
	&lt;title&gt;&lt;:login_acces_prive:&gt;&lt;/title&gt;
	&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;
	&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;
&lt;/head&gt;
&lt;body dir=&quot;#LANG_DIR&quot; bgcolor=&quot;#ffffff&quot; text=&quot;#000000&quot; link=&quot;#e86519&quot; vlink=&quot;#6e003a&quot; alink=&quot;#ff9900&quot;&gt;

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;center&gt;&lt;table width=&quot;400&quot;&gt;&lt;tr&gt;&lt;td width=&quot;400&quot;&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;h3 class=&quot;spip&quot;&gt;#NOM_SITE_SPIP&lt;br&gt;
&lt;small&gt;&lt;:login_acces_prive:&gt;&lt;/small&gt;&lt;/h3&gt;
&lt;div align=&quot;#LANG_RIGHT&quot;&gt;#MENU_LANG_ECRIRE&lt;/div&gt;
&lt;/div&gt;
#LOGIN_PRIVE
	&lt;div align=&quot;center&quot;&gt;[&#91;&lt;a
		target=&quot;spip_pass&quot;
		href='(#URL_SITE_SPIP|inscriptionok{redac})/spip_inscription.php3?mode=redac&amp;focus=nom_inscription'
		onclick=&quot;javascript:window.open(this.href, 'spip_pass', 'scrollbars=yes, resizable=yes, width=480, height=500'); return false;&quot;&gt;&lt;:login_sinscrire:&gt;&lt;/a&gt;&#93;]&#91;&lt;a
		href=&quot;spip_pass.php3&quot;
		target=&quot;spip_pass&quot; 
		onclick=&quot;javascript:window.open(this.href, 'spip_pass', 'scrollbars=yes, resizable=yes, width=480, height=280'); return false;&quot;&gt;&lt;:login_motpasseoublie:&gt;&lt;/a&gt;&#93;&#91;&lt;a 
		href='#URL_SITE_SPIP'&gt;&lt;:login_retoursitepublic:&gt;&lt;/a&gt;&amp;#93
	      &lt;/div&gt;

&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;

&lt;/body&gt;
&lt;/html&gt;

--- NEW FILE: inc-calcul.php3 ---
&lt;?php


// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_CALCUL&quot;)) return;
define(&quot;_INC_CALCUL&quot;, &quot;1&quot;);

//
// Ce fichier calcule une page en executant un squelette.
//

include_ecrire(&quot;inc_meta.php3&quot;);
include_ecrire(&quot;inc_index.php3&quot;);
include_ecrire(&quot;inc_texte.php3&quot;);
include_ecrire(&quot;inc_filtres.php3&quot;);
include_ecrire(&quot;inc_lang.php3&quot;);
include_ecrire(&quot;inc_documents.php3&quot;);
include_ecrire(&quot;inc_abstract_sql.php3&quot;);
include_ecrire(&quot;inc_forum.php3&quot;);
include_ecrire(&quot;inc_debug_sql.php3&quot;);
include_local(&quot;inc-calcul-outils.php3&quot;);

// Ce fichier peut contenir une affectation de $dossier_squelettes  indiquant
// le repertoire du source des squelettes (les pseudo-html avec BOUCLE...)

if (@file_exists(&quot;mes_fonctions.php3&quot;)) 
    include_local (&quot;mes_fonctions.php3&quot;);


// Gestionnaire d'URLs
if (@file_exists(&quot;inc-urls.php3&quot;))
	include_local(&quot;inc-urls.php3&quot;);
else
	include_local(&quot;inc-urls-&quot;.$GLOBALS['type_urls'].&quot;.php3&quot;);


// Le squelette compile est-il trop vieux ?
function squelette_obsolete($skel, $squelette) {
	return (
		$GLOBALS['var_mode']
		OR !@file_exists($skel)
		OR (@filemtime($squelette) &gt; ($date = @filemtime($skel)))
		OR (@filemtime('mes_fonctions.php3') &gt; $date)
		OR (@filemtime(_FILE_OPTIONS) &gt; $date)
	);
}


# Charge un squelette (au besoin le compile) 
# et retoune le nom de sa fonction principale, ou '' s'il est indefini
# Charge egalement un fichier homonyme de celui du squelette
# mais de suffixe '_fonctions.php3' pouvant contenir:
# - des filtres
# - des fonctions de traduction de balise, de critere et de boucle
# - des declaration de tables SQL supplementaires

function charger_squelette ($squelette) {
	$ext = $GLOBALS['extension_squelette'];
	$nom = $ext . '_' . md5($squelette);
	$sourcefile = $squelette . &quot;.$ext&quot;;

	// le squelette est-il deja en memoire (INCLURE  a repetition)
	if (function_exists($nom))
		return $nom;

	$phpfile = _DIR_CACHE . 'skel_' . $nom . '.php';

	// le squelette est-il deja compile et perenne ?
	if (!squelette_obsolete($phpfile, $sourcefile)
	AND lire_fichier ($phpfile, $contenu,
	array('critique' =&gt; 'oui', 'phpcheck' =&gt; 'oui'))) 
		eval('?'.'&gt;'.$contenu);

	// sinon, charger le compilateur et verifier que le source est lisible
	if (!function_exists($nom)) {
		include_local(&quot;inc-compilo.php3&quot;);
		lire_fichier ($sourcefile, $skel);
	}

	// Le fichier suivant peut contenir entre autres:
	// 1. les filtres utilises par le squelette
	// 2. des ajouts au compilateur
	// Le point 1 exige qu'il soit lu dans tous les cas.
	// Le point 2 exige qu'il soit lu apres inc-compilo
	// (car celui-ci initialise $tables_principales) mais avant la compil
	$f = $squelette . '_fonctions.php3';
	if (@file_exists($f)) include($f);

	if (function_exists($nom)) return $nom;

	$skel_code = calculer_squelette($skel, $nom, $ext, $sourcefile);

	// Tester si le compilateur renvoie une erreur
	if (is_array($skel_code))
		erreur_squelette($skel_code[0], $skel_code[1]);
	else {
		if ($GLOBALS['var_mode'] == 'debug') {
			include_ecrire(&quot;inc_debug_sql.php3&quot;);
			debug_dumpfile ($skel_code, $nom, 'code');
		}
		eval('?'.'&gt;'.$skel_code);
		if (function_exists($nom)) {
			ecrire_fichier ($phpfile, $skel_code);
			return $nom;
		}
	}
}

# Provoque la recherche du squelette $fond d'une $lang donnee,
# et l'applique sur un $contexte pour un certain $cache.
# Retourne un tableau de 3 elements:
# 'texte' =&gt; la page calculee
# 'process_ins' =&gt; 'html' ou 'php' si presence d'un '&lt; ?php'
# 'invalideurs' =&gt; les invalideurs (cf inc-calcul-squel)

# En cas d'erreur process_ins est absent et texte est un tableau de 2 chaines

# La recherche est assuree par la fonction chercher_squelette,
# definie dans inc-chercher, fichier non charge si elle est deja definie
# (typiquement dans mes_fonctions.php3)

function cherche_page ($cache, $contexte, $fond)  {
	global $dossier_squelettes, $delais;

	if (!function_exists('chercher_squelette'))
		include_local(&quot;inc-chercher.php3&quot;); # a renommer ?

	// Choisir entre $fond-dist.html, $fond=7.html, etc?
	$id_rubrique_fond = 0;
	// Si inc-urls veut fixer la langue, on la recupere ici
	$lang = $contexte['lang'];
	// Chercher le fond qui va servir de squelette
	if ($r = sql_rubrique_fond($contexte,
	$lang ? $lang : lire_meta('langue_site')))
		list($id_rubrique_fond, $lang) = $r;

	if (!$GLOBALS['forcer_lang'])
		lang_select($lang);

	$skel = chercher_squelette($fond,
			$id_rubrique_fond,
			$dossier_squelettes ? &quot;$dossier_squelettes/&quot; :'',
			$GLOBALS['spip_lang']);

	// Charger le squelette et recuperer sa fonction principale
	// (compilation automatique au besoin) et calculer

	$page = array();

	if ($skel) {
		if ($fonc = charger_squelette($skel))
		  $page = $fonc(array('cache' =&gt; $cache), array($contexte));

		// Passer la main au debuggueur)
		if ($GLOBALS['var_mode'] == 'debug')
		  {
			include_ecrire(&quot;inc_debug_sql.php3&quot;);
			debug_dumpfile ($page['texte'], $fonc, 'resultat');
		  }
	}

	// Nettoyer le resultat si on est fou de XML
	if ($GLOBALS['xhtml']) {
		include_ecrire(&quot;inc_tidy.php&quot;);
		$page['texte'] = xhtml($page['texte']);
	}

	// Entrer les invalideurs dans la base
	if ($delais&gt;0) {
		include_ecrire('inc_invalideur.php3');
		maj_invalideurs($cache, $page['invalideurs'], $delais);
	}

	// Retourner la structure de la page

	return $page;
}


//
// Contexte : lors du calcul d'une page spip etablit le contexte a partir
// des variables $HTTP_GET_VARS et $HTTP_POST_VARS, et leur ajoute la date
// Note : pour hacker le contexte depuis le fichier d'appel (article.php3),
// il est recommande de modifier $HTTP_GET_VARS['toto'] (meme si la page est
// appelee avec la methode POST).
//
function calculer_contexte() {
	foreach($GLOBALS['HTTP_GET_VARS'] as $var =&gt; $val) {
		if (strpos($var, 'var_') !== 0)
			$contexte[$var] = $val;
	}
	foreach($GLOBALS['HTTP_POST_VARS'] as $var =&gt; $val) {
		if (strpos($var, 'var_') !== 0)
			$contexte[$var] = $val;
	}

	if ($GLOBALS['date'])
		$contexte['date'] = $contexte['date_redac'] = normaliser_date($GLOBALS['date']);
	else
		$contexte['date'] = $contexte['date_redac'] = date(&quot;Y-m-d H:i:s&quot;);

	return $contexte;
}

function calculer_page_globale($cache, $contexte_local, $fond) {

	// Gestion des URLs personnalises - sale mais historique
	if (function_exists(&quot;recuperer_parametres_url&quot;)) {
		global $contexte;
		$contexte = $contexte_local;
		recuperer_parametres_url($fond, nettoyer_uri());

		// remettre les globales pour le bouton &quot;Modifier cet article&quot;
		if (is_array($contexte))
			foreach ($contexte as $var=&gt;$val)
				if (substr($var,0,3) == 'id_')
					$GLOBALS[$var] = $val;
		$contexte_local = $contexte;
	}

	// Go to work !
	$page = cherche_page($cache, $contexte_local, $fond);

	$signal = array();
	foreach(array('id_parent', 'id_rubrique', 'id_article', 'id_auteur',
	'id_breve', 'id_forum', 'id_secteur', 'id_syndic', 'id_syndic_article',
	'id_mot', 'id_groupe', 'id_document') as $val) {
		if ($contexte_local[$val])
			$signal['contexte'][$val] = intval($contexte_local[$val]);
	}

	$page['signal'] = $signal;

	return $page;
}


// Cf ramener_page +cherche_page_incluante+ cherche_page_incluse chez ESJ
function calculer_page($chemin_cache, $elements, $delais, $inclusion=false) {

	// Inclusion
	if ($inclusion) {
		$contexte_inclus = $elements['contexte'];
		$page = cherche_page($chemin_cache,
			$contexte_inclus, $elements['fond']);
	}
	else {

		// Page globale
		// si le champ chapo commence par '=' c'est une redirection.
		if ($id_article = intval($GLOBALS['id_article'])) {
			if ($art = sql_chapo($id_article)) {
				$chapo = $art['chapo'];
				if (substr($chapo, 0, 1) == '=') {
					include_ecrire('inc_texte.php3');
					list(,$url) = extraire_lien(array('','','',
					substr($chapo, 1)));
					if ($url) { // sinon les navigateurs pataugent
						$url = addslashes($url);
						$page = array('texte' =&gt; &quot;&lt;&quot;.
						&quot;?php header(\&quot;Location: $url\&quot;); ?&quot; . &quot;&gt;&quot;,
						'process_ins' =&gt; 'php');
					}
				}
			}
		}
		if (!$page)
			$page = calculer_page_globale($chemin_cache,
				$elements['contexte'],
				$elements['fond']);
	}

	$page['signal']['process_ins'] = $page['process_ins'];
	$signal = &quot;&lt;!-- &quot;.str_replace(&quot;\n&quot;, &quot; &quot;,
	serialize($page['signal'])).&quot; --&gt;\n&quot;;

	// Enregistrer le fichier cache
	if ($delais &gt; 0 AND $GLOBALS['var_mode'] != 'debug'
	AND empty($GLOBALS['HTTP_POST_VARS']))
		ecrire_fichier($chemin_cache, $signal.$page['texte']);

	return $page;
}
?&gt;

--- NEW FILE: inc-public-global.php3 ---
&lt;?php

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_PUBLIC_GLOBAL&quot;)) return;
define(&quot;_INC_PUBLIC_GLOBAL&quot;, &quot;1&quot;);

//
// Aller chercher la page dans le cache ou pas
//
function obtenir_page ($contexte, $chemin_cache, $delais, &amp;$use_cache, $fond, $inclusion=false) {
	global $lastmodified;

	if (!$use_cache) {
		include_local('inc-calcul.php3');

		// page globale ? calculer le contexte
		if (!$contexte)
			$contexte = calculer_contexte();

		spip_timer('calculer_page');
		$page = calculer_page($chemin_cache,
			array('fond' =&gt; $fond,
				'contexte' =&gt; $contexte),
			$delais,
			$inclusion);

		$lastmodified = time();

		// log
		if (!$log = $chemin_cache) $log = &quot;($fond, delais=$delais, &quot;
		. $GLOBALS['HTTP_SERVER_VARS']['REQUEST_METHOD'].&quot;)&quot;;
		spip_log (($inclusion ? 'calcul inclus':'calcul').' ('
		.spip_timer('calculer_page').&quot;): $log&quot;);

		// Nouveau cache : creer un invalideur 't' fixant la date
		// d'expiration et la taille du fichier
		if (@file_exists($chemin_cache)) {
			// Ici on ajoute 3600s pour eviter toute concurrence
			// entre un invalideur et un appel public de page
			$bedtime = time() + $delais + 3600;
			$taille = @filesize($chemin_cache);
			$fichier = addslashes($chemin_cache);
			spip_query(&quot;INSERT IGNORE INTO spip_caches (fichier,id,type,taille)
			VALUES ('$fichier','$bedtime','t','$taille')&quot;);
		}

	} else {

		//
		// Lire le fichier cache
		//
		lire_fichier ($chemin_cache, $page['texte']);
		$lastmodified = max($lastmodified, @filemtime($chemin_cache));
		# spip_log (&quot;cache $chemin_cache $lastmodified&quot;);

		//
		// Lire sa carte d'identite &amp; fixer le contexte global
		//
		if (preg_match(&quot;/^&lt;!-- ([^\n]*) --&gt;\n(.*)/ms&quot;, $page['texte'], $match)
		AND is_array($meta_donnees = unserialize($match[1]))) {
			foreach ($meta_donnees as $var=&gt;$val)
				$page[$var] = $val;

			$page['texte'] = $match[2];

			// Remplir les globals pour les boutons d'admin
			if (!$inclusion AND is_array($page['contexte']))
				foreach ($page['contexte'] as $var=&gt;$val)
					$GLOBALS[$var] = $val;
		}

	}

	return $page;
}


//
// Appeler cette fonction pour obtenir la page principale
//
function afficher_page_globale ($fond, $delais, &amp;$use_cache) {
	global $flag_preserver, $flag_dynamique, $lastmodified;
	global $var_preview, $var_mode;
	include_local (&quot;inc-cache.php3&quot;);

	// demande de previsualisation ?
	// -&gt; inc-calcul.php3 n'enregistrera pas les fichiers caches
	// -&gt; inc-reqsql-squel.php3 acceptera les objets non 'publie'
	if ($var_preview == 'oui') {
		// Verifier qu'on a le droit de previsualisation
		$statut = $GLOBALS['auteur_session']['statut'];
		if ($statut=='0minirezo' OR
		(lire_meta('preview')=='1comite' AND $statut=='1comite')) {
			$var_mode = 'recalcul';
			$delais = 0;
			$var_preview = true;
			spip_log('preview !');
		}
	}

	// Faut-il effacer des pages invalidees ?
	if (lire_meta('invalider')) {
		include_ecrire('inc_meta.php3');
		lire_metas();
		if (lire_meta('invalider'))
			retire_caches();
	}

	// Calculer le chemin putatif du cache
	$chemin_cache = generer_nom_fichier_cache('', $fond);

	// Peut-on utiliser un fichier cache ?
	determiner_cache($delais, $use_cache, $chemin_cache);

	// Repondre gentiment aux requetes sympas
	// (ici on ne tient pas compte d'une obsolence du cache ou des
	// eventuels fichiers inclus modifies depuis la date
	// HTTP_IF_MODIFIED_SINCE du client)
	if ($GLOBALS['HTTP_IF_MODIFIED_SINCE'] AND !$var_mode
	AND $chemin_cache AND !$flag_dynamique) {
		$lastmodified = @filemtime($chemin_cache);
		$headers_only = http_last_modified($lastmodified);
	}
	$headers_only |= ($GLOBALS['HTTP_SERVER_VARS']['REQUEST_METHOD'] == 'HEAD');

	if ($headers_only) {
		if ($chemin_cache)
			$t = @filemtime($chemin_cache);
		else
			$t = time();
		@header('Last-Modified: '.http_gmoddate($t).' GMT');
		@header('Connection: close');
		// Pas de bouton admin pour un HEAD
		$flag_preserver = true;
	}
	else {
		// Obtenir la page
		$page = obtenir_page ('', $chemin_cache, $delais, $use_cache,
		$fond, false);
		if (!$flag_preserver) {
		// Entete content-type: xml ou html ; charset
			if ($xhtml) {
			// Si Mozilla et tidy actif, passer en &quot;application/xhtml+xml&quot;
			// extremement risque: Mozilla passe en mode debugueur strict
			// mais permet d'afficher du MathML directement dans le texte
			// (et sauf erreur, c'est la bonne facon de declarer du xhtml)
				include_ecrire(&quot;inc_tidy.php&quot;);
				if (version_tidy() &gt; 0) {
					if (ereg(&quot;application/xhtml\+xml&quot;, $GLOBALS['HTTP_ACCEPT'])) 
						@header(&quot;Content-Type: application/xhtml+xml; charset=&quot;.lire_meta('charset'));
					else 
						@header(&quot;Content-Type: text/html; charset=&quot;.lire_meta('charset'));
					echo '&lt;'.'?xml version=&quot;1.0&quot; encoding=&quot;'. lire_meta('charset').'&quot;?'.&quot;&gt;\n&quot;;
				} else {
					@header(&quot;Content-Type: text/html; charset=&quot;.lire_meta('charset'));
				}
			} else {
				@header(&quot;Content-Type: text/html; charset=&quot;.lire_meta('charset'));
			}
		}
	}

	if ($chemin_cache) $page['cache'] = $chemin_cache;

	if ($var_preview AND !$flag_preserver) {
		$url = $GLOBALS['clean_link'];
		$url-&gt;delvar('var_preview');
		$url = $url-&gt;geturl();
		include_ecrire('inc_lang.php3');
		lang_select($GLOBALS['auteur_session']['lang']);
		$page['texte'] .= '&lt;div style=&quot;
		display: block;
		color: #eeeeee;
		background-color: #111111;
		padding-right: 5px;
		padding-top: 2px;
		padding-bottom: 5px;
		font-size: 20px;
		top: 0px;
		left: 0px;
		position: absolute;
		&quot;&gt;&lt;a href=&quot;'.$url.'&quot;&gt;&lt;img src=&quot;' . _DIR_IMG_PACK . 'naviguer-site.png&quot; align=&quot;left&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;
&nbsp; '.majuscules(_T('previsualisation')).'&lt;/div&gt;';
	}

	return $page;
}


function terminer_public_global() {

	// Mise a jour des fichiers langues de l'espace public
	if ($GLOBALS['cache_lang_modifs']) {
		include_ecrire('inc_lang.php3');
		ecrire_caches_langues();
	}

	// Gestion des statistiques du site public

	if (lire_meta(&quot;activer_statistiques&quot;) != &quot;non&quot;) {
		include_local (&quot;inc-stats.php3&quot;);
		ecrire_stats();
	}

	// Effectuer une tache de fond ?
	cron();
}

// Cette fonction sert au dernier ob_start() de inc-public : elle
// va absorber les eventuels messages d'erreur de inc_cron(), permettant
// de ne pas planter le content-length qu'on a annonce ; decommenter la ligne
// pour afficher les bugs
function masquer_les_bugs ($bugs) {
	# return $bugs;
}

function inclure_page($fond, $delais_inclus, $contexte_inclus, $cache_incluant='') {

	$contexte_inclus['fond'] = $fond;

	$chemin_cache = generer_nom_fichier_cache($contexte_inclus, $fond);

	// Peut-on utiliser un fichier cache ?
	determiner_cache($delais_inclus, $use_cache, $chemin_cache);

	// Si on a inclus sans fixer le critere de lang, de deux choses l'une :
	// - on est dans la langue du site, et pas besoin d'inclure inc_lang
	// - on n'y est pas, et alors il faut revenir dans la langue par defaut
	if (($lang = $contexte_inclus['lang'])
	|| ($GLOBALS['spip_lang'] != ($lang = lire_meta('langue_site')))) {
		include_ecrire('inc_lang.php3');
		lang_select($lang);
		$lang_select = true; // pour lang_dselect en sortie
	}

	$page = obtenir_page ($contexte_inclus, $chemin_cache, $delais_inclus,
	$use_cache, $fond, true);

	$page['lang_select'] = $lang_select;

	// Retourner le contenu...
	return $page;
}

function inclure_balise_dynamique($r) {
	if (is_string($r))
		echo $r;
	else {
		list($fond, $delais, $contexte_inclus) = $r;
		if ((!$contexte_inclus['lang']) AND
		($GLOBALS['spip_lang'] != lire_meta('langue_site')))
			$contexte_inclus['lang'] = $GLOBALS['spip_lang']; 
		include('inc-public.php3');
	}
}
?&gt;

--- NEW FILE: inc-formulaire_forum.php3 ---
&lt;?php

include_ecrire('inc_meta.php3');
include_ecrire('inc_admin.php3');
include_ecrire('inc_acces.php3');
include_ecrire('inc_texte.php3');
include_ecrire('inc_filtres.php3');
include_ecrire('inc_lang.php3');
include_ecrire('inc_mail.php3');
include_ecrire('inc_forum.php3');
include_ecrire(&quot;inc_abstract_sql.php3&quot;);
include_local(_FILE_CONNECT);

// Gestionnaire d'URLs
if (@file_exists(&quot;inc-urls.php3&quot;))
	include_local(&quot;inc-urls.php3&quot;);
else
	include_local(&quot;inc-urls-&quot;.$GLOBALS['type_urls'].&quot;.php3&quot;);

/*******************************/
/* GESTION DU FORMULAIRE FORUM */
/*******************************/
global $balise_FORMULAIRE_FORUM_collecte;
$balise_FORMULAIRE_FORUM_collecte = array('id_rubrique', 'id_forum', 'id_article', 'id_breve', 'id_syndic');

function balise_FORMULAIRE_FORUM_stat($args, $filtres)
{
  list ($idr, $idf, $ida, $idb, $ids) = $args;

  // recuperer les donnees du forum auquel on repond, false = forum interdit
  if (!$r = sql_recherche_donnees_forum ($idr, $idf, $ida, $idb, $ids))
    return '';
  list($titre, $table, $forums_publics) = $r;
  return 
    array($titre, $table, $forums_publics, $idr, $idf, $ida, $idb, $ids);
}

function balise_FORMULAIRE_FORUM_dyn($titre, $table, $forums_publics, $id_rubrique, $id_forum, $id_article, $id_breve, $id_syndic) {

	global $REMOTE_ADDR, $id_message, $afficher_texte, $spip_forum_user;

	// url de reference
	if (!$url = rawurldecode($GLOBALS['url'])) 
	    $url = $GLOBALS['REQUEST_URI'];
	else {
	// identifiants des parents
	  $args = '';  
	  if ($id_rubrique) $args .= &quot;id_rubrique=$id_rubrique&quot;;
	  if ($id_forum) $args .= &quot;id_forum=$id_forum&quot;;
	  if ($id_article) $args .= &quot;id_article=$id_article&quot;;
	  if ($id_breve) $args .= &quot;id_breve=$id_breve&quot;;
	  if ($id_syndic) $args .= &quot;id_syndic=$id_syndic&quot;;
	  if ($args &amp;&amp; strpos($url,$args)===false) $url .= (strpos($url,'?') ? '&amp;' : '?') . $args;
	}
	$url = ereg_replace(&quot;[?&amp;]var_erreur=[^&amp;]*&quot;, '', $url);
	$url = ereg_replace(&quot;[?&amp;]var_login=[^&amp;]*&quot;, '', $url);
	$url = ereg_replace(&quot;[?&amp;]url=[^&amp;]*&quot;, '', $url);

	// verifier l'identite des posteurs pour les forums sur abo
	if (($forums_publics == &quot;abo&quot;) &amp;&amp; (!$GLOBALS[&quot;auteur_session&quot;]))
	  {
	    include_local('inc-login_public.php3');
	    return login_pour_tous($GLOBALS['var_login'], $url, true, $url, 'forum');
	  }
	// au premier appel (pas de http-var nommee &quot;retour&quot;)
	// memoriser l'URL courante pour y revenir apres envoi du message
	// aux appels suivants, reconduire la valeur.
	if ($retour = rawurldecode($GLOBALS['HTTP_GET_VARS']['retour']))
	  $retour = ereg_replace('&amp;var_mode=recalcul','',$retour);
	else {
	  if (!$retour = rawurldecode($GLOBALS['HTTP_POST_VARS']['retour']))
	    $retour = $url;
	}

	// ne pas mettre '', sinon le squelette n'affichera rien.

	$previsu = ' ';

	// Recuperer le message a previsualiser
	if ($id_message = intval($GLOBALS['HTTP_POST_VARS']['id_message']))  {
		$titre = $GLOBALS['HTTP_POST_VARS']['titre'];
		$texte = $GLOBALS['HTTP_POST_VARS']['texte'];
		$auteur = $GLOBALS['HTTP_POST_VARS']['auteur'];
		$email_auteur = $GLOBALS['HTTP_POST_VARS']['email_auteur'];
		$nom_site_forum = $GLOBALS['HTTP_POST_VARS']['nom_site_forum'];
		$url_site = $GLOBALS['HTTP_POST_VARS']['url_site'];

		if ($afficher_texte != 'non') {
			$previsu = 
			  &quot;&lt;div style='font-size: 120%; font-weight: bold;'&gt;&quot;
			  . interdire_scripts(typo($titre))
			  . &quot;&lt;/div&gt;&lt;p /&gt;&lt;b&gt;&lt;a href=\&quot;mailto:&quot;
			  . interdire_scripts(typo($email_auteur)) . &quot;\&quot;&gt;&quot;
			  . interdire_scripts(typo($auteur)) . &quot;&lt;/a&gt;&lt;/b&gt;&lt;p /&gt;&quot;
			  . propre($texte) . &quot;&lt;p /&gt;&lt;a href=\&quot;&quot;
			  . interdire_scripts($url_site) . &quot;\&quot;&gt;&quot;
			  . interdire_scripts(typo($nom_site_forum)) . &quot;&lt;/a&gt;&quot;;

			// Verifier mots associes au message
			$result_mots = spip_query(&quot;SELECT mots.id_mot, mots.titre, mots.type
			FROM spip_mots_forum AS lien, spip_mots AS mots 
			WHERE id_forum='$id_message' AND mots.id_mot = lien.id_mot
			GROUP BY mots.id_mot&quot;);
			if (spip_num_rows($result_mots)&gt;0) {
				$previsu .= &quot;&lt;p&gt;&quot;._T('forum_avez_selectionne').&quot;&lt;/p&gt;&lt;ul&gt;&quot;;
				while ($row = spip_fetch_array($result_mots)) {
					$les_mots[$row['id_mot']] = &quot;checked='checked'&quot;;
					$presence_mots = true;
					$previsu .= &quot;&lt;li class='font-size=80%'&gt; &quot;
					. typo($row['type']) . &quot;&nbsp;: &lt;b&gt;&quot;
					. typo($row['titre']) .&quot;&lt;/b&gt;&lt;/li&gt;&quot;;
				}
				$previsu .= '&lt;/ul&gt;';
			}

			if (strlen($texte) &lt; 10 AND !$presence_mots) {
				$previsu .= &quot;&lt;p align='right' style='color: red;'&gt;&quot;._T('forum_attention_dix_caracteres').&quot;&lt;/p&gt;\n&quot;;
			}
			else if (strlen($titre) &lt; 3 AND $afficher_texte &lt;&gt; &quot;non&quot;) {
				$previsu .= &quot;&lt;p align='right' style='color: red;'&gt;&quot;._T('forum_attention_trois_caracteres').&quot;&lt;/p&gt;&quot;;
			}
			else {
				$previsu .= &quot;&lt;div align='right'&gt;&lt;input type='submit' name='confirmer' class='spip_bouton' value='&quot;._T('forum_message_definitif').&quot;' /&gt;&lt;/div&gt;&quot;;
			}
			$previsu = &quot;&lt;div class='spip_encadrer'&gt;$previsu&lt;/div&gt;\n&lt;br /&gt;&quot;;
			// supprimer les &lt;form&gt; de la previsualisation
			// (sinon on ne peut pas faire &lt;cadre&gt;...&lt;/cadre&gt; dans les forums)
			$previsu = preg_replace(&quot;@&lt;(/?)f(orm[&gt;[:space:]])@ism&quot;, &quot;&lt;\\1no-f\\2&quot;, $previsu);
		}
	} else {
		// Premiere edition, initialiser l'auteur
	  	// puis s'accorder une nouvelle entree dans la table
		if ($spip_forum_user &amp;&amp; is_array($cookie_user = unserialize($spip_forum_user))) {
			$auteur = $cookie_user['nom'];
			$email_auteur = $cookie_user['email'];
		}
		else {
			$auteur = $GLOBALS['auteur_session']['nom'];
			$email_auteur = $GLOBALS['auteur_session']['email'];
		}
		$id_message = spip_abstract_insert('forum', 
					  &quot;(date_heure, titre, ip, statut)&quot;,
					  &quot;(NOW(), '&quot;.addslashes($titre).&quot;', '$REMOTE_ADDR', 'redac')&quot;);

	}

	// Generation d'une valeur de securite pour validation
	$seed = (double) (microtime() + 1) * time() * 1000000;
	@mt_srand($seed);
	$alea = @mt_rand();
	if (!$alea) {srand($seed);$alea = rand();}
	$forum_id_rubrique = intval($id_rubrique);
	$forum_id_forum = intval($id_forum);
	$forum_id_article = intval($id_article);
	$forum_id_breve = intval($id_breve);
	$forum_id_syndic = intval($id_syndic);
	$hash = calculer_action_auteur(&quot;ajout_forum $forum_id_rubrique $forum_id_forum $forum_id_article $forum_id_breve $forum_id_syndic $alea&quot;);

	// Faut-il ajouter des propositions de mots-cles
	if ((lire_meta(&quot;mots_cles_forums&quot;) == &quot;oui&quot;) &amp;&amp; ($table != 'forum'))
		$table = table_des_mots($table, $les_mots);
	else
		$table = '';

	return array(
		     'formulaire_forum',
		     0,
		     array(
		     'afficher_non' =&gt; 
		     ($afficher_texte != 'non' ? '' :
		      (boutonne('hidden', 'titre', htmlspecialchars($titre)) .
		       $table .
		       &quot;\n&lt;br /&gt;&lt;div align='right'&gt;&quot; .
		       boutonne('submit', '', _T('forum_valider'), &quot;class='spip_bouton'&quot;) .
		       &quot;&lt;/div&gt;&quot;)), 
		     'alea' =&gt; $alea,
		     'auteur' =&gt; $auteur,
		     'disabled' =&gt; ($forums_publics == &quot;abo&quot;)? &quot; disabled='disabled'&quot; : '',
		     'email_auteur' =&gt; $email_auteur,
		     'hash' =&gt; $hash,
		     'id_message' =&gt; $id_message,
		     'modere' =&gt; (($forums_publics != 'pri') ? '' :
				  _T('forum_info_modere')),
		     'nom_site_forum' =&gt; $nom_site_forum,
		     'previsu' =&gt; $previsu,
		     'retour' =&gt; $retour,
		     'table' =&gt; $table,
		     'texte' =&gt; $texte,
		     'titre' =&gt; $titre,
		     'url' =&gt;  $url,
		     'url_site' =&gt; ($url_site ? $url_site : &quot;<A HREF="http://">http://</A>&quot;)
		     ));
}


function barre_forum($texte)
{
	include_ecrire('inc_layer.php3');

	if (!$GLOBALS['browser_barre'])
		return &quot;&lt;textarea name='texte' rows='12' class='forml' cols='40'&gt;$texte&lt;/textarea&gt;&quot;;
	static $num_formulaire = 0;
	$num_formulaire++;
	include_ecrire('inc_barre.php3');
	return afficher_barre(&quot;document.getElementById('formulaire_$num_formulaire')&quot;, true) .
	  &quot;
&lt;textarea name='texte' rows='12' class='forml' cols='40'
id='formulaire_$num_formulaire'
onselect='storeCaret(this);'
onclick='storeCaret(this);'
onkeyup='storeCaret(this);'
ondbclick='storeCaret(this);'&gt;$texte&lt;/textarea&gt;&quot;;
}

// Mots-cles dans les forums :
// Si la variable de personnalisation $afficher_groupe[] est definie
// dans le fichier d'appel, et si la table de reference est OK, proposer
// la liste des mots-cles
function table_des_mots($table, $les_mots) {
	global $afficher_groupe;

	if ($afficher_groupe)
		$in_group = &quot; AND id_groupe IN (&quot; . join($afficher_groupe, &quot;, &quot;) .&quot;)&quot;;

	$result_groupe = spip_query(&quot;SELECT * FROM spip_groupes_mots
	WHERE 6forum = 'oui' AND $table = 'oui'&quot;. $in_group);

	$ret = '';
	while ($row_groupe = spip_fetch_array($result_groupe)) {
		$id_groupe = $row_groupe['id_groupe'];
		$titre_groupe = propre($row_groupe['titre']);
		$unseul = ($row_groupe['unseul']== 'oui') ? 'radio' : 'checkbox';
		$result =spip_query(&quot;SELECT * FROM spip_mots
		WHERE id_groupe='$id_groupe'&quot;);
		$total_rows = spip_num_rows($result);

		if ($total_rows &gt; 0) {
			$ret .= &quot;\n&lt;p /&gt;&quot;;
			$ret .= &quot;&lt;div class='spip_encadrer' style='font-size: 80%;'&gt;&quot;;
			$ret.= &quot;&lt;b&gt;$titre_groupe&nbsp;:&lt;/b&gt;&quot;;
			$ret .= &quot;&lt;table cellpadding='0' cellspacing='0' border='0' width='100%'&gt;\n&quot;;
			$ret .= &quot;&lt;tr&gt;&lt;td width='47%' valign='top'&gt;&quot;;
			$i = 0;
      
		while ($row = spip_fetch_array($result)) {
			$id_mot = $row['id_mot'];
			$titre_mot = propre($row['titre']);
			$descriptif_mot = propre($row['descriptif']);

			if ($i &gt;= ($total_rows/2) AND $i &lt; $total_rows) {
				$i = $total_rows + 1;
				$ret .= &quot;&lt;/td&gt;&lt;td width='6%'&gt;&nbsp;&lt;/td&gt;
				&lt;td width='47%' valign='top'&gt;&quot;;
			}

			$ret .= boutonne($unseul, &quot;ajouter_mot[$id_groupe][]&quot;, $id_mot, &quot;id='mot$id_mot' &quot; . $les_mots[$id_mot]) .
			  afficher_petits_logos_mots($id_mot)
			. &quot;&lt;b&gt;&lt;label for='mot$id_mot'&gt;$titre_mot&lt;/label&gt;&lt;/b&gt;&lt;br /&gt;&quot;;

			if ($descriptif_mot)
				$ret .= &quot;$descriptif_mot&lt;br /&gt;&quot;;
			$i++;
		}

		$ret .= &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
		$ret .= &quot;&lt;/div&gt;&quot;;
		}
	}

	return $ret;
}


function afficher_petits_logos_mots($id_mot) {
	include_ecrire('inc_logos.php3');
	$on = cherche_image_nommee(&quot;moton$id_mot&quot;);
	if ($on) {
	  $image = (&quot;$on[0]$on[1].$on[2]&quot;);
		$taille = @getimagesize($image);
		$largeur = $taille[0];
		$hauteur = $taille[1];
		if ($largeur &lt; 100 AND $hauteur &lt; 100)
			return &quot;&lt;img src='$image' align='middle' width='$largeur'
			height='$hauteur' hspace='1' vspace='1' alt=' ' border='0'
			class='spip_image' /&gt; &quot;;
	}
}

/*******************************************************/
/* FONCTIONS DE CALCUL DES DONNEES DU FORMULAIRE FORUM */
/*******************************************************/

//
// Chercher le titre et la configuration du forum de l'element auquel on repond
//

function sql_recherche_donnees_forum ($idr, $idf, $ida, $idb, $ids) {

	// changer la table de reference s'il y a lieu (pour afficher_groupes[] !!)
	if ($idr) {
		$r = &quot;SELECT titre FROM spip_rubriques WHERE id_rubrique = $idr&quot;;
		$table = &quot;rubriques&quot;;
	} else if ($ida) {
		$r = &quot;SELECT titre FROM spip_articles WHERE id_article = $ida&quot;;
		$table = &quot;articles&quot;;
	} else if ($idb) {
		$r = &quot;SELECT titre FROM spip_breves WHERE id_breve = $idb&quot;;
		$table = &quot;breves&quot;;
	} else if ($ids) {
		$r = &quot;SELECT nom_site AS titre FROM spip_syndic WHERE id_syndic = $ids&quot;;
		$table = &quot;syndic&quot;;
	}

	if ($idf)
		$r = &quot;SELECT titre FROM spip_forum WHERE id_forum = $idf&quot;;

	if ($r) {
		list($titre) = spip_fetch_array(spip_query($r));
		$titre = '&gt; ' . supprimer_numero($titre);
	} else {
		$titre = _T('forum_titre_erreur');
		$table = '';
	}

	// quelle est la configuration du forum ?
	if ($ida)
		list($accepter_forum) = spip_fetch_array(spip_query(
		&quot;SELECT accepter_forum FROM spip_articles WHERE id_article=$ida&quot;));
	else
		$accepter_forum = substr(lire_meta(&quot;forums_publics&quot;),0,3);
	// valeurs possibles : 'pos'teriori, 'pri'ori, 'abo'nnement
	if ($accepter_forum == &quot;non&quot;)
		return false;

	return array ($titre, $table, $accepter_forum);
}

?&gt;

--- NEW FILE: inc-urls-propres.php3 ---
&lt;?php

// executer une seule fois
if (defined(&quot;_INC_URLS2&quot;)) return;
define(&quot;_INC_URLS2&quot;, &quot;1&quot;);


/*

- Comment utiliser ce jeu d'URLs ?

Il faut recopier le fichier htaccess-propre.txt sous le nom .htaccess
dans le repertoire de base du site SPIP (attention a ne pas ecraser
d'autres reglages que vous pourriez avoir mis dans ce fichier)

*/


function _generer_url_propre($type, $id_objet) {
	$table = &quot;spip_&quot;.$type.&quot;s&quot;;
	$col_id = &quot;id_&quot;.$type;

	// D'abord, essayer de recuperer l'URL existante si possible
	$query = &quot;SELECT url_propre, titre FROM $table WHERE $col_id=$id_objet&quot;;
	$result = spip_query($query);
	if (!($row = spip_fetch_array($result))) return &quot;&quot;;
	if ($row['url_propre']) return $row['url_propre'];

	// Sinon, creer l'URL
	include_ecrire(&quot;inc_filtres.php3&quot;);
	include_ecrire(&quot;inc_charsets.php3&quot;);
	$url = translitteration(corriger_caracteres(supprimer_tags(supprimer_numero($row['titre']))));
	$url = @preg_replace(',[[:punct:][:space:]]+,u', ' ', $url);
	// S'il reste des caracteres non latins, utiliser l'id a la place
	if (preg_match(&quot;,[^a-zA-Z0-9 ],&quot;, $url)) {
		$url = $type.$id_objet;
	}
	else {
		$mots = explode(' ', $url);
		$url = '';
		foreach ($mots as $mot) {
			if (!$mot) continue;
			$url2 = $url.'-'.$mot;
			if (strlen($url2) &gt; 35) {
				break;
			}
			$url = $url2;
		}
		$url = substr($url, 1);
		//echo &quot;$url&lt;br&gt;&quot;;
		if (strlen($url) &lt; 2) $url = $type.$id_objet;
	}

	// Verifier les eventuels doublons et mettre a jour
	$lock = &quot;url $type $id_objet&quot;;
	spip_get_lock($lock, 10);
	$query = &quot;SELECT $col_id FROM $table WHERE url_propre='&quot;.addslashes($url).&quot;'&quot;;
	if (spip_num_rows(spip_query($query)) &gt; 0) {
		$url = $url.','.$id_objet;
	}
	$query = &quot;UPDATE $table SET url_propre='&quot;.addslashes($url).&quot;' WHERE $col_id=$id_objet&quot;;
	spip_query($query);
	spip_release_lock($lock);

	return $url;
}

function generer_url_article($id_article) {
	$url = _generer_url_propre('article', $id_article);
	if (!$url) $url = &quot;article.php3?id_article=$id_article&quot;;
	return $url;
}

function generer_url_rubrique($id_rubrique) {
	$url = _generer_url_propre('rubrique', $id_rubrique);
	if (!$url) $url = &quot;rubrique.php3?id_rubrique=$id_rubrique&quot;;
	else $url = '-'.$url.'-';
	return $url;
}

function generer_url_breve($id_breve) {
	$url = _generer_url_propre('breve', $id_breve);
	if (!$url) $url = &quot;breve.php3?id_breve=$id_breve&quot;;
	else $url = '+'.$url.'+';
	return $url;
}

function generer_url_forum($id_forum) {
	return &quot;forum.php3?id_forum=$id_forum&quot;;
}

function generer_url_mot($id_mot) {
	$url = _generer_url_propre('mot', $id_mot);
	if (!$url) $url = &quot;mot.php3?id_mot=$id_mot&quot;;
	else $url = '+-'.$url.'-+';
	return $url;
}

function generer_url_auteur($id_auteur) {
	return &quot;auteur.php3?id_auteur=$id_auteur&quot;;
}

function generer_url_document($id_document) {
	if (intval($id_document) &lt;= 0)
		return '';
	if ((lire_meta(&quot;creer_htaccess&quot;)) == 'oui')
		return &quot;spip_acces_doc.php3?id_document=$id_document&quot;;
	if ($row = @spip_fetch_array(spip_query(&quot;SELECT fichier FROM spip_documents WHERE id_document = $id_document&quot;)))
		return ($row['fichier']);
	return '';
}

function recuperer_parametres_url($fond, $url) {
	global $contexte;

	// Migration depuis anciennes URLs ?
	if ($GLOBALS['HTTP_SERVER_VARS']['REQUEST_METHOD'] != 'POST' &amp;&amp;
		preg_match(',(^|/)(article|breve|rubrique|mot)\.php3?([\?&amp;].*)?$,', $url, $regs)) {
		$type = $regs[2];
		$id_objet = intval($GLOBALS['id_'.$type]);
		if ($id_objet) {
			$func = &quot;generer_url_$type&quot;;
			$url_propre = $func($id_objet);
			if ($url_propre) {
				http_status(301);
				Header(&quot;Location: $url_propre&quot;);
				exit;
			}
		}
		return;
	}

	$url_propre = $GLOBALS['HTTP_SERVER_VARS']['REDIRECT_url_propre'];
	if (!$url_propre) $url_propre = $GLOBALS['HTTP_ENV_VARS']['url_propre'];
	if (!$url_propre) $url_propre = substr($url, strrpos($url, '/') + 1);
	if (!$url_propre) return;

	// Detecter les differents types d'objets demandes
	if (preg_match(',^\+-(.*)-\+$,', $url_propre, $regs)) {
		$type = 'mot';
		$url_propre = $regs[1];
	}
	else if (preg_match(',^-(.*)-$,', $url_propre, $regs)) {
		$type = 'rubrique';
		$url_propre = $regs[1];
	}
	else if (preg_match(',^\+(.*)\+$,', $url_propre, $regs)) {
		$type = 'breve';
		$url_propre = $regs[1];
	}
	else {
		$type = 'article';
	}

	$table = &quot;spip_&quot;.$type.&quot;s&quot;;
	$col_id = &quot;id_&quot;.$type;
	$query = &quot;SELECT $col_id FROM $table WHERE url_propre='&quot;.addslashes($url_propre).&quot;'&quot;;
	$result = spip_query($query);
	if (spip_num_rows($result) == 1) {
		$row = spip_fetch_array($result);
		$contexte[$col_id] = $row[$col_id];
	}

	return;
}

?&gt;
--- NEW FILE: inc-formulaire_admin.php3 ---
&lt;?php

global $balise_FORMULAIRE_ADMIN_collecte ;
$balise_FORMULAIRE_ADMIN_collecte = array('id_article', 'id_breve', 'id_rubrique', 'id_mot', 'id_auteur');

# on ne peut rien dire au moment de l'ex&#233;cution du squelette

function balise_FORMULAIRE_ADMIN_stat($args, $filtres)
{
	return $args;
}

# les boutons admin sont mis d'autorite si absents
# donc une variable statique controle si FORMULAIRE_ADMIN a ete vu.
# Toutefois, si c'est le debuger qui appelle,
# il peut avoir recopie le code dans ses donnees et il faut le lui refounir.
# Pas question de recompiler: ca fait boucler !
# Le debuger transmet donc ses donnees, et cette balise y retrouve son petit.

function balise_FORMULAIRE_ADMIN_dyn($id_article, $id_breve, $id_rubrique, $id_mot, $id_auteur, $debug='') {
	global $var_preview, $use_cache;
	static $dejafait = false;

	if ($GLOBALS['flag_preserver'] || !$GLOBALS['spip_admin'])
		return '';

	if (!is_array($debug)) {
		if ($dejafait)
			return '';
	} else {
		if ($dejafait) {
			$res = '';
			foreach($debug['sourcefile'] as $k =&gt; $v) {
				if (strpos($v,'formulaire_admin') === 0)
					return $debug['resultat'][$k . 'tout'];
			}
			return '';
		}
	}
	$dejafait = true;

	// regler les boutons dans la langue de l'admin (sinon tant pis)
	include_local(_FILE_CONNECT);
	$login = addslashes(ereg_replace('^@','',$GLOBALS['spip_admin']));
	if ($row = spip_fetch_array(spip_query(&quot;SELECT lang FROM spip_auteurs WHERE login='$login'&quot;))) {
		$lang = $row['lang'];
		include_ecrire (&quot;inc_lang.php3&quot;);
		lang_select($lang);
	}

	// repartir de zero pour les boutons car clean_link a pu etre utilisee
	$link = new Link;
	$link-&gt;delVar('var_mode');
	$link-&gt;delVar('var_mode_objet');
	$link-&gt;delVar('var_mode_affiche');
	$action = $link-&gt;getUrl();
	$action = ($action . ((strpos($action, '?') === false) ? '?' : '&amp;'));

  // en preview pas de stat ni de debug
	if (!$var_preview) {
		// Bouton statistiques
		if (lire_meta(&quot;activer_statistiques&quot;) != &quot;non&quot; 
		AND $id_article
		AND ($GLOBALS['auteur_session']['statut'] == '0minirezo')) {
			if (spip_fetch_array(spip_query(&quot;SELECT id_article
			FROM spip_articles WHERE statut='publie'
			AND id_article =&quot;.intval($id_article)))) {
				include_local (&quot;inc-stats.php3&quot;);
				$r = afficher_raccourci_stats($id_article);
				$visites = $r['visites'];
				$popularite = $r['popularite'];
				$statistiques = 'statistiques_visites.php3?';
			}
		}

		// Bouton de debug
		$debug = (
			($forcer_debug
			OR $GLOBALS['bouton_admin_debug']
			OR ($GLOBALS['var_mode'] == 'debug'
				AND $GLOBALS['HTTP_COOKIE_VARS']['spip_debug']
			)) AND ($GLOBALS['code_activation_debug'] == 'oui'
				OR $GLOBALS['auteur_session']['statut'] == '0minirezo')
		) ? 'debug' : '';
	}

	// hack - ne pas avoir la rubrique si un autre bouton est deja present
	if ($id_article OR $id_breve) unset ($id_rubrique);

	return array('formulaire_admin', 0,
			array(
				'id_article' =&gt; $id_article,
				'id_rubrique' =&gt; $id_rubrique,
				'id_auteur' =&gt; $id_auteur,
				'id_breve' =&gt; $id_breve,
				'id_mot' =&gt; $id_mot,
				'action' =&gt; $action,
				'debug' =&gt; $debug,
				'popularite' =&gt; intval($popularite),
				'statistiques' =&gt; $statistiques,
				'visites' =&gt; intval($visites),
				'use_cache' =&gt; ($use_cache ? ' *' : '')
			)
		);
}
?&gt;

--- NEW FILE: inc-balises.php3 ---
&lt;?php

//
// Ce fichier regroupe la quasi totalite des definitions de #BALISES de spip
// Pour chaque balise, il est possible de surcharger, dans mes_fonctions.php3,
// la fonction balise_TOTO_dist par une fonction balise_TOTO() respectant la
// meme API : 
// elle recoit en entree un objet de classe CHAMP, le modifie et le retourne.
// Cette classe est definie dans inc-compilo-index.php3
//

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_BALISES&quot;)) return;
define(&quot;_INC_BALISES&quot;, &quot;1&quot;);


//
// Traitements standard de divers champs
//
function champs_traitements ($p) {
	static $traitements = array (
		'BIO' =&gt; 'traiter_raccourcis(%s)',
		'CHAPO' =&gt; 'traiter_raccourcis(nettoyer_chapo(%s))',
		'DATE' =&gt; 'vider_date(%s)',
		'DATE_MODIF' =&gt; 'vider_date(%s)',
		'DATE_NOUVEAUTES' =&gt; 'vider_date(%s)',
		'DATE_REDAC' =&gt; 'vider_date(%s)',
		'DESCRIPTIF' =&gt; 'traiter_raccourcis(%s)',
		'LIEN_TITRE' =&gt; 'typo(%s)',
		'LIEN_URL' =&gt; 'htmlspecialchars(vider_url(%s))',
		'MESSAGE' =&gt; 'traiter_raccourcis(%s)',
		'NOM_SITE_SPIP' =&gt; 'typo(%s)',
		'NOM' =&gt; 'typo(%s)',
		'PARAMETRES_FORUM' =&gt; 'htmlspecialchars(%s)',
		'PS' =&gt; 'traiter_raccourcis(%s)',
		'SOUSTITRE' =&gt; 'typo(%s)',
		'SURTITRE' =&gt; 'typo(%s)',
		'TEXTE' =&gt; 'traiter_raccourcis(%s)',
		'TITRE' =&gt; 'typo(%s)',
		'TYPE' =&gt; 'typo(%s)',
		'URL_ARTICLE' =&gt; 'htmlspecialchars(vider_url(%s))',
		'URL_BREVE' =&gt; 'htmlspecialchars(vider_url(%s))',
		'URL_DOCUMENT' =&gt; 'htmlspecialchars(vider_url(%s))',
		'URL_FORUM' =&gt; 'htmlspecialchars(vider_url(%s))',
		'URL_MOT' =&gt; 'htmlspecialchars(vider_url(%s))',
		'URL_RUBRIQUE' =&gt; 'htmlspecialchars(vider_url(%s))',
		'URL_SITE_SPIP' =&gt; 'htmlspecialchars(vider_url(%s))',
		'URL_SITE' =&gt; 'htmlspecialchars(vider_url(%s))',
		'URL_SYNDIC' =&gt; 'htmlspecialchars(vider_url(%s))',
		'HTTP_VARS' =&gt; 'htmlspecialchars(%s)'
	);
	$ps = $traitements[$p-&gt;nom_champ];
	if (!$ps) return $p-&gt;code;
	if ($p-&gt;documents)
	  {$ps = str_replace('traiter_raccourcis(', 
			     'traiter_raccourcis_doublon($doublons,',
			     str_replace('typo(', 
					 'typo_doublon($doublons,',
					 $ps));
	  }
	// on supprime les &lt; IMGnnn &gt; tant qu'on ne rapatrie pas
	// les documents distants joints..
	// il faudrait aussi corriger les raccourcis d'URL locales
	return str_replace('%s',
			   (!$p-&gt;boucles[$p-&gt;id_boucle]-&gt;sql_serveur ?
			    $p-&gt;code :
			    ('supprime_img(' . $p-&gt;code . ')')),
			   $ps);				
}

// il faudrait savoir traiter les formulaires en local 
// tout en appelant le serveur SQL distant.
// En attendant, cette fonction permet de refuser une authentification 
// sur qqch qui n'a rien &#224; voir.

function balise_distante_interdite($p) {
	$nom = $p-&gt;id_boucle;
	if ($p-&gt;boucles[$nom]-&gt;sql_serveur) {
		erreur_squelette($p-&gt;nom_champ ._L(&quot; distant interdit&quot;), $nom);
	}
}

//
// Definition des balises
//
function balise_NOM_SITE_SPIP_dist($p) {
	$p-&gt;code = &quot;lire_meta('nom_site')&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

function balise_EMAIL_WEBMASTER_dist($p) {
	$p-&gt;code = &quot;lire_meta('email_webmaster')&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

function balise_CHARSET_dist($p) {
	$p-&gt;code = &quot;lire_meta('charset')&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

function balise_LANG_LEFT_dist($p) {
	$_lang = champ_sql('lang', $p);
	$p-&gt;code = &quot;lang_dir(($_lang ? $_lang : \$GLOBALS['spip_lang']),'left','right')&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

function balise_LANG_RIGHT_dist($p) {
	$_lang = champ_sql('lang', $p);
	$p-&gt;code = &quot;lang_dir(($_lang ? $_lang : \$GLOBALS['spip_lang']),'right','left')&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

function balise_LANG_DIR_dist($p) {
	$_lang = champ_sql('lang', $p);
	$p-&gt;code = &quot;lang_dir(($_lang ? $_lang : \$GLOBALS['spip_lang']),'ltr','rtl')&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

function balise_PUCE_dist($p) {
	$_lang = champ_sql('lang', $p);
	$p-&gt;code = &quot;((lang_dir(($_lang ? $_lang : \$GLOBALS['spip_lang']),false,true) &amp;&amp; \$GLOBALS['puce_rtl']) ? \$GLOBALS['puce_rtl'] : \$GLOBALS['puce'])&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

// #DATE
// Cette fonction sait aller chercher dans le contexte general
// quand #DATE est en dehors des boucles
// <A HREF="http://www.spip.net/fr_article1971.html">http://www.spip.net/fr_article1971.html</A>
function balise_DATE_dist ($p) {
	$_date = champ_sql('date', $p);
	$p-&gt;code = &quot;$_date&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

// #DATE_REDAC
// <A HREF="http://www.spip.net/fr_article1971.html">http://www.spip.net/fr_article1971.html</A>
function balise_DATE_REDAC_dist ($p) {
	$_date = champ_sql('date_redac', $p);
	$p-&gt;code = &quot;$_date&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

// #DATE_MODIF
// <A HREF="http://www.spip.net/fr_article1971.html">http://www.spip.net/fr_article1971.html</A>
function balise_DATE_MODIF_dist ($p) {
	$_date = champ_sql('date_modif', $p);
	$p-&gt;code = &quot;$_date&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

// #DATE_NOUVEAUTES
// <A HREF="http://www.spip.net/fr_article1971.html">http://www.spip.net/fr_article1971.html</A>
function balise_DATE_NOUVEAUTES_dist($p) {
	$p-&gt;code = &quot;((lire_meta('quoi_de_neuf') == 'oui' AND lire_meta('majnouv')) ? normaliser_date(lire_meta('majnouv')) : \&quot;'0000-00-00'\&quot;)&quot;;
	$p-&gt;statut = 'php';
	return $p;
}

function balise_URL_SITE_SPIP_dist($p) {
	$p-&gt;code = &quot;lire_meta('adresse_site')&quot;;
	$p-&gt;statut = 'php';
	return $p;
}


function balise_URL_ARTICLE_dist($p) {
	$_type = $p-&gt;type_requete;

	// Cas particulier des boucles (SYNDIC_ARTICLES)
	if ($_type == 'syndic_articles') {
		$p-&gt;code = champ_sql('url', $p);
	}

	// Cas general : chercher un id_article dans la pile
	else {
		$_id_article = champ_sql('id_article', $p);
		$p-&gt;code = &quot;generer_url_article($_id_article)&quot;;

		if ($p-&gt;boucles[$p-&gt;nom_boucle ? $p-&gt;nom_boucle : $p-&gt;id_boucle]-&gt;hash)
			$p-&gt;code = &quot;url_var_recherche(&quot; . $p-&gt;code . &quot;)&quot;;
	}

	$p-&gt;statut = 'html';
	return $p;
}

function balise_URL_RUBRIQUE_dist($p) {
	$p-&gt;code = &quot;generer_url_rubrique(&quot; . 
	champ_sql('id_rubrique',$p) . 
	&quot;)&quot; ;
	if ($p-&gt;boucles[$p-&gt;nom_boucle ? $p-&gt;nom_boucle : $p-&gt;id_boucle]-&gt;hash)
	$p-&gt;code = &quot;url_var_recherche(&quot; . $p-&gt;code . &quot;)&quot;;

	$p-&gt;statut = 'html';
	return $p;
}

function balise_URL_BREVE_dist($p) {
	$p-&gt;code = &quot;generer_url_breve(&quot; .
	champ_sql('id_breve',$p) . 
	&quot;)&quot;;
	if ($p-&gt;boucles[$p-&gt;nom_boucle ? $p-&gt;nom_boucle : $p-&gt;id_boucle]-&gt;hash)
	$p-&gt;code = &quot;url_var_recherche(&quot; . $p-&gt;code . &quot;)&quot;;

	$p-&gt;statut = 'html';
	return $p;
}

function balise_URL_MOT_dist($p) {
	$p-&gt;code = &quot;generer_url_mot(&quot; .
	champ_sql('id_mot',$p) .
	&quot;)&quot;;
	$p-&gt;code = &quot;url_var_recherche(&quot; . $p-&gt;code . &quot;)&quot;;

	$p-&gt;statut = 'html';
	return $p;
}

function balise_URL_FORUM_dist($p) {
	$p-&gt;code = &quot;generer_url_forum(&quot; .
	champ_sql('id_forum',$p) .&quot;)&quot;;

	$p-&gt;statut = 'html';
	return $p;
}

function balise_URL_DOCUMENT_dist($p) {
	$p-&gt;code = &quot;generer_url_document(&quot; .
	champ_sql('id_document',$p) . &quot;)&quot;;

	$p-&gt;statut = 'html';
	return $p;
}

function balise_URL_AUTEUR_dist($p) {
	$p-&gt;code = &quot;generer_url_auteur(&quot; .
	champ_sql('id_auteur',$p) .&quot;)&quot;;
	if ($p-&gt;boucles[$p-&gt;nom_boucle ? $p-&gt;nom_boucle : $p-&gt;id_boucle]-&gt;hash)
	$p-&gt;code = &quot;url_var_recherche(&quot; . $p-&gt;code . &quot;)&quot;;

	$p-&gt;statut = 'html';
	return $p;
}

function balise_NOTES_dist($p) {
	// Recuperer les notes
	$p-&gt;code = 'calculer_notes()';
	$p-&gt;statut = 'html';
	return $p;
}

function balise_RECHERCHE_dist($p) {
	$p-&gt;code = 'htmlspecialchars($GLOBALS[&quot;recherche&quot;])';
	$p-&gt;statut = 'php';
	return $p;
}

function balise_COMPTEUR_BOUCLE_dist($p) {
	if ($p-&gt;id_mere === '') {
		erreur_squelette(_L(&quot;Champ #COMPTEUR_BOUCLE hors boucle&quot;), $p-&gt;id_boucle);
		$p-&gt;code = &quot;''&quot;;
	} else {
		$p-&gt;code = '$compteur_boucle';
		$p-&gt;statut = 'php';
		return $p;
	}
}

function balise_TOTAL_BOUCLE_dist($p) {
	$b = $p-&gt;nom_boucle ? $p-&gt;nom_boucle : $p-&gt;id_mere;
	if ($b === '') {
		erreur_squelette(_L(&quot;Champ #TOTAL_BOUCLE hors boucle&quot;), $p-&gt;id_boucle);
		$p-&gt;code = &quot;''&quot;;
	} else {
		$p-&gt;code = &quot;\$Numrows['$b']&quot;;
		$p-&gt;boucles[$b]-&gt;numrows = true;
		$p-&gt;statut = 'php';
	}
	return $p;
}

function balise_POINTS_dist($p) {
	return rindex_pile($p, 'points', 'recherche');
}

function balise_POPULARITE_ABSOLUE_dist($p) {
	$p-&gt;code = 'ceil(' .
	champ_sql('popularite', $p) .
	')';
	$p-&gt;statut = 'php';
	return $p;
}

function balise_POPULARITE_SITE_dist($p) {
	$p-&gt;code = 'ceil(lire_meta(\'popularite_total\'))';
	$p-&gt;statut = 'php';
	return $p;
}

function balise_POPULARITE_MAX_dist($p) {
	$p-&gt;code = 'ceil(lire_meta(\'popularite_max\'))';
	$p-&gt;statut = 'php';
	return $p;
}

function balise_EXPOSER_dist($p) {
	global  $table_primary;
	$type_boucle = $p-&gt;type_requete;
	$primary_key = $table_primary[$type_boucle];
	if (!$primary_key) {
		erreur_squelette(_L(&quot;Champ #EXPOSER hors boucle&quot;), $p-&gt;id_boucle);
	}
	$on = 'on';
	$off= '';
	if ($p-&gt;fonctions) {
		// Gerer la notation [(#EXPOSER|on,off)]
		reset($p-&gt;fonctions);
		list(, $onoff) = each($p-&gt;fonctions);
		ereg(&quot;([^,]*)(,(.*))?&quot;, $onoff, $regs);
		$on = addslashes($regs[1]);
		$off = addslashes($regs[3]);
		
		// autres filtres
		$filtres=Array();
		while (list(, $nom) = each($p-&gt;fonctions))
		  $filtres[] = $nom;
		$p-&gt;fonctions = $filtres;
	}


	$p-&gt;code = '(calcul_exposer('
	.champ_sql($primary_key, $p)
	.', &quot;'.$primary_key.'&quot;, $Pile[0]) ?'.&quot; '$on': '$off')&quot;;
	$p-&gt;statut = 'php';
	return $p;
}


//
// Inserer directement un document dans le squelette
//
function balise_EMBED_DOCUMENT_dist($p) {
	balise_distante_interdite($p);
	$_id_document = champ_sql('id_document',$p);
	$p-&gt;code = &quot;calcule_embed_document(intval($_id_document), '&quot; .
	texte_script($p-&gt;fonctions ? join($p-&gt;fonctions, &quot;|&quot;) : &quot;&quot;) .
	  &quot;', \$doublons, '&quot; . $p-&gt;documents . &quot;')&quot;;
	unset ($p-&gt;fonctions);
	$p-&gt;statut = 'html';
	return $p;
}

// Debut et fin de surlignage auto des mots de la recherche
// on insere une balise Span avec une classe sans spec:
// c'est transparent s'il n'y a pas de recherche,
// sinon elles seront remplacees par les fontions de inc_surligne
// flag_pcre est juste une flag signalant que preg_match est dispo.

function balise_DEBUT_SURLIGNE_dist($p) {
	global $flag_pcre;
	$p-&gt;code = ($flag_pcre ? ('\'&lt;span class=&quot;spip_surligneconditionnel&quot;&gt;\'') : &quot;''&quot;);
	return $p;
}
function balise_FIN_SURLIGNE_dist($p) {
	global $flag_pcre;
	$p-&gt;code = ($flag_pcre ? ('\'&lt;/span class=&quot;spip_surligneconditionnel&quot;&gt;\'') : &quot;''&quot;);
	return $p;
}

function balise_INTRODUCTION_dist ($p) {
	$_type = $p-&gt;type_requete;
	$_texte = champ_sql('texte', $p);
	$_chapo = champ_sql('chapo', $p);
	$_descriptif = champ_sql('descriptif', $p);
	$p-&gt;code = &quot;calcul_introduction('$_type', $_texte, $_chapo, $_descriptif)&quot;;

	$p-&gt;statut = 'html';
	return $p;
}


// #LANG
// non documente ?
function balise_LANG_dist ($p) {
	$_lang = champ_sql('lang', $p);
	$p-&gt;code = &quot;($_lang ? $_lang : \$GLOBALS['spip_lang'])&quot;;
	$p-&gt;statut = 'php';
	return $p;
}


// #LESAUTEURS
// les auteurs d'un article (ou d'un article syndique)
// <A HREF="http://www.spip.net/fr_article902.html">http://www.spip.net/fr_article902.html</A>
// <A HREF="http://www.spip.net/fr_article911.html">http://www.spip.net/fr_article911.html</A>
function balise_LESAUTEURS_dist ($p) {
	// Cherche le champ 'lesauteurs' dans la pile
	$_lesauteurs = champ_sql('lesauteurs', $p); 

	// Si le champ n'existe pas (cas de spip_articles), on donne la
	// construction speciale sql_auteurs(id_article) ;
	// dans le cas contraire on prend le champ 'les_auteurs' (cas de
	// spip_syndic_articles)
	if ($_lesauteurs AND $_lesauteurs != '$Pile[0][\'lesauteurs\']') {
		$p-&gt;code = $_lesauteurs;
	} else {
		$nom = $p-&gt;id_boucle;
	# On pourrait mieux faire qu'utiliser cette fonction assistante ?
		$p-&gt;code = &quot;sql_auteurs(&quot; .
			champ_sql('id_article', $p) .
			&quot;,'&quot; .
			$nom .
			&quot;','&quot; .
			$p-&gt;boucles[$nom]-&gt;type_requete .
			&quot;','&quot; .
			$p-&gt;boucles[$nom]-&gt;sql_serveur .
			&quot;')&quot;;
	}

	$p-&gt;statut = 'html';
	return $p;
}


// #PETITION
// Champ testant la presence d'une petition
// non documente mais indispensable a FORMULAIRE_PETITION

function balise_PETITION_dist ($p) {
	$nom = $p-&gt;id_boucle;
	$p-&gt;code = &quot;sql_petitions(&quot; .
			champ_sql('id_article', $p) .
			&quot;,'&quot; .
			$p-&gt;boucles[$nom]-&gt;type_requete .
			&quot;','&quot; .
			$nom .
			&quot;','&quot; .
			$p-&gt;boucles[$nom]-&gt;sql_serveur .
			&quot;', \$Cache)&quot;;
	$p-&gt;statut = 'php';
	return $p;
}


// #POPULARITE
// <A HREF="http://www.spip.net/fr_article1846.html">http://www.spip.net/fr_article1846.html</A>
function balise_POPULARITE_dist ($p) {
	$_popularite = champ_sql('popularite', $p);
	$p-&gt;code = &quot;(ceil(min(100, 100 * $_popularite
	/ max(1 , 0 + lire_meta('popularite_max')))))&quot;;
	$p-&gt;statut = 'php';
	return $p;
}


//
// Fonction commune aux balises #LOGO_XXXX
// (les balises portant ce type de nom sont traitees en bloc ici)
//
function calculer_balise_logo ($p) {

	eregi(&quot;^LOGO_([A-Z]+)(_.*)?$&quot;, $p-&gt;nom_champ, $regs);
	$type_objet = $regs[1];
	$suite_logo = $regs[2];	
	if (ereg(&quot;^_SPIP(.*)$&quot;, $suite_logo, $regs)) {
		$type_objet = 'RUBRIQUE';
		$suite_logo = $regs[1];
		$_id_objet = &quot;\&quot;'0'\&quot;&quot;;
	} else {

		if ($type_objet == 'SITE')
			$_id_objet = champ_sql(&quot;id_syndic&quot;, $p);
		else
			$_id_objet = champ_sql(&quot;id_&quot;.strtolower($type_objet), $p);
	}
	// analyser les filtres
	$flag_fichier = false;
	$filtres = '';
	if (is_array($p-&gt;fonctions)) {
		foreach($p-&gt;fonctions as $nom) {
			if (ereg('^(left|right|center|top|bottom)$', $nom))
				$align = $nom;
			else if ($nom == 'lien') {
				$flag_lien_auto = 'oui';
				$flag_stop = true;
			}
			else if ($nom == 'fichier') {
				$flag_fichier = 'true';
				$flag_stop = true;
			}
			// double || signifie &quot;on passe aux filtres&quot;
			else if ($nom == '')
				$flag_stop = true;
			else if (!$flag_stop) {
				$lien = $nom;
				$flag_stop = true;
			}
			// apres un URL ou || ou |fichier ce sont
			// des filtres (sauf left...lien...fichier)
			else
				$filtres[] = $nom;
		}
		// recuperer les autres filtres s'il y en a
		$p-&gt;fonctions = $filtres;
	}

	//
	// Preparer le code du lien
	//
	// 1. filtre |lien
	if ($flag_lien_auto AND !$lien)
		$code_lien = '($lien = generer_url_'.$type_objet.'('.$_id_objet.')) ? $lien : &quot;&quot;';
	// 2. lien indique en clair (avec des balises : imprimer#ID_ARTICLE.html)
	else if ($lien) {
		$code_lien = &quot;'&quot;.texte_script(trim($lien)).&quot;'&quot;;
		while (ereg(&quot;^([^#]*)#([A-Za-z_]+)(.*)$&quot;, $code_lien, $match)) {
			$c = new Champ();
			$c-&gt;nom_champ = $match[2];
			$c-&gt;id_boucle = $p-&gt;id_boucle;
			$c-&gt;boucles = &amp;$p-&gt;boucles;
			$c-&gt;id_mere = $p-&gt;id_mere;
			$c = calculer_champ($c);
			$code_lien = str_replace('#'.$match[2], &quot;'.&quot;.$c.&quot;.'&quot;, $code_lien);
		}
		// supprimer les '' disgracieux
		$code_lien = ereg_replace(&quot;^''\.|\.''$&quot;, &quot;&quot;, $code_lien);
	}

	if ($flag_fichier)
	  $code_lien = &quot;'',''&quot; ; 
	else {
		if (!$code_lien)
			$code_lien = &quot;''&quot;;
		$code_lien .= &quot;, '&quot;. addslashes($align) . &quot;'&quot;;
	}

	// cas des documents
	if ($type_objet == 'DOCUMENT') {
		$code_logo = &quot;calcule_document($_id_objet, '&quot; .
			$p-&gt;documents .
		  '\', $doublons)';
		if ($flag_fichier)
		  $p-&gt;code = &quot;calcule_fichier_logo($code_logo)&quot;;
		else
		  $p-&gt;code = &quot;affiche_logos(array($code_logo, ''), $code_lien)&quot;;
	}
	else {
	  $p-&gt;code = &quot;affiche_logos(calcule_logo('$type_objet', '&quot; .
	    (($suite_logo == '_SURVOL') ? 'off' : 
	     (($suite_logo == '_NORMAL') ? 'on' : 'ON')) .
	    &quot;', $_id_objet,&quot; .
	    (($suite_logo == '_RUBRIQUE') ? 
	     champ_sql(&quot;id_rubrique&quot;, $p) :
	     (($type_objet == 'RUBRIQUE') ? &quot;sql_parent($_id_objet)&quot; : &quot;''&quot;)) .
	    &quot;,  '$flag_fichier'), $code_lien)&quot;;
	}
	$p-&gt;statut = 'php';
	return $p;
}

// #EXTRA [(#EXTRA|isbn)]
// Champs extra
// Non documentes, en voie d'obsolescence, cf. ecrire/inc_extra.php3
function balise_EXTRA_dist ($p) {
	$_extra = champ_sql('extra', $p);
	$p-&gt;code = $_extra;

	// Gerer la notation [(#EXTRA|isbn)]
	if ($p-&gt;fonctions) {
		include_ecrire(&quot;inc_extra.php3&quot;);
		list ($key, $champ_extra) = each($p-&gt;fonctions);	// le premier filtre
		$type_extra = $p-&gt;type_requete;
			// ci-dessus est sans doute un peu buggue : si on invoque #EXTRA
			// depuis un sous-objet sans champ extra d'un objet a champ extra,
			// on aura le type_extra du sous-objet (!)
		if (extra_champ_valide($type_extra, $champ_extra)) {
			unset($p-&gt;fonctions[$key]);
			$p-&gt;code = &quot;extra($p-&gt;code, '&quot;.addslashes($champ_extra).&quot;')&quot;;

			// Appliquer les filtres definis par le webmestre
			$filtres = extra_filtres($type_extra, $champ_extra);
			if ($filtres) foreach ($filtres as $f)
				$p-&gt;code = &quot;$f($p-&gt;code)&quot;;
		}
	}

	$p-&gt;statut = 'html';
	return $p;
}

//
// Parametres de reponse a un forum
//

function balise_PARAMETRES_FORUM_dist($p) {
	include_local('inc-formulaire_forum.php3');
	$_accepter_forum = champ_sql('accepter_forum', $p);
	$p-&gt;code = '
	// refus des forums ?
	('.$_accepter_forum.'==&quot;non&quot; OR
	(lire_meta(&quot;forums_publics&quot;) == &quot;non&quot; AND !ereg(&quot;^(pos|pri|abo)&quot;, '.$_accepter_forum.')))
	? &quot;&quot; : // sinon:
	';

	switch ($p-&gt;type_requete) {
		case 'articles':
			$c = '&quot;id_article=&quot;.' . champ_sql('id_article', $p);
			break;
		case 'breves':
			$c = '&quot;id_breve=&quot;.' . champ_sql('id_breve', $p);
			break;
		case 'rubriques':
			$c = '&quot;id_rubrique=&quot;.' . champ_sql('id_rubrique', $p);
			break;
		case 'syndication':
			$c = '&quot;id_syndic=&quot;.' . champ_sql('id_syndic', $p);
			break;
		case 'forums':
		default:
			$liste_champs = array (&quot;id_article&quot;,&quot;id_breve&quot;,&quot;id_rubrique&quot;,&quot;id_syndic&quot;,&quot;id_forum&quot;);
			foreach ($liste_champs as $champ) {
				$x = champ_sql( $champ, $p);
				$c .= (($c) ? &quot;.\n&quot; : &quot;&quot;) . &quot;((!$x) ? '' : ('&amp;$champ='.$x))&quot;;
			}
			$c = &quot;substr($c,1)&quot;;
			break;
	}

	$c .= '.
	&quot;&amp;retour=&quot;.rawurlencode($lien=$GLOBALS[&quot;HTTP_GET_VARS&quot;][&quot;retour&quot;] ? $lien : nettoyer_uri())';

	$p-&gt;code .= code_invalideur_forums($p, &quot;(&quot;.$c.&quot;)&quot;);

	$p-&gt;statut = 'html';
	return $p;
}


// Noter l'invalideur de la page contenant ces parametres,
// en cas de premier post sur le forum
function code_invalideur_forums($p, $code) {
	return '
	// invalideur forums
	(!($Cache[\'id_forum\'][calcul_index_forum(' . 
				// Retournera 4 [$SP] mais force la demande du champ a MySQL
				champ_sql('id_article', $p) . ',' .
				champ_sql('id_breve', $p) .  ',' .
				champ_sql('id_rubrique', $p) .',' .
				champ_sql('id_syndic', $p) .  &quot;)]=1)&quot;.
				&quot;?'':\n&quot; . $code .&quot;)&quot;;
}

// reference a l'URL de la page courante

function balise_SELF_dist($p) {
	$p-&gt;code = 'quote_amp($GLOBALS[&quot;clean_link&quot;]-&gt;getUrl())';
	$p-&gt;statut = 'php';
	return $p;
}

// reference aux parametres GET &amp; POST

function balise_HTTP_VARS_dist($p) {
	$nom = param_balise($p);
	if (!$nom)
		erreur_squelette(_L(&quot;Champ #HTTP_VARS argument manquant&quot;),
				$p-&gt;id_boucle);
	else {
		$p-&gt;code = '$Pile[0][&quot;' . addslashes($nom) . '&quot;]';
		$p-&gt;statut = 'php';
	}
	return $p;
}
?&gt;

--- NEW FILE: inc-criteres.php3 ---
&lt;?php

//
// Definition des {criteres} d'une boucle
//

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_CRITERES&quot;)) return;
define(&quot;_INC_CRITERES&quot;, &quot;1&quot;);


// {racine}
// <A HREF="http://www.spip.net/@racine">http://www.spip.net/@racine</A>
function critere_racine_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];

	if ($param != 'racine' OR $not)
		erreur_squelette(_T('info_erreur_squelette'), $param);

	$boucle-&gt;where[] = $boucle-&gt;id_table.&quot;.id_parent='0'&quot;;

}

// {exclus}
// <A HREF="http://www.spip.net/@exclus">http://www.spip.net/@exclus</A>
function critere_exclus_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	$id = $boucle-&gt;primary;

	if ($param != 'exclus' OR $not OR !$id)
		erreur_squelette(_T('info_erreur_squelette'), $param);

	$arg = calculer_argument_precedent($idb,$id, $boucles);
	$boucle-&gt;where[] = $boucle-&gt;id_table . '.' . $id.&quot;!='\&quot;.&quot; . $arg . &quot;.\&quot;'&quot;;

}

// {doublons} ou {unique}
// <A HREF="http://www.spip.net/@doublons">http://www.spip.net/@doublons</A>
function critere_doublons_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];

	if (!preg_match(&quot;/(doublons|unique)[[:space:]]*([a-z_0-9]*)/i&quot;,
	$param, $match))
		erreur_squelette(_T('info_erreur_squelette'), $param);

	$boucle-&gt;doublons = $boucle-&gt;type_requete . $match[2];
	$boucle-&gt;where[] = '&quot; .' .
		&quot;calcul_mysql_in('&quot;.$boucle-&gt;id_table . '.' . $boucle-&gt;primary.&quot;', &quot;
		.'&quot;0&quot;.$doublons[\''.$boucle-&gt;doublons.&quot;'], 'NOT') . \&quot;&quot;;
}

// {lang_select}
// <A HREF="http://www.spip.net/@lang_select">http://www.spip.net/@lang_select</A>
function critere_lang_select_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	if (preg_match('/lang_select(=(oui|non))?$/i', $param, $match)) {
		if (!$lang_select = $match[2])
			$lang_select = 'oui';
		if ($not)
			$lang_select = ($lang_select=='oui')?'non':'oui';
		$boucle-&gt;lang_select = $lang_select;
	}
	else erreur_squelette(_T('info_erreur_squelette'), $param);
}

// {debut_xxx}
// <A HREF="http://www.spip.net/@debut">http://www.spip.net/@debut</A>_
function critere_debut_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	if (ereg('^debut([-_a-zA-Z0-9]+),([0-9]*)$', $param, $match)) {
		$debut_lim = &quot;debut&quot;.$match[1];
		$boucle-&gt;limit =
			'intval($GLOBALS[&quot;'.$debut_lim.'&quot;]).&quot;,'.$match[2] .'&quot;' ;
	}
	else erreur_squelette(_T('info_erreur_squelette'), $param);
}

// {recherche}
// <A HREF="http://www.spip.net/@recherche">http://www.spip.net/@recherche</A>
function critere_recherche_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];

	$table = $boucle-&gt;id_table;	#articles
	$id_table = 'id_'.preg_replace('/s$/', '', $table); 	#id_article

	// horrible hack du aux id_forum = spip_forum et id_article=spip_articleS
	// en fait il faudrait la fonction inverse de table_objet()
	$id = 'id_'.preg_replace('/s$/', '', $boucle-&gt;id_table);

	$boucle-&gt;select[] = $boucle-&gt;id_table . '.' . $boucle-&gt;primary; # pour postgres, neuneu ici
	$boucle-&gt;select[] = '$rech_select'; # pour les ... as points

	// et la recherche trouve
	$boucle-&gt;where[] = '$rech_where';
}

// {inverse}
// <A HREF="http://www.spip.net/@inverse">http://www.spip.net/@inverse</A>
function critere_inverse_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	// Classement par ordre inverse
	if ($param == 'inverse' AND !$not) {
		if ($boucle-&gt;order)
			$boucle-&gt;order .= &quot;.' DESC'&quot;;
		else 
			erreur_squelette(_L(&quot;inversion d'un ordre inexistant&quot;), 
			&quot;BOUCLE&quot; . $idb);
	} else
		erreur_squelette(_T('info_erreur_squelette'), &quot;{$param} BOUCLE$idb&quot;);
}

// {traduction}
// <A HREF="http://www.spip.net/@traduction">http://www.spip.net/@traduction</A>
//   (id_trad&gt;0 AND id_trad=id_trad(precedent))
//    OR id_article=id_article(precedent)
function critere_traduction_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	if ($param == 'traduction') {
		$boucle-&gt;where[] = &quot;((&quot;.$boucle-&gt;id_table.&quot;.id_trad &gt; 0 AND &quot;
			. $boucle-&gt;id_table.&quot;.id_trad ='\&quot;.&quot;
			. calculer_argument_precedent($idb, 'id_trad',
				$boucles)
			. &quot;.\&quot;')
		OR
			(&quot; . $boucle-&gt;id_table.&quot;.&quot;.$boucle-&gt;primary.&quot; ='\&quot;.&quot;
			. calculer_argument_precedent($idb, $boucle-&gt;primary,
				$boucles)
			. &quot;.\&quot;'))&quot;;
	} else
		erreur_squelette(_T('info_erreur_squelette'), $param);
}

// {origine_traduction}
// <A HREF="http://www.spip.net/@origine_traduction">http://www.spip.net/@origine_traduction</A>
function critere_origine_traduction_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	if ($param == 'origine_traduction')
		$boucle-&gt;where[] = $boucle-&gt;id_table.&quot;.id_trad = &quot;
		. $boucle-&gt;id_table . '.' . $boucle-&gt;primary;
	else
		erreur_squelette(_T('info_erreur_squelette'), $param);
}


// {meme_parent}
// <A HREF="http://www.spip.net/@meme_parent">http://www.spip.net/@meme_parent</A>
function critere_meme_parent_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	if ($param != 'meme_parent')
		erreur_squelette(_T('info_erreur_squelette'), $param);
	else {
		if ($boucle-&gt;type_requete == 'rubriques') {
			$boucle-&gt;where[] = $boucle-&gt;id_table.&quot;.id_parent='\&quot;.&quot;
			. calculer_argument_precedent($idb, 'id_parent',
			$boucles)
			. &quot;.\&quot;'&quot;;
		} else if ($boucle-&gt;type_requete == 'forums') {
			$boucle-&gt;where[] = $boucle-&gt;id_table.&quot;.id_parent='\&quot;.&quot;
			. calculer_argument_precedent($idb, 'id_parent',
			$boucles)
			. &quot;.\&quot;'&quot;;
			$boucle-&gt;where[] = $boucle-&gt;id_table.&quot;.id_parent &gt; 0&quot;;
			$boucle-&gt;plat = true;
		} else
			erreur_squelette(_L(&quot;{meme_parent} ne s'applique qu'aux boucles (FORUMS) ou (RUBRIQUES)&quot;), &quot;BOUCLE&quot; . $idb);
	}
}

// {branche ?}
// <A HREF="http://www.spip.net/@branche">http://www.spip.net/@branche</A>
function critere_branche_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	if (preg_match('/branche[[:space:]]*([?])?$/i', $param, $regs)) {
		$c = &quot;calcul_mysql_in('&quot;.$boucle-&gt;id_table.&quot;.id_rubrique',
		calcul_branche(&quot; . calculer_argument_precedent($idb,
		'id_rubrique', $boucles) . &quot;), '')&quot;;
		if (!$regs[1])
			$where = &quot;\&quot;. $c .\&quot;&quot; ;
		else
			$where = &quot;\&quot;.(&quot;
			. calculer_argument_precedent($idb, 'id_rubrique',
			$boucles).&quot;? $c : 1).\&quot;&quot;;

		if ($not)
			$boucle-&gt;where[] = &quot;NOT($where)&quot;;
		else
			$boucle-&gt;where[] = $where;
	} else
		erreur_squelette(_T('info_erreur_squelette'), $param);
}

// Tri : {par xxxx}
// <A HREF="http://www.spip.net/@par">http://www.spip.net/@par</A>
function critere_par_dist($idb, &amp;$boucles, $param, $not) {
	$boucle = &amp;$boucles[$idb];
	if ($not)
		erreur_squelette(_T('info_erreur_squelette'), $param);

	preg_match('/par[[:space:]]*(.*)/ims', $param, $regs);
	$tri = trim($regs[1]);

	// par hasard
	if ($tri == 'hasard') {
		// tester si cette version de MySQL accepte la commande RAND()
		// sinon faire un gloubi-boulga maison avec de la mayonnaise.
		if (spip_query(&quot;SELECT RAND()&quot;))
			$boucle-&gt;select[] = &quot;RAND() AS alea&quot;;
		else
			$boucle-&gt;select[] = &quot;MOD(&quot;.$boucle-&gt;id_table.'.'.$boucle-&gt;primary
			.&quot; * UNIX_TIMESTAMP(),32767) &amp; UNIX_TIMESTAMP() AS alea&quot;;

		$boucle-&gt;order = &quot;'alea'&quot;;
	}

	// par titre_mot
	else if ($tri == 'titre_mot') {
		$boucle-&gt;order= &quot;'mots.titre'&quot;;
	}

	// par type_mot
	else if ($tri == 'type_mot'){
		$boucle-&gt;order= &quot;'mots.type'&quot;;
	}
	// par num champ(, suite)
	else if (ereg(&quot;^num[[:space:]]+([^,]*)(,.*)?&quot;,$tri, $match2)) {
		$boucle-&gt;select[] = &quot;0+&quot;.$boucle-&gt;id_table.&quot;.&quot;.$match2[1].&quot; AS num&quot;;
		$boucle-&gt;order = &quot;'num&quot;.texte_script($match2[2]).&quot;'&quot;;
	}
	// par champ. Verifier qu'ils sont presents.
	else if (ereg(&quot;^[a-z][a-z0-9]*$&quot;, $tri)) {
		if ($tri == 'date')
			$boucle-&gt;order = &quot;'&quot;.$boucle-&gt;id_table.&quot;.&quot;.
			  $GLOBALS['table_date'][$boucle-&gt;type_requete]
			  .&quot;'&quot;;
		else {
			global $table_des_tables, $tables_des_serveurs_sql;
			$r = $boucle-&gt;type_requete;
			$s = $boucles[$idb]-&gt;sql_serveur;
			if (!$s) $s = 'localhost';
			$t = $table_des_tables[$r];
			if (!$t) $t = $r; // pour les tables non Spip
			$desc = $tables_des_serveurs_sql[$s][$t];
			if ($desc['field'][$tri])
				$boucle-&gt;order = &quot;'&quot;.$boucle-&gt;id_table.&quot;.&quot;.$tri.&quot;'&quot;;
			else {
			  // tri sur les champs synthetises (cf points)
				$boucle-&gt;order = &quot;'&quot;.$tri.&quot;'&quot;;
			}
		}
	}
	// tris par critere bizarre
	// (formule composee, virgules, etc).
	// autoriser le hack {par $GLOBALS[&quot;tri&quot;]}
	else
		$boucle-&gt;order = &quot;\&quot;$tri\&quot;&quot;;
}



function calculer_critere_parties($idb, &amp;$boucles, $param, $not, $match) {
  global $tables_relations, $table_des_tables, $table_date, $tables_des_serveurs_sql;
	$boucle = &amp;$boucles[$idb];
	list(,$a1,$op,$a2) = $match;
	list($a11,$a12) = calculer_critere_parties_aux($idb, $boucles, $a1);
	list($a21,$a22) = calculer_critere_parties_aux($idb, $boucles, $a2);

	if (($op== ',')&amp;&amp;(is_numeric($a11) &amp;&amp; (is_numeric($a21))))
		$boucle-&gt;limit = $a11 .',' . $a21;
	else {
	  $boucle-&gt;partie =	($a11 != 'n') ? $a11 : $a12;
		$boucle-&gt;total_parties =  ($a21 != 'n') ? $a21 : $a22;
		$boucle-&gt;mode_partie = (($op == '/') ? '/' :
				(($a1=='n')?'-':'+').(($a2=='n')?'-':'+'));
	}
}

function calculer_critere_parties_aux($idb, &amp;$boucles, $param) {
	ereg('^(([0-9]+)|n|(#.*))(-([0-9]+))?$', $param, $m);
	if ($m[1] == 'n') 
	  $a = 'n';
	else {
	  $a = calculer_param_dynamique($m[1], $boucles, $idb);
	  if (ereg('&quot; \. *addslashes(.*)\. &quot;', $a, $m2)) $a = $m2[1];
	}
	return array($a, ($m[5] ? $m[5] : 0));
}

//
// La fonction d'aiguillage sur le nom du criteres
//

function calculer_criteres ($idb, &amp;$boucles) {

	foreach($boucles[$idb]-&gt;param as $param) {
		// Analyse du critere
		preg_match(&quot;/^([!]?)[[:space:]]*(debut|([a-z_]+))/ism&quot;,
			$param, $match);
		$critere = $match[2];
		$not = ($match[1] == '!');

		// critere personnalise ?
		$f = &quot;critere_&quot;.$critere;
		if (!function_exists($f))
			$f .= '_dist';

		// fonction critere standard ?
		if (!function_exists($f))
			$f = 'calculer_critere_DEFAUT';

		// Applique le critere
		$res = $f($idb, $boucles, $param, $not);

		// gestion d'erreur
		if (is_array($res)) erreur_squelette($res);
	}
}

# Criteres numeriques et de comparaison

function calculer_critere_DEFAUT($idb, &amp;$boucles, $param, $not) {
	global $table_des_tables, $table_date, $tables_des_serveurs_sql;

	$boucle = &amp;$boucles[$idb];
	$type = $boucle-&gt;type_requete;
	$id_table = $boucle-&gt;id_table;
	$primary = $boucle-&gt;primary;
	$id_field = $id_table . '.' . $primary; 

	if (ereg('^([0-9a-zA-Z#_\{\}]+)([,/])([0-9a-zA-Z#_\{\}]+)$', $param, $match))
	  calculer_critere_parties($idb, $boucles, $param, $not, $match);

		// Restriction de valeurs (implicite ou explicite)
	else if (eregi('^([a-z_]+\(?[a-z_]*\)?) *(\??)((!?)(&lt;=?|&gt;=?|==?|IN) *&quot;?([^&lt;&gt;=!&quot;]*))?&quot;?$', $param, $match)) {
	  		$op = $match[5] ? $match[5] : '=';
			// Variable comparee
			$col = $match[1];
			// fonction SQL
			$fct = '';
			if (ereg(&quot;([a-z_]+)\(([a-z_]+)\)&quot;, $col,$match3)) {
				$col = $match3[2];
				$fct = $match3[1];
			}
			$col_table = $id_table;
			// Valeur de comparaison
			if ($match[3]) {
				if (strtoupper($op) != 'IN') {
					$val = calculer_param_dynamique($match[6], $boucles, $idb);
					// gestion d'erreur
					if (is_array($val)) erreur_squelette($val);
				}
				else {
				// traitement special des valeurs textuelles
				  $val = calculer_params_dynamiques($match[6], $boucles, $idb);
				}
			}
			
			else {
				$val = $match[1];

				// Cas special {lang} : aller chercher $GLOBALS['spip_lang']
				if ($val == 'lang')
					$val = '&quot;.$GLOBALS[\'spip_lang\'].&quot;';
				else {
				// Si id_parent, comparer l'id_parent avec l'id_objet
				// de la boucle superieure
					if ($val == 'id_parent')
						$val = $primary;
				// Si id_enfant, comparer l'id_objet avec l'id_parent
				// de la boucle superieure
					else if ($val == 'id_enfant')
						$val = 'id_parent';
					$val = calculer_argument_precedent($idb, $val, $boucles) ;
					if (ereg('^\$',$val))
						$val = '&quot; . addslashes(' . $val . ') . &quot;';
					else
						$val = addslashes($val);
				}

			}

			if ($s = calculer_critere_externe($boucle, $id_field,$col, $type))
				$col_table = $s;

			// Cas particulier pour les raccourcis 'type_mot' et 'titre_mot'
			else if ($type != 'mots'
			AND ($col == 'type_mot' OR $col == 'titre_mot'
			OR $col == 'id_groupe')) {
				if ($type == 'forums')
					$col_lien = &quot;forum&quot;;
				else if ($type == 'syndication')
					$col_lien = &quot;syndic&quot;;
				else
					$col_lien = $type;
				$boucle-&gt;from[] = &quot;mots_$col_lien AS lien_mot&quot;;
				$boucle-&gt;from[] = 'mots AS mots';
				$boucle-&gt;where[] = &quot;$id_field=lien_mot.&quot; . $primary;
				$boucle-&gt;where[] = 'lien_mot.id_mot=mots.id_mot';
				$boucle-&gt;group = $id_field;
				$boucle-&gt;select[] = $id_field; # pour postgres, neuneu ici
				$col_table = 'mots';

				$boucle-&gt;lien = true;
				if ($col == 'type_mot')
					$col = 'type';
				else if ($col == 'titre_mot')
					$col = 'titre';
				else if ($col == 'id_groupe')
					$col = 'id_groupe';
			}

			// Cas particulier : selection des documents selon l'extension
			if ($type == 'documents' AND $col == 'extension')
				$col_table = 'types_documents';
			// HACK : selection des documents selon mode 'image'
			// (a creer en dur dans la base)
			else if ($type == 'documents' AND $col == 'mode'
			AND $val == 'image')
				$val = 'vignette';
			// Cas particulier : lier les articles syndiques
			// au site correspondant
			else if ($type == 'syndic_articles' AND
			!ereg(&quot;^(id_syndic_article|titre|url|date|descriptif|lesauteurs)$&quot;,$col))
				$col_table = 'syndic';

			// Cas particulier : id_enfant =&gt; utiliser la colonne id_objet
			if ($col == 'id_enfant')
				$col = $primary;
			// Cas particulier : id_secteur = id_rubrique pour certaines tables
			if (($type == 'breves' OR $type == 'forums') AND $col == 'id_secteur')
				$col = 'id_rubrique';

			// Cas particulier : expressions de date
			if (ereg(&quot;^(date|mois|annee|age|age_relatif|jour_relatif|mois_relatif|annee_relatif)(_redac)?$&quot;, $col, $regs)) {
				$col = $regs[1];
				if ($regs[2]) {
					$date_orig = $id_table . &quot;.date_redac&quot;;
					$date_compare = '\'&quot; . normaliser_date(' .
					calculer_argument_precedent($idb, 'date_redac', $boucles) .
					') . &quot;\'';
				}
				else {
					$date_orig = &quot;$id_table.&quot; . $table_date[$type];
					$date_compare = '\'&quot; . normaliser_date(' .
					  calculer_argument_precedent($idb, 'date', $boucles) .
					  ') . &quot;\'';
				}

				if ($col == 'date') {
					$col = $date_orig;
					$col_table = '';
				}
				else if ($col == 'mois') {
					$col = &quot;MONTH($date_orig)&quot;;
					$col_table = '';
				}
				else if ($col == 'annee') {
					$col = &quot;YEAR($date_orig)&quot;;
					$col_table = '';
				}
				else if ($col == 'age') {
					$col = calculer_param_date(&quot;now()&quot;, $date_orig);
					$col_table = '';
				}
				else if ($col == 'age_relatif') {
					$col = calculer_param_date($date_compare, $date_orig);
					$col_table = '';
				}
				else if ($col == 'jour_relatif') {
					$col = &quot;LEAST(TO_DAYS(&quot; .$date_compare . &quot;)-TO_DAYS(&quot; .
					$date_orig . &quot;), DAYOFMONTH(&quot; . $date_compare .
					&quot;)-DAYOFMONTH(&quot; . $date_orig . &quot;)+30.4368*(MONTH(&quot; .
					$date_compare . &quot;)-MONTH(&quot; . $date_orig .
					&quot;))+365.2422*(YEAR(&quot; . $date_compare . &quot;)-YEAR(&quot; .
					$date_orig . &quot;)))&quot;;
					$col_table = '';
				}
				else if ($col == 'mois_relatif') {
					$col = &quot;MONTH(&quot; . $date_compare . &quot;)-MONTH(&quot; .
					$date_orig . &quot;)+12*(YEAR(&quot; . $date_compare .
					&quot;)-YEAR(&quot; . $date_orig . &quot;))&quot;;
					$col_table = '';
				}
				else if ($col == 'annee_relatif') {
					$col = &quot;YEAR(&quot; . $date_compare . &quot;)-YEAR(&quot; .
					$date_orig . &quot;)&quot;;
					$col_table = '';
				}
			}

			if ($type == 'forums' AND
			($col == 'id_parent' OR $col == 'id_forum'))
				$boucle-&gt;plat = true;

			// Operateur de comparaison
			if ($col_table)
				$col = &quot;$col_table.$col&quot;;

			if (strtoupper($op) == 'IN') {
				// traitement special des valeurs textuelles
				$where = &quot;$col IN ($val)&quot;;
				if ($match[4] == '!') {
					$where = &quot;NOT ($where)&quot;;
				} else {
					if (!$boucle-&gt;order) {
						$boucle-&gt;order = 'rang';
						$boucle-&gt;select[] =
						&quot;FIND_IN_SET($col, \\\&quot;$val\\\&quot;) AS rang&quot;;
					}
				}
			} else {
				if ($op == '==') $op = 'REGEXP';
				if ($fct) $col = &quot;$fct($col)&quot;;
				if ($match[4] == '!')
					$where = &quot;NOT ($col $op '$val')&quot;;
				else
					$where = &quot;($col $op '$val')&quot;;

				// operateur optionnel {lang?}
				if ($match[2]) {
					$champ = calculer_argument_precedent($idb, $match[1], $boucles) ;
					$where = &quot;\&quot;.($champ ? \&quot;$where\&quot; : 1).\&quot;&quot;;
				}

			}
			$boucle-&gt;where[] = $where;
	} // fin du if sur les restrictions de valeurs
	else erreur_squelette(_L(&quot;critere inconnu $param&quot;));
}

// traitement des relations externes par une jointure.
// tant qu'a faire eviter de dupliquer sa declaration,
// mais c'est une goutte d'eau dans la mer

function calculer_critere_externe(&amp;$boucle, $id_field, $col, $type)
{
	global $tables_relations;
	if ($col_table =  $tables_relations[$type][$col]) {
		$externe = &quot;$id_field=$col_table.&quot; . $boucle-&gt;primary;
		if (!$boucle-&gt;where || (!in_array($externe, $boucle-&gt;where))) {

			$boucle-&gt;lien = true;
			$boucle-&gt;from[] = &quot;$col_table AS $col_table&quot;;
			$boucle-&gt;where[] = $externe;
			$boucle-&gt;group = $id_field;
		// postgres exige que le champ pour GROUP soit dans le SELECT
			$boucle-&gt;select[] = $id_field;
		}
	}
	return $col_table;
}


function calculer_param_date($date_compare, $date_orig) {
	return
	&quot;LEAST((UNIX_TIMESTAMP(&quot; .
	$date_compare .
	&quot;)-UNIX_TIMESTAMP(&quot; .
	$date_orig .
	&quot;))/86400,\n\tTO_DAYS(&quot; .
	$date_compare .
	&quot;)-TO_DAYS(&quot; .
	$date_orig .
	&quot;),\n\tDAYOFMONTH(&quot; .
	$date_compare .
	&quot;)-DAYOFMONTH(&quot; .
	$date_orig .
	&quot;)+30.4368*(MONTH(&quot; .
	$date_compare .
	&quot;)-MONTH(&quot; .
	$date_orig .
	&quot;))+365.2422*(YEAR(&quot; .
	$date_compare .
	&quot;)-YEAR(&quot; .
	$date_orig .
	&quot;)))&quot;;
}

//
// Calculer les parametres
//
function calculer_param_dynamique($val, &amp;$boucles, $idb) {
#	if (ereg('^ *\((.*)) *$', $val, $m)) $val = $m[1]; # si on veut (#...)
	if (ereg(NOM_DE_CHAMP . &quot;(\{[^}]*\})?&quot;, $val, $regs)) {
	  	$champ = new Champ;
		$champ-&gt;nom_boucle = $regs[2];
		$champ-&gt;nom_champ = $regs[3];
		$champ-&gt;etoile = $regs[4];
		$champ-&gt;fonctions = $regs[5] ? array($regs[5]) : '';
		$champ-&gt;id_boucle = $boucles[$idb]-&gt;id_parent;
		$champ-&gt;boucles = &amp;$boucles;
		$champ-&gt;id_mere = $idb;
		$champ = calculer_champ($champ);
		return '&quot; . addslashes(' . $champ . ') . &quot;';

	} else {
	  if ($val[0]== '%') {
	    spip_log($val .
		     &quot; est obsolete; utiliser HTTP_VARS{&quot; .  substr($val,1) . &quot;}&quot;);
		  return '&quot; . addslashes($Pile[0][\''. substr($val,1)  .&quot;']) . \&quot;&quot;;
	  }
		else
		  return addslashes($val);
	}
}

function calculer_params_dynamiques($liste, &amp;$boucles, $idb) {
	ereg(&quot;^ *\(?(.*[^)])\)? *$&quot;,$liste, $reg);
	$res = array();
	foreach (split(&quot; *, *&quot;, $reg[1]) as $v) {
	  $v = calculer_param_dynamique($v, $boucles, $idb);
	  if (is_array($v)) erreur_squelette($v);
	  spip_log(&quot;'$v'&quot;);
	  if (strpos('0123456789',$v[0]) !== false)
	    $res[] = $v;
	  else if ($v[0]=='&quot;')
	    $res[] = &quot;'&quot; . $v . &quot;'&quot;;
	  else
	    $res[] = &quot;'$v'&quot;;
	}
	return join(',', $res);
}
?&gt;

--- NEW FILE: carto-proto.sql ---
CREATE TABLE spip_carto_carte (
id_carte smallint unsigned NOT NULL auto_increment,
fichier varchar(255) NOT NULL,
titre varchar(255) NOT NULL,
commentaire text default NULL,
callage text default NULL,
id_srs smallint unsigned default NULL,
PRIMARY KEY (id_carte),
KEY titre (titre)
) TYPE=MyISAM;

# srs = systeme de reference spatial
CREATE TABLE spip_carto_srs (
id_srs smallint unsigned NOT NULL auto_increment,
label varchar(30) NOT NULL,
code smallint NOT NULL,
PRIMARY KEY (id_srs)
) TYPE=MyISAM;

# objet cartographique (point, ligne, surface) attach&#233; &#224; une carte
CREATE TABLE spip_carto_objet (
id_objet smallint unsigned NOT NULL auto_increment,
id_carte smallint unsigned NOT NULL,
titre varchar(255) default NULL,
commentaire text default NULL,
lien varchar(255) default NULL,
logo varchar(255) default NULL,
geometrie text default NULL,
PRIMARY KEY (id_objet),
KEY id_carte (id_carte),
KEY titre (titre)
) TYPE=MyISAM;

# table de jointure entre les objets et les mots cl&#233;s
CREATE TABLE spip_carto_objet_mots (
id_objet smallint unsigned NOT NULL,
id_mot smallint unsigned NOT NULL,
ordre tinyint unsigned NOT NULL,
PRIMARY KEY (id_objet,id_mot),
KEY ordre (ordre)
) TYPE=MyISAM;

# table de jointure entre les objets et les mots cl&#233;s
CREATE TABLE spip_carto_objet_articles (
id_objet smallint unsigned NOT NULL,
id_article smallint unsigned NOT NULL,
ordre tinyint unsigned NOT NULL,
PRIMARY KEY (id_objet,id_article),
KEY ordre (ordre)
) TYPE=MyISAM;

INSERT INTO SPIP_META(nom, valeur, maj) VALUES ('activer_carto','oui',now());
--- NEW FILE: spip_login.php3 ---
&lt;?php
$fond = &quot;login&quot;;
$delais = 3600;
$flag_dynamique = true;
$flag_preserver = true;
$forcer_lang = true;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: distrib-dist.html ---
document.write('&lt;table border=&quot;0&quot; bgcolor=&quot;#000000&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tr&gt;&lt;td&gt;');
document.write('&lt;table border=&quot;0&quot; bgcolor=&quot;#FFFFFF&quot; cellspacing=&quot;1&quot; cellpadding=&quot;2&quot;&gt;&lt;tr&gt;&lt;td bgcolor=&quot;#D0D0D0&quot; align=&quot;center&quot;&gt;');
document.write('&lt;a href=&quot;#URL_SITE_SPIP/&quot;&gt;&lt;b&gt;[(#NOM_SITE_SPIP|addslashes)]&lt;/b&gt;&lt;/a&gt;&nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;ul&gt;&lt;small&gt;');
&lt;BOUCLE_articles(articles){tout}{par date}{inverse}{0,10}&gt;
document.write('&lt;li&gt;&lt;a href=&quot;#URL_SITE_SPIP/#URL_ARTICLE&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;[(#TITRE|addslashes)]&lt;/font&gt;&lt;/a&gt;&lt;/li&gt;\n');
&lt;/BOUCLE_articles&gt;
document.write('&lt;/small&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;');

--- NEW FILE: sommaire-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[#NOM_SITE_SPIP] &lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;print, projection, screen, tv&quot;&gt;

&lt;!-- Lien vers le backend pour navigateurs eclaires --&gt;
&lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot; title=&quot;&lt;:syndiquer_site:&gt;&quot; href=&quot;backend.php3&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;


&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]

&lt;!-- Menu de navigation rubriques --&gt;

&lt;B_rubriques&gt;
&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;rubriques&quot;&gt;
&lt;BOUCLE_rubriques(RUBRIQUES) {racine} {par titre}&gt;
&lt;li&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
&lt;B_sous_rubriques&gt;
	&lt;ul class=&quot;menu-liste&quot;&gt;
&lt;BOUCLE_sous_rubriques(RUBRIQUES) {id_parent} {par titre}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_sous_rubriques&gt;
	&lt;/ul&gt;
&lt;/B_sous_rubriques&gt;
&lt;/li&gt;
&lt;/BOUCLE_rubriques&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/B_rubriques&gt;

&lt;!-- Logo SPIP --&gt;

&lt;a href=&quot;<A HREF="http://www.spip.net">http://www.spip.net</A>&quot;&gt;&lt;img src=&quot;IMG/logo_spip.jpg&quot; width=&quot;105&quot; height=&quot;92&quot; border=&quot;0&quot; alt=&quot;&lt;:site_realise_avec_spip:&gt;&quot;&gt;&lt;/a&gt;

&lt;/div&gt;


&lt;div id=&quot;principal&quot; class=&quot;contenu&quot;&gt;

	&lt;!-- Une : derniers articles publies --&gt;
	
	&lt;h1 class=&quot;structure&quot;&gt;&lt;:derniers_articles:&gt;&lt;/h1&gt;
	
	&lt;BOUCLE_article_un(ARTICLES) {par date} {inverse} {0,2}&gt;
		[(#LOGO_ARTICLE_RUBRIQUE|right)]
		[&lt;div class=&quot;surtitre&quot;&gt;(#SURTITRE)&lt;/div&gt;]
		&lt;h2 class=&quot;titre-extrait&quot;&gt;&lt;a href=&quot;#URL_ARTICLE&quot;&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
		[&lt;div class=&quot;surtitre&quot;&gt;(#SOUSTITRE)&lt;/div&gt;]
		&lt;div class=&quot;detail&quot;&gt;
		[(#DATE|nom_jour)] [(#DATE|affdate)]
		&lt;B_auteurs_un&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs_un(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs_un&gt;
		&lt;/div&gt;
		[&lt;div class=&quot;texte&quot;&gt;&lt;div class=&quot;extrait&quot;&gt;(#INTRODUCTION)&lt;/div&gt;&lt;/div&gt;]
		&lt;br&gt;
	&lt;/BOUCLE_article_un&gt;


	&lt;div class=&quot;encart&quot;&gt;

	&lt;!-- Breves --&gt;

	&lt;h1 class=&quot;structure&quot;&gt;&lt;:dernieres_breves:&gt;&lt;/h1&gt;

	&lt;B_breves&gt;
	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;breves&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:breves:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_breves(BREVES) {par date} {inverse} {0,8}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;i&gt;[(#DATE|affdate_court)]&lt;/i&gt;:
		&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_breves&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_breves&gt;

	&lt;!-- Sur le Web --&gt;

	&lt;h1 class=&quot;structure&quot;&gt;&lt;:nouveautes_web:&gt;&lt;/h1&gt;

	&lt;B_syndic&gt;
	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;divers&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:sur_web:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_syndic(SYNDIC_ARTICLES) {par date} {inverse} {0,8}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;a href=&quot;#URL_ARTICLE&quot;&gt;[(#TITRE*)]&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_syndic&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_syndic&gt;

	[&lt;!-- Inscription au site --&gt;

		&lt;div class=&quot;formulaire&quot;&gt;&lt;:participer_site:&gt;
			&lt;br /&gt;&lt;br /&gt;(#FORMULAIRE_INSCRIPTION)
		&lt;/div&gt;]

	&lt;/div&gt;


&lt;h1 class=&quot;structure&quot;&gt;&lt;:articles_recents:&gt;&lt;/h1&gt;

&lt;!-- Articles recents --&gt;

&lt;BOUCLE_articles_recents(ARTICLES) {par date} {inverse} {2,8}&gt;
	&lt;h2&gt;&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;B_auteurs_recents&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs_recents(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs_recents&gt;
	&lt;/div&gt;
	&lt;br&gt;
&lt;/BOUCLE_articles_recents&gt;


&lt;/div&gt;


#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;



--- NEW FILE: mot.php3 ---
&lt;?php
$fond = &quot;mot&quot;;
$delais = 24 * 3600;


include (&quot;inc-public.php3&quot;);


?&gt;

--- NEW FILE: inc-stats.php3 ---
&lt;?php

//
// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_STATS&quot;)) return;
define(&quot;_INC_STATS&quot;, &quot;1&quot;);

function ecrire_stats() {
	global $id_article, $id_breve, $id_rubrique;

	if ($GLOBALS['HTTP_X_FORWARDED_FOR'])
		$log_ip = $GLOBALS['HTTP_X_FORWARDED_FOR'];
	else
		$log_ip = $GLOBALS['REMOTE_ADDR'];

	if ($log_id_num = intval($id_rubrique))
		$log_type = &quot;rubrique&quot;;
	else if ($log_id_num = intval($id_article))
		$log_type = &quot;article&quot;;
	else if ($log_id_num = intval($id_breve))
		$log_type = &quot;breve&quot;;
	else
		$log_type = &quot;autre&quot;;

	// Conversion IP 4 octets -&gt; entier 32 bits
	if (ereg(&quot;^(::ffff:)?([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)$&quot;, $log_ip, $r)) {
		$log_ip = sprintf(&quot;0x%02x%02x%02x%02x&quot;, $r[2], $r[3], $r[4], $r[5]);
	}
	else return;

	//
	// Loguer la visite dans la base si possible
	//
	if ($log_type != &quot;autre&quot;) {
		$query = &quot;INSERT IGNORE INTO spip_visites_temp (ip, type, id_objet) &quot;.
			&quot;VALUES ($log_ip, '$log_type', $log_id_num)&quot;;
		spip_query($query);
	}

	//
	// Loguer le referer
	//
	$url_site_spip = lire_meta('adresse_site');
	$url_site_spip = eregi_replace(&quot;^((https?|ftp)://)?(www\.)?&quot;, &quot;&quot;, $url_site_spip);
	$log_referer = $GLOBALS['HTTP_REFERER'];
	if (($url_site_spip&lt;&gt;'') AND strpos('-'.strtolower($log_referer), strtolower($url_site_spip)) AND !$GLOBALS['var_recherche']) $log_referer = &quot;&quot;;
	if ($log_referer) {
		$referer_md5 = '0x'.substr(md5($log_referer), 0, 15);
		$query = &quot;INSERT IGNORE INTO spip_referers_temp (ip, referer, referer_md5, type, id_objet) &quot;.
			&quot;VALUES ($log_ip, '$log_referer', $referer_md5, '$log_type', $log_id_num)&quot;;
		spip_query($query);
	}
}


function afficher_raccourci_stats($id_article) {
	$query = &quot;SELECT visites, popularite FROM spip_articles WHERE id_article=$id_article AND statut='publie'&quot;;
	$result = spip_query($query);
	if ($row = @spip_fetch_array($result)) {
		$visites = intval($row['visites']);
		$popularite = ceil($row['popularite']);

		$query = &quot;SELECT COUNT(DISTINCT ip) AS c FROM spip_visites_temp WHERE type='article' AND id_objet=$id_article&quot;;
		$result = spip_query($query);
		if ($row = @spip_fetch_array($result)) {
			$visites = $visites + $row['c'];
		}

		return array('visites' =&gt; $visites, 'popularite' =&gt; $popularite);
	}
}

?&gt;

--- NEW FILE: auteur-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;BOUCLE_auteur_principal(AUTEURS) {id_auteur}&gt;

&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;[(#NOM|textebrut)]&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;projection, screen, tv&quot;&gt;
&lt;!-- media=&quot;print&quot; permet d'utiliser cette feuille de style quand vous imprimez depuis votre navigateur --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;impression.css&quot; type=&quot;text/css&quot; media=&quot;print&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot;&gt;

&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;


&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]


&lt;/div&gt;


&lt;!-- Une : affichage de l'auteur --&gt;

&lt;div class=&quot;contenu&quot; id=&quot;principal&quot;&gt;

&lt;div class=&quot;cartouche&quot;&gt;
[(#LOGO_AUTEUR|left)]
&lt;h1 class=&quot;titre-texte&quot;&gt;#NOM&lt;/h1&gt;

[&lt;div class=&quot;chapo&quot;&gt;(#BIO)&lt;/div&gt;]
[&lt;br&gt;#NOM_SITE : &lt;a href=&quot;(#URL_SITE)&quot;&gt;#URL_SITE&lt;/a&gt;&lt;br&gt;]
[&lt;div class=&quot;notes&quot;&gt;(#NOTES)&lt;/div&gt;]
&lt;/div&gt;

[&lt;p&gt;&lt;b&gt;&lt;:envoyer_message:&gt;&lt;/b&gt;&lt;/p&gt;
&lt;div class='spip_encadrer'&gt;&lt;b&gt;(#FORMULAIRE_ECRIRE_AUTEUR)&lt;/b&gt;&lt;/div&gt;]

&lt;!-- Articles de l'auteur --&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:articles_auteur:&gt;&lt;/h1&gt;

&lt;div class=&quot;liste-articles&quot;&gt;

&lt;BOUCLE_articles(ARTICLES) {id_auteur} {par titre}&gt;
	&lt;h2&gt;&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;B_auteurs&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs&gt;
	&lt;/div&gt;
	&lt;br&gt;
&lt;/BOUCLE_articles&gt;

&lt;/div&gt;

&lt;/div&gt;
#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;

&lt;/BOUCLE_auteur_principal&gt;
&lt;:aucun_auteur:&gt;
&lt;//B_auteur_principal&gt;

--- NEW FILE: spip_background.php3 ---
&lt;?php

// Du cote de la page HTML, utiliser un background-image en feuille de style
// plutot qu'un &lt;img&gt;, c'est plus discret notamment sous navigateur texte
$image = pack(&quot;H*&quot;, &quot;47494638396118001800800000ffffff00000021f90401000000002c0000000018001800000216848fa9cbed0fa39cb4da8bb3debcfb0f86e248965301003b&quot;);
$size = strlen($image);

Header(&quot;Content-Type: image/gif&quot;);
Header(&quot;Content-Length: &quot;.$size);
Header(&quot;Cache-Control: no-cache,no-store&quot;);
Header(&quot;Pragma: no-cache&quot;);
Header(&quot;Connection: close&quot;);

echo $image;

flush();

include('ecrire/inc_version.php3');

cron(1);	// toutes les 1 seconde (gourmand)


?&gt;
--- NEW FILE: mes_fonctions.php3 ---
&lt;?php

/////////////////////////////
//CARTO
/////////////////////////////
global $tables_principales;

$spip_carto_carte = array(
	&quot;id_carte&quot; =&gt; &quot;bigint(21) NOT NULL&quot;,
	&quot;titre&quot; =&gt; &quot;VARCHAR(255) BINARY NOT NULL&quot;,
	&quot;commentaire&quot; =&gt; &quot;TEXT BINARY NOT NULL&quot;,
	&quot;fichier&quot; =&gt; &quot;TEXT BINARY NOT NULL&quot;,
	&quot;callage&quot; =&gt; &quot;TEXT BINARY NOT NULL&quot;,
	&quot;id_srs&quot; =&gt; &quot;bigint(21) NOT NULL&quot;);

$spip_carto_carte_key = array(
	&quot;PRIMARY KEY&quot; =&gt; &quot;id_carte&quot;,
	&quot;KEY id_carte&quot; =&gt; &quot;id_carte&quot;);

$spip_carto_objet = array(
	&quot;id_objet&quot; =&gt; &quot;bigint(21) NOT NULL&quot;,
	&quot;id_carte&quot; =&gt; &quot;bigint(21) NOT NULL&quot;,
	&quot;titre&quot; =&gt; &quot;VARCHAR(255) BINARY NOT NULL&quot;,
	&quot;commentaire&quot; =&gt; &quot;TEXT BINARY NOT NULL&quot;,
	&quot;lien&quot; =&gt; &quot;VARCHAR(255) BINARY NOT NULL&quot;,
	&quot;logo&quot; =&gt; &quot;VARCHAR(255) BINARY NOT NULL&quot;,
	&quot;geometrie&quot; =&gt; &quot;TEXT BINARY NOT NULL&quot;);
	
$spip_carto_objet_key = array(
	&quot;PRIMARY KEY&quot; =&gt; &quot;id_objet&quot;,
	&quot;KEY id_carte&quot; =&gt; &quot;id_carte&quot;,
	&quot;KEY titre&quot; =&gt; &quot;titre&quot;);

$tables_principales['carto_objet'] =
	array('field' =&gt; &amp;$spip_carto_objet, 'key' =&gt; &amp;$spip_carto_objet_key);
$tables_principales['carto_carte'] =
	array('field' =&gt; &amp;$spip_carto_carte, 'key' =&gt; &amp;$spip_carto_carte_key);
global $table_primary;
$table_primary['carto_carte']=&quot;id_carte&quot;;


/*
 *   +---------------------------------------------+
 *    Nom du Filtre : WKT to COORDS
 *   +---------------------------------------------+
 *    Date : mercredi 09 avril 2003
 *    Auteur : 
 *    site :  
 *   +---------------------------------------------+
 *    Fonctions de ce filtre :
 *     Appelez le dans vos squellette tout simplement
 *     par : [(#GEOMETRIE|wkt2coords)]
 *   +---------------------------------------------+
 *  
 * Pour toute suggestion, remarque, proposition d'ajout
 * reportez-vous au forum de l'article :
 * <A HREF="http://www.uzine.net/spip_contrib/">http://www.uzine.net/spip_contrib/</A>
 *
 */
function wkt2coords($geometrie){
	
	return str_replace(';',',',substr($geometrie,8,-1));
}
/*
 *   +---------------------------------------------+
 *    Nom du Filtre : WKT to SHAPE 
 *   +---------------------------------------------+
 *    Date : mercredi 09 avril 2003
 *    Auteur : 
 *    site :  
 *   +---------------------------------------------+
 *    Fonctions de ce filtre :
 *     Appelez le dans vos squellette tout simplement
 *     par : [(#GEOMETRIE|wkt2shape)]
 *   +---------------------------------------------+
 *  
 * Pour toute suggestion, remarque, proposition d'ajout
 * reportez-vous au forum de l'article :
 * <A HREF="http://www.uzine.net/spip_contrib/">http://www.uzine.net/spip_contrib/</A>
 *
 */
function wkt2shape($geometrie){
	
	return substr($geometrie,0,4);
}

/*
 *   +---------------------------------------------+
 *    Nom du Filtre : Nombre de messages 
 *   +---------------------------------------------+
 *    Date : mercredi 09 avril 2003
 *    Auteur : BoOz Email:<A HREF="https://lists.berlios.de/mailman/listinfo/spip-carto-cvs">booz.bloog at laposte.net</A>
 *    site : <A HREF="http://bloog.net">http://bloog.net</A>
 *   +---------------------------------------------+
 *    Fonctions de ce filtre :
 *    Compte le nombre de messages d'un auteur
 *     Appelez le dans vos squellette tout simplement
 *     par : [(#ID_AUTEUR|nb_messages)]
 *   +---------------------------------------------+
 *  
 * Pour toute suggestion, remarque, proposition d'ajout
 * reportez-vous au forum de l'article :
 * <A HREF="http://www.uzine.net/spip_contrib/">http://www.uzine.net/spip_contrib/</A>
 *
 */


?&gt;

--- NEW FILE: impression.css ---

/*
 * Feuille de style specifique a l'impression
 */
 
/* Pour les liens, on desactive les couleurs
   et on affiche l'URL cible a la suite du lien (!) */

a { color: black; text-decoration: underline; }
a:visited { color: black; text-decoration: underline; }
a.spip_in { color: black; text-decoration: underline; }
a.spip_out { color: black; text-decoration: underline; }
a:after {
	display: inline;
	border: 1px solid dotted;
	content: &quot; [&quot; attr(href) &quot;]&quot;;
}

/*
 * Un peu de coquetterie
 */

.chapo {
	line-height: 1.4em;
	margin-top: 1em;
}
.texte {
}
.ps {
	padding-top: 0.6em;
	margin-top: 0.6em;
	border-top: 1px dashed #404040;
}
.notes {
	margin-top: 0.6em;
	margin-bottom: 0.6em;
	border-top: 1px solid #707070;
}
.structure {
	display: none;
}
.spip-admin {
	display: none;
}


.contenu {
	margin: 10px;
}
.contenu h1 {
	margin-top: 0em;
	margin-bottom: 0em;
}
.contenu h1.titre-extrait {
}
.contenu h1.titre-texte {
}
.contenu .surtitre {
	margin-top: 0em;
	margin-bottom: 0em;
}
.contenu .detail {
	margin-left: 2em;
}
.extrait {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 2em;
	margin-right: 0em;
	line-height: 1.4em;
}


/*
 * Disposition : on elimine les elements de navigation (display: none)
 * et on choisit un affichage de base pour le principal
 */

#principal {
	margin: 10px;
}

#navigation {
	display: none;
}

.encart {
	display: none;
}

.cartouche {
	margin-top: 0.5em;
	padding-top: 1em;
	margin-bottom: 1em;
}

.cartouche .spip_logos {
	margin-left: 0px;
	padding-left: 0px;
	margin-right: 0.8em;
}


/*
 * Forums
 */

.forum-repondre {
	display: none;
}
.forum-repondre-message {
	display: none;
}


--- NEW FILE: backend-breves.php3 ---
&lt;?php
$fond = &quot;backend-breves&quot;;
$delais = 3600;

// cette ligne empeche l'affichage des boutons d'administration
$flag_preserver = true;

@header(&quot;Content-type: text/xml&quot;);

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: typographie.css ---

/*
 * Correction des styles HTML par defaut
 */

.structure {
	display: none;
}
h1,h2,h3,h4 {
	margin-top: 0em;
	margin-bottom: 0em;
	font-size: 100%;
	font-weight: normal;
}

/*
 * Styles generaux
 */

/* bien regler la marge (bugs IE) */
body { background: white; margin: 10px; }
a { text-decoration: none; color: #505050; }
a:hover { text-decoration: none; color: #303030; background: #e8e8e8; }
a.spip_out { text-decoration: none; color: #a02020; }
a.spip_in, a.spip_url { text-decoration: none; color: #2020a0; }
a.spip_glossaire { text-decoration: none; color: #20a020; }

.chapo {
	font-family: &quot;Trebuchet MS&quot;, Tahoma, Arial, Helvetica, sans-serif;
	font-weight: bold;
	text-align: justify;
	font-size: 105%;
}
.texte, .texte p.spip {
	font-family: Georgia, Garamond, Times, serif;
	text-align: justify;
}
.ps {
	font-family: Georgia, Garamond, Times, serif;
	text-align: justify;
	font-size: 85%;
}
.notes {
	font-family: Georgia, Garamond, Times, serif;
	text-align: left;
	font-size: 80%;
}

/*
 * Ici les styles pour le contenu
 */

.contenu h1,h2 {
	font-size: 120%;
	font-weight: bold;
}
.contenu h1,h2.titre-extrait {
	font-size: 160%;
	font-weight: bold;
}
.contenu h1,h2.titre-texte {
	font-size: 190%;
	font-weight: bold;
}
.contenu .surtitre {
	font-size: 110%;
	font-weight: bold;
	font-variant: small-caps;
}
.contenu .detail {
	font-size: 80%;
	color: #303030;
}
.extrait {
	border: groove 2px #a0a0a0;
	padding: 1em;
	font-size: 85%;
}


/*
 * Disposition a l'ecran
 */

#principal {
	font-family: &quot;Trebuchet MS&quot;, Tahoma, Arial, Helvetica, sans-serif;
}

#plan {
	font-family: &quot;Trebuchet MS&quot;, Tahoma, Arial, Helvetica, sans-serif;
}

#navigation {
	font-family: Verdana, Arial, Helvetica, sans-serif;
}

.encart {
	font-family: Verdana, Arial, Helvetica, sans-serif;
}


--- NEW FILE: article.php3 ---
&lt;?php

$fond = &quot;article&quot;;
$delais = 24 * 3600;

include (&quot;inc-public.php3&quot;);

?&gt;

--- NEW FILE: recherche-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;

&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;&lt;:resultats_recherche:&gt;&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;projection, screen, tv&quot;&gt;
&lt;!-- media=&quot;print&quot; permet d'utiliser cette feuille de style quand vous imprimez depuis votre navigateur --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;impression.css&quot; type=&quot;text/css&quot; media=&quot;print&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;

&lt;div id=&quot;navigation&quot;&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;


&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]


&lt;!-- Rubriques trouvees --&gt;

&lt;B_rubriques&gt;
&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;rubriques&quot; title=&quot;&lt;:rubriques:&gt;&quot;&gt;
&lt;li class=&quot;menu-titre&quot;&gt;&lt;:rubriques:&gt;&lt;/li&gt;
&lt;BOUCLE_rubriques(RUBRIQUES) {recherche} {par points} {inverse} {0,8}&gt;
&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_rubriques&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/B_rubriques&gt;


&lt;!-- Mots-cles trouves et articles associes--&gt;

&lt;B_mots&gt;
&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;divers&quot; title=&quot;&lt;:mots_clefs:&gt;&quot;&gt;
&lt;BOUCLE_mots(MOTS) {recherche} {par points} {inverse} {0,5}&gt;
&lt;li&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_MOT&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
&lt;B_articles_mots&gt;
	&lt;ul class=&quot;menu-liste&quot;&gt;
&lt;BOUCLE_articles_mots(ARTICLES) {id_mot} {par hasard} {0,8}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_ARTICLE&quot; title=&quot;[(#DESCRIPTIF|textebrut|entites_html)]&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_articles_mots&gt;
	&lt;/ul&gt;
&lt;/B_articles_mots&gt;
&lt;/li&gt;
&lt;/BOUCLE_mots&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/B_mots&gt;

&lt;/div&gt;

&lt;!-- Une : articles trouves --&gt;

&lt;div class=&quot;contenu&quot; id=&quot;principal&quot;&gt;

&lt;div class=&quot;cartouche&quot;&gt;
&lt;h1 class=&quot;surtitre&quot;&gt;&lt;:resultats_recherche:&gt;&lt;/h1&gt;
[&lt;h2 class=&quot;titre-texte&quot;&gt;(#RECHERCHE)&lt;/h2&gt;]
&lt;/div&gt;

	&lt;div class=&quot;encart&quot;&gt;

	&lt;!-- Breves trouvees --&gt;

	&lt;B_breves&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;breves&quot; title=&quot;Br&egrave;ves trouv&eacute;es&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:breves:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_breves(BREVES) {recherche} {par points} {inverse} {0,8}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;i&gt;[(#DATE|affdate_court)]&lt;/i&gt;:
		&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_breves&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;

	&lt;/B_breves&gt;

	&lt;!-- Sites Web trouves --&gt;

	&lt;B_sites&gt;
	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;divers&quot; title=&quot;Sites Web trouv&eacute;s&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:sites_web:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_sites(SITES) {recherche} {par points} {inverse} {0,8}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;a href=&quot;#URL_SITE&quot; title=&quot;[(#DESCRIPTIF|textebrut|entites_html)]&quot;&gt;#NOM_SITE&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_sites&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_sites&gt;

	&lt;!-- Messages trouves --&gt;

	&lt;B_messages&gt;
	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;divers&quot; title=&quot;&lt;:messages_forum:&gt;&quot;&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:messages_forum:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_messages(FORUMS) {recherche} {par points} {inverse} {0,8}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;a href=&quot;#URL_FORUM&quot;&gt;#TITRE&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_messages&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;/B_messages&gt;

	&lt;/div&gt;


&lt;div class=&quot;liste-articles&quot;&gt;

&lt;BOUCLE_articles(ARTICLES) {recherche} {par points} {inverse} {0,10}&gt;
	&lt;h2&gt;&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/h2&gt;
	&lt;div class=&quot;detail&quot;&gt;
	[(#DATE|nom_jour)] [(#DATE|affdate)]
	&lt;B_auteurs_articles&gt;&lt;:par_auteur:&gt; &lt;BOUCLE_auteurs_articles(AUTEURS) {id_article} {&quot;, &quot;}&gt;#NOM&lt;/BOUCLE_auteurs_articles&gt;
	&lt;/div&gt;
	&lt;br&gt;
&lt;/BOUCLE_articles&gt;

&lt;/div&gt;

&lt;/div&gt;

#FORMULAIRE_ADMIN
&lt;/body&gt;
&lt;/html&gt;


--- NEW FILE: spip_carto.php ---
&lt;?php
include (&quot;ecrire/inc_version.php3&quot;);
include (&quot;ecrire/inc_connect.php3&quot;);
//include (&quot;ecrire/inc_meta.php3&quot;);
//include (&quot;ecrire/inc_session.php3&quot;);

include(&quot;downloadfile.class.php&quot;);

if (isset($_GET[&quot;id_carte&quot;]) &amp;&amp; !empty($_GET[&quot;id_carte&quot;])) 
{
	$query=&quot;select fichier from spip_documents where id_document=&quot;.$_GET[&quot;id_carte&quot;];
		
	$result = @spip_query($query);
	if ($result) 
	{
		$row = @spip_fetch_array($result); 
		$downloadfile = new DOWNLOADFILE($row[0],&quot;inline&quot;);
		//si c'est un probleme de document supprim&#233; : &quot;!!!&quot; ... bof !
		if (!$downloadfile-&gt;df_download()) echo &quot;!!!&quot;;
		//else exit();
	}
}
?&gt;
--- NEW FILE: formulaire_inscription-dist.html ---
[
(#HTTP_VARS{mode}|choixsiegal{forum,' ',''})&lt;:pass_forum_bla:&gt;&lt;br /&gt;&lt;br /&gt;][
(#HTTP_VARS{mode}|choixsiegal{redac,' ',''})&lt;:pass_espace_prive_bla:&gt;&lt;br /&gt;&lt;br /&gt;]&lt;:form_forum_indiquer_nom_email:&gt;
&lt;form id=&quot;inscription&quot; method='post' action='#SELF' style='border: 0px; margin: 0px;'&gt; 
      &lt;fieldset style=&quot;border: none; font-weight: bold&quot;&gt;&lt;legend&gt;&lt;/legend&gt;
	&lt;label&gt;
	  &lt;:form_pet_votre_nom:&gt;
	  &lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;nom_inscription&quot; value=&quot;&quot; size=&quot;30&quot; /&gt;
	&lt;/label&gt;
	&lt;label&gt;
	  &lt;:form_pet_votre_email:&gt;
	  &lt;input type=&quot;text&quot; class=&quot;forml&quot; name=&quot;mail_inscription&quot; value=&quot;&quot; size=&quot;30&quot; /&gt;
	&lt;/label&gt;
      &lt;/fieldset&gt;
      &lt;div align=&quot;right&quot;&gt;&lt;input type=&quot;submit&quot; class=&quot;spip_bouton&quot; value=&quot;&lt;:bouton_valider:&gt;&quot; /&gt;
	&lt;/div&gt; 
&lt;/form&gt;[
&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--
document.inscription.(#HTTP_VARS{focus}).focus()
--&gt;&lt;/script&gt;
][&lt;br /&gt;
&lt;div align=&quot;right&quot;&gt;
(#HTTP_VARS{mode}|choixsivide{'', ' '})
&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--
document.write(&quot;&lt;a href='&quot;)
document.write((window.opener) ? &quot;javascript:close()&quot; : &quot;./&quot;)
document.write(&quot;'&gt;&lt;:pass_quitter_fenetre:&gt;&lt;&quot; + &quot;/a&gt;&quot;);
//--&gt;&lt;/script&gt;
&lt;noscript&gt;
	&#91;&lt;a href='./'&gt;&lt;:pass_retour_public:&gt;&lt;/a&gt;&#93;
&lt;/noscript&gt;
&lt;/div&gt;
]


--- NEW FILE: inc-url_logout.php3 ---
&lt;?php

global $balise_URL_LOGOUT_collecte;
$balise_URL_LOGOUT_collecte = array();

function balise_URL_LOGOUT_stat ($args, $filtres)
{
  return array($filtres[0]);
}

function balise_URL_LOGOUT_dyn($cible)
{
	if (!$login = $GLOBALS['auteur_session']['login'])
	  return '';
	if (!$cible) $cible = $GLOBALS['clean_link']-&gt;getUrl();
	return 'spip_cookie.php3?logout_public=' . $login . '&amp;url=' . urlencode($cible);
}
?&gt;

--- NEW FILE: inc-compilo-index.php3 ---
&lt;?php


// fonctions de recherche et de reservation
// dans l'arborescence des boucles

// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_COMPILO_INDEX&quot;)) return;
define(&quot;_INC_COMPILO_INDEX&quot;, &quot;1&quot;);

// index_pile retourne la position dans la pile du champ SQL $nom_champ 
// en prenant la boucle la plus proche du sommet de pile (indique par $idb).
// Si on ne trouve rien, on considere que ca doit provenir du contexte 
// (par l'URL ou l'include) qui a ete recopie dans Pile[0]
// (un essai d'affinage a debouche sur un bug vicieux)
// Si ca reference un champ SQL, on le memorise dans la structure $boucles
// afin de construire un requete SQL minimale (plutot qu'un brutal 'SELECT *')

function index_pile($idb, $nom_champ, &amp;$boucles, $explicite='') {
  global $exceptions_des_tables, $table_des_tables, $tables_des_serveurs_sql;

	$i = 0;
	if (strlen($explicite)) {
	// Recherche d'un champ dans un etage superieur
	  while (($idb != $explicite) &amp;&amp; ($idb !='')) {
#		spip_log(&quot;Cherchexpl: $nom_champ '$explicite' '$idb' '$i'&quot;);
			$i++;
			$idb = $boucles[$idb]-&gt;id_parent;
		}
	}

	$c = strtolower($nom_champ);
	// attention: entre la boucle nommee 0, &quot;&quot; et le tableau vide,
	// il y a incoherences qu'il vaut mieux eviter
	while ($boucles[$idb]) {
#		spip_log(&quot;Cherche: $nom_champ '$idb' '$c'&quot;);
		$r = $boucles[$idb]-&gt;type_requete;
		$s = $boucles[$idb]-&gt;sql_serveur;
		if (!$s) 
		  { $s = 'localhost';
    // indirection (pour les rares cas ou le nom de la table!=type)
		    $t = $table_des_tables[$r];
		  }
		if (!$t) $t = $r; // pour les tables non Spip
		// $t est le nom PHP de cette table 
#		spip_log(&quot;Go: idb='$idb' r='$r' c='$c' nom='$nom_champ' s=$s&quot;);
		$desc = $tables_des_serveurs_sql[$s][$t];
		if (!$desc) {
			erreur_squelette(_L(&quot;Table SQL \&quot;$r\&quot; inconnue&quot;), &quot;'$idb'&quot;);
			# continuer pour chercher l'erreur suivante
			return  &quot;'#&quot; . $r . ':' . $nom_champ . &quot;'&quot;;
		}
		$excep = $exceptions_des_tables[$r][$c];
		if ($excep) {
			// entite SPIP alias d'un champ SQL
			if (!is_array($excep)) {
				$e = $excep;
				$c = $excep;
			} 
			// entite SPIP alias d'un champ dans une autre table SQL
			else {
				$t = $excep[0];
				$e = $excep[1].' AS '.$c;
			}
		}
		else {
			// $e est le type SQL de l'entree
			// entite SPIP homonyme au champ SQL
			if ($desc['field'][$c])
				$e = $c;
			else
				unset($e);
		}

#		spip_log(&quot;Dans $idb ('$t' '$e'): $desc&quot;);

		// On l'a trouve
		if ($e) {
			$boucles[$idb]-&gt;select[] = $t . &quot;.&quot; . $e;
			return '$Pile[$SP' . ($i ? &quot;-$i&quot; : &quot;&quot;) . '][\'' . $c . '\']';
		}

		// Sinon on remonte d'un cran
		$idb = $boucles[$idb]-&gt;id_parent;
		$i++;
	}

#	spip_log(&quot;Pas vu $nom_champ dans les &quot; . count($boucles) . &quot; boucles&quot;);
	// esperons qu'il y sera
	return('$Pile[0][\''.$nom_champ.'\']');
}

# calculer_champ genere le code PHP correspondant a une balise Spip
# Retourne une EXPRESSION php 
function calculer_champ($p) {
	$p = calculer_balise($p-&gt;nom_champ, $p);

	// definir le type et les traitements
	// si ca ramene le choix par defaut, ce n'est pas un champ 

	if (($p-&gt;code) &amp;&amp; ($p-&gt;code != '$Pile[0][\''.$nom.'\']')) {
		// Par defaut basculer en numerique pour les #ID_xxx
		if (substr($nom,0,3) == 'ID_') $p-&gt;statut = 'num';
	}

	else {
	// on renvoie la forme initiale '#TOTO'
	$p-&gt;code = &quot;'#&quot; . $nom . &quot;'&quot;;
	$p-&gt;statut = 'php';	// pas de traitement
	
	}

	// Retourner l'expression php correspondant au champ + ses filtres
	return applique_filtres($p);
}

// cette fonction sert d'API pour demander le champ '$champ' dans la pile
function champ_sql($champ, $p) {
	return index_pile($p-&gt;id_boucle, $champ, $p-&gt;boucles, $p-&gt;nom_boucle);
}

// cette fonction sert d'API pour demander une balise quelconque sans filtre
function calculer_balise($nom, $p) {

	// regarder s'il existe une fonction personnalisee balise_NOM()
	$f = 'balise_' . $nom;
	if (function_exists($f))
		return $f($p);

	// regarder s'il existe une fonction standard balise_NOM_dist()
	$f = 'balise_' . $nom . '_dist';
	if (function_exists($f))
		return $f($p);

	// regarder s'il existe un fichier d'inclusion au nom de la balise
	// et contenant un tableau balise_NOM_collecte
	$file = 'inc-' . strtolower($nom) . _EXTENSION_PHP;
	if (@file_exists($file)) {
		include_local($file);
		$f = $GLOBALS['balise_' . $nom . '_collecte'];
		if (is_array($f))
			return calculer_balise_dynamique($p, $nom, $f);
	}

	// S'agit-il d'un logo ? Une fonction speciale les traite tous
	if (ereg('^LOGO_', $nom))
		return calculer_balise_logo($p);

	// ca doit etre un champ SQL homonyme,
	$p-&gt;code = index_pile($p-&gt;id_boucle, $nom, $p-&gt;boucles, $p-&gt;nom_boucle);
	return $p;
}

//
// Traduction des balises dynamiques, notamment les &quot;formulaire_*&quot;
// Inclusion du fichier associe a son nom.
// Ca donne les arguments a chercher dans la pile,on compile leur localisation
// Ensuite on delegue a une fonction generale definie dans inc-calcul-outils
// qui recevra a l'execution la valeurs des arguments, 
// ainsi que les filtres (qui ne sont donc pas traites &#224; la compil)

function calculer_balise_dynamique($p, $nom, $l) {
	balise_distante_interdite($p);
	$param = param_balise($p);
	$p-&gt;code = &quot;executer_balise_dynamique('&quot; . $nom . &quot;',\n\tarray(&quot;
	  . join(',',collecter_balise_dynamique($l, $p))
	  . filtres_arglist($param, $p)
	  . &quot;),\n\tarray(&quot;
	  . (!$p-&gt;fonctions ? '' : (&quot;'&quot; . join(&quot;','&quot;, $p-&gt;fonctions) . &quot;'&quot;))
	  . &quot;))&quot;;
	$p-&gt;statut = 'php';
	$p-&gt;fonctions = '';
	return $p;
}

function param_balise(&amp;$p) 
{
	$a = $p-&gt;fonctions;
	if ($a) list(,$nom) = each($a) ; else $nom = '';
	if (!ereg(' *\{ *([^}]+) *\} *',$nom, $m))
	  return '';
	else {
		$filtres= array();
		while (list(, $f) = each($a)) if ($f) $filtres[] = $f;
		$p-&gt;fonctions = $filtres;
		return $m[1];
	}
}

// construire un tableau des valeurs interessant un formulaire

function collecter_balise_dynamique($l, $p) {
	$args = array();
	foreach($l as $c) { $x = calculer_balise($c, $p); $args[] = $x-&gt;code;}
	return $args;
}

// Genere l'application d'une liste de filtres
function applique_filtres($p) {
	$statut = $p-&gt;statut;
	$fonctions = $p-&gt;fonctions;
	$p-&gt;fonctions = ''; # pour r&#233;utiliser la structure si r&#233;cursion

	// pretraitements standards
	switch ($statut) {
		case 'num':
			$code = &quot;intval($code)&quot;;
			break;
		case 'php':
			break;
		case 'html':
		default:
			$code = &quot;trim($code)&quot;;
			break;
	}

//  processeurs standards (cf inc-balises.php3)
	$code = ($p-&gt;etoile ? $p-&gt;code : champs_traitements($p));
	// Appliquer les filtres perso
	if ($fonctions) {
		foreach($fonctions as $fonc) {
			if ($fonc) {
				$arglist = '';
				if (ereg('([^\{\}]*)\{(.+)\}$', $fonc, $regs)) {
					$fonc = $regs[1];
				        $arglist = filtres_arglist($regs[2],$p);
				}
				if (function_exists($fonc))
				  $code = &quot;$fonc($code$arglist)&quot;;
				else if (strpos(&quot; &lt; &gt; &lt;= &gt;= == &lt;&gt; &quot;, &quot; $fonc &quot;))
				  $code = &quot;$code $fonc &quot; . substr($arglist,1);
				else 
				  $code = &quot;erreur_squelette('&quot;.
					  texte_script(
						_T('erreur_filtre', array('filtre' =&gt; $fonc))
					).&quot;','&quot; . $p-&gt;id_boucle . &quot;')&quot;;
			}
		}
	}

	// post-traitement securite
	if ($statut == 'html')
		$code = &quot;interdire_scripts($code)&quot;;
	return $code;
}

// analyse des parametres d'un champ etendu
// [...(#CHAMP{parametres})...] ou [...(#CHAMP|filtre{parametres})...]
// retourne une suite de N references aux N valeurs indiqu&#233;es avec N virgules

function filtres_arglist($args, $p) {
	$arglist ='';;
	while (ereg('([^,]+),?(.*)$', $args, $regs)) {
		$arg = trim($regs[1]);
		if ($arg) {
		  if (ereg(&quot;^&quot; . NOM_DE_CHAMP, $arg, $regs2)) {
				$p-&gt;nom_boucle = $regs2[2];
				$p-&gt;nom_champ = $regs2[3];
				$arg = calculer_champ($p);
			} else if ($arg[0] =='$')
				$arg = '$Pile[0][\'' . substr($arg,1) . &quot;']&quot;;
			$arglist .= ','.$arg;
		}
		$args=$regs[2];
	}
	return $arglist;
}

//
// Reserve les champs necessaires a la comparaison avec le contexte donne par
// la boucle parente ; attention en recursif il faut les reserver chez soi-meme
// ET chez sa maman
// 
function calculer_argument_precedent($idb, $nom_champ, &amp;$boucles) {

	// recursif ?
	if ($boucles[$idb]-&gt;externe)
		index_pile ($idb, $nom_champ, $boucles); // reserver chez soi-meme
	// reserver chez le parent et renvoyer l'habituel $Pile[$SP]['nom_champ']
#	spip_log(&quot;boucles[$idb]-&gt;id_parent &quot; . $boucles[$idb]-&gt;id_parent);
	return index_pile ($boucles[$idb]-&gt;id_parent, $nom_champ, $boucles);
}

function rindex_pile($p, $champ, $motif) 
{
	$n = 0;
	$b = $p-&gt;id_boucle;
	$p-&gt;code = '';
	while ($b != '') {
	if ($s = $p-&gt;boucles[$b]-&gt;param) {
	  foreach($s as $v) {
		if (strpos($v,$motif) !== false) {
		  $p-&gt;code = '$Pile[$SP' . (($n==0) ? &quot;&quot; : &quot;-$n&quot;) .
			&quot;]['$champ']&quot;;
		  $b = '';
		  break;
		}
	  }
	}
	$n++;
	$b = $p-&gt;boucles[$b]-&gt;id_parent;
	}
	if (!$p-&gt;code) {
	  erreur_squelette(_L(&quot;Champ #&quot; . strtoupper($champ) . &quot; hors d'une boucle de motif $motif&quot;), $p-&gt;id_boucle);
	}
	$p-&gt;statut = 'php';
	return $p;
}

?&gt;

--- NEW FILE: inc-login_public.php3 ---
&lt;?php

include(_FILE_CONNECT);
include_ecrire(&quot;inc_meta.php3&quot;);
include_ecrire(&quot;inc_session.php3&quot;);
include_ecrire(&quot;inc_filtres.php3&quot;);

global $balise_LOGIN_PUBLIC_collecte;
$balise_LOGIN_PUBLIC_collecte = array('url');

# retourner:
# 1. l'url collectee ci-dessus (args0) ou donnee en filtre (filtre0)
# 2. l'eventuel parametre de la balise (args1) fournie par calculer_balise_dynamique

function balise_LOGIN_PUBLIC_stat ($args, $filtres)
{
	return array($filtres[0] ? $filtres[0] : $args[0], $args[1]);
}

function balise_LOGIN_PUBLIC_dyn($cible, $login)
{
	if (!$cible) {
		global $clean_link;
		$clean_link-&gt;delVar('var_erreur');
		$clean_link-&gt;delVar('var_login');
		$cible = $clean_link-&gt;getUrl();
	}
	return login_explicite($login, $cible,  'forum');
}

function login_explicite($login, $cible, $mode) {
	global $auteur_session, $clean_link;

	$clean_link-&gt;delVar('var_erreur');
	$clean_link-&gt;delVar('var_login');
	$action = $clean_link-&gt;getUrl();

	if ($cible) {
	  $cible = ereg_replace(&quot;[?&amp;]var_erreur=[^&amp;]*&quot;, '', $cible);
	  $cible = ereg_replace(&quot;[?&amp;]var_login=[^&amp;]*&quot;, '', $cible);
	} else {
	  if (ereg(&quot;[?&amp;]url=([^&amp;]*)&quot;, $action, $m))
	    $cible = urldecode($m[1]);
	  else
	    $cible = _DIR_RESTREINT ;
	}
	      
	include_ecrire(&quot;inc_session.php3&quot;);
	verifier_visiteur();

	if ($auteur_session AND 
	($auteur_session['statut']=='0minirezo' OR $auteur_session['statut']=='1comite')) {
		if (($cible != $action) &amp;&amp;  !headers_sent())
			redirige_par_entete($cible);
		return http_href($cible, _T('login_par_ici'));
	}
	return login_pour_tous($login ? $login : $GLOBALS['var_login'], $cible, '', $action, $mode);
}

// fonction aussi pour les forums sur abonnement

function login_pour_tous($login, $cible, $message, $action, $mode) {

  global $ignore_auth_http, $spip_admin, $php_module;

	// en cas d'echec de cookie, inc_auth a renvoye vers spip_cookie qui
	// a tente de poser un cookie ; s'il n'est pas la, c'est echec cookie
	// s'il est la, c'est probablement un bookmark sur bonjour=oui,
	// et pas un echec cookie.
	if ($GLOBALS['var_echec_cookie'])
	  $echec_cookie = ($GLOBALS['spip_session'] != 'test_echec_cookie');
	$auth = ($echec_cookie AND $php_module AND !$ignore_auth_http) ?
	  'spip_cookie.php3' : '';
	// Le login est memorise dans le cookie d'admin eventuel
	if (!$login) {
		if (ereg(&quot;^@(.*)$&quot;, $spip_admin, $regs))
			$login = $regs[1];
	} else if ($login == '-1')
	  $login = '';

	$row = array();
	$erreur = '';
	if ($login) {
		$row = spip_query(&quot;SELECT * FROM spip_auteurs WHERE login='&quot; .addslashes($login) .&quot;'&quot;);
		$row =  spip_fetch_array($row);
		if ((!$row AND !$GLOBALS['ldap_present']) OR
		    ($row['statut'] == '5poubelle') OR 
		    (($row['source'] == 'spip') AND $row['pass'] == '')) {
			$erreur =  _T('login_identifiant_inconnu', array('login' =&gt; $login));
 			$row = array();
			$login = '';
			@spip_setcookie(&quot;spip_admin&quot;, &quot;&quot;, time() - 3600);
		} else {
		  // on laisse le menu decide de la langue
		  unset($row['lang']);
		}
	}

	return array('formulaire_login', 0, 
		     array_merge(array_map('addslashes', $row),
				 array(
				       'action2' =&gt; ($login ? 'spip_cookie.php3' : $action),
				       'erreur' =&gt; $erreur,
				       'action' =&gt; $action,
				       'url' =&gt; $cible,
				       'auth' =&gt; $auth,
				       'echec_cookie' =&gt; ($echec_cookie ? ' ' : ''),
				       'message' =&gt; ($message ? ' ' : ''),
				       )
				 )
		     );

}

// Bouton duree de connexion

function filtre_rester_connecte($prefs) 
{
	$prefs = unserialize(stripslashes($prefs));
	return $prefs['cnx'] == 'perma' ? ' ' : '';
}

function silogoauteur($id_auteur)
{
  $f = _DIR_IMG . 'auton' . $id_auteur . '.jpg';
  return (@file_exists($f) ? $f : '');
}
?&gt;

--- NEW FILE: inc-admin.php3 ---
&lt;?php

// Inserer la feuille de style selon les normes, dans le &lt;head&gt;
// Feuilles de style admin : d'abord la CSS officielle, puis la perso,
function perso_admin($texte) {
	$css = &quot;&lt;link rel='stylesheet' href='spip_admin.css' type='text/css' /&gt;\n&quot;;
	if (@file_exists('spip_admin_perso.css'))
		$css2 = &quot;&lt;link rel='stylesheet' href='spip_admin_perso.css' type='text/css' /&gt;\n&quot;;

	if (eregi('&lt;(/head|body)', $texte, $regs)) {
		$texte = explode($regs[0], $texte, 2);
		return $texte[0] . $css. $css2 . $regs[0] . $texte[1];
	} else
		return $css . $css2 . $texte;
}

?&gt;

--- NEW FILE: inc-formulaire_signature.php3 ---
&lt;?php

// Formulaire de signature d'une petition
//

global $balise_FORMULAIRE_SIGNATURE_collecte;
$balise_FORMULAIRE_SIGNATURE_collecte = array('petition', 'nom_email', 'adresse_email', 'message', 'signature_nom_site', 'signature_url_site', 'url_page', 'val_confirm');

function balise_FORMULAIRE_SIGNATURE_stat($args, $filtres)
{
  return ($args[0] ? $args : '');
}

function balise_FORMULAIRE_SIGNATURE_dyn($id_article, $nom_email, $adresse_email, $message, $nom_site, $url_site, $url_page, $val_confirm) {

	include_local(_FILE_CONNECT);
	if ($val_confirm)
		return reponse_confirmation($id_article);
	else if ($nom_email AND $adresse_email)
		return  reponse_signature($id_article, $nom_email, $adresse_email, $message, $nom_site, $url_site, $url_page, $val_confirm);
	else {
		$row = spip_fetch_array(spip_query(&quot;SELECT * FROM spip_petitions WHERE id_article='$id_article'&quot;));
		return !$row ? '': array('formulaire_signature', 0, $row);
	}
}


//
// Retour a l'ecran du lien de confirmation d'une signature de petition.
// Si val_confirm est non vide, c'est l'appel en debut de inc-public
// pour vider le cache au demarrage afin que la nouvelle signature apparaisse.
// Sinon, c'est l'execution du formulaire et on retourne le message 
// de confirmation ou d'erreur construit lors de l'appel par inc-public.

function reponse_confirmation($id_article, $val_confirm = '') {
	static $confirm = '';

	if (!$val_confirm) return $confirm;
	include_local(_FILE_CONNECT);
	if ($GLOBALS['db_ok']) {
		include_ecrire(&quot;inc_texte.php3&quot;);
		include_ecrire(&quot;inc_filtres.php3&quot;);

		// Eviter les doublons
		$lock = &quot;petition $id_article $val_confirm&quot;;
		if (!spip_get_lock($lock, 5)) {
			$confirm= _T('form_pet_probleme_technique');
		}
		else {
			$query_sign = &quot;SELECT * FROM spip_signatures WHERE statut='&quot;.addslashes($val_confirm).&quot;'&quot;;
			$result_sign = spip_query($query_sign);
			if (spip_num_rows($result_sign) &gt; 0) {
				while($row = spip_fetch_array($result_sign)) {
					$id_signature = $row['id_signature'];
					$id_article = $row['id_article'];
					$date_time = $row['date_time'];
					$nom_email = $row['nom_email'];
					$adresse_email = $row['ad_email'];
					$nom_site = $row['nom_site'];
					$url_site = $row['url_site'];
					$message = $row['message'];
					$statut = $row['statut'];
				}
	
				$query_petition = &quot;SELECT * FROM spip_petitions WHERE id_article=$id_article&quot;;
				$result_petition = spip_query($query_petition);
	
				while ($row = spip_fetch_array($result_petition)) {
					$id_article = $row['id_article'];
					$email_unique = $row['email_unique'];
					$site_obli = $row['site_obli'];
					$site_unique = $row['site_unique'];
					$message_petition = $row['message'];
					$texte_petition = $row['texte'];
				}
	
				if ($email_unique == &quot;oui&quot;) {
					$email = addslashes($adresse_email);
					$query = &quot;SELECT * FROM spip_signatures WHERE id_article=$id_article AND ad_email='$email' AND statut='publie'&quot;;
					$result = spip_query($query);
					if (spip_num_rows($result) &gt; 0) {
						$confirm= (_T('form_pet_deja_signe'));
						$refus = &quot;oui&quot;;
					}
				}
	
				if ($site_unique == &quot;oui&quot;) {
					$site = addslashes($url_site);
					$query = &quot;SELECT * FROM spip_signatures WHERE id_article=$id_article AND url_site='$site' AND statut='publie'&quot;;
					$result = spip_query($query);
					if (spip_num_rows($result) &gt; 0) {
						$confirm= (_T('form_pet_deja_enregistre'));
						$refus = &quot;oui&quot;;
					}
				}
	
				if ($refus == &quot;oui&quot;) {
					$confirm= (_T('form_deja_inscrit'));
				}
				else {
					$query = &quot;UPDATE spip_signatures SET statut='publie' WHERE id_signature='$id_signature'&quot;;
					$result = spip_query($query);
					// invalider les pages ayant des boucles signatures
					include_ecrire('inc_invalideur.php3');
					include_ecrire('inc_meta.php3');
					suivre_invalideur(&quot;id='petition/petition'&quot;);
	
					$confirm= (_T('form_pet_signature_validee'));
				}
			}
			else {
				$confirm= (_T('form_pet_aucune_signature'));
			}
			spip_release_lock($lock);
		}
	}
	else {
		$confirm= _T('form_pet_probleme_technique');
	}
}

//
// Retour a l'ecran de la signature d'une petition
//

function reponse_signature($id_article, $nom_email, $adresse_email, $message, $nom_site, $url_site, $url_page, $val_confirm) {

	if ($GLOBALS['db_ok']) {
		include_ecrire(&quot;inc_texte.php3&quot;);
		include_ecrire(&quot;inc_filtres.php3&quot;);
		include_ecrire(&quot;inc_mail.php3&quot;);

		// Eviter les doublons
		$lock = &quot;petition $id_article $adresse_email&quot;;
		if (!spip_get_lock($lock, 5)) {
			return _T('form_pet_probleme_technique');
		} else {
			$query_petition = &quot;SELECT * FROM spip_petitions WHERE id_article=$id_article&quot;;
			$result_petition = spip_query($query_petition);
	
			while ($row = spip_fetch_array($result_petition)) {
				$id_article = $row['id_article'];
				$email_unique = $row['email_unique'];
				$site_obli = $row['site_obli'];
				$site_unique = $row['site_unique'];
				$message_petition = $row['message'];
				$texte_petition = $row['texte'];
			}
	
			if (strlen($nom_email) &lt; 2) {
				return (_T('form_indiquer_nom'));
			}
	
			if ($adresse_email == _T('info_mail_fournisseur')) {
				return (_T('form_indiquer_email'));
			}
	
			if ($email_unique == &quot;oui&quot;) {
				$email = addslashes($adresse_email);
				$query = &quot;SELECT * FROM spip_signatures WHERE id_article=$id_article AND ad_email='$email' AND statut='publie'&quot;;
				$result = spip_query($query);
				if (spip_num_rows($result) &gt; 0) {
					return (_T('form_pet_deja_signe'));
				}
			}
	
			if (!email_valide($adresse_email)) {
				return (_T('form_email_non_valide'));
			}
	
			if ($site_obli == &quot;oui&quot;) {
				if (!$nom_site) {
					return (_T('form_indiquer_nom_site'));
				}
				include_ecrire(&quot;inc_sites.php3&quot;);
	
				if (!recuperer_page($url_site)) {
					return (_T('form_pet_url_invalide'));
				}
			}
			if ($site_unique == &quot;oui&quot;) {
				$site = addslashes($url_site);
				$query = &quot;SELECT * FROM spip_signatures WHERE id_article=$id_article AND url_site='$site' AND (statut='publie' OR statut='poubelle')&quot;;
				$result = spip_query($query);
				if (spip_num_rows($result) &gt; 0) {
					return (_T('form_pet_site_deja_enregistre'));
				}
			}
	
			$passw = test_pass();
	
			if ($refus == &quot;oui&quot;) {
				return _T('form_pet_signature_pasprise');
			}
			else {
				$query_site = &quot;SELECT titre FROM spip_articles WHERE id_article=$id_article&quot;;
				$result_site = spip_query($query_site);
				while ($row = spip_fetch_array($result_site)) {
					$titre = $row['titre'];
				}

				$link = new Link($url_page);
				$link-&gt;addVar('val_confirm', $passw);
				$url = $link-&gt;getUrl(&quot;sp$id_article&quot;);
	
				$messagex = _T('form_pet_mail_confirmation', array('titre' =&gt; $titre, 'nom_email' =&gt; $nom_email, 'nom_site' =&gt; $nom_site, 'url_site' =&gt; $url_site, 'url' =&gt; $url));

				if (envoyer_mail($adresse_email, _T('form_pet_confirmation').&quot; &quot;.$titre, $messagex)) {

					$nom_email = addslashes($nom_email);
					$adresse_email = addslashes($adresse_email);
					$nom_site = addslashes($nom_site);
					$url_site = addslashes($url_site);
					$message = addslashes($message);
	
					spip_query(&quot;INSERT INTO spip_signatures (id_article, date_time, nom_email, ad_email, nom_site, url_site, message, statut) VALUES ('$id_article', NOW(), '$nom_email', '$adresse_email', '$nom_site', '$url_site', '$message', '$passw')&quot;);
					return _T('form_pet_envoi_mail_confirmation');
				}
				else {
					return _T('form_pet_probleme_technique');
				}
			}
			spip_release_lock($lock);
		}
	}
	else {
		return _T('form_pet_probleme_technique');
	}

}


function test_pass() {
	include_ecrire(&quot;inc_acces.php3&quot;);
	for (;;) {
		$passw = creer_pass_aleatoire();
		$query = &quot;SELECT statut FROM spip_signatures WHERE statut='$passw'&quot;;
		$result = spip_query($query);
		if (!spip_num_rows($result)) break;
	}
	return $passw;
}

?&gt;

--- NEW FILE: inc-calcul-outils.php3 ---
&lt;?php

//
// Des fonctions diverses utilisees lors du calcul d'une page ; ces fonctions
// bien pratiques n'ont guere de logique organisationnelle ; elles sont
// appelees par certaines balises au moment du calcul des pages. (Peut-on
// trouver un modele de donnees qui les associe physiquement au fichier
// definissant leur balise ???
//

// ON TROUVERA EN QUEUE DE FICHIER LES FONCTIONS FAISANT DES APPELS SQL


// Ce fichier ne sera execute qu'une fois
if (defined(&quot;_INC_CALCUL_OUTILS&quot;)) return;
define(&quot;_INC_CALCUL_OUTILS&quot;, &quot;1&quot;);

// Pour les documents comme pour les logos, le filtre |fichier donne
// le chemin du fichier apres 'IMG/' ;  peut-etre pas d'une purete
// remarquable, mais a conserver pour compatibilite ascendante.
// -&gt; <A HREF="http://www.spip.net/fr_article901.html">http://www.spip.net/fr_article901.html</A>
function calcule_fichier_logo($on) {
	$r = ereg_replace(&quot;^&quot; . _DIR_IMG, &quot;&quot;, $on);
	return $r;
}

// Renvoie le code html pour afficher un logo, avec ou sans survol, lien, etc.
// utilise la globale ci-dessous pour les attributs hspace &amp; vspace

tester_variable('espace_logos',3);

function affiche_logos($logos, $lien, $align) {
	static $num_survol=0;
	global $espace_logos;
	list ($arton, $artoff) = $logos;

	if (!$arton) return $artoff;

	$num_survol++;
	$milieu = &quot;&lt;img src='$arton'&quot;
		. ($align ? &quot; align='$align' &quot; : '') 
		. &quot; name='image$num_survol' border='0' &quot;
		. &quot;alt='image$num_survol'&quot;
		. &quot; hspace='$espace_logos' vspace='$espace_logos' class='spip_logos' /&gt;&quot;;

	if (!$artoff) return ($lien ? http_href($lien, $milieu) : $milieu);

	$att =	&quot;onmouseover=\&quot;image$num_survol.src='$artoff'\&quot; 
		onmouseout=\&quot;image$num_survol.src='$arton'\&quot;&quot;;

	return ($lien ? &quot;&lt;a href='$lien' $att&gt;$milieu&lt;/a&gt;&quot; : &quot;&lt;div $att&gt;$milieu&lt;/div&gt;&quot;);

}

//
// Retrouver le logo d'un objet (et son survol)
//

function calcule_logo($type, $onoff, $id, $id_rubrique, $ff) {
	include_ecrire('inc_logos.php3');

	$table_logos = array (
	'ARTICLE' =&gt; 'art',
	'AUTEUR' =&gt;  'aut',
	'BREVE' =&gt;  'breve',
	'MOT' =&gt; 'mot',
	'RUBRIQUE' =&gt; 'rub',
	'SITE' =&gt; 'site'
	);
	$type = $table_logos[$type];
	$nom = strtolower($onoff);
	# attention au cas $id = '0' pour LOGO_SITE_SPIP : utiliser intval()
	while (1) {
		$on = cherche_image_nommee($type . $nom . intval($id));
		if ($on) {
			if ($ff)
			  return  (array('', &quot;$on[1].$on[2]&quot;));
			else {
				$off = ($onoff != 'ON') ? '' :
					cherche_image_nommee($type . 'off' . $id);
				return array (&quot;$on[0]$on[1].$on[2]&quot;,
					      ($off ? (&quot;$off[0]$off[1].$off[2]&quot;) : ''));
			}
		}
		else if ($id_rubrique) {
			$type = 'rub';
			$id = $id_rubrique;
			$id_rubrique = 0;
		} else if ($id AND $type == 'rub')
			$id = sql_parent($id);
		else return array('','');
	}
}

//
// fonction standard de calcul de la balise #INTRODUCTION
// on peut la surcharger en definissant dans mes_fonctions.php3 :
// function introduction($type,$texte,$chapo,$descriptif) {...}
//
function calcul_introduction ($type, $texte, $chapo='', $descriptif='') {
	if (function_exists(&quot;introduction&quot;))
		return introduction ($type, $texte, $chapo, $descriptif);

	switch ($type) {
		case 'articles':
			if ($descriptif)
				return propre($descriptif);
			else if (substr($chapo, 0, 1) == '=')	// article virtuel
				return '';
			else
				return PtoBR(propre(supprimer_tags(couper_intro($chapo.&quot;\n\n\n&quot;.$texte, 500))));
			break;
		case 'breves':
			return PtoBR(propre(supprimer_tags(couper_intro($texte, 300))));
			break;
		case 'forums':
			return PtoBR(propre(supprimer_tags(couper_intro($texte, 600))));
			break;
		case 'rubriques':
			if ($descriptif)
				return propre($descriptif);
			else
				return PtoBR(propre(supprimer_tags(couper_intro($texte, 600))));
			break;
	}
}

function executer_balise_dynamique($nom, $args, $filtres) {
	$file = 'inc-' . strtolower($nom) . _EXTENSION_PHP;
	include_local($file);

	$f = 'balise_' . $nom . '_stat';
	$r = $f($args, $filtres);
	if (!is_array($r))
		return $r;
	else { 
		return
		('&lt;'.'?php 
include_ecrire(\'inc_lang.php3\');
lang_select($GLOBALS[&quot;spip_lang&quot;]);
include_local(&quot;'
		. $file
		. '&quot;);
inclure_balise_dynamique(balise_'
		. $nom
		. '_dyn(\''
		. join(&quot;', '&quot;, array_map(&quot;addslashes&quot;, $r))
		. '\'));
	lang_dselect();
?'
		.&quot;&gt;&quot;);
	}
}

//
// FONCTIONS FAISANT DES APPELS SQL
//

# NB : a l'exception des fonctions pour les balises dynamiques

function calcul_exposer ($id, $type, $reference) {
	static $exposer;
	static $ref_precedente;

	// Que faut-il exposer ? Tous les elements de $reference
	// ainsi que leur hierarchie ; on ne fait donc ce calcul
	// qu'une fois (par squelette) et on conserve le resultat
	// en static.
	if ($reference&lt;&gt;$ref_precedente) {
		$ref_precedente = $reference;

		$exposer = array();
		foreach ($reference as $element=&gt;$id_element) {
			if ($element == 'id_secteur') $element = 'id_rubrique';
			if ($x = table_from_primary($element)) {
				list($table,$hierarchie) = $x;
				$exposer[$element][$id_element] = true;
				if ($hierarchie) {
					list ($id_rubrique) = spip_abstract_fetsel(
array('id_rubrique'), 
array($table),
array(&quot;$element=$id_element&quot;));
				$hierarchie = substr(calculer_hierarchie($id_rubrique), 2);
				foreach (split(',',$hierarchie) as $id_rubrique)
					$exposer['id_rubrique'][$id_rubrique] = true;
				}
			}
		}
	}

	// And the winner is...
	return $exposer[$type][$id];
}

function table_from_primary($id) {
	global $tables_principales;
	include_ecrire('inc_serialbase.php3');
	foreach ($tables_principales as $k =&gt; $v) {
		if ($v['key']['PRIMARY KEY'] == $id)
			return array($k, array_key_exists('id_rubrique', $v['field']));
	}
	return '';
}

function calcul_generation ($generation) {
	$lesfils = array();
	$result = spip_abstract_select(array('id_rubrique'),
				array('rubriques AS rubriques'),
				array(calcul_mysql_in('id_parent', 
					$generation,
					'')),
				'','','','','','','');
	while ($row = spip_abstract_fetch($result))
		$lesfils[] = $row['id_rubrique'];
	return join(&quot;,&quot;,$lesfils);
}

function calcul_branche ($generation) {
	if (!$generation) 
		return '0';
	else {
		$branche[] = $generation;
		while ($generation = calcul_generation ($generation))
			$branche[] = $generation;
		return join(&quot;,&quot;,$branche);
	}
}

// fonction appelee par la balise #LOGO_DOCUMENT
function calcule_document($id_document, $doubdoc, &amp;$doublons) {
	if (!$id_document) return '';
	if ($doubdoc &amp;&amp; $id_document) $doublons[&quot;documents&quot;] .= ', ' . $id_document;

	if (!($row = spip_abstract_select(array('id_type', 'id_vignette', 'fichier', 'mode'), array('documents AS documents'), array(&quot;id_document = $id_document&quot;))))
// pas de document. Ne devrait pas arriver
		return ''; 

	list($id_type, $id_vignette, $fichier, $mode) = spip_abstract_fetch($row);
	if ($id_vignette) {
		if ($res = spip_abstract_select(array('fichier'), array('documents AS documents'), array(&quot;id_document = $id_vignette&quot;))) {
			list($vignette) = spip_abstract_fetch($res);
			if (@file_exists($vignette))
				return generer_url_document($id_vignette);
				# return ($fichier); # en std g_u_d fait ca
		}
	} else if ($mode == 'vignette') 
		return generer_url_document($id_document);
		# return $fichier; # en std g_u_d fait ca

// calcul de l'extension par tous les moyens
	if ($id_type) {
		list($ext) = spip_abstract_fetch(spip_abstract_select(array('extension'), array('types_documents AS documents'), array(&quot;id_type = &quot; . intval($id_type))));
	} else {
		eregi('\.([a-z0-9]+)$', $fichier, $regs);
		$ext = $regs[1];
	}
// Pas de vignette mais une extension:
// prendre la vignette de celle-ci dans IMG/icones sauf si on peut faire mieux
	$formats = ','.lire_meta('formats_graphiques').',';
	if ((strpos($formats, &quot;,$ext,&quot;) === false) OR
	!$fichier OR (lire_meta(&quot;creer_preview&quot;) != 'oui')) {
		return vignette_par_defaut($ext ? $ext : 'txt', false);
	}
// on peut faire mieux dans le cas des images: une previsualisation
// on devrait verifier que le fichier existe dans IMG/vignette
// et sinon lancer creer_vignette (qui fera un UPDATE sur spip_documents)
// mais on risque de d&#233;passer le temps alloue au processus
	return 'spip_image.php3?vignette='.rawurlencode(
		str_replace('../', '', $fichier));
}


// fonction appelee par la balise #EMBED
function calcule_embed_document($id_document, $filtres, &amp;$doublons, $doubdoc) {
	if ($doubdoc &amp;&amp; $id_document) $doublons[&quot;documents&quot;] .= ', ' . $id_document;
	return embed_document($id_document, $filtres, false);
}

// fonction appelee par la balise #NOTES
function calculer_notes() {
	$r = $GLOBALS[&quot;les_notes&quot;];
	$GLOBALS[&quot;les_notes&quot;] = &quot;&quot;;
	$GLOBALS[&quot;compt_note&quot;] = 0;
	$GLOBALS[&quot;marqueur_notes&quot;] ++;
	return $r;
}

# retourne la profondeur d'une rubrique

function sql_profondeur($id) {
	$n = 0;
	while ($id) {
		$n++;
		$id = sql_parent($id);
	}
	return $n;
}


function sql_parent($id_rubrique) {
	$row = spip_abstract_fetsel(array(id_parent), 
			array('rubriques'), 
			array(&quot;id_rubrique=&quot; . intval($id_rubrique)));
	return $row['id_parent'];
}

function sql_rubrique($id_article) {
	$row = spip_abstract_fetsel(array('id_rubrique'),
			array('articles'),
			array(&quot;id_article=&quot; . intval($id_article)));
	return $row['id_rubrique'];
}

function sql_auteurs($id_article, $table, $id_boucle, $serveur='') {
	$auteurs = &quot;&quot;;
	if ($id_article) {
		$result_auteurs = spip_abstract_select(array('auteurs.nom', 'auteurs.email'),
			array('auteurs AS auteurs',
				'auteurs_articles AS lien'), 
			array(&quot;lien.id_article=$id_article&quot;,
				&quot;auteurs.id_auteur=lien.id_auteur&quot;),
			'','','','',1, 
			$table, $id_boucle, $serveur);

		while($row_auteur = spip_abstract_fetch($result_auteurs, $serveur)) {
			$nom_auteur = typo($row_auteur[&quot;nom&quot;]);
			$email_auteur = $row_auteur[&quot;email&quot;];
			if ($email_auteur) {
				$auteurs[] = &quot;&lt;a href=\&quot;mailto:$email_auteur\&quot;&gt;$nom_auteur&lt;/a&gt;&quot;;
			} else {
				$auteurs[] = &quot;$nom_auteur&quot;;
			}
		}
	}
	return (!$auteurs) ? &quot;&quot; : join($auteurs, &quot;, &quot;);
}

function sql_petitions($id_article, $table, $id_boucle, $serveur, &amp;$Cache) {
	$retour = spip_abstract_fetsel(
			array('id_article'),
			array('petitions'),
			array(&quot;id_article=&quot;.intval($id_article)),
			'','','','',1, 
			$table, $id_boucle, $serveur);

	# cette page est invalidee par toute petition
	if ($retour AND $Cache)
		$Cache['petition']['petition'] = 1;

	return ($retour ? $id_article : '');
}

# retourne le chapeau d'un article, et seulement s'il est publie

function sql_chapo($id_article) {
	return spip_abstract_fetsel(array('chapo'),
		array('articles'),
		array(&quot;id_article=&quot;.intval($id_article),
		&quot;statut='publie'&quot;));
}

// Calcul de la rubrique associee a la requete
// (selection de squelette specifique par id_rubrique &amp; lang)

function sql_rubrique_fond($contexte, $lang) {

	if ($id = intval($contexte['id_rubrique'])) {
		$row = spip_abstract_fetsel(array('lang'),
					    array('rubriques'),
					    array(&quot;id_rubrique=$id&quot;));
		if ($row['lang'])
			$lang = $row['lang'];
		return array ($id, $lang);
	}

	if ($id  = intval($contexte['id_breve'])) {
		$row = spip_abstract_fetsel(array('id_rubrique', 'lang'),
			array('breves'), 
			array(&quot;id_breve=$id&quot;));
		$id_rubrique_fond = $row['id_rubrique'];
		if ($row['lang'])
			$lang = $row['lang'];
		return array($id_rubrique_fond, $lang);
	}

	if ($id = intval($contexte['id_syndic'])) {
		$row = spip_abstract_fetsel(array('id_rubrique'),
			array('syndic'),
			array(&quot;id_syndic=$id&quot;));
		$id_rubrique_fond = $row['id_rubrique'];
		$row = spip_abstract_fetsel(array('lang'),
			array('rubriques'),
			array(&quot;id_rubrique='$id_rubrique_fond'&quot;));
		if ($row['lang'])
			$lang = $row['lang'];
		return array($id_rubrique_fond, $lang);
	}

	if ($id = intval($contexte['id_article'])) {
		$row = spip_abstract_fetsel(array('id_rubrique', 'lang'),
			array('articles'),
			array(&quot;id_article=$id&quot;));
		$id_rubrique_fond = $row['id_rubrique'];
		if ($row['lang'])
			$lang = $row['lang'];
		return array($id_rubrique_fond, $lang);
	}
}

?&gt;
--- NEW FILE: breve-dist.html ---
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</A>&quot;&gt;
&lt;BOUCLE_breve_principal(BREVES) {id_breve}&gt;

&lt;html lang=&quot;#LANG&quot;&gt;
&lt;head&gt;
&lt;title&gt;#TITRE&lt;/title&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=#CHARSET&quot;&gt;

&lt;!-- Ceci est la feuille de style par defaut pour les types internes a SPIP --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;spip_style.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- Les feuilles de style specifiques aux presents squelettes --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;typographie.css&quot; type=&quot;text/css&quot;&gt;

&lt;!-- media=&quot;...&quot; permet de ne pas utiliser ce style sous Netscape 4 (sinon plantage) --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;habillage.css&quot; type=&quot;text/css&quot; media=&quot;projection, screen, tv&quot;&gt;
&lt;!-- media=&quot;print&quot; permet d'utiliser cette feuille de style quand vous imprimez depuis votre navigateur --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;impression.css&quot; type=&quot;text/css&quot; media=&quot;print&quot;&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;white&quot; dir=&quot;#LANG_DIR&quot;&gt;


&lt;div id=&quot;navigation&quot;&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:navigation:&gt;&lt;/h1&gt;

&lt;!-- Menu de navigation general --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;general&quot;&gt;
	&lt;li class=&quot;menu-titre&quot;&gt;
	[&lt;a href=&quot;(#URL_SITE_SPIP)&quot; title=&quot;&lt;:accueil_site:&gt;&quot;&gt;&lt;b&gt;#NOM_SITE_SPIP&lt;/b&gt;&lt;/a&gt;]
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;plan.php3&quot;&gt;&lt;:plan_site:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;resume.php3&quot; title=&quot;&lt;:articles_populaires:&gt;&quot;&gt;&lt;:en_resume:&gt;&lt;/a&gt;
	&lt;/li&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;ecrire/&quot;&gt;&lt;:espace_prive:&gt;&lt;/a&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;!-- Formulaire de recherche --&gt;

[(#FORMULAIRE_RECHERCHE)]

&lt;!-- Menu de navigation rubriques --&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;rubriques&quot;&gt;
&lt;BOUCLE_rubrique(RUBRIQUES) {id_rubrique}&gt;
&lt;li&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;BOUCLE_autres_rubriques(RUBRIQUES) {racine} {exclus} {par titre}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_RUBRIQUE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_autres_rubriques&gt;
&lt;/BOUCLE_rubrique&gt;
&lt;/ul&gt;
&lt;/div&gt;


&lt;!-- Menu de navigation mots-cles --&gt;

&lt;B_mots&gt;
&lt;div class=&quot;menu&quot;&gt;
&lt;ul class=&quot;divers&quot; title=&quot;&lt;:mots_clefs:&gt;&quot;&gt;
&lt;BOUCLE_mots(MOTS) {id_article} {par titre}&gt;
&lt;li&gt;
&lt;div class=&quot;menu-titre&quot;&gt;&lt;a href=&quot;#URL_MOT&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;&lt;/div&gt;
&lt;B_breves_mots&gt;
	&lt;ul class=&quot;menu-liste&quot;&gt;
&lt;BOUCLE_breves_mots(BREVES) {id_mot} {par hasard} {0,4}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;&lt;/li&gt;
&lt;/BOUCLE_breves_mots&gt;
	&lt;/ul&gt;
&lt;/B_breves_mots&gt;
&lt;/li&gt;
&lt;/BOUCLE_mots&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/B_mots&gt;


&lt;!-- Articles dans le meme secteur --&gt;

&lt;B_articles_secteur&gt;

&lt;div class=&quot;menu&quot;&gt;
&lt;div class=&quot;breves&quot; title=&quot;&lt;:derniers_articles:&gt;&quot;&gt;
	&lt;div class=&quot;menu-titre&quot;&gt;
	&lt;:derniers_articles:&gt;
	&lt;/div&gt;
	&lt;ul&gt;
&lt;BOUCLE_articles_secteur(ARTICLES) {id_secteur} {par date} {inverse} {0,5}&gt;
	&lt;li class=&quot;menu-item&quot;&gt;
	&lt;a href=&quot;#URL_ARTICLE&quot; [title=&quot;(#DESCRIPTIF|textebrut|entites_html)&quot;]&gt;#TITRE&lt;/a&gt;
	&lt;/li&gt;
&lt;/BOUCLE_articles_secteur&gt;
	&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/B_articles_secteur&gt;


&lt;/div&gt;

&lt;!-- Contenu : corps de la breve --&gt;

&lt;div class=&quot;contenu&quot; id=&quot;principal&quot;&gt;

&lt;div id=&quot;cartouche&quot;&gt;
[(#LOGO_BREVE|left)]
&lt;h1 class=&quot;titre-texte&quot;&gt;#TITRE&lt;/h1&gt;
[(#DATE|nom_jour)] [(#DATE|affdate).]
&lt;/div&gt;

	&lt;div class=&quot;encart&quot;&gt;

	&lt;!-- Breves dans la meme rubrique --&gt;

	&lt;B_breves_rubrique&gt;

	&lt;div class=&quot;menu&quot;&gt;
	&lt;div class=&quot;breves&quot; title=&quot;&lt;:meme_rubrique:&gt;&quot;&gt;
		&lt;h1 class=&quot;structure&quot;&gt;&lt;:meme_rubrique:&gt;&lt;/h1&gt;
		&lt;div class=&quot;menu-titre&quot;&gt;
		&lt;:autres_breves:&gt;
		&lt;/div&gt;
		&lt;ul&gt;
	&lt;BOUCLE_breves_rubrique(BREVES) {id_rubrique} {exclus} {par date} {inverse} {0,8}&gt;
		&lt;li class=&quot;menu-item&quot;&gt;
		&lt;i&gt;[(#DATE|affdate_court)]&lt;/i&gt;:
		&lt;a href=&quot;#URL_BREVE&quot;&gt;#TITRE&lt;/a&gt;
		&lt;/li&gt;
	&lt;/BOUCLE_breves_rubrique&gt;
		&lt;/ul&gt;
	&lt;/div&gt;
	&lt;/div&gt;

	&lt;/B_breves_rubrique&gt;

	&lt;/div&gt;


[&lt;div class=&quot;texte&quot;&gt;(#TEXTE)&lt;/div&gt;]
[&lt;div class=&quot;chapo&quot;&gt;&lt;:voir_en_ligne:&gt;: &lt;a href=&quot;(#URL_SITE)&quot; class=&quot;spip_out&quot;&gt;#NOM_SITE&lt;/a&gt;.&lt;/div&gt;]
[&lt;div class=&quot;notes&quot;&gt;(#NOTES)&lt;/div&gt;]

&lt;br&gt;


&lt;!-- Forums --&gt;

[&lt;div class=&quot;forum-repondre&quot;&gt;&lt;B&gt;&lt;A  HREF=&quot;forum.php3?(#PARAMETRES_FORUM)&quot;&gt;&lt;:repondre_breve:&gt;&lt;/A&gt;&lt;/B&gt;&lt;/div&gt;]
&lt;br&gt;

&lt;h1 class=&quot;structure&quot;&gt;&lt;:forum:&gt;&lt;/h1&gt;

&lt;B_forums&gt;
&lt;ul class=&quot;forum-total&quot;&gt;

&lt;BOUCLE_forums(FORUMS){id_breve}{par date}{inverse}&gt;

&lt;li&gt;
&lt;div class=&quot;forum-fil&quot;&gt;
&lt;div class=&quot;forum&quot;&gt;
&lt;a name=&quot;forum#ID_FORUM&quot;&gt;&lt;/a&gt;
&lt;div class=&quot;forum-chapo&quot;&gt;
&lt;div class=&quot;forum-titre&quot;&gt;#TITRE&lt;/div&gt;
[(#DATE|affdate)][, &lt;:par_auteur:&gt; &lt;A HREF=&quot;mailto:#EMAIL&quot;&gt;(#NOM)&lt;/A&gt;]
&lt;/div&gt;
&lt;div class=&quot;forum-item&quot;&gt;
#TEXTE
[&lt;div class=&quot;forum-titre&quot;&gt;&lt;a href=&quot;(#URL_SITE)&quot; class=&quot;spip_out&quot;&gt;#NOM_SITE&lt;/a&gt;&lt;/div&gt;]
[&lt;div class=&quot;forum-repondre-message&quot;&gt;&lt;a href=&quot;forum.php3?(#PARAMETRES_FORUM)&quot;&gt;&lt;:repondre_message:&gt;&lt;/a&gt;&lt;/div&gt;]
&lt;/div&gt;
&lt;/div&gt;

&lt;B_forums_fils&gt;
	&lt;ul&gt;
	&lt;BOUCLE_forums_fils(FORUMS){id_parent}{par date}&gt;

	&lt;li&gt;
	&lt;div class=&quot;forum&quot;&gt;
	&lt;a name=&quot;forum#ID_FORUM&quot;&gt;&lt;/a&gt;
	&lt;div class=&quot;forum-chapo&quot;&gt;
	&lt;div class=&quot;forum-titre&quot;&gt;#TITRE&lt;/div&gt;
	[(#DATE|affdate)][, par &lt;A HREF=&quot;mailto:#EMAIL&quot;&gt;(#NOM)&lt;/A&gt;]
	&lt;/div&gt;
	&lt;div class=&quot;forum-item&quot;&gt;
	#TEXTE
	[&lt;div class=&quot;forum-titre&quot;&gt;&lt;a href=&quot;(#URL_SITE)&quot; class=&quot;spip_out&quot;&gt;#NOM_SITE&lt;/a&gt;&lt;/div&gt;]
	[&lt;div class=&quot;forum-repondre-message&quot;&gt;&lt;a href=&quot;forum.php3?(#PARAMETRES_FORUM)&quot;&gt;&lt;:repondre_message:&gt;&lt;/a&gt;&lt;/div&gt;]
	&lt;/div&gt;

	&lt;/div&gt;

	&lt;BOUCLE_Forums_Boucle(boucle_forums_fils)&gt;&lt;/BOUCLE_Forums_Boucle&gt;
	&lt;/li&gt;

	&lt;/BOUCLE_forums_fils&gt;
	&lt;/ul&gt;
&lt;/B_forums_fils&gt;

&lt;/div&gt;
&lt;/li&gt;
&lt;/BOUCLE_forums&gt;

&lt;/ul&gt;
&lt;/B_forums&gt;

&lt;/div&gt;
#FORMULAIRE_ADMIN
&lt;/body&gt;&lt;/html&gt;
&lt;/BOUCLE_breve_principal&gt;
&lt;:aucune_breve:&gt;
&lt;//B_breve_principal&gt;

--- NEW FILE: spip_pass.php3 ---
&lt;?php

include (&quot;ecrire/inc_version.php3&quot;);

include_ecrire(&quot;inc_meta.php3&quot;);
include_ecrire(&quot;inc_presentation.php3&quot;);
include_ecrire(&quot;inc_session.php3&quot;);
include_ecrire(&quot;inc_filtres.php3&quot;);
include_ecrire(&quot;inc_texte.php3&quot;);
include_ecrire(&quot;inc_meta.php3&quot;);
include_ecrire(&quot;inc_mail.php3&quot;);
include_ecrire(&quot;inc_acces.php3&quot;);
include_local(&quot;inc-public-global.php3&quot;); 

// Ce fichier est celui d'une balise dynamique qui s'ignore.

function formulaire_oubli_dyn($p, $oubli)
{

$erreur = '';

// au 3e appel la variable P est positionnee par le script lui-meme
// et oubli = mot passe. Le choix du nom P est impose par pass_mail_passcookie
if ($p = addslashes($p)) {
	$res = spip_query (&quot;SELECT * FROM spip_auteurs WHERE cookie_oubli='$p' AND statut&lt;&gt;'5poubelle' AND pass&lt;&gt;''&quot;);
	if (!$row = spip_fetch_array($res)) 
		$erreur = _T('pass_erreur_code_inconnu');
	else {
		if ($oubli) {
			$mdpass = md5($oubli);
			$htpass = generer_htpass($oubli);
			spip_query (&quot;UPDATE spip_auteurs SET htpass='$htpass', pass='$mdpass', alea_actuel='',
				cookie_oubli='' WHERE cookie_oubli='$p'&quot;);

			$login = $row['login'];
			$erreur = &quot;&lt;b&gt;&quot;._T('pass_nouveau_enregistre').&quot;&lt;/b&gt;&quot;.
			&quot;&lt;p&gt;&quot;._T('pass_rappel_login', array('login' =&gt; $login));
		}
	}
 } else { 
  // si p absent, oubli vaut alors le mail au 2e appel, vide au 1e
  if ($oubli) {
	if (email_valide($oubli)) {
		$email = addslashes($oubli);
		$res = spip_query(&quot;SELECT * FROM spip_auteurs WHERE email ='$email'&quot;);
		if ($row = spip_fetch_array($res)) {
			if ($row['statut'] == '5poubelle' OR $row['pass'] == '')
				$erreur = _T('pass_erreur_acces_refuse');
			else {
				$cookie = creer_uniqid();
				spip_query(&quot;UPDATE spip_auteurs SET cookie_oubli = '$cookie' WHERE email ='$email'&quot;);

				if (envoyer_mail($email,
						 &quot;[&quot; . lire_meta(&quot;nom_site&quot;) .'] ' ._T('pass_oubli_mot'),
						 _T('pass_mail_passcookie',
						    array('nom_site_spip' =&gt; lire_meta(&quot;nom_site&quot;),
							  'adresse_site' =&gt; lire_meta(&quot;adresse_site&quot;), 
							  'cookie' =&gt; $cookie))))
					$erreur = _T('pass_recevoir_mail');
				else
					$erreur = _T('pass_erreur_probleme_technique');
			}
		}
		else
			$erreur = _T('pass_erreur_non_enregistre', array('email_oubli' =&gt; htmlspecialchars($oubli)));
	} else {
		$erreur = _T('pass_erreur_non_valide', array('email_oubli' =&gt; htmlspecialchars($oubli)));
	}
  }
 }
 return $erreur ? $erreur : array('formulaire_oubli', 0, array('p' =&gt; $p));
}

utiliser_langue_site();
utiliser_langue_visiteur();
install_debut_html(_T('pass_mot_oublie'));
inclure_balise_dynamique(formulaire_oubli_dyn($p, $oubli));
install_fin_html();
?&gt;

--- NEW FILE: formulaire_recherche-dist.html ---
&lt;form action='[(#HTTP_VARS{lien})]' method='get' class='formrecherche'&gt;
	&lt;div&gt;
		&lt;input	type='text'
			id='formulaire_recherche'
			class='formrecherche'
			name='recherche'
			value=&quot;[(#HTTP_VARS{recherche})]&quot; /&gt;
	&lt;/div&gt;
&lt;/form&gt;

--- NEW FILE: htaccess-html.txt ---
###########################################################
# Fichier .htaccess pour les URLs 'html' ; a installer    #
# si vous reglez $type_urls='html'                        #
# dans ecrire/mes_options.php3 ou dans mes_fonctions.php3 #
# (fichier associe : inc-urls-html.php3)                  #
###########################################################

RewriteEngine On

### si votre site est en sous-domaine, preciser ci-dessous
# RewriteBase /sous/domaine/

RewriteRule ^rubrique([0-9]+)\.html$	rubrique.php3?id_rubrique=$1 [QSA,L]
RewriteRule ^article([0-9]+)\.html$		article.php3?id_article=$1 [QSA,L]
RewriteRule ^breve([0-9]+)\.html$		breve.php3?id_breve=$1 [QSA,L]
RewriteRule ^mot([0-9]+)\.html$			mot.php3?id_mot=$1 [QSA,L]
RewriteRule ^auteur([0-9]+)\.html$		auteur.php3?id_auteur=$1 [QSA,L]


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000006.html">[Spip-carto-cvs] spipcarto/ecrire/img_pack base-24.gif,NONE,1.1 puce-blanche-anim.gif,NONE,1.1 cal-semaine.gif,NONE,1.1 tirets-separation.gif,NONE,1.1 documents-48.png,NONE,1.1 secteur-24.gif,NONE,1.1 langues-24.gif,NONE,1.1 doc-24.gif,NONE,1.1 fond-calendrier.gif,NONE,1.1 deplierbas.gif,NONE,1.1 loupe-moins.gif,NONE,1.1 visiter-48_rtl.png,NONE,1.1 xml.gif,NONE,1.1 choix-layout_rtl.png,NONE,1.1 statistiques-24.gif,NONE,1.1 administration-48.png,NONE,1.1 m_envoi_rtl.gif,NONE,1.1 image-24.gif,NONE,1.1 redacteurs-48.png,NONE,1.1 interface-display.png,NONE,1.1 forum-public-24.gif,NONE,1.1 rond-b.gif,NONE,1.1 heures-pm.png,NONE,1.1 statistiques-48.png,NONE,1.1 degrade.jpg,NONE,1.1 deplierhaut_rtl.gif,NONE,1.1 rond-g.gif,NONE,1.1 carte-24.png,NONE,1.1 set-ecran.png,NONE,1.1 racine-site-12.gif,NONE,1.1 mot-cle-24.gif,NONE,1.1 loupe.png,NONE,1.1 cadenas-24.gif,NONE,1.1 puce-orange-anim.gif,NONE,1.1 cal-today.gif,NONE,1.1 forum-admin-24.gif,NONE,1.1 heures-am.png,NONE,1.1 asuivre-24.gif,NONE! ,1.1 rayures-danger.png,NONE,1.1 logo-spip.gif,NONE,1.1 forum-interne-24.gif,NONE,1.1 rv.gif,NONE,1.1 rayures-gris.gif,NONE,1.1 racine-24.gif,NONE,1.1 fond-gris-anim.gif,NONE,1.1 puce-poubelle.gif,NONE,1.1 groupe-mot-24.gif,NONE,1.1 set-ecran-etroit.png,NONE,1.1 rond-d.gif,NONE,1.1 rv-12.gif,NONE,1.1 plus.gif,NONE,1.1 admin-12.gif,NONE,1.1 suivi-petition-24.gif,NONE,1.1 jauge-rouge.gif,NONE,1.1 fiche-perso.png,NONE,1.1 site-24.gif,NONE,1.1 tout-site.png,NONE,1.1 historique-24.gif,NONE,1.1 rayures-danger.gif,NONE,1.1 m_envoi.gif,NONE,1.1 racine-site-24.gif,NONE,1.1 rond-hg-24.gif,NONE,1.1 choix-layout_rtl_he.png,NONE,1.1 puce-verte-breve.gif,NONE,1.1 traductions-24.gif,NONE,1.1 effacer-cache-24.gif,NONE,1.1 deconnecter-24.gif,NONE,1.1 puce-rouge-breve.gif,NONE,1.1 ortho-24.gif,NONE,1.1 tout-site-24.gif,NONE,1.1 auteur-24.gif,NONE,1.1 visiter-48.png,NONE,1.1 forum-droite_rtl.gif,NONE,1.1 heures-tout.png,NONE,1.1 barre-g.gif,NONE,1.1 rien.gif,NONE,1.1 choix-layout.png,NONE,1.1! asuivre-48.png,NONE,1.1 secteur-12.gif,NONE,1.1 cal-suivi.png,NONE,1.
</A></li>
	<LI>Next message: <A HREF="000007.html">[Spip-carto-cvs] spipcarto/ecrire/lang spip_en.php3,NONE,1.1 public_oc_auv.php3,NONE,1.1 public_es.php3,NONE,1.1 spip_bg.php3,NONE,1.1 public_fa.php3,NONE,1.1 spip_es.php3,NONE,1.1 spip_oc_auv.php3,NONE,1.1 spip_oc_lms.php3,NONE,1.1 spip_fr.php3,NONE,1.1 spip_oc_prv.php3,NONE,1.1 spip_ca.php3,NONE,1.1 public_fon.php3,NONE,1.1 spip_lb.php3,NONE,1.1 spip_gl.php3,NONE,1.1 spip_oc_gsc.php3,NONE,1.1 public_eo.php3,NONE,1.1 spip_fa.php3,NONE,1.1 public_cpf.php3,NONE,1.1 spip_zh.php3,NONE,1.1 public_fr.php3,NONE,1.1 spip_eo.php3,NONE,1.1 public_ar.php3,NONE,1.1 public_pl.php3,NONE,1.1 spip_oc_lnc.php3,NONE,1.1 public_vi.php3,NONE,1.1 spip_ar.php3,NONE,1.1 spip_hu.php3,NONE,1.1 spip_de.php3,NONE,1.1 public_bg.php3,NONE,1.1 spip_pl.php3,NONE,1.1 spip_cpf.php3,NONE,1.1 spip_oc_va.php3,NONE,1.1 spip_da.php3,NONE,1.1 public_it.php3,NONE,1.1 spip_nl.php3,NONE,1.1 public_lb.php3,NONE,1.1 public_hu.php3,NONE,1.1 public_oc_ni.php3,NONE,1.1 spip_oc_ni.php3,NONE,1.1 public_oc_lnc.php3,NONE,1.1 public! _de.php3,NONE,1.1 public_zh.php3,NONE,1.1 public_nl.php3,NONE,1.1 public_en.php3,NONE,1.1 public_da.php3,NONE,1.1 spip_fon.php3,NONE,1.1 spip_pt.php3,NONE,1.1 public_oc_prv.php3,NONE,1.1 spip_it.php3,NONE,1.1 public_gl.php3,NONE,1.1 spip_vi.php3,NONE,1.1 public_ca.php3,NONE,1.1 public_pt.php3,NONE,1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23">[ date ]</a>
              <a href="thread.html#23">[ thread ]</a>
              <a href="subject.html#23">[ subject ]</a>
              <a href="author.html#23">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/spip-carto-cvs">More information about the Spip-carto-cvs
mailing list</a><br>
</body></html>
